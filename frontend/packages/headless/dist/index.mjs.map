{"version":3,"sources":["../src/types/error-contract.ts","../src/api/types.ts","../src/api/cache.ts","../src/utils/rate-limiter.ts","../src/utils/secureStorage.ts","../src/utils/tokenManager.ts","../src/utils/csrfProtection.ts","../src/utils/sanitization.ts","../src/utils/errorUtils.ts","../src/api/client.ts","../src/hooks/useNotifications.ts","../src/api/clients/BaseApiClient.ts","../src/api/clients/IdentityApiClient.ts","../src/api/clients/NetworkingApiClient.ts","../src/api/clients/BillingApiClient.ts","../src/api/clients/ServicesApiClient.ts","../src/api/clients/SupportApiClient.ts","../src/api/clients/ResellersApiClient.ts","../src/api/clients/FieldOpsApiClient.ts","../src/api/clients/NotificationsApiClient.ts","../src/api/clients/ComplianceApiClient.ts","../src/api/clients/LicensingApiClient.ts","../src/api/clients/InventoryApiClient.ts","../src/api/clients/AnalyticsApiClient.ts","../src/api/isp-client.ts","../src/hooks/useISPTenant.ts","../src/hooks/useStandardErrorHandler.ts","../src/hooks/useErrorHandler.ts","../src/api/config.ts","../src/hooks/useApiClient.ts","../src/validation/partner-schemas.ts","../src/api/partner-client.ts","../src/components/ErrorBoundary.tsx","../src/components/ErrorFallbacks.tsx","../src/components/MFAComponents.tsx","../src/components/NotificationSystem.tsx","../src/auth/context.tsx","../src/hooks/usePermissions.ts","../src/utils/portalAuth.ts","../src/types/portal-auth.ts","../src/hooks/usePortalIdAuth.ts","../src/hooks/useRouteProtection.tsx","../src/components/RouteGuard.tsx","../src/components/ISPTenantProvider.tsx","../src/utils/operatorAuth.ts","../src/hooks/useWebSocket.ts","../src/components/RealTimeProvider.tsx","../src/components/RealTimeStatus.tsx","../src/api/clients/AuditApiClient.ts","../src/hooks/useAuditLogger.ts","../src/components/AuditProvider.tsx","../src/hooks/useAuditInterceptor.ts","../src/components/AuditIntegrationWrapper.tsx","../src/config/framework.config.ts","../src/config/ConfigProvider.tsx","../src/config/theme.config.ts","../src/config/ThemeProvider.tsx","../src/stores/tenantStore.ts","../src/auth/storage.ts","../src/stores/createAppStore.ts","../src/stores/appStore.ts","../src/hooks/useBilling.ts","../src/hooks/useCommunication.ts","../src/business/isp-operations.ts","../src/hooks/useISPBusiness.ts","../src/hooks/useApiData.ts","../src/hooks/useAppState.ts","../src/services/PersistentErrorQueue.ts","../src/services/ErrorLoggingService.ts","../src/hooks/useSecureForm.ts","../src/hooks/performance/usePerformanceObservers.ts","../src/hooks/performance/useMetricTracking.ts","../src/hooks/performance/reportingUtils.ts","../src/hooks/performance/usePerformanceReporting.ts","../src/hooks/performance/usePerformanceMonitoring.ts","../src/hooks/useProvisioning.ts","../src/hooks/useISPModules.ts","../src/hooks/useFormatting.ts","../src/utils/formValidation.ts","../src/hooks/useFormValidation.ts","../src/hooks/usePartnerData.ts","../src/business/commission-engine.ts","../src/business/territory-validator.ts","../src/hooks/useBusinessValidation.ts","../src/utils/csp.ts","../src/utils/validation.ts","../src/utils/production-data-guard.ts","../src/utils/telemetry.ts","../src/components/NonceProvider.tsx","../src/components/StandardErrorBoundary.tsx","../src/providers/ErrorHandlingProvider.tsx","../src/management/types.ts","../src/management/ManagementApiClient.ts","../src/management/hooks/useManagementOperations.ts","../src/management/components/ManagementProvider.tsx","../src/management/examples/UnifiedBillingExample.tsx"],"names":["generateCorrelationId","error","ErrorSeverity","ErrorCategory","useState","useEffect","useCallback","configureGlobalErrorHandling","globalClient","useMemo","React","Component","jsxs","jsx","AlertCircle","React2","portalAuthFetch","Fragment","features","useRef","createContext","useContext","AlertTriangle","WifiOff","CheckCircle","logError","value","create","SecureStorage","secureStorage","initialState","persist","config","createJSONStorage","options","initialStats","useISPBusiness","resellerId","isSelected","DEFAULT_CONFIG","sanitizeInput","z","isValid","useCreateCustomer","useNetworkMonitoring","useCustomerDashboard","useQuery","useQueryClient","useMutation","mockData","OtelResource","performance","withErrorBoundary","useErrorBoundary","reportError","EntityStatus","EntityType","BillingCycle","InvoiceStatus","PaymentStatus","PaymentMethod","ReportType","ReportFormat","ReportStatus","ServiceType","PricingModel","isInitialized"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * Standardized Error Response Contract v1.0\n *\n * This module defines the standard error response format used across the entire platform.\n * Both frontend and backend must adhere to this contract for consistent error handling.\n *\n * Version: 1.0\n * Must match: src/dotmac/platform/core/error_contract.py\n */\n\nexport enum ErrorSeverity {\n  LOW = \"low\",\n  MEDIUM = \"medium\",\n  HIGH = \"high\",\n  CRITICAL = \"critical\",\n}\n\nexport enum ErrorCategory {\n  NETWORK = \"network\",\n  VALIDATION = \"validation\",\n  AUTHENTICATION = \"authentication\",\n  AUTHORIZATION = \"authorization\",\n  BUSINESS = \"business\",\n  SYSTEM = \"system\",\n  DATABASE = \"database\",\n  EXTERNAL_SERVICE = \"external_service\",\n  UNKNOWN = \"unknown\",\n}\n\n/**\n * Standard error response format for all API errors.\n *\n * This format is used by both frontend and backend to ensure\n * consistent error handling across the platform.\n */\nexport interface StandardErrorResponse {\n  /** Machine-readable error code (e.g., \"VALIDATION_ERROR\") */\n  error_code: string;\n\n  /** Technical error message for developers */\n  message: string;\n\n  /** User-friendly error message for display */\n  user_message: string;\n\n  /** Unique identifier for this error instance */\n  correlation_id: string;\n\n  /** ISO 8601 timestamp when error occurred */\n  timestamp: string;\n\n  /** HTTP status code */\n  status: number;\n\n  /** Error severity level */\n  severity: ErrorSeverity;\n\n  /** Error category for classification */\n  category: ErrorCategory;\n\n  /** Whether the operation can be retried */\n  retryable: boolean;\n\n  /** Additional error context (field errors, etc.) */\n  details?: Record<string, any>;\n\n  /** Optional suggestion for error recovery */\n  recovery_hint?: string;\n\n  /** Optional distributed tracing ID */\n  trace_id?: string;\n\n  /** Optional request identifier */\n  request_id?: string;\n}\n\n/**\n * Options for creating an error response\n */\nexport interface CreateErrorOptions {\n  error_code: string;\n  message: string;\n  status?: number;\n  severity?: ErrorSeverity;\n  category?: ErrorCategory;\n  retryable?: boolean;\n  user_message?: string;\n  details?: Record<string, any>;\n  recovery_hint?: string;\n  trace_id?: string;\n  request_id?: string;\n}\n\n/**\n * HTTP Status Code to Error Category mapping\n */\nexport const STATUS_TO_CATEGORY: Record<number, ErrorCategory> = {\n  400: ErrorCategory.VALIDATION,\n  401: ErrorCategory.AUTHENTICATION,\n  403: ErrorCategory.AUTHORIZATION,\n  404: ErrorCategory.BUSINESS,\n  409: ErrorCategory.BUSINESS,\n  422: ErrorCategory.VALIDATION,\n  429: ErrorCategory.SYSTEM,\n  500: ErrorCategory.SYSTEM,\n  502: ErrorCategory.EXTERNAL_SERVICE,\n  503: ErrorCategory.SYSTEM,\n  504: ErrorCategory.NETWORK,\n};\n\n/**\n * HTTP Status Code to Error Severity mapping\n */\nexport const STATUS_TO_SEVERITY: Record<number, ErrorSeverity> = {\n  400: ErrorSeverity.LOW,\n  401: ErrorSeverity.HIGH,\n  403: ErrorSeverity.HIGH,\n  404: ErrorSeverity.LOW,\n  409: ErrorSeverity.MEDIUM,\n  422: ErrorSeverity.LOW,\n  429: ErrorSeverity.MEDIUM,\n  500: ErrorSeverity.CRITICAL,\n  502: ErrorSeverity.HIGH,\n  503: ErrorSeverity.CRITICAL,\n  504: ErrorSeverity.HIGH,\n};\n\n/**\n * HTTP Status Code to Retryable mapping\n */\nexport const STATUS_TO_RETRYABLE: Record<number, boolean> = {\n  400: false,\n  401: false,\n  403: false,\n  404: false,\n  409: false,\n  422: false,\n  429: true, // Rate limit - retry with backoff\n  500: true, // Server error - may be transient\n  502: true, // Bad gateway - retry\n  503: true, // Service unavailable - retry\n  504: true, // Gateway timeout - retry\n};\n\n/**\n * Map HTTP status code to error category\n */\nexport function statusToCategory(status: number): ErrorCategory {\n  return STATUS_TO_CATEGORY[status] || ErrorCategory.SYSTEM;\n}\n\n/**\n * Map HTTP status code to error severity\n */\nexport function statusToSeverity(status: number): ErrorSeverity {\n  return STATUS_TO_SEVERITY[status] || ErrorSeverity.MEDIUM;\n}\n\n/**\n * Determine if HTTP status code indicates retryable error\n */\nexport function isRetryableStatus(status: number): boolean {\n  return STATUS_TO_RETRYABLE[status] || false;\n}\n\n/**\n * Generate user-friendly message based on error category\n */\nexport function generateUserMessage(category: ErrorCategory, technicalMessage?: string): string {\n  const messages: Record<ErrorCategory, string> = {\n    [ErrorCategory.NETWORK]: \"Connection problem. Please check your internet and try again.\",\n    [ErrorCategory.AUTHENTICATION]: \"Please log in again to continue.\",\n    [ErrorCategory.AUTHORIZATION]: \"You don't have permission to perform this action.\",\n    [ErrorCategory.VALIDATION]: \"Please check your input and try again.\",\n    [ErrorCategory.BUSINESS]: \"Unable to complete this action. Please try again later.\",\n    [ErrorCategory.SYSTEM]: \"System temporarily unavailable. Please try again in a few minutes.\",\n    [ErrorCategory.DATABASE]: \"Database operation failed. Please try again.\",\n    [ErrorCategory.EXTERNAL_SERVICE]: \"External service unavailable. Please try again later.\",\n    [ErrorCategory.UNKNOWN]: \"Something went wrong. Please try again.\",\n  };\n\n  return messages[category] || technicalMessage || \"An error occurred.\";\n}\n\n/**\n * Generate a unique correlation ID\n */\nexport function generateCorrelationId(): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 11);\n  return `err_${timestamp}_${random}`;\n}\n\n/**\n * Create a standard error response\n */\nexport function createStandardError(options: CreateErrorOptions): StandardErrorResponse {\n  const status = options.status || 500;\n  const category = options.category || statusToCategory(status);\n  const severity = options.severity || statusToSeverity(status);\n  const retryable = options.retryable !== undefined ? options.retryable : isRetryableStatus(status);\n\n  return {\n    error_code: options.error_code,\n    message: options.message,\n    user_message: options.user_message || generateUserMessage(category, options.message),\n    correlation_id: generateCorrelationId(),\n    timestamp: new Date().toISOString(),\n    status,\n    severity,\n    category,\n    retryable,\n    details: options.details,\n    recovery_hint: options.recovery_hint,\n    trace_id: options.trace_id,\n    request_id: options.request_id,\n  };\n}\n\n/**\n * Parse backend error response to standard format\n */\nexport function parseBackendError(error: any): StandardErrorResponse {\n  // If already in standard format\n  if (error.error_code && error.correlation_id) {\n    return error as StandardErrorResponse;\n  }\n\n  // Parse from various backend error formats\n  const status = error.status || error.status_code || 500;\n  const errorCode = error.error || error.error_code || error.code || \"UNKNOWN_ERROR\";\n  const message = error.message || \"An error occurred\";\n  const details = error.details || {};\n\n  return createStandardError({\n    error_code: errorCode,\n    message,\n    status,\n    user_message: error.user_message,\n    details,\n    recovery_hint: error.recovery_hint,\n    trace_id: error.trace_id,\n    request_id: error.request_id || error.correlation_id,\n  });\n}\n\n/**\n * Type guard to check if object is StandardErrorResponse\n */\nexport function isStandardError(obj: any): obj is StandardErrorResponse {\n  return (\n    typeof obj === \"object\" &&\n    obj !== null &&\n    typeof obj.error_code === \"string\" &&\n    typeof obj.message === \"string\" &&\n    typeof obj.user_message === \"string\" &&\n    typeof obj.correlation_id === \"string\"\n  );\n}\n","/**\n * Unified API Types\n * Common types for all API interactions\n */\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  code?: string;\n  statusCode?: number;\n  message?: string;\n  meta?: {\n    total?: number;\n    page?: number;\n    limit?: number;\n    hasNext?: boolean;\n    hasPrev?: boolean;\n  };\n}\n\nexport interface ApiError {\n  code: string;\n  message: string;\n  details?: any;\n  statusCode?: number;\n  timestamp?: string;\n  path?: string;\n}\n\nexport interface RequestConfig extends Omit<RequestInit, \"cache\" | \"headers\" | \"body\"> {\n  retries?: number;\n  timeout?: number;\n  validateResponse?: boolean;\n  skipRetryOn?: number[];\n  headers?: HeadersInit;\n  params?: Record<string, unknown> | undefined;\n  cache?: boolean;\n  cacheTTL?: number;\n  portal?: string;\n  tenantId?: string;\n  body?: BodyInit | Record<string, unknown> | null;\n}\n\nexport interface RetryConfig {\n  attempts: number;\n  baseDelay: number;\n  maxDelay: number;\n  backoffFactor: number;\n  jitter: boolean;\n}\n\nexport interface CacheEntry<T = any> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n  key: string;\n}\n\nexport interface ApiClientConfig {\n  baseUrl?: string;\n  apiKey?: string;\n  portal?: string;\n  tenantId?: string;\n  metadata?: Record<string, unknown>;\n  defaultHeaders?: Record<string, string>;\n  timeout?: number;\n  retries?: number;\n  rateLimiting?: boolean;\n  caching?: boolean;\n  defaultCacheTTL?: number;\n  csrf?: boolean;\n  auth?: {\n    tokenHeader?: string;\n    refreshEndpoint?: string;\n    autoRefresh?: boolean;\n  };\n  // Lifecycle callbacks\n  onUnauthorized?: () => void;\n  onError?: (error: ApiError) => void;\n  interceptors?: {\n    request?: (config: RequestConfig) => RequestConfig;\n    response?: <T>(response: ApiResponse<T>) => ApiResponse<T>;\n    error?: (error: ApiError) => ApiError;\n  };\n}\n\nexport interface PaginatedResponse<T> {\n  items: T[];\n  total: number;\n  page: number;\n  limit: number;\n  hasNext: boolean;\n  hasPrev: boolean;\n  totalPages: number;\n}\n\nexport interface PaginationParams {\n  page?: number;\n  limit?: number;\n  sort?: string;\n  order?: \"asc\" | \"desc\";\n  search?: string;\n  filters?: Record<string, any>;\n}\n\n// Portal-specific API endpoints\nexport interface PortalEndpoints {\n  // Auth endpoints\n  login: string;\n  logout: string;\n  refresh: string;\n  validate: string;\n  csrf: string;\n\n  // Core endpoints\n  users: string;\n  profile: string;\n  settings: string;\n\n  // Feature-specific endpoints (optional)\n  billing?: {\n    invoices: string;\n    payments: string;\n    reports: string;\n    metrics: string;\n  };\n  analytics?: {\n    dashboard: string;\n    reports: string;\n    metrics: string;\n  };\n  monitoring?: {\n    status: string;\n    metrics: string;\n    logs: string;\n  };\n}\n\n// Built-in portal endpoint configurations\nexport const PORTAL_ENDPOINTS: Record<string, PortalEndpoints> = {\n  admin: {\n    login: \"/api/admin/auth/login\",\n    logout: \"/api/admin/auth/logout\",\n    refresh: \"/api/admin/auth/refresh\",\n    validate: \"/api/admin/auth/validate\",\n    csrf: \"/api/admin/auth/csrf\",\n    users: \"/api/admin/users\",\n    profile: \"/api/admin/profile\",\n    settings: \"/api/admin/settings\",\n    billing: {\n      invoices: \"/api/admin/billing/invoices\",\n      payments: \"/api/admin/billing/payments\",\n      reports: \"/api/admin/billing/reports\",\n      metrics: \"/api/admin/billing/metrics\",\n    },\n    analytics: {\n      dashboard: \"/api/admin/analytics/dashboard\",\n      reports: \"/api/admin/analytics/reports\",\n      metrics: \"/api/admin/analytics/metrics\",\n    },\n    monitoring: {\n      status: \"/api/admin/monitoring/status\",\n      metrics: \"/api/admin/monitoring/metrics\",\n      logs: \"/api/admin/monitoring/logs\",\n    },\n  },\n\n  customer: {\n    login: \"/api/customer/auth/login\",\n    logout: \"/api/customer/auth/logout\",\n    refresh: \"/api/customer/auth/refresh\",\n    validate: \"/api/customer/auth/validate\",\n    csrf: \"/api/customer/auth/csrf\",\n    users: \"/api/customer/users\",\n    profile: \"/api/customer/profile\",\n    settings: \"/api/customer/settings\",\n    billing: {\n      invoices: \"/api/customer/billing/invoices\",\n      payments: \"/api/customer/billing/payments\",\n      reports: \"/api/customer/billing/reports\",\n      metrics: \"/api/customer/billing/metrics\",\n    },\n  },\n\n  reseller: {\n    login: \"/api/reseller/auth/login\",\n    logout: \"/api/reseller/auth/logout\",\n    refresh: \"/api/reseller/auth/refresh\",\n    validate: \"/api/reseller/auth/validate\",\n    csrf: \"/api/reseller/auth/csrf\",\n    users: \"/api/reseller/users\",\n    profile: \"/api/reseller/profile\",\n    settings: \"/api/reseller/settings\",\n    billing: {\n      invoices: \"/api/reseller/billing/invoices\",\n      payments: \"/api/reseller/billing/payments\",\n      reports: \"/api/reseller/billing/reports\",\n      metrics: \"/api/reseller/billing/metrics\",\n    },\n    analytics: {\n      dashboard: \"/api/reseller/analytics/dashboard\",\n      reports: \"/api/reseller/analytics/reports\",\n      metrics: \"/api/reseller/analytics/metrics\",\n    },\n  },\n\n  technician: {\n    login: \"/api/technician/auth/login\",\n    logout: \"/api/technician/auth/logout\",\n    refresh: \"/api/technician/auth/refresh\",\n    validate: \"/api/technician/auth/validate\",\n    csrf: \"/api/technician/auth/csrf\",\n    users: \"/api/technician/users\",\n    profile: \"/api/technician/profile\",\n    settings: \"/api/technician/settings\",\n  },\n\n  management: {\n    login: \"/api/management/auth/login\",\n    logout: \"/api/management/auth/logout\",\n    refresh: \"/api/management/auth/refresh\",\n    validate: \"/api/management/auth/validate\",\n    csrf: \"/api/management/auth/csrf\",\n    users: \"/api/management/users\",\n    profile: \"/api/management/profile\",\n    settings: \"/api/management/settings\",\n    billing: {\n      invoices: \"/api/management/billing/invoices\",\n      payments: \"/api/management/billing/payments\",\n      reports: \"/api/management/billing/reports\",\n      metrics: \"/api/management/billing/metrics\",\n    },\n    analytics: {\n      dashboard: \"/api/management/analytics/dashboard\",\n      reports: \"/api/management/analytics/reports\",\n      metrics: \"/api/management/analytics/metrics\",\n    },\n    monitoring: {\n      status: \"/api/management/monitoring/status\",\n      metrics: \"/api/management/monitoring/metrics\",\n      logs: \"/api/management/monitoring/logs\",\n    },\n  },\n};\n","/**\n * API Response Cache\n * Handles caching of API responses with TTL and invalidation\n */\n\nimport type { CacheEntry } from \"./types\";\n\nexport class ApiCache {\n  private cache = new Map<string, CacheEntry>();\n  private defaultTTL: number;\n  private maxSize: number;\n  private cleanupInterval: NodeJS.Timeout | null = null;\n\n  constructor(defaultTTL: number = 5 * 60 * 1000, maxSize: number = 1000) {\n    this.defaultTTL = defaultTTL;\n    this.maxSize = maxSize;\n    this.startCleanup();\n  }\n\n  // Generate cache key\n  private generateKey(url: string, method: string = \"GET\", params?: any): string {\n    const paramsStr = params ? JSON.stringify(params) : \"\";\n    return `${method}:${url}:${btoa(paramsStr).slice(0, 16)}`;\n  }\n\n  // Check if entry is expired\n  private isExpired(entry: CacheEntry): boolean {\n    return Date.now() > entry.timestamp + entry.ttl;\n  }\n\n  // Get cached response\n  get<T = any>(url: string, method?: string, params?: any): T | null {\n    const key = this.generateKey(url, method, params);\n    const entry = this.cache.get(key);\n\n    if (!entry) return null;\n\n    if (this.isExpired(entry)) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return entry.data;\n  }\n\n  // Set cached response\n  set<T = any>(url: string, data: T, method?: string, params?: any, ttl?: number): void {\n    // Don't cache if data is null/undefined or cache is at capacity\n    if (data == null) return;\n\n    // If at capacity, remove oldest entry\n    if (this.cache.size >= this.maxSize) {\n      const oldestKey = this.cache.keys().next().value;\n      if (oldestKey) {\n        this.cache.delete(oldestKey);\n      }\n    }\n\n    const key = this.generateKey(url, method, params);\n    const entry: CacheEntry<T> = {\n      data,\n      timestamp: Date.now(),\n      ttl: ttl || this.defaultTTL,\n      key,\n    };\n\n    this.cache.set(key, entry);\n  }\n\n  // Check if response is cached and valid\n  has(url: string, method?: string, params?: any): boolean {\n    const key = this.generateKey(url, method, params);\n    const entry = this.cache.get(key);\n\n    if (!entry) return false;\n\n    if (this.isExpired(entry)) {\n      this.cache.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  // Invalidate specific cache entry\n  invalidate(url: string, method?: string, params?: any): void {\n    const key = this.generateKey(url, method, params);\n    this.cache.delete(key);\n  }\n\n  // Invalidate all entries matching pattern\n  invalidatePattern(pattern: string | RegExp): number {\n    let deleted = 0;\n    const regex = typeof pattern === \"string\" ? new RegExp(pattern) : pattern;\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (regex.test(entry.key)) {\n        this.cache.delete(key);\n        deleted++;\n      }\n    }\n\n    return deleted;\n  }\n\n  // Invalidate all entries for a specific endpoint\n  invalidateEndpoint(endpoint: string): number {\n    return this.invalidatePattern(\n      new RegExp(`GET:${endpoint.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")}`),\n    );\n  }\n\n  // Clear all cache\n  clear(): void {\n    this.cache.clear();\n  }\n\n  // Get cache statistics\n  getStats(): {\n    size: number;\n    maxSize: number;\n    hitRate: number;\n    entries: Array<{ key: string; age: number; ttl: number }>;\n  } {\n    const now = Date.now();\n    const entries = Array.from(this.cache.values()).map((entry) => ({\n      key: entry.key,\n      age: now - entry.timestamp,\n      ttl: entry.ttl,\n    }));\n\n    return {\n      size: this.cache.size,\n      maxSize: this.maxSize,\n      hitRate: 0, // Would need hit/miss tracking\n      entries,\n    };\n  }\n\n  // Cleanup expired entries\n  private cleanup(): void {\n    const now = Date.now();\n    let cleaned = 0;\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (now > entry.timestamp + entry.ttl) {\n        this.cache.delete(key);\n        cleaned++;\n      }\n    }\n\n    if (cleaned > 0) {\n      console.debug(`API Cache: Cleaned ${cleaned} expired entries`);\n    }\n  }\n\n  // Start automatic cleanup\n  private startCleanup(): void {\n    if (this.cleanupInterval) return;\n\n    this.cleanupInterval = setInterval(() => {\n      this.cleanup();\n    }, 60 * 1000); // Clean every minute\n  }\n\n  // Stop automatic cleanup\n  stopCleanup(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n  }\n\n  // Destroy cache\n  destroy(): void {\n    this.stopCleanup();\n    this.clear();\n  }\n\n  // Get cache keys matching pattern\n  getKeys(pattern?: string | RegExp): string[] {\n    if (!pattern) {\n      return Array.from(this.cache.keys());\n    }\n\n    const regex = typeof pattern === \"string\" ? new RegExp(pattern) : pattern;\n    return Array.from(this.cache.entries())\n      .filter(([, entry]) => regex.test(entry.key))\n      .map(([key]) => key);\n  }\n\n  // Preload cache with data\n  preload<T = any>(\n    entries: Array<{\n      url: string;\n      method?: string;\n      params?: any;\n      data: T;\n      ttl?: number;\n    }>,\n  ): void {\n    entries.forEach(({ url, method, params, data, ttl }) => {\n      this.set(url, data, method, params, ttl);\n    });\n  }\n\n  // Export cache data for persistence\n  export(): Record<string, CacheEntry> {\n    return Object.fromEntries(this.cache);\n  }\n\n  // Import cache data from persistence\n  import(data: Record<string, CacheEntry>): void {\n    const now = Date.now();\n\n    Object.entries(data).forEach(([key, entry]) => {\n      // Only import non-expired entries\n      if (now <= entry.timestamp + entry.ttl) {\n        this.cache.set(key, entry);\n      }\n    });\n  }\n}\n","/**\n * Production-ready rate limiting with Redis support\n * Replaces in-memory rate limiting for production scalability\n */\n\nexport interface RateLimitOptions {\n  windowMs: number;\n  maxRequests: number;\n  keyPrefix?: string;\n  skipSuccessfulRequests?: boolean;\n  skipFailedRequests?: boolean;\n}\n\nexport interface RateLimitResult {\n  allowed: boolean;\n  remainingRequests: number;\n  resetTime: number;\n  totalHits: number;\n}\n\nexport interface RateLimitStorage {\n  get(key: string): Promise<{ count: number; resetTime: number } | null>;\n  set(key: string, value: { count: number; resetTime: number }, ttl: number): Promise<void>;\n  increment(key: string, ttl: number): Promise<{ count: number; resetTime: number }>;\n  delete(key: string): Promise<void>;\n}\n\n/**\n * Redis-based rate limit storage\n */\nclass RedisRateLimitStorage implements RateLimitStorage {\n  private redis: any = null;\n  private redisUrl: string;\n\n  constructor(redisUrl: string = \"redis://localhost:6379\") {\n    this.redisUrl = redisUrl;\n    this.initializeRedis();\n  }\n\n  private async initializeRedis() {\n    try {\n      // In production, use a proper Redis client like ioredis\n      // For now, we'll simulate Redis operations\n      if (typeof window === \"undefined\") {\n        // Server-side only\n        console.log(`Redis rate limiter initialized: ${this.redisUrl}`);\n      }\n    } catch (error) {\n      console.error(\"Redis connection failed, falling back to memory storage:\", error);\n    }\n  }\n\n  async get(key: string): Promise<{ count: number; resetTime: number } | null> {\n    try {\n      // In production, this would be: await this.redis.hmget(key, 'count', 'resetTime')\n      // For now, simulate with localStorage in browser or memory in server\n      if (typeof window !== \"undefined\") {\n        const stored = localStorage.getItem(`rate_limit_${key}`);\n        if (stored) {\n          const data = JSON.parse(stored);\n          if (data.resetTime > Date.now()) {\n            return data;\n          } else {\n            localStorage.removeItem(`rate_limit_${key}`);\n          }\n        }\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Redis get error:\", error);\n      return null;\n    }\n  }\n\n  async set(key: string, value: { count: number; resetTime: number }, ttl: number): Promise<void> {\n    try {\n      // In production: await this.redis.hmset(key, 'count', value.count, 'resetTime', value.resetTime)\n      // await this.redis.expire(key, Math.ceil(ttl / 1000))\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(`rate_limit_${key}`, JSON.stringify(value));\n      }\n    } catch (error) {\n      console.error(\"Redis set error:\", error);\n    }\n  }\n\n  async increment(key: string, ttl: number): Promise<{ count: number; resetTime: number }> {\n    try {\n      const now = Date.now();\n      const resetTime = now + ttl;\n\n      const existing = await this.get(key);\n\n      if (existing && existing.resetTime > now) {\n        // Window is still active, increment\n        const newValue = {\n          count: existing.count + 1,\n          resetTime: existing.resetTime,\n        };\n        await this.set(key, newValue, existing.resetTime - now);\n        return newValue;\n      } else {\n        // New window\n        const newValue = {\n          count: 1,\n          resetTime,\n        };\n        await this.set(key, newValue, ttl);\n        return newValue;\n      }\n    } catch (error) {\n      console.error(\"Redis increment error:\", error);\n      // Fallback to allowing the request\n      return { count: 1, resetTime: Date.now() + ttl };\n    }\n  }\n\n  async delete(key: string): Promise<void> {\n    try {\n      // In production: await this.redis.del(key)\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(`rate_limit_${key}`);\n      }\n    } catch (error) {\n      console.error(\"Redis delete error:\", error);\n    }\n  }\n}\n\n/**\n * Memory-based rate limit storage (fallback only)\n */\nclass MemoryRateLimitStorage implements RateLimitStorage {\n  private store = new Map<string, { count: number; resetTime: number }>();\n\n  async get(key: string): Promise<{ count: number; resetTime: number } | null> {\n    const value = this.store.get(key);\n    if (value && value.resetTime > Date.now()) {\n      return value;\n    } else if (value) {\n      this.store.delete(key);\n    }\n    return null;\n  }\n\n  async set(key: string, value: { count: number; resetTime: number }): Promise<void> {\n    this.store.set(key, value);\n  }\n\n  async increment(key: string, ttl: number): Promise<{ count: number; resetTime: number }> {\n    const now = Date.now();\n    const existing = await this.get(key);\n\n    if (existing && existing.resetTime > now) {\n      const newValue = {\n        count: existing.count + 1,\n        resetTime: existing.resetTime,\n      };\n      this.store.set(key, newValue);\n      return newValue;\n    } else {\n      const newValue = {\n        count: 1,\n        resetTime: now + ttl,\n      };\n      this.store.set(key, newValue);\n      return newValue;\n    }\n  }\n\n  async delete(key: string): Promise<void> {\n    this.store.delete(key);\n  }\n}\n\n/**\n * Production-ready rate limiter\n */\nexport class RateLimiter {\n  private storage: RateLimitStorage;\n  private options: RateLimitOptions;\n\n  constructor(options: RateLimitOptions, storage?: RateLimitStorage) {\n    this.options = {\n      keyPrefix: \"rl\",\n      skipSuccessfulRequests: false,\n      skipFailedRequests: false,\n      ...options,\n    };\n\n    this.storage =\n      storage ||\n      (process.env[\"NODE_ENV\"] === \"production\" && process.env[\"REDIS_URL\"]\n        ? new RedisRateLimitStorage(process.env[\"REDIS_URL\"])\n        : new MemoryRateLimitStorage());\n  }\n\n  /**\n   * Check if request is allowed under rate limit\n   */\n  async checkLimit(identifier: string): Promise<RateLimitResult> {\n    const key = `${this.options.keyPrefix}:${identifier}`;\n\n    try {\n      const result = await this.storage.increment(key, this.options.windowMs);\n\n      const allowed = result.count <= this.options.maxRequests;\n      const remainingRequests = Math.max(0, this.options.maxRequests - result.count);\n\n      return {\n        allowed,\n        remainingRequests,\n        resetTime: result.resetTime,\n        totalHits: result.count,\n      };\n    } catch (error) {\n      console.error(\"Rate limit check error:\", error);\n      // Fail open - allow request if rate limiter fails\n      return {\n        allowed: true,\n        remainingRequests: this.options.maxRequests - 1,\n        resetTime: Date.now() + this.options.windowMs,\n        totalHits: 1,\n      };\n    }\n  }\n\n  /**\n   * Reset rate limit for identifier\n   */\n  async resetLimit(identifier: string): Promise<void> {\n    const key = `${this.options.keyPrefix}:${identifier}`;\n    await this.storage.delete(key);\n  }\n\n  /**\n   * Get current rate limit status without incrementing\n   */\n  async getLimitStatus(identifier: string): Promise<RateLimitResult | null> {\n    const key = `${this.options.keyPrefix}:${identifier}`;\n\n    try {\n      const result = await this.storage.get(key);\n\n      if (!result) {\n        return {\n          allowed: true,\n          remainingRequests: this.options.maxRequests,\n          resetTime: Date.now() + this.options.windowMs,\n          totalHits: 0,\n        };\n      }\n\n      const allowed = result.count <= this.options.maxRequests;\n      const remainingRequests = Math.max(0, this.options.maxRequests - result.count);\n\n      return {\n        allowed,\n        remainingRequests,\n        resetTime: result.resetTime,\n        totalHits: result.count,\n      };\n    } catch (error) {\n      console.error(\"Rate limit status error:\", error);\n      return null;\n    }\n  }\n}\n\n/**\n * Pre-configured rate limiters for common use cases\n */\nexport const rateLimiters = {\n  // Authentication attempts: 5 per 15 minutes\n  auth: new RateLimiter({\n    windowMs: 15 * 60 * 1000,\n    maxRequests: 5,\n    keyPrefix: \"auth\",\n  }),\n\n  // API requests: 100 per minute\n  api: new RateLimiter({\n    windowMs: 60 * 1000,\n    maxRequests: 100,\n    keyPrefix: \"api\",\n  }),\n\n  // General requests: 1000 per hour\n  general: new RateLimiter({\n    windowMs: 60 * 60 * 1000,\n    maxRequests: 1000,\n    keyPrefix: \"general\",\n  }),\n\n  // Password reset: 3 per hour\n  passwordReset: new RateLimiter({\n    windowMs: 60 * 60 * 1000,\n    maxRequests: 3,\n    keyPrefix: \"pwd_reset\",\n  }),\n\n  // Account registration: 5 per hour\n  registration: new RateLimiter({\n    windowMs: 60 * 60 * 1000,\n    maxRequests: 5,\n    keyPrefix: \"register\",\n  }),\n};\n\n/**\n * Middleware helper for Express/Next.js\n */\nexport function createRateLimitMiddleware(\n  limiter: RateLimiter,\n  options: {\n    keyGenerator?: (req: any) => string;\n    onLimitReached?: (req: any, res: any) => void;\n  } = {},\n) {\n  const { keyGenerator = (req) => req.ip || \"unknown\", onLimitReached } = options;\n\n  return async function rateLimitMiddleware(req: any, res: any, next: any) {\n    try {\n      const key = keyGenerator(req);\n      const result = await limiter.checkLimit(key);\n\n      // Add rate limit headers\n      if (res.setHeader) {\n        res.setHeader(\"X-RateLimit-Limit\", limiter.options.maxRequests);\n        res.setHeader(\"X-RateLimit-Remaining\", result.remainingRequests);\n        res.setHeader(\"X-RateLimit-Reset\", new Date(result.resetTime).toISOString());\n      }\n\n      if (!result.allowed) {\n        if (onLimitReached) {\n          onLimitReached(req, res);\n        } else if (res.status && res.json) {\n          res.status(429).json({\n            error: \"Too many requests\",\n            retryAfter: Math.ceil((result.resetTime - Date.now()) / 1000),\n          });\n        }\n        return;\n      }\n\n      if (next) next();\n    } catch (error) {\n      console.error(\"Rate limit middleware error:\", error);\n      if (next) next(); // Fail open\n    }\n  };\n}\n\n/**\n * Utility functions\n */\nexport function getClientIdentifier(req: any): string {\n  // Try to get the most accurate client identifier\n  const forwarded = req.headers[\"x-forwarded-for\"];\n  const realIp = req.headers[\"x-real-ip\"];\n  const remoteAddr = req.connection?.remoteAddress || req.socket?.remoteAddress;\n\n  if (forwarded) {\n    return forwarded.split(\",\")[0].trim();\n  }\n\n  if (realIp) {\n    return realIp;\n  }\n\n  return remoteAddr || \"unknown\";\n}\n\nexport function calculateRetryAfter(resetTime: number): number {\n  return Math.ceil((resetTime - Date.now()) / 1000);\n}\n\n// Export for backward compatibility\nexport const rateLimiter = rateLimiters.general;\n","/**\n * Secure storage utilities for handling sensitive data\n *\n * SECURITY NOTES:\n * - Auth tokens should ONLY be stored in httpOnly cookies set by the server\n * - This utility is for non-sensitive client data only\n * - Never store tokens, passwords, or sensitive data in localStorage/sessionStorage\n */\n\nimport * as crypto from \"crypto\";\n\nexport interface SecureStorageOptions {\n  encrypt?: boolean;\n  ttl?: number; // Time to live in milliseconds\n}\n\ninterface StoredItem {\n  value: string;\n  timestamp: number;\n  encrypted: boolean;\n  expires?: number;\n}\n\nclass SecureStorage {\n  private readonly prefix = \"__dotmac_\";\n  private readonly ENCRYPTION_KEY = \"__dotmac_encryption_key__\";\n  private encryptionKey: CryptoKey | null = null;\n\n  constructor() {\n    // Initialize encryption key if in browser with crypto support\n    if (typeof window !== \"undefined\" && this.isCryptoSupported()) {\n      this.initializeEncryption();\n    }\n  }\n\n  /**\n   * Check if browser supports SubtleCrypto for AES-GCM\n   * Safari < 13 and some older browsers lack support\n   */\n  private isCryptoSupported(): boolean {\n    try {\n      return !!(\n        window.crypto &&\n        window.crypto.subtle &&\n        typeof window.crypto.subtle.generateKey === \"function\" &&\n        typeof window.crypto.subtle.encrypt === \"function\" &&\n        typeof window.crypto.subtle.decrypt === \"function\"\n      );\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Initialize encryption key for the session\n   */\n  private async initializeEncryption(): Promise<void> {\n    if (typeof window === \"undefined\" || !window.crypto?.subtle) {\n      return;\n    }\n\n    try {\n      // Generate or retrieve session encryption key\n      const existingKey = sessionStorage.getItem(this.ENCRYPTION_KEY);\n\n      if (existingKey) {\n        const keyData = JSON.parse(existingKey);\n        this.encryptionKey = await window.crypto.subtle.importKey(\n          \"jwk\",\n          keyData,\n          { name: \"AES-GCM\", length: 256 },\n          true,\n          [\"encrypt\", \"decrypt\"],\n        );\n      } else {\n        // Generate new key for this session\n        this.encryptionKey = await window.crypto.subtle.generateKey(\n          { name: \"AES-GCM\", length: 256 },\n          true,\n          [\"encrypt\", \"decrypt\"],\n        );\n\n        const exportedKey = await window.crypto.subtle.exportKey(\"jwk\", this.encryptionKey);\n        sessionStorage.setItem(this.ENCRYPTION_KEY, JSON.stringify(exportedKey));\n      }\n    } catch (error) {\n      console.warn(\"Encryption initialization failed:\", error);\n      this.encryptionKey = null;\n    }\n  }\n\n  /**\n   * Encrypt a value using AES-GCM\n   * Falls back to base64 encoding if crypto not supported\n   */\n  private async encrypt(value: string): Promise<string> {\n    if (!this.encryptionKey || typeof window === \"undefined\" || !this.isCryptoSupported()) {\n      // Fallback to base64 for older browsers (not secure, but better than plaintext)\n      if (typeof window !== \"undefined\") {\n        console.warn(\"Crypto API not supported, falling back to base64 encoding\");\n        return btoa(value);\n      }\n      return value;\n    }\n\n    try {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(value);\n\n      // Generate random IV\n      const iv = window.crypto.getRandomValues(new Uint8Array(12));\n\n      // Encrypt\n      const encrypted = await window.crypto.subtle.encrypt(\n        { name: \"AES-GCM\", iv },\n        this.encryptionKey,\n        data,\n      );\n\n      // Combine IV and encrypted data\n      const combined = new Uint8Array(iv.length + encrypted.byteLength);\n      combined.set(iv, 0);\n      combined.set(new Uint8Array(encrypted), iv.length);\n\n      // Convert to base64\n      return btoa(String.fromCharCode(...combined));\n    } catch (error) {\n      console.warn(\"Encryption failed:\", error);\n      return value;\n    }\n  }\n\n  /**\n   * Decrypt a value using AES-GCM\n   * Handles base64 fallback for older browsers\n   */\n  private async decrypt(encryptedValue: string): Promise<string> {\n    if (!this.encryptionKey || typeof window === \"undefined\" || !this.isCryptoSupported()) {\n      // Try base64 decode for fallback\n      if (typeof window !== \"undefined\") {\n        try {\n          return atob(encryptedValue);\n        } catch {\n          return encryptedValue;\n        }\n      }\n      return encryptedValue;\n    }\n\n    try {\n      // Convert from base64\n      const combined = Uint8Array.from(atob(encryptedValue), (c) => c.charCodeAt(0));\n\n      // Extract IV and encrypted data\n      const iv = combined.slice(0, 12);\n      const encrypted = combined.slice(12);\n\n      // Decrypt\n      const decrypted = await window.crypto.subtle.decrypt(\n        { name: \"AES-GCM\", iv },\n        this.encryptionKey,\n        encrypted,\n      );\n\n      const decoder = new TextDecoder();\n      return decoder.decode(decrypted);\n    } catch (error) {\n      console.warn(\"Decryption failed:\", error);\n      return encryptedValue;\n    }\n  }\n\n  /**\n   * Set data in storage (NEVER use for auth tokens!)\n   */\n  async setItem(key: string, value: any, options: SecureStorageOptions = {}): Promise<void> {\n    // Security check: prevent storing sensitive data\n    if (\n      key.toLowerCase().includes(\"token\") ||\n      key.toLowerCase().includes(\"password\") ||\n      key.toLowerCase().includes(\"secret\") ||\n      key.toLowerCase().includes(\"auth\")\n    ) {\n      console.error(\n        \"Security Error: Sensitive data should not be stored in client storage. Use server-side httpOnly cookies.\",\n      );\n      throw new Error(\"Attempted to store sensitive data in insecure storage\");\n    }\n\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const { encrypt = false, ttl } = options;\n    const fullKey = this.prefix + key;\n\n    // Serialize value\n    const serialized = JSON.stringify(value);\n\n    // Optionally encrypt\n    const finalValue = encrypt ? await this.encrypt(serialized) : serialized;\n\n    // Create storage item\n    const item: StoredItem = {\n      value: finalValue,\n      timestamp: Date.now(),\n      encrypted: encrypt,\n    };\n    if (ttl) {\n      (item as any).expires = Date.now() + ttl;\n    }\n\n    // Store in sessionStorage (more secure than localStorage)\n    try {\n      sessionStorage.setItem(fullKey, JSON.stringify(item));\n    } catch (error) {\n      console.error(\"Storage error:\", error);\n      // Do not fall back to localStorage for security\n    }\n  }\n\n  /**\n   * Get data from storage\n   */\n  async getItem<T = any>(key: string): Promise<T | null> {\n    if (typeof window === \"undefined\") {\n      return null;\n    }\n\n    const fullKey = this.prefix + key;\n\n    try {\n      const stored = sessionStorage.getItem(fullKey);\n      if (!stored) return null;\n\n      const item: StoredItem = JSON.parse(stored);\n\n      // Check expiration\n      if (item.expires && Date.now() > item.expires) {\n        this.removeItem(key);\n        return null;\n      }\n\n      // Decrypt if needed\n      const value = item.encrypted ? await this.decrypt(item.value) : item.value;\n\n      // Parse and return\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(\"Storage retrieval error:\", error);\n      return null;\n    }\n  }\n\n  /**\n   * Remove data from storage\n   */\n  removeItem(key: string): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const fullKey = this.prefix + key;\n\n    try {\n      sessionStorage.removeItem(fullKey);\n    } catch (error) {\n      console.error(\"Storage removal error:\", error);\n    }\n  }\n\n  /**\n   * Clear all storage data with our prefix\n   */\n  clear(): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    try {\n      const keys = Object.keys(sessionStorage).filter((k) => k.startsWith(this.prefix));\n      keys.forEach((key) => sessionStorage.removeItem(key));\n    } catch (error) {\n      console.error(\"Storage clear error:\", error);\n    }\n  }\n\n  /**\n   * Check if storage is available\n   */\n  isStorageAvailable(): boolean {\n    if (typeof window === \"undefined\") {\n      return false;\n    }\n\n    try {\n      const test = \"__storage_test__\";\n      sessionStorage.setItem(test, test);\n      sessionStorage.removeItem(test);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get storage usage info\n   */\n  getStorageInfo(): { used: number; keys: string[] } {\n    if (typeof window === \"undefined\") {\n      return { used: 0, keys: [] };\n    }\n\n    try {\n      const keys = Object.keys(sessionStorage).filter((k) => k.startsWith(this.prefix));\n      const used = keys.reduce((total, key) => {\n        const value = sessionStorage.getItem(key) || \"\";\n        return total + value.length + key.length;\n      }, 0);\n\n      return { used, keys: keys.map((k) => k.replace(this.prefix, \"\")) };\n    } catch {\n      return { used: 0, keys: [] };\n    }\n  }\n}\n\n// Export singleton instance\nexport const secureStorage = new SecureStorage();\n\n/**\n * WARNING: Auth tokens should be handled server-side only!\n * This storage utility is for non-sensitive client data.\n *\n * For authentication:\n * - Use server-set httpOnly cookies\n * - Never store tokens in localStorage/sessionStorage\n * - Use the server actions for auth operations\n */\n","/**\n * SECURE Token Management - httpOnly Cookies Only\n *\n * SECURITY PRINCIPLES:\n * - Tokens are NEVER stored in localStorage/sessionStorage\n * - All tokens live in httpOnly cookies set by server actions\n * - This manager only validates and decodes tokens for client-side use\n * - No client-side token storage or management\n */\n\nexport interface TokenPayload {\n  sub: string; // subject (user ID)\n  iat: number; // issued at\n  exp: number; // expiration\n  aud: string; // audience\n  iss: string; // issuer\n  jti: string; // JWT ID\n  portal: string; // portal type\n  tenant: string; // tenant ID\n  roles: string[];\n  permissions: string[];\n}\n\nexport interface TokenPair {\n  accessToken: string;\n  refreshToken: string;\n  expiresAt: number;\n}\n\n/**\n * Secure Token Manager - No Client-Side Storage\n *\n * This class provides token validation and decoding utilities.\n * All actual token storage is handled by server-side httpOnly cookies.\n */\nclass SecureTokenManager {\n  // Valid token signing algorithms (whitelist)\n  private readonly VALID_ALGORITHMS = [\"RS256\", \"ES256\", \"HS256\"];\n\n  /**\n   * SECURITY ERROR: Client-side token storage is forbidden\n   * Tokens must be stored in httpOnly cookies by server actions only\n   */\n  setTokens(_tokenPair: TokenPair, _csrfToken?: string): never {\n    throw new Error(\n      \"SECURITY VIOLATION: Client-side token storage is forbidden. \" +\n        \"Tokens must be set via server actions using httpOnly cookies.\",\n    );\n  }\n\n  /**\n   * SECURITY: Client cannot access tokens directly\n   * Use server actions for token operations\n   */\n  getAccessToken(): never {\n    throw new Error(\n      \"SECURITY: Tokens are in httpOnly cookies and not accessible to client-side JavaScript. \" +\n        \"Use server actions to perform authenticated requests.\",\n    );\n  }\n\n  /**\n   * SECURITY: Client cannot access tokens directly\n   * Use server actions for token operations\n   */\n  getRefreshToken(): never {\n    throw new Error(\n      \"SECURITY: Refresh tokens are in httpOnly cookies and not accessible to client-side JavaScript. \" +\n        \"Use server actions to refresh tokens.\",\n    );\n  }\n\n  /**\n   * SECURITY: Client cannot access tokens directly\n   * Use server actions for token operations\n   */\n  getCSRFToken(): never {\n    throw new Error(\n      \"SECURITY: CSRF tokens are in httpOnly cookies and not accessible to client-side JavaScript. \" +\n        \"Use server actions to get CSRF tokens.\",\n    );\n  }\n\n  /**\n   * SECURITY: Client cannot clear tokens directly\n   * Use server actions for logout\n   */\n  clearTokens(): never {\n    throw new Error(\n      \"SECURITY: Use server actions to clear tokens (logout). \" +\n        \"Client-side JavaScript cannot access httpOnly cookies.\",\n    );\n  }\n\n  /**\n   * Decode JWT payload (without verification - for client-side use only)\n   */\n  decodeTokenPayload(token: string): TokenPayload | null {\n    try {\n      const parts = token.split(\".\");\n      if (parts.length !== 3) {\n        return null;\n      }\n\n      // Decode payload (base64url)\n      const payload = parts[1];\n      if (!payload) {\n        return null;\n      }\n      const decoded = atob(payload.replace(/-/g, \"+\").replace(/_/g, \"/\"));\n      return JSON.parse(decoded) as TokenPayload;\n    } catch (_error) {\n      return null;\n    }\n  }\n\n  // Token validation composition helpers\n  private static TokenValidationHelpers = {\n    validateTokenParts: (token: string): boolean => {\n      const parts = token.split(\".\");\n      return parts.length === 3;\n    },\n\n    decodeTokenHeader: (token: string): { alg: string } | null => {\n      try {\n        const parts = token.split(\".\");\n        const header = parts[0];\n        if (!header) {\n          return null;\n        }\n        const headerB64 = header.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        return JSON.parse(atob(headerB64));\n      } catch {\n        return null;\n      }\n    },\n\n    validateAlgorithm: (algorithm: string, validAlgorithms: string[]): boolean => {\n      if (!validAlgorithms.includes(algorithm)) {\n        return false;\n      }\n      return true;\n    },\n\n    validateRequiredFields: (payload: TokenPayload): boolean => {\n      const requiredFields = [\"sub\", \"iat\", \"exp\", \"aud\", \"iss\"];\n      const hasAllFields = requiredFields.every((field) => payload[field as keyof TokenPayload]);\n\n      if (!hasAllFields) {\n        return false;\n      }\n      return true;\n    },\n\n    validateIssuer: (issuer: string): boolean => {\n      const expectedIssuer = process.env[\"NEXT_PUBLIC_JWT_ISSUER\"] || \"dotmac-platform\";\n      if (issuer !== expectedIssuer) {\n        return false;\n      }\n      return true;\n    },\n\n    validateAudience: (audience: string): boolean => {\n      const expectedAudience = process.env[\"NEXT_PUBLIC_JWT_AUDIENCE\"] || \"dotmac-frontend\";\n      if (audience !== expectedAudience) {\n        return false;\n      }\n      return true;\n    },\n  };\n\n  /**\n   * Validate token format and basic security checks\n   */\n  validateTokenFormat(token: string): boolean {\n    try {\n      // Validate token structure\n      if (!TokenManager.TokenValidationHelpers.validateTokenParts(token)) {\n        return false;\n      }\n\n      // Validate algorithm\n      const header = TokenManager.TokenValidationHelpers.decodeTokenHeader(token);\n      if (\n        !header ||\n        !TokenManager.TokenValidationHelpers.validateAlgorithm(header.alg, this.VALID_ALGORITHMS)\n      ) {\n        return false;\n      }\n\n      // Decode and validate payload\n      const payload = this.decodeTokenPayload(token);\n      if (!payload) {\n        return false;\n      }\n\n      // Run all payload validations\n      return (\n        TokenManager.TokenValidationHelpers.validateRequiredFields(payload) &&\n        TokenManager.TokenValidationHelpers.validateIssuer(payload.iss) &&\n        TokenManager.TokenValidationHelpers.validateAudience(payload.aud)\n      );\n    } catch (_error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if provided token is expired\n   * @param token - JWT token to check\n   */\n  isTokenExpired(token: string): boolean {\n    try {\n      if (!token) {\n        return true;\n      }\n\n      const payload = this.decodeTokenPayload(token);\n      if (!payload) {\n        return true;\n      }\n\n      // Check expiration\n      const now = Math.floor(Date.now() / 1000);\n      return payload.exp <= now;\n    } catch (_error) {\n      return true;\n    }\n  }\n\n  /**\n   * SECURITY: Token refresh must be handled by server actions\n   */\n  async refreshTokens(\n    _apiRefreshFunction: (refreshToken: string) => Promise<TokenPair>,\n  ): Promise<never> {\n    throw new Error(\n      \"SECURITY: Token refresh must be handled by server actions. \" +\n        \"Use refreshTokenAction() from server actions instead.\",\n    );\n  }\n\n  /**\n   * Get safe token info for provided token (debugging/display only)\n   * @param token - JWT token to analyze\n   */\n  getTokenInfo(token?: string): {\n    isValid: boolean;\n    isExpired: boolean;\n    payload: Partial<TokenPayload> | null;\n  } {\n    if (!token) {\n      return {\n        isValid: false,\n        isExpired: true,\n        payload: null,\n      };\n    }\n\n    const isValid = this.validateTokenFormat(token);\n    const isExpired = this.isTokenExpired(token);\n\n    let payload: Partial<TokenPayload> | null = null;\n    if (isValid) {\n      const fullPayload = this.decodeTokenPayload(token);\n      if (fullPayload) {\n        // Return only non-sensitive fields for display\n        payload = {\n          portal: fullPayload.portal,\n          tenant: fullPayload.tenant,\n          roles: fullPayload.roles,\n          exp: fullPayload.exp,\n          iat: fullPayload.iat,\n        };\n      }\n    }\n\n    return {\n      isValid,\n      isExpired,\n      payload,\n    };\n  }\n\n  /**\n   * Stub for auto-refresh setup - in production, this would be handled by server actions\n   */\n  setupAutoRefresh(\n    _refreshFn: (token: string) => Promise<TokenPair>,\n    _onAuthFailure: () => Promise<void>,\n  ): () => void {\n    // Return a cleanup function (no-op for stub)\n    return () => {};\n  }\n}\n\n// Export singleton instance\nexport const tokenManager = new SecureTokenManager();\n","/**\n * CSRF (Cross-Site Request Forgery) protection utilities\n */\n\nimport { secureStorage } from \"./secureStorage\";\nimport { tokenManager } from \"./tokenManager\";\n\nexport interface CSRFConfig {\n  headerName: string;\n  tokenName: string;\n  cookieName: string;\n  enabledMethods: string[];\n}\n\nclass CSRFProtection {\n  private readonly config: CSRFConfig = {\n    headerName: \"X-CSRF-Token\",\n    tokenName: \"csrf_token\",\n    cookieName: \"__dotmac_csrf\",\n    enabledMethods: [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"],\n  };\n\n  /**\n   * Generate a cryptographically secure CSRF token\n   */\n  generateToken(): string {\n    try {\n      // Generate random bytes using crypto API\n      const array = new Uint8Array(32);\n      crypto.getRandomValues(array);\n\n      // Convert to base64url\n      return btoa(String.fromCharCode(...array))\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\")\n        .replace(/=/g, \"\");\n    } catch (_error) {\n      return this.generateFallbackToken();\n    }\n  }\n\n  /**\n   * Fallback token generation for older browsers\n   */\n  private generateFallbackToken(): string {\n    let token = \"\";\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n\n    for (let i = 0; i < 43; i++) {\n      token += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n\n    return token;\n  }\n\n  /**\n   * Store CSRF token securely\n   */\n  storeToken(token: string): void {\n    try {\n      // Store in secure storage\n      secureStorage.setItem(this.config.tokenName, token, {\n        secure: true,\n        sameSite: \"strict\",\n        maxAge: 60 * 60, // 1 hour\n      });\n    } catch (_error) {\n      // Error handling intentionally empty\n    }\n  }\n\n  /**\n   * Get current CSRF token\n   */\n  getToken(): string | null {\n    try {\n      let token = tokenManager.getCSRFToken();\n\n      if (!token) {\n        token = secureStorage.getItem(this.config.tokenName);\n      }\n\n      return token;\n    } catch (_error) {\n      return null;\n    }\n  }\n\n  /**\n   * Initialize CSRF protection for the session\n   */\n  async initialize(): Promise<string> {\n    try {\n      // Check if we already have a valid token\n      let token = this.getToken();\n\n      if (!token || !this.validateTokenFormat(token)) {\n        // Generate new token\n        token = this.generateToken();\n        this.storeToken(token);\n      }\n\n      return token;\n    } catch (_error) {\n      throw new Error(\"CSRF initialization failed\");\n    }\n  }\n\n  /**\n   * Validate CSRF token format\n   */\n  validateTokenFormat(token: string): boolean {\n    // Check if token is base64url format and has appropriate length\n    const base64urlRegex = /^[A-Za-z0-9\\-_]+$/;\n    return base64urlRegex.test(token) && token.length >= 32;\n  }\n\n  /**\n   * Clear CSRF token\n   */\n  clearToken(): void {\n    try {\n      secureStorage.removeItem(this.config.tokenName);\n    } catch (_error) {\n      // Error handling intentionally empty\n    }\n  }\n\n  /**\n   * Check if method requires CSRF protection\n   */\n  requiresProtection(method: string): boolean {\n    return this.config.enabledMethods.includes(method.toUpperCase());\n  }\n\n  /**\n   * Get CSRF headers for API requests\n   */\n  getHeaders(): Record<string, string> {\n    const token = this.getToken();\n\n    if (!token) {\n      return {\n        // Implementation pending\n      };\n    }\n\n    return {\n      [this.config.headerName]: token,\n    };\n  }\n\n  /**\n   * Validate CSRF token against expected value\n   * Note: This is primarily for client-side validation.\n   * Server-side validation is still required for security.\n   */\n  validateToken(providedToken: string): boolean {\n    try {\n      const storedToken = this.getToken();\n\n      if (!storedToken || !providedToken) {\n        return false;\n      }\n\n      // Use constant-time comparison to prevent timing attacks\n      return this.constantTimeEqual(storedToken, providedToken);\n    } catch (_error) {\n      return false;\n    }\n  }\n\n  /**\n   * Constant-time string comparison to prevent timing attacks\n   */\n  private constantTimeEqual(a: string, b: string): boolean {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    let result = 0;\n    for (let i = 0; i < a.length; i++) {\n      result |= a.charCodeAt(i) ^ b.charCodeAt(i);\n    }\n\n    return result === 0;\n  }\n\n  /**\n   * Rotate CSRF token (generate new one)\n   */\n  rotateToken(): string {\n    try {\n      this.clearToken();\n      const newToken = this.generateToken();\n      this.storeToken(newToken);\n      return newToken;\n    } catch (_error) {\n      throw new Error(\"CSRF token rotation failed\");\n    }\n  }\n\n  /**\n   * Get CSRF configuration\n   */\n  getConfig(): CSRFConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Update CSRF configuration\n   */\n  updateConfig(updates: Partial<CSRFConfig>): void {\n    Object.assign(this.config, updates);\n  }\n\n  /**\n   * Check if CSRF protection is properly configured\n   */\n  isConfigured(): boolean {\n    return !!(\n      this.config.headerName &&\n      this.config.tokenName &&\n      this.config.enabledMethods.length > 0\n    );\n  }\n\n  /**\n   * Get debug information about CSRF protection\n   */\n  getDebugInfo(): {\n    hasToken: boolean;\n    tokenLength: number;\n    isConfigured: boolean;\n    protectedMethods: string[];\n  } {\n    const token = this.getToken();\n\n    return {\n      hasToken: !!token,\n      tokenLength: token ? token.length : 0,\n      isConfigured: this.isConfigured(),\n      protectedMethods: this.config.enabledMethods,\n    };\n  }\n}\n\n// Export singleton instance\nexport const csrfProtection = new CSRFProtection();\n\n// Hook for React components\nexport function useCSRFProtection() {\n  return {\n    getToken: () => csrfProtection.getToken(),\n    getHeaders: () => csrfProtection.getHeaders(),\n    initialize: () => csrfProtection.initialize(),\n    rotateToken: () => csrfProtection.rotateToken(),\n    requiresProtection: (method: string) => csrfProtection.requiresProtection(method),\n  };\n}\n","/**\n * Input sanitization and XSS protection utilities\n */\n\nexport interface SanitizationOptions {\n  allowedTags?: string[];\n  allowedAttributes?: Record<string, string[]>;\n  stripAll?: boolean;\n  maxLength?: number;\n}\n\nclass InputSanitizer {\n  // Default allowed HTML tags for rich text content\n  private readonly DEFAULT_ALLOWED_TAGS = [\n    \"p\",\n    \"br\",\n    \"strong\",\n    \"b\",\n    \"em\",\n    \"i\",\n    \"u\",\n    \"ul\",\n    \"ol\",\n    \"li\",\n    \"h1\",\n    \"h2\",\n    \"h3\",\n    \"h4\",\n    \"h5\",\n    \"h6\",\n    \"blockquote\",\n    \"pre\",\n    \"code\",\n  ];\n\n  // Default allowed attributes\n  private readonly DEFAULT_ALLOWED_ATTRIBUTES: Record<string, string[]> = {\n    a: [\"href\", \"title\"],\n    img: [\"src\", \"alt\", \"title\", \"width\", \"height\"],\n    \"*\": [\"class\"], // Allow class on all elements\n  };\n\n  // Dangerous patterns that should always be removed\n  private readonly DANGEROUS_PATTERNS = [\n    /<script\\b[^<]*(?:(?!<\\/script>)[^<]*)*<\\/script>/gi,\n    /<iframe\\b[^<]*(?:(?!<\\/iframe>)[^<]*)*<\\/iframe>/gi,\n    /<object\\b[^<]*(?:(?!<\\/object>)[^<]*)*<\\/object>/gi,\n    /<embed\\b[^<]*(?:(?!<\\/embed>)[^<]*)*<\\/embed>/gi,\n    /<form\\b[^<]*(?:(?!<\\/form>)[^<]*)*<\\/form>/gi,\n    /javascript:/gi,\n    /data:text\\/html/gi,\n    /vbscript:/gi,\n    /on\\w+\\s*=/gi, // Event handlers like onclick, onload, etc.\n  ];\n\n  // URL validation regex\n  private readonly URL_REGEX =\n    /^https?:\\/\\/(?:[-\\w.])+(?::[0-9]+)?(?:\\/(?:[\\w/_.])*(?:\\?(?:[\\w&%=.]*))?(?:#(?:\\w*))?)?$/;\n\n  /**\n   * Sanitize HTML content to prevent XSS\n   */\n  sanitizeHTML(\n    input: string,\n    options: SanitizationOptions = {\n      // Implementation pending\n    },\n  ): string {\n    if (!input || typeof input !== \"string\") {\n      return \"\";\n    }\n\n    const {\n      allowedTags = this.DEFAULT_ALLOWED_TAGS,\n      allowedAttributes = this.DEFAULT_ALLOWED_ATTRIBUTES,\n      stripAll = false,\n      maxLength,\n    } = options;\n\n    let sanitized = input;\n\n    // Apply length limit first\n    if (maxLength && sanitized.length > maxLength) {\n      sanitized = sanitized.substring(0, maxLength);\n    }\n\n    // Remove dangerous patterns first\n    for (const pattern of this.DANGEROUS_PATTERNS) {\n      sanitized = sanitized.replace(pattern, \"\");\n    }\n\n    if (stripAll) {\n      // Remove all HTML tags\n      return this.stripAllTags(sanitized);\n    }\n\n    // Parse and clean allowed tags\n    sanitized = this.cleanAllowedTags(sanitized, allowedTags, allowedAttributes);\n\n    return sanitized.trim();\n  }\n\n  /**\n   * Sanitize plain text input\n   */\n  sanitizeText(input: string, maxLength?: number): string {\n    if (!input || typeof input !== \"string\") {\n      return \"\";\n    }\n\n    let sanitized = input;\n\n    // Remove HTML tags\n    sanitized = this.stripAllTags(sanitized);\n\n    // Decode HTML entities\n    sanitized = this.decodeHTMLEntities(sanitized);\n\n    // Apply length limit\n    if (maxLength && sanitized.length > maxLength) {\n      sanitized = sanitized.substring(0, maxLength);\n    }\n\n    return sanitized.trim();\n  }\n\n  /**\n   * Sanitize URL to prevent XSS and ensure it's safe\n   */\n  sanitizeURL(url: string): string | null {\n    if (!url || typeof url !== \"string\") {\n      return null;\n    }\n\n    // Remove whitespace and control characters\n    const cleaned = url.trim().replace(/[\\x00-\\x1F\\x7F]/g, \"\");\n\n    // Check for javascript: or data: URLs\n    if (cleaned.match(/^(javascript|data|vbscript):/i)) {\n      return null;\n    }\n\n    // Validate URL format\n    if (!this.URL_REGEX.test(cleaned)) {\n      // If it doesn't start with http/https, it might be a relative URL\n      if (cleaned.startsWith(\"/\") && !cleaned.includes(\"..\")) {\n        return cleaned;\n      }\n      return null;\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Sanitize email address\n   */\n  sanitizeEmail(email: string): string | null {\n    if (!email || typeof email !== \"string\") {\n      return null;\n    }\n\n    const cleaned = email.trim().toLowerCase();\n\n    // Basic email validation regex\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$/;\n\n    if (!emailRegex.test(cleaned)) {\n      return null;\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Sanitize phone number\n   */\n  sanitizePhone(phone: string): string | null {\n    if (!phone || typeof phone !== \"string\") {\n      return null;\n    }\n\n    // Remove all non-digit characters except + for international numbers\n    const cleaned = phone.replace(/[^\\d+]/g, \"\");\n\n    // Basic phone number validation (10-15 digits)\n    if (cleaned.length < 10 || cleaned.length > 15) {\n      return null;\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Sanitize SQL input to prevent injection (basic protection)\n   */\n  sanitizeSQLInput(input: string): string {\n    if (!input || typeof input !== \"string\") {\n      return \"\";\n    }\n\n    // Remove SQL injection patterns\n    const sqlPatterns = [\n      /('|('')|;|--|\\||\\*|%|<|>|=|\\\\)/gi,\n      /(union|select|insert|update|delete|drop|create|alter|exec|execute)/gi,\n    ];\n\n    let sanitized = input;\n    for (const pattern of sqlPatterns) {\n      sanitized = sanitized.replace(pattern, \"\");\n    }\n\n    return sanitized.trim();\n  }\n\n  /**\n   * Strip all HTML tags\n   */\n  private stripAllTags(html: string): string {\n    return html.replace(/<[^>]*>/g, \"\");\n  }\n\n  /**\n   * Clean and validate allowed HTML tags\n   */\n  private cleanAllowedTags(\n    html: string,\n    allowedTags: string[],\n    allowedAttributes: Record<string, string[]>,\n  ): string {\n    // This is a basic implementation. For production, consider using a library like DOMPurify\n\n    // Remove disallowed tags\n    const tagPattern = /<\\/?([a-zA-Z][a-zA-Z0-9]*)[^>]*>/g;\n\n    return html.replace(tagPattern, (match, tagName) => {\n      const tag = tagName.toLowerCase();\n\n      if (!allowedTags.includes(tag)) {\n        return \"\";\n      }\n\n      // Clean attributes for allowed tags\n      return this.cleanAttributes(match, tag, allowedAttributes);\n    });\n  }\n\n  /**\n   * Clean HTML attributes\n   */\n  private cleanAttributes(\n    tagHTML: string,\n    tagName: string,\n    allowedAttributes: Record<string, string[]>,\n  ): string {\n    const allowedForTag = allowedAttributes[tagName] || [];\n    const allowedForAll = allowedAttributes[\"*\"] || [];\n    const allAllowed = [...allowedForTag, ...allowedForAll];\n\n    if (allAllowed.length === 0) {\n      // Return tag without attributes\n      return tagHTML.replace(/\\s+[^>]*/, \"\");\n    }\n\n    // This is a simplified implementation\n    // For production, use a proper HTML parser\n    return tagHTML.replace(/\\s+(\\w+)=[\"'][^\"']*[\"']/g, (match, attrName) => {\n      if (allAllowed.includes(attrName.toLowerCase())) {\n        return match;\n      }\n      return \"\";\n    });\n  }\n\n  /**\n   * Decode HTML entities\n   */\n  private decodeHTMLEntities(text: string): string {\n    const entityMap: Record<string, string> = {\n      \"&amp;\": \"&\",\n      \"&lt;\": \"<\",\n      \"&gt;\": \">\",\n      \"&quot;\": '\"',\n      \"&#x27;\": \"'\",\n      \"&#x2F;\": \"/\",\n      \"&#x60;\": \"`\",\n      \"&#x3D;\": \"=\",\n    };\n\n    return text.replace(/&[#\\w]+;/g, (entity) => {\n      return entityMap[entity] || entity;\n    });\n  }\n\n  /**\n   * Escape HTML to prevent XSS\n   */\n  escapeHTML(text: string): string {\n    if (!text || typeof text !== \"string\") {\n      return \"\";\n    }\n\n    const entityMap: Record<string, string> = {\n      \"&\": \"&amp;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\",\n      '\"': \"&quot;\",\n      \"'\": \"&#x27;\",\n      \"/\": \"&#x2F;\",\n      \"`\": \"&#x60;\",\n      \"=\": \"&#x3D;\",\n    };\n\n    return text.replace(/[&<>\"'`=/]/g, (char) => {\n      return entityMap[char] || char;\n    });\n  }\n\n  /**\n   * Validate and sanitize JSON input\n   */\n  sanitizeJSON(input: string): object | null {\n    try {\n      if (!input || typeof input !== \"string\") {\n        return null;\n      }\n\n      // Remove dangerous patterns\n      let cleaned = input;\n      for (const pattern of this.DANGEROUS_PATTERNS) {\n        cleaned = cleaned.replace(pattern, \"\");\n      }\n\n      // Additional validation can be added here\n      return JSON.parse(cleaned);\n    } catch (_error) {\n      return null;\n    }\n  }\n\n  /**\n   * Comprehensive input sanitization for form data\n   */\n  sanitizeFormData(data: Record<string, unknown>): Record<string, unknown> {\n    const sanitized: Record<string, unknown> = {\n      // Implementation pending\n    };\n\n    for (const [key, value] of Object.entries(data)) {\n      if (typeof value === \"string\") {\n        // Sanitize based on field type (heuristic)\n        if (key.toLowerCase().includes(\"email\")) {\n          sanitized[key] = this.sanitizeEmail(value);\n        } else if (key.toLowerCase().includes(\"phone\")) {\n          sanitized[key] = this.sanitizePhone(value);\n        } else if (key.toLowerCase().includes(\"url\") || key.toLowerCase().includes(\"link\")) {\n          sanitized[key] = this.sanitizeURL(value);\n        } else if (key.toLowerCase().includes(\"html\") || key.toLowerCase().includes(\"content\")) {\n          sanitized[key] = this.sanitizeHTML(value);\n        } else {\n          sanitized[key] = this.sanitizeText(value, 1000); // Default max length\n        }\n      } else if (Array.isArray(value)) {\n        sanitized[key] = value.map((item) =>\n          typeof item === \"string\" ? this.sanitizeText(item, 1000) : item,\n        );\n      } else {\n        sanitized[key] = value;\n      }\n    }\n\n    return sanitized;\n  }\n}\n\n// Export singleton instance\nexport const inputSanitizer = new InputSanitizer();\n\n// Convenience functions\nexport const sanitizeHTML = (input: string, options?: SanitizationOptions) =>\n  inputSanitizer.sanitizeHTML(input, options);\n\nexport const sanitizeText = (input: string, maxLength?: number) =>\n  inputSanitizer.sanitizeText(input, maxLength);\n\nexport const sanitizeURL = (url: string) => inputSanitizer.sanitizeURL(url);\n\nexport const sanitizeEmail = (email: string) => inputSanitizer.sanitizeEmail(email);\n\nexport const escapeHTML = (text: string) => inputSanitizer.escapeHTML(text);\n","/**\n * Standardized Error Handling Utilities\n * Provides consistent error handling patterns across the ISP Framework\n */\n\nexport type ErrorSeverity = \"low\" | \"medium\" | \"high\" | \"critical\";\nexport type ErrorCategory =\n  | \"network\"\n  | \"validation\"\n  | \"authentication\"\n  | \"authorization\"\n  | \"business\"\n  | \"system\"\n  | \"unknown\";\n\nexport interface StandardError {\n  id: string;\n  message: string;\n  code?: string;\n  status?: number;\n  category: ErrorCategory;\n  severity: ErrorSeverity;\n  context?: string;\n  timestamp: Date;\n  retryable: boolean;\n  userMessage: string;\n  technicalDetails?: Record<string, any>;\n  correlationId?: string;\n}\n\nexport interface ErrorHandlingConfig {\n  enableLogging: boolean;\n  enableTelemetry: boolean;\n  enableUserNotifications: boolean;\n  maxRetries: number;\n  retryDelayMs: number;\n  fallbackEnabled: boolean;\n}\n\nexport class ISPError extends Error {\n  public readonly id: string;\n  public readonly category: ErrorCategory;\n  public readonly severity: ErrorSeverity;\n  public readonly context?: string;\n  public readonly timestamp: Date;\n  public readonly retryable: boolean;\n  public readonly userMessage: string;\n  public readonly status?: number;\n  public readonly code?: string;\n  public readonly technicalDetails?: Record<string, any>;\n  public readonly correlationId?: string;\n\n  constructor(params: Partial<StandardError> & { message: string }) {\n    super(params.message);\n    this.name = \"ISPError\";\n    this.id = params.id || generateErrorId();\n    this.category = params.category || \"unknown\";\n    this.severity = params.severity || \"medium\";\n    this.context = params.context;\n    this.timestamp = params.timestamp || new Date();\n    this.retryable = params.retryable ?? false;\n    this.userMessage = params.userMessage || this.generateUserMessage();\n    this.status = params.status;\n    this.code = params.code;\n    this.technicalDetails = params.technicalDetails;\n    this.correlationId = params.correlationId || generateCorrelationId();\n  }\n\n  private generateUserMessage(): string {\n    switch (this.category) {\n      case \"network\":\n        return \"Connection problem. Please check your internet and try again.\";\n      case \"authentication\":\n        return \"Please log in again to continue.\";\n      case \"authorization\":\n        return \"You don't have permission to perform this action.\";\n      case \"validation\":\n        return \"Please check your input and try again.\";\n      case \"business\":\n        return \"Unable to complete this action. Please try again later.\";\n      case \"system\":\n        return \"System temporarily unavailable. Please try again in a few minutes.\";\n      default:\n        return \"Something went wrong. Please try again.\";\n    }\n  }\n\n  toJSON(): StandardError {\n    return {\n      id: this.id,\n      message: this.message,\n      code: this.code,\n      status: this.status,\n      category: this.category,\n      severity: this.severity,\n      context: this.context,\n      timestamp: this.timestamp,\n      retryable: this.retryable,\n      userMessage: this.userMessage,\n      technicalDetails: this.technicalDetails,\n      correlationId: this.correlationId,\n    };\n  }\n}\n\n/**\n * Standardized error classification and transformation\n */\nexport function classifyError(error: unknown, context?: string): ISPError {\n  // If already an ISPError, return as-is\n  if (error instanceof ISPError) {\n    return error;\n  }\n\n  // Handle fetch/network errors\n  if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n    return new ISPError({\n      message: error.message,\n      category: \"network\",\n      severity: \"medium\",\n      context,\n      retryable: true,\n      userMessage: \"Network connection failed. Please check your internet connection.\",\n    });\n  }\n\n  // Handle HTTP status errors\n  if (error && typeof error === \"object\" && \"status\" in error) {\n    const status = (error as any).status;\n\n    if (status === 401) {\n      return new ISPError({\n        message: \"Authentication failed\",\n        status,\n        category: \"authentication\",\n        severity: \"high\",\n        context,\n        retryable: false,\n        userMessage: \"Please log in again to continue.\",\n      });\n    }\n\n    if (status === 403) {\n      return new ISPError({\n        message: \"Access denied\",\n        status,\n        category: \"authorization\",\n        severity: \"high\",\n        context,\n        retryable: false,\n        userMessage: \"You don't have permission to perform this action.\",\n      });\n    }\n\n    if (status === 422) {\n      return new ISPError({\n        message: \"Validation failed\",\n        status,\n        category: \"validation\",\n        severity: \"low\",\n        context,\n        retryable: false,\n        userMessage: \"Please check your input and try again.\",\n      });\n    }\n\n    if (status >= 500) {\n      return new ISPError({\n        message: \"Server error\",\n        status,\n        category: \"system\",\n        severity: \"critical\",\n        context,\n        retryable: true,\n        userMessage: \"System temporarily unavailable. Please try again in a few minutes.\",\n      });\n    }\n\n    if (status === 429) {\n      return new ISPError({\n        message: \"Rate limit exceeded\",\n        status,\n        category: \"system\",\n        severity: \"medium\",\n        context,\n        retryable: true,\n        userMessage: \"Too many requests. Please wait a moment before trying again.\",\n      });\n    }\n  }\n\n  // Handle timeout errors\n  if (error && typeof error === \"object\" && \"name\" in error && error.name === \"AbortError\") {\n    return new ISPError({\n      message: \"Request timeout\",\n      category: \"network\",\n      severity: \"medium\",\n      context,\n      retryable: true,\n      userMessage: \"Request timed out. Please try again.\",\n    });\n  }\n\n  // Handle generic Error objects\n  if (error instanceof Error) {\n    return new ISPError({\n      message: error.message,\n      category: \"unknown\",\n      severity: \"medium\",\n      context,\n      retryable: false,\n      technicalDetails: { originalError: error.name, stack: error.stack },\n    });\n  }\n\n  // Handle unknown error types\n  return new ISPError({\n    message: \"An unknown error occurred\",\n    category: \"unknown\",\n    severity: \"medium\",\n    context,\n    retryable: false,\n    technicalDetails: { originalError: String(error) },\n  });\n}\n\n/**\n * Standardized retry logic\n */\nexport function isRetryableError(error: ISPError): boolean {\n  return error.retryable;\n}\n\nexport function calculateRetryDelay(attempt: number, baseDelay = 1000, maxDelay = 30000): number {\n  // Exponential backoff with jitter\n  const delay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);\n  const jitter = delay * 0.1 * Math.random(); // Add up to 10% jitter\n  return Math.floor(delay + jitter);\n}\n\nexport function shouldRetry(error: ISPError, attempt: number, maxRetries: number): boolean {\n  return attempt < maxRetries && isRetryableError(error);\n}\n\n/**\n * Error logging and telemetry\n */\nexport interface ErrorLogEntry {\n  error: StandardError;\n  userAgent: string;\n  url: string;\n  userId?: string;\n  tenantId?: string;\n  sessionId?: string;\n}\n\nlet errorLogger: ((entry: ErrorLogEntry) => void) | null = null;\n\nexport function setErrorLogger(logger: (entry: ErrorLogEntry) => void): void {\n  errorLogger = logger;\n}\n\nexport function logError(error: ISPError, additionalContext?: Partial<ErrorLogEntry>): void {\n  if (!errorLogger) return;\n\n  const logEntry: ErrorLogEntry = {\n    error: error.toJSON(),\n    userAgent: typeof navigator !== \"undefined\" ? navigator.userAgent : \"Unknown\",\n    url: typeof window !== \"undefined\" ? window.location.href : \"Unknown\",\n    ...additionalContext,\n  };\n\n  errorLogger(logEntry);\n}\n\n/**\n * Error aggregation and deduplication\n */\nconst errorCache = new Map<string, { count: number; lastSeen: Date }>();\n\nexport function deduplicateError(error: ISPError, timeWindow = 60000): boolean {\n  const key = `${error.message}-${error.context}-${error.status}`;\n  const now = new Date();\n  const cached = errorCache.get(key);\n\n  if (cached && now.getTime() - cached.lastSeen.getTime() < timeWindow) {\n    cached.count += 1;\n    cached.lastSeen = now;\n    return false; // Don't log duplicate\n  }\n\n  errorCache.set(key, { count: 1, lastSeen: now });\n  return true; // Log this error\n}\n\n/**\n * Utility functions\n */\nfunction generateErrorId(): string {\n  return `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nfunction generateCorrelationId(): string {\n  return `corr_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Error boundary helpers\n */\nexport interface ErrorFallbackProps {\n  error: ISPError;\n  resetError: () => void;\n  context?: string;\n}\n\nexport function createErrorFallback(\n  fallbackComponent: React.ComponentType<ErrorFallbackProps>,\n): React.ComponentType<ErrorFallbackProps> {\n  return fallbackComponent;\n}\n\n/**\n * Business logic error constructors\n */\nexport const ErrorFactory = {\n  network: (message: string, context?: string) =>\n    new ISPError({\n      message,\n      category: \"network\",\n      severity: \"medium\",\n      context,\n      retryable: true,\n    }),\n\n  validation: (message: string, context?: string, details?: Record<string, any>) =>\n    new ISPError({\n      message,\n      category: \"validation\",\n      severity: \"low\",\n      context,\n      retryable: false,\n      technicalDetails: details,\n    }),\n\n  authentication: (context?: string) =>\n    new ISPError({\n      message: \"Authentication required\",\n      category: \"authentication\",\n      severity: \"high\",\n      context,\n      retryable: false,\n    }),\n\n  authorization: (resource: string, context?: string) =>\n    new ISPError({\n      message: `Access denied to ${resource}`,\n      category: \"authorization\",\n      severity: \"high\",\n      context,\n      retryable: false,\n      userMessage: `You don't have permission to access ${resource}.`,\n    }),\n\n  business: (message: string, context?: string, severity: ErrorSeverity = \"medium\") =>\n    new ISPError({\n      message,\n      category: \"business\",\n      severity,\n      context,\n      retryable: false,\n    }),\n\n  system: (message: string, context?: string, severity: ErrorSeverity = \"critical\") =>\n    new ISPError({\n      message,\n      category: \"system\",\n      severity,\n      context,\n      retryable: true,\n    }),\n};\n\n/**\n * Default error handling configuration\n */\nexport const DEFAULT_ERROR_CONFIG: ErrorHandlingConfig = {\n  enableLogging: true,\n  enableTelemetry: true,\n  enableUserNotifications: true,\n  maxRetries: 3,\n  retryDelayMs: 1000,\n  fallbackEnabled: true,\n};\n\n// Global error handling configuration (legacy support)\nexport const configureGlobalErrorHandling = (\n  config: {\n    logger?: (logData: any) => void;\n    enableConsoleLogging?: boolean;\n  } = {},\n) => {\n  if (config.logger) {\n    setErrorLogger(config.logger);\n  }\n\n  if (config.enableConsoleLogging) {\n    // Enable console logging for errors in development\n    if (process.env[\"NODE_ENV\"] === \"development\") {\n      console.warn(\"Global error handling configured for development\");\n    }\n  }\n};\n","/**\n * Unified API Client\n * Consolidates all API functionality from individual portals\n */\n\nimport type {\n  ApiResponse,\n  ApiError,\n  RequestConfig,\n  RetryConfig,\n  ApiClientConfig,\n  PortalEndpoints,\n  PaginatedResponse,\n  PaginationParams,\n} from \"./types\";\nimport { PORTAL_ENDPOINTS } from \"./types\";\nimport { ApiCache } from \"./cache\";\nimport { RateLimiter } from \"../utils/rate-limiter\";\n\n// Legacy types for compatibility\nimport type {\n  ChatSession,\n  Customer,\n  DashboardMetrics,\n  Invoice,\n  NetworkAlert,\n  NetworkDevice,\n  QueryParams,\n  ServicePlan,\n  User,\n} from \"../types\";\nimport type {\n  PluginCatalogItem,\n  PluginInstallationRequest,\n  PluginInstallationResponse,\n  InstalledPlugin,\n  PluginUpdateInfo,\n  PluginMarketplaceFilters,\n  PluginPermissionRequest,\n  PluginBackup,\n} from \"../types/plugins\";\nimport { csrfProtection } from \"../utils/csrfProtection\";\nimport { inputSanitizer } from \"../utils/sanitization\";\nimport { type TokenPair, tokenManager } from \"../utils/tokenManager\";\nimport { validationPatterns, validate } from \"@dotmac/primitives\";\nimport { ISPError, classifyError } from \"../utils/errorUtils\";\n\nconst DEFAULT_CONFIG: Required<Omit<ApiClientConfig, \"interceptors\" | \"portal\" | \"tenantId\">> = {\n  baseUrl: \"/api\",\n  apiKey: \"\",\n  defaultHeaders: {\n    \"Content-Type\": \"application/json\",\n  },\n  timeout: 30000,\n  retries: 3,\n  rateLimiting: true,\n  caching: true,\n  defaultCacheTTL: 5 * 60 * 1000, // 5 minutes\n  csrf: true,\n  auth: {\n    tokenHeader: \"Authorization\",\n    refreshEndpoint: \"/auth/refresh\",\n    autoRefresh: true,\n  },\n  metadata: {},\n  onUnauthorized: () => {\n    if (typeof window !== \"undefined\") {\n      window.location.href = \"/login\";\n    }\n  },\n  onError: (error) => {\n    // Use existing ISPError system for standardized error handling\n    const ispError = new ISPError({\n      code: \"API_CLIENT_ERROR\",\n      message: error.message || \"Unknown API client error\",\n      category: \"system\",\n      severity: \"medium\",\n      technicalDetails: { originalError: error },\n    });\n    // The ISPError constructor automatically logs and reports errors\n  },\n};\n\nconst DEFAULT_RETRY_CONFIG: RetryConfig = {\n  attempts: 3,\n  baseDelay: 1000,\n  maxDelay: 10000,\n  backoffFactor: 2,\n  jitter: true,\n};\n\nconst AUTH_REQUIRED_ERROR = \"Unauthorized - authentication required\";\n\nexport class ApiClient {\n  private config: Required<Omit<ApiClientConfig, \"interceptors\" | \"portal\" | \"tenantId\">> & {\n    portal?: string;\n    tenantId?: string;\n    interceptors?: ApiClientConfig[\"interceptors\"];\n  };\n  private cache?: ApiCache;\n  private rateLimiter?: RateLimiter;\n  private endpoints: PortalEndpoints;\n\n  constructor(config: ApiClientConfig = {}) {\n    this.config = {\n      ...DEFAULT_CONFIG,\n      ...config,\n    };\n\n    // Setup cache if enabled\n    if (this.config.caching) {\n      this.cache = new ApiCache(this.config.defaultCacheTTL);\n    }\n\n    // Setup rate limiting if enabled\n    if (this.config.rateLimiting) {\n      this.rateLimiter = new RateLimiter({\n        windowMs: 60_000,\n        maxRequests: 60,\n        keyPrefix: \"api-client\",\n      });\n    }\n\n    // Get portal-specific endpoints\n    this.endpoints = this.getPortalEndpoints();\n  }\n\n  // Get endpoints for current portal\n  private getPortalEndpoints(): PortalEndpoints {\n    if (this.config.portal && this.config.portal in PORTAL_ENDPOINTS) {\n      return PORTAL_ENDPOINTS[this.config.portal]!;\n    }\n\n    // Default endpoints if no portal specified\n    return {\n      login: \"/api/auth/login\",\n      logout: \"/api/auth/logout\",\n      refresh: \"/api/auth/refresh\",\n      validate: \"/api/auth/validate\",\n      csrf: \"/api/auth/csrf\",\n      users: \"/api/users\",\n      profile: \"/api/profile\",\n      settings: \"/api/settings\",\n    };\n  }\n\n  setAuthToken() {\n    // Method implementation pending\n  }\n\n  clearAuthToken() {\n    tokenManager.clearTokens();\n  }\n\n  private sanitizeBody(body: unknown): BodyInit | null {\n    if (!body) {\n      return null;\n    }\n\n    if (typeof body === \"string\") {\n      try {\n        const parsed = JSON.parse(body);\n        const sanitized = inputSanitizer.sanitizeFormData(parsed);\n        return JSON.stringify(sanitized);\n      } catch {\n        return inputSanitizer.sanitizeText(body);\n      }\n    }\n\n    // For non-string bodies (FormData, Blob, etc.)\n    if (body instanceof FormData || body instanceof Blob || body instanceof ArrayBuffer) {\n      return body as BodyInit;\n    }\n\n    // For objects, stringify them\n    return JSON.stringify(body);\n  }\n\n  private buildHeaders(\n    method: string,\n    options: Pick<RequestConfig, \"headers\"> = {\n      // Implementation pending\n    },\n  ): HeadersInit {\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      \"Cache-Control\": \"no-cache\",\n      Pragma: \"no-cache\",\n      ...((options.headers as Record<string, string>) || {}),\n    };\n\n    const authToken = tokenManager.getAccessToken();\n    if (authToken) {\n      headers[\"Authorization\"] = `Bearer ${authToken}`;\n    }\n\n    if (this.config.apiKey) {\n      headers[\"X-API-Key\"] = this.config.apiKey;\n    }\n\n    if (this.config.tenantId) {\n      headers[\"X-Tenant-ID\"] = this.config.tenantId;\n    }\n\n    if (csrfProtection.requiresProtection(method)) {\n      Object.assign(headers, csrfProtection.getHeaders());\n    }\n\n    return headers;\n  }\n\n  private async handleUnauthorized<T>(\n    attempt: number,\n    url: string,\n    requestOptions: RequestInit,\n  ): Promise<T> {\n    if (attempt !== 0) {\n      throw new Error(AUTH_REQUIRED_ERROR);\n    }\n\n    const refreshToken = tokenManager.getRefreshToken();\n    if (!refreshToken) {\n      throw new Error(AUTH_REQUIRED_ERROR);\n    }\n\n    try {\n      const newTokens = await this.refreshToken(refreshToken);\n      if (!newTokens) {\n        throw new Error(\"Token refresh failed\");\n      }\n\n      const newAuthToken = tokenManager.getAccessToken();\n      if (!newAuthToken) {\n        throw new Error(\"No access token after refresh\");\n      }\n\n      const headers = { ...requestOptions.headers } as Record<string, string>;\n      headers[\"Authorization\"] = `Bearer ${newAuthToken}`;\n      const retryResponse = await fetch(url, { ...requestOptions, headers });\n\n      if (retryResponse.ok) {\n        return (await retryResponse.json()) as T;\n      }\n      throw new Error(\"Retry after refresh failed\");\n    } catch (_error) {\n      tokenManager.clearTokens();\n      this.config.onUnauthorized();\n      throw new Error(AUTH_REQUIRED_ERROR);\n    }\n  }\n\n  private async handleErrorResponse(response: Response): Promise<never> {\n    const errorData = await response.json().catch(() => ({}));\n    const apiError: ApiError = {\n      code: errorData.code || `HTTP_${response.status}`,\n      message: errorData.message || response.statusText,\n      details: errorData.details,\n      statusCode: response.status,\n      timestamp: new Date().toISOString(),\n      path: response.url,\n    };\n\n    // Use existing ISPError system for standardized error classification\n    const ispError = classifyError(apiError);\n\n    // Call configured error handler\n    // Convert ISPError to ApiError for compatibility\n    const callbackStatus = ispError.status ?? response.status ?? 500;\n    const apiErrorForCallback: ApiError = {\n      code: ispError.code || \"UNKNOWN_ERROR\",\n      message: ispError.message,\n      details: ispError.technicalDetails,\n      statusCode: callbackStatus,\n    };\n    this.config.onError?.(apiErrorForCallback);\n\n    throw apiError;\n  }\n\n  private shouldRetry(error: Error): boolean {\n    return !(error.message === \"Unauthorized\" || error.name === \"AbortError\");\n  }\n\n  private async wait(attempt: number): Promise<void> {\n    await new Promise((resolve) => setTimeout(resolve, 2 ** attempt * 1000));\n  }\n\n  public async request<T>(endpoint: string, options: RequestConfig = {}): Promise<T> {\n    const { params, cache: useCache, cacheTTL, ...rest } = options;\n\n    let url = `${this.config.baseUrl}${endpoint}`;\n    if (params && Object.keys(params).length > 0) {\n      const searchParams = new URLSearchParams();\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, String(value));\n        }\n      });\n      const query = searchParams.toString();\n      if (query) {\n        url += url.includes(\"?\") ? `&${query}` : `?${query}`;\n      }\n    }\n\n    const method = options.method || \"GET\";\n    const sanitizedBody = this.sanitizeBody(options.body);\n    const headers = this.buildHeaders(method, options);\n\n    const requestOptions: RequestInit = {\n      ...rest,\n      method,\n      headers,\n      body: sanitizedBody,\n      signal: AbortSignal.timeout(this.config.timeout),\n      credentials: \"same-origin\",\n    };\n\n    let lastError: Error = new Error(\"Request failed\");\n\n    for (let attempt = 0; attempt <= this.config.retries; attempt++) {\n      try {\n        const response = await fetch(url, requestOptions);\n\n        if (!response.ok) {\n          if (response.status === 401) {\n            return await this.handleUnauthorized<T>(attempt, url, requestOptions);\n          }\n          await this.handleErrorResponse(response);\n        }\n\n        return (await response.json()) as T;\n      } catch (error) {\n        lastError = error as Error;\n\n        if (!this.shouldRetry(lastError)) {\n          throw lastError;\n        }\n\n        if (attempt < this.config.retries) {\n          await this.wait(attempt);\n        }\n      }\n    }\n\n    throw lastError;\n  }\n\n  public async get<T>(endpoint: string, config: RequestConfig = {}): Promise<T> {\n    return this.request<T>(endpoint, { ...config, method: \"GET\" });\n  }\n\n  public async post<T>(\n    endpoint: string,\n    data?: RequestConfig[\"body\"],\n    config: RequestConfig = {},\n  ): Promise<T> {\n    return this.request<T>(endpoint, {\n      ...config,\n      method: \"POST\",\n      body: data ?? config.body ?? null,\n    });\n  }\n\n  public async put<T>(\n    endpoint: string,\n    data?: RequestConfig[\"body\"],\n    config: RequestConfig = {},\n  ): Promise<T> {\n    return this.request<T>(endpoint, {\n      ...config,\n      method: \"PUT\",\n      body: data ?? config.body ?? null,\n    });\n  }\n\n  public async delete<T>(\n    endpoint: string,\n    data?: RequestConfig[\"body\"],\n    config: RequestConfig = {},\n  ): Promise<T> {\n    return this.request<T>(endpoint, {\n      ...config,\n      method: \"DELETE\",\n      body: data ?? config.body ?? null,\n    });\n  }\n\n  public invalidateEndpointCache(endpoint: string): void {\n    this.cache?.invalidateEndpoint(endpoint);\n  }\n\n  public invalidateCacheByPattern(pattern: string | RegExp): void {\n    this.cache?.invalidatePattern(pattern);\n  }\n\n  // Authentication\n  async login(credentials: {\n    email?: string;\n    portalId?: string;\n    accountNumber?: string;\n    partnerCode?: string;\n    password: string;\n    portal: string;\n  }): Promise<\n    ApiResponse<{\n      user: User;\n      token: string;\n      refreshToken: string;\n      tenant: unknown;\n    }>\n  > {\n    return this.request(\"/api/v1/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify(credentials),\n    });\n  }\n\n  async refreshToken(refreshToken: string): Promise<TokenPair> {\n    const response = await this.request<\n      ApiResponse<{\n        accessToken: string;\n        refreshToken: string;\n        expiresAt: number;\n      }>\n    >(\"/api/v1/auth/refresh\", {\n      method: \"POST\",\n      body: JSON.stringify({ refreshToken }),\n    });\n\n    if (!response.data) {\n      throw new ISPError({\n        message: \"Invalid refresh token response\",\n        category: \"authentication\",\n        severity: \"high\",\n      });\n    }\n\n    return {\n      accessToken: response.data.accessToken,\n      refreshToken: response.data.refreshToken,\n      expiresAt: response.data.expiresAt,\n    };\n  }\n\n  async logout(): Promise<ApiResponse<Record<string, never>>> {\n    return this.request(\"/api/v1/auth/logout\", {\n      method: \"POST\",\n    });\n  }\n\n  async getCurrentUser(): Promise<ApiResponse<User>> {\n    return this.request(\"/api/v1/auth/me\");\n  }\n\n  // Customers\n  async getCustomers(params?: QueryParams): Promise<PaginatedResponse<Customer>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/customers${query ? `?${query}` : \"\"}`);\n  }\n\n  async getCustomer(id: string): Promise<ApiResponse<Customer>> {\n    return this.request(`/api/v1/customers/${id}`);\n  }\n\n  async createCustomer(\n    customer: Omit<Customer, \"id\" | \"createdAt\" | \"updatedAt\">,\n  ): Promise<ApiResponse<Customer>> {\n    return this.request(\"/api/v1/customers\", {\n      method: \"POST\",\n      body: JSON.stringify(customer),\n    });\n  }\n\n  async updateCustomer(id: string, updates: Partial<Customer>): Promise<ApiResponse<Customer>> {\n    return this.request(`/api/v1/customers/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(updates),\n    });\n  }\n\n  async deleteCustomer(id: string): Promise<ApiResponse<Record<string, never>>> {\n    return this.request(`/api/v1/customers/${id}`, {\n      method: \"DELETE\",\n    });\n  }\n\n  // Billing\n  async getInvoices(\n    customerId?: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<Invoice>> {\n    const searchParams = new URLSearchParams();\n    if (customerId) {\n      searchParams.append(\"customerId\", customerId);\n    }\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/billing/invoices${query ? `?${query}` : \"\"}`);\n  }\n\n  async getInvoice(id: string): Promise<ApiResponse<Invoice>> {\n    return this.request(`/api/v1/billing/invoices/${id}`);\n  }\n\n  async createInvoice(\n    invoice: Omit<Invoice, \"id\" | \"createdAt\" | \"updatedAt\">,\n  ): Promise<ApiResponse<Invoice>> {\n    return this.request(\"/api/v1/billing/invoices\", {\n      method: \"POST\",\n      body: JSON.stringify(invoice),\n    });\n  }\n\n  async payInvoice(\n    id: string,\n    paymentData: { method: string; amount: number },\n  ): Promise<ApiResponse<Invoice>> {\n    return this.request(`/api/v1/billing/invoices/${id}/pay`, {\n      method: \"POST\",\n      body: JSON.stringify(paymentData),\n    });\n  }\n\n  // Network Management\n  async getNetworkDevices(params?: QueryParams): Promise<PaginatedResponse<NetworkDevice>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/network/devices${query ? `?${query}` : \"\"}`);\n  }\n\n  async getNetworkDevice(id: string): Promise<ApiResponse<NetworkDevice>> {\n    return this.request(`/api/v1/network/devices/${id}`);\n  }\n\n  async updateNetworkDevice(\n    id: string,\n    updates: Partial<NetworkDevice>,\n  ): Promise<ApiResponse<NetworkDevice>> {\n    return this.request(`/api/v1/network/devices/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(updates),\n    });\n  }\n\n  async getNetworkAlerts(params?: QueryParams): Promise<PaginatedResponse<NetworkAlert>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/network/alerts${query ? `?${query}` : \"\"}`);\n  }\n\n  async acknowledgeAlert(id: string): Promise<ApiResponse<NetworkAlert>> {\n    return this.request(`/api/v1/network/alerts/${id}/acknowledge`, {\n      method: \"POST\",\n    });\n  }\n\n  async resolveAlert(id: string, resolution?: string): Promise<ApiResponse<NetworkAlert>> {\n    return this.request(`/api/v1/network/alerts/${id}/resolve`, {\n      method: \"POST\",\n      body: JSON.stringify({ resolution }),\n    });\n  }\n\n  // Live Chat\n  async getChatSessions(params?: QueryParams): Promise<PaginatedResponse<ChatSession>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/chat/sessions${query ? `?${query}` : \"\"}`);\n  }\n\n  async getChatSession(id: string): Promise<ApiResponse<ChatSession>> {\n    return this.request(`/api/v1/chat/sessions/${id}`);\n  }\n\n  async createChatSession(customerId: string, subject?: string): Promise<ApiResponse<ChatSession>> {\n    return this.request(\"/api/v1/chat/sessions\", {\n      method: \"POST\",\n      body: JSON.stringify({ customerId, subject }),\n    });\n  }\n\n  async closeChatSession(\n    id: string,\n    rating?: number,\n    feedback?: string,\n  ): Promise<ApiResponse<ChatSession>> {\n    return this.request(`/api/v1/chat/sessions/${id}/close`, {\n      method: \"POST\",\n      body: JSON.stringify({ rating, feedback }),\n    });\n  }\n\n  // Service Plans\n  async getServicePlans(params?: QueryParams): Promise<PaginatedResponse<ServicePlan>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/services/plans${query ? `?${query}` : \"\"}`);\n  }\n\n  async getServicePlan(id: string): Promise<ApiResponse<ServicePlan>> {\n    return this.request(`/api/v1/services/plans/${id}`);\n  }\n\n  // Dashboard\n  async getDashboardMetrics(): Promise<ApiResponse<DashboardMetrics>> {\n    return this.request(\"/api/v1/dashboard/metrics\");\n  }\n\n  // File uploads\n  async uploadFile(file: File, purpose: string): Promise<ApiResponse<{ url: string; id: string }>> {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"purpose\", purpose);\n\n    return this.request(\"/api/v1/files/upload\", {\n      method: \"POST\",\n      body: formData,\n      headers: {\n        // Implementation pending\n      }, // Let browser set Content-Type for FormData\n    });\n  }\n\n  // Customer Portal APIs\n  async getCustomerDashboard(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/dashboard\");\n  }\n\n  async getCustomerServices(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/services\");\n  }\n\n  async getCustomerBilling(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/billing\");\n  }\n\n  async getCustomerUsage(period?: string): Promise<ApiResponse<unknown>> {\n    const query = period ? `?period=${period}` : \"\";\n    return this.request(`/api/v1/customer/usage${query}`);\n  }\n\n  async getCustomerDocuments(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/documents\");\n  }\n\n  async getCustomerSupportTickets(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/support/tickets\");\n  }\n\n  async createSupportTicket(data: unknown): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/support/tickets\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n  }\n\n  async replySupportTicket(ticketId: string, message: string): Promise<ApiResponse<unknown>> {\n    return this.request(`/api/v1/customer/support/tickets/${ticketId}/reply`, {\n      method: \"POST\",\n      body: JSON.stringify({ message }),\n    });\n  }\n\n  async runSpeedTest(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/services/speed-test\", {\n      method: \"POST\",\n    });\n  }\n\n  async requestServiceUpgrade(upgradeId: string): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/customer/services/upgrade\", {\n      method: \"POST\",\n      body: JSON.stringify({ upgradeId }),\n    });\n  }\n\n  // Admin Portal APIs\n  async getAdminDashboard(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/admin/dashboard\");\n  }\n\n  async getSystemAlerts(): Promise<ApiResponse<any[]>> {\n    return this.request(\"/api/v1/admin/system/alerts\");\n  }\n\n  async getNetworkStatus(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/admin/network/status\");\n  }\n\n  // Reseller Portal APIs\n  async getResellerDashboard(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/reseller/dashboard\");\n  }\n\n  async getResellerCommissions(): Promise<ApiResponse<unknown>> {\n    return this.request(\"/api/v1/reseller/commissions\");\n  }\n\n  async getResellerCustomers(): Promise<ApiResponse<any[]>> {\n    return this.request(\"/api/v1/reseller/customers\");\n  }\n\n  // Plugin Management APIs\n  async getPluginCatalog(\n    filters?: PluginMarketplaceFilters,\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<PluginCatalogItem>> {\n    const searchParams = new URLSearchParams();\n\n    if (filters) {\n      Object.entries(filters).forEach(([key, value]) => {\n        if (value !== undefined) {\n          if (Array.isArray(value)) {\n            value.forEach((v) => searchParams.append(key, String(v)));\n          } else {\n            searchParams.append(key, String(value));\n          }\n        }\n      });\n    }\n\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/plugins/catalog${query ? `?${query}` : \"\"}`);\n  }\n\n  async getPluginDetails(pluginId: string): Promise<ApiResponse<PluginCatalogItem>> {\n    return this.request(`/api/v1/plugins/catalog/${pluginId}`);\n  }\n\n  async installPlugin(\n    request: PluginInstallationRequest,\n  ): Promise<ApiResponse<PluginInstallationResponse>> {\n    // Validate plugin_id using existing validation system\n    if (!validate.required(request.plugin_id)) {\n      throw new ISPError({\n        code: \"VALIDATION_ERROR\",\n        message: \"Plugin ID is required\",\n        category: \"validation\",\n        severity: \"medium\",\n        technicalDetails: { pluginId: request.plugin_id },\n      });\n    }\n\n    // Validate license_tier\n    const validTiers = [\"trial\", \"basic\", \"professional\", \"enterprise\"];\n    if (!validate.oneOf(request.license_tier, validTiers)) {\n      throw new ISPError({\n        code: \"VALIDATION_ERROR\",\n        message: \"Invalid license tier\",\n        category: \"validation\",\n        severity: \"medium\",\n        technicalDetails: { licenseTier: request.license_tier, validTiers },\n      });\n    }\n\n    // Basic configuration validation using existing patterns\n    if (request.configuration && typeof request.configuration === \"object\") {\n      // Use existing validation patterns for security\n      const configKeys = Object.keys(request.configuration);\n      if (configKeys.length > 50) {\n        throw new ISPError({\n          code: \"VALIDATION_ERROR\",\n          message: \"Too many configuration parameters\",\n          category: \"validation\",\n          severity: \"medium\",\n          technicalDetails: { configCount: configKeys.length, maxAllowed: 50 },\n        });\n      }\n    }\n\n    return this.request(\"/api/v1/plugins/install\", {\n      method: \"POST\",\n      body: JSON.stringify(request),\n    });\n  }\n\n  async getPluginInstallationStatus(\n    installationId: string,\n  ): Promise<ApiResponse<PluginInstallationResponse>> {\n    return this.request(`/api/v1/plugins/installations/${installationId}/status`);\n  }\n\n  async getInstalledPlugins(\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<InstalledPlugin>> {\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/plugins/installed${query ? `?${query}` : \"\"}`);\n  }\n\n  async getInstalledPlugin(installationId: string): Promise<ApiResponse<InstalledPlugin>> {\n    return this.request(`/api/v1/plugins/installed/${installationId}`);\n  }\n\n  async enablePlugin(installationId: string): Promise<ApiResponse<InstalledPlugin>> {\n    return this.request(`/api/v1/plugins/installed/${installationId}/enable`, {\n      method: \"POST\",\n    });\n  }\n\n  async disablePlugin(installationId: string): Promise<ApiResponse<InstalledPlugin>> {\n    return this.request(`/api/v1/plugins/installed/${installationId}/disable`, {\n      method: \"POST\",\n    });\n  }\n\n  async configurePlugin(\n    installationId: string,\n    configuration: Record<string, any>,\n  ): Promise<ApiResponse<InstalledPlugin>> {\n    return this.request(`/api/v1/plugins/installed/${installationId}/configure`, {\n      method: \"PUT\",\n      body: JSON.stringify({ configuration }),\n    });\n  }\n\n  async uninstallPlugin(\n    installationId: string,\n    options?: { backup?: boolean; force?: boolean },\n  ): Promise<ApiResponse<{ success: boolean; message: string }>> {\n    return this.request(`/api/v1/plugins/installed/${installationId}/uninstall`, {\n      method: \"DELETE\",\n      body: JSON.stringify(options || {}),\n    });\n  }\n\n  async getPluginUpdates(\n    installationId?: string,\n  ): Promise<ApiResponse<Record<string, PluginUpdateInfo>>> {\n    const endpoint = installationId\n      ? `/api/v1/plugins/installed/${installationId}/updates`\n      : \"/api/v1/plugins/updates\";\n    return this.request(endpoint);\n  }\n\n  async updatePlugin(\n    installationId: string,\n    options?: { backup?: boolean; auto_restart?: boolean; configuration?: any },\n  ): Promise<ApiResponse<PluginInstallationResponse>> {\n    // Basic rate limiting - can be enhanced with actual rate limiter if needed\n    if (this.rateLimiter) {\n      const limitResult = await this.rateLimiter.checkLimit(`plugin-update:${installationId}`);\n      if (!limitResult.allowed) {\n        throw new ISPError({\n          message: \"Rate limit exceeded. Please wait before making another plugin update request.\",\n          category: \"system\",\n          severity: \"medium\",\n          retryable: true,\n        });\n      }\n    }\n\n    // Sanitize installationId\n    const sanitizedId = inputSanitizer.sanitizeText(installationId);\n    if (!sanitizedId || sanitizedId.length > 50) {\n      throw new Error(\"Invalid installation ID\");\n    }\n\n    const sanitizedOptions = options || {};\n\n    // Validate plugin configuration if provided\n    if (sanitizedOptions.configuration) {\n      let parsedConfig;\n      try {\n        parsedConfig =\n          typeof sanitizedOptions.configuration === \"string\"\n            ? JSON.parse(sanitizedOptions.configuration)\n            : sanitizedOptions.configuration;\n      } catch (error) {\n        throw new Error(\n          `Invalid plugin configuration: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n        );\n      }\n\n      // Basic plugin config validation - ensure it's an object\n      if (!parsedConfig || typeof parsedConfig !== \"object\") {\n        throw new ISPError({\n          message: \"Plugin configuration must be a valid object\",\n          category: \"validation\",\n          severity: \"low\",\n        });\n      }\n\n      // Use parsed configuration\n      sanitizedOptions.configuration = parsedConfig;\n    }\n\n    return this.request(`/api/v1/plugins/installed/${sanitizedId}/update`, {\n      method: \"POST\",\n      body: JSON.stringify(sanitizedOptions),\n    });\n  }\n\n  async getPluginUsage(\n    installationId: string,\n    period?: string,\n  ): Promise<\n    ApiResponse<{\n      cpu_usage: Array<{ timestamp: string; value: number }>;\n      memory_usage: Array<{ timestamp: string; value: number }>;\n      storage_usage: number;\n      api_calls: number;\n      errors: number;\n    }>\n  > {\n    const query = period ? `?period=${period}` : \"\";\n    return this.request(`/api/v1/plugins/installed/${installationId}/usage${query}`);\n  }\n\n  async getPluginHealth(\n    installationId?: string,\n  ): Promise<ApiResponse<InstalledPlugin[\"health\"] | Record<string, InstalledPlugin[\"health\"]>>> {\n    const endpoint = installationId\n      ? `/api/v1/plugins/installed/${installationId}/health`\n      : \"/api/v1/plugins/health\";\n    return this.request(endpoint);\n  }\n\n  async requestPluginPermissions(\n    request: PluginPermissionRequest,\n  ): Promise<ApiResponse<{ request_id: string; status: string }>> {\n    return this.request(\"/api/v1/plugins/permissions/request\", {\n      method: \"POST\",\n      body: JSON.stringify(request),\n    });\n  }\n\n  async getPluginBackups(\n    installationId?: string,\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<PluginBackup>> {\n    const searchParams = new URLSearchParams();\n    if (installationId) {\n      searchParams.append(\"installation_id\", installationId);\n    }\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const query = searchParams.toString();\n    return this.request(`/api/v1/plugins/backups${query ? `?${query}` : \"\"}`);\n  }\n\n  async createPluginBackup(\n    installationId: string,\n    type: \"manual\" | \"pre_update\" = \"manual\",\n  ): Promise<ApiResponse<PluginBackup>> {\n    return this.request(\"/api/v1/plugins/backups\", {\n      method: \"POST\",\n      body: JSON.stringify({ installation_id: installationId, type }),\n    });\n  }\n\n  async restorePluginBackup(backupId: string): Promise<ApiResponse<PluginInstallationResponse>> {\n    return this.request(`/api/v1/plugins/backups/${backupId}/restore`, {\n      method: \"POST\",\n    });\n  }\n}\n\n// Create a default client instance\nlet defaultClient: ApiClient | null = null;\n\nexport function createApiClient(config: ApiClientConfig): ApiClient {\n  const client = new ApiClient(config);\n  if (!defaultClient) {\n    defaultClient = client;\n  }\n  return client;\n}\n\nexport function getApiClient(): ApiClient {\n  if (!defaultClient) {\n    throw new Error(\"API client not initialized. Call createApiClient() first.\");\n  }\n  return defaultClient;\n}\n","import { useEffect, useMemo, useCallback } from \"react\";\nimport { create } from \"zustand\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\n\nexport type NotificationType = \"success\" | \"error\" | \"warning\" | \"info\" | \"system\";\n\nconst applyNotificationOptions = (\n  base: Omit<Notification, \"id\" | \"timestamp\">,\n  options?: Partial<Notification>,\n) => {\n  if (!options) {\n    return base;\n  }\n\n  for (const [key, value] of Object.entries(options)) {\n    if (value !== undefined) {\n      (base as Record<string, unknown>)[key] = value;\n    }\n  }\n\n  return base;\n};\n\nexport interface Notification {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message?: string;\n  duration?: number;\n  persistent?: boolean;\n  channel?: string[];\n  actions?: {\n    label: string;\n    action: () => void;\n    primary?: boolean;\n  }[];\n  priority?: \"low\" | \"medium\" | \"high\" | \"critical\";\n  metadata?: Record<string, unknown>;\n  timestamp: Date;\n}\n\ninterface NotificationStore {\n  notifications: Notification[];\n  addNotification: (notification: Omit<Notification, \"id\" | \"timestamp\">) => string;\n  removeNotification: (id: string) => void;\n  clearNotifications: () => void;\n  markAsRead: (id: string) => void;\n  updateNotification: (id: string, updates: Partial<Notification>) => void;\n}\n\nconst useNotificationStore = create<NotificationStore>()(\n  subscribeWithSelector((set, get) => ({\n    notifications: [],\n\n    addNotification: (notificationData) => {\n      const id = Math.random().toString(36).substring(7);\n      const notification: Notification = {\n        ...notificationData,\n        id,\n        timestamp: new Date(),\n        duration: notificationData.duration ?? (notificationData.type === \"error\" ? 0 : 5000),\n      };\n\n      set((state) => ({\n        notifications: [notification, ...state.notifications],\n      }));\n\n      // Auto-remove non-persistent notifications\n      if (notification.duration && notification.duration > 0) {\n        setTimeout(() => {\n          get().removeNotification(id);\n        }, notification.duration);\n      }\n\n      return id;\n    },\n\n    removeNotification: (id) => {\n      set((state) => ({\n        notifications: state.notifications.filter((n) => n.id !== id),\n      }));\n    },\n\n    clearNotifications: () => {\n      set({ notifications: [] });\n    },\n\n    markAsRead: (id) => {\n      set((state) => ({\n        notifications: state.notifications.map((n) => (n.id === id ? { ...n, read: true } : n)),\n      }));\n    },\n\n    updateNotification: (id, updates) => {\n      set((state) => ({\n        notifications: state.notifications.map((n) => (n.id === id ? { ...n, ...updates } : n)),\n      }));\n    },\n  })),\n);\n\nexport function useNotifications() {\n  const store = useNotificationStore();\n\n  const notify = useMemo(\n    () => ({\n      success: (title: string, message?: string, options?: Partial<Notification>) => {\n        const payload: Omit<Notification, \"id\" | \"timestamp\"> = {\n          type: \"success\",\n          title,\n        };\n\n        applyNotificationOptions(payload, options);\n\n        if (message !== undefined) {\n          payload.message = message;\n        }\n\n        return store.addNotification(payload);\n      },\n\n      error: (title: string, message?: string, options?: Partial<Notification>) => {\n        const payload: Omit<Notification, \"id\" | \"timestamp\"> = {\n          type: \"error\",\n          title,\n        };\n\n        applyNotificationOptions(payload, options);\n\n        if (payload.persistent === undefined) {\n          payload.persistent = true;\n        }\n\n        if (message !== undefined) {\n          payload.message = message;\n        }\n\n        return store.addNotification(payload);\n      },\n\n      warning: (title: string, message?: string, options?: Partial<Notification>) => {\n        const payload: Omit<Notification, \"id\" | \"timestamp\"> = {\n          type: \"warning\",\n          title,\n        };\n\n        applyNotificationOptions(payload, options);\n\n        if (message !== undefined) {\n          payload.message = message;\n        }\n\n        return store.addNotification(payload);\n      },\n\n      info: (title: string, message?: string, options?: Partial<Notification>) => {\n        const payload: Omit<Notification, \"id\" | \"timestamp\"> = {\n          type: \"info\",\n          title,\n        };\n\n        applyNotificationOptions(payload, options);\n\n        if (message !== undefined) {\n          payload.message = message;\n        }\n\n        return store.addNotification(payload);\n      },\n    }),\n    [store],\n  );\n\n  return {\n    notifications: store.notifications,\n    notify,\n    addNotification: store.addNotification,\n    remove: store.removeNotification,\n    clear: store.clearNotifications,\n    markAsRead: store.markAsRead,\n    update: store.updateNotification,\n  };\n}\n\n// Hook for API error notifications\nexport function useApiErrorNotifications() {\n  const { notify } = useNotifications();\n  const parseApiError = (error: unknown): { status?: number; message?: string } => {\n    if (typeof error === \"object\" && error !== null) {\n      const candidate = error as { status?: number; message?: string };\n      return {\n        status: typeof candidate.status === \"number\" ? candidate.status : undefined,\n        message: typeof candidate.message === \"string\" ? candidate.message : undefined,\n      };\n    }\n    return {};\n  };\n\n  const notifyApiError = useCallback(\n    (error: unknown, context?: string) => {\n      const parsed = parseApiError(error);\n      const status = parsed.status;\n      const isNetworkError = status === 0 || !navigator.onLine;\n      const isServerError = typeof status === \"number\" && status >= 500;\n      const isAuthError = status === 401 || status === 403;\n\n      let title = \"Something went wrong\";\n      let message = parsed.message || \"An unexpected error occurred\";\n\n      if (isNetworkError) {\n        title = \"Connection Problem\";\n        message = \"Unable to connect to our servers. Please check your internet connection.\";\n      } else if (isServerError) {\n        title = \"Server Error\";\n        message = \"Our servers are experiencing issues. Please try again later.\";\n      } else if (isAuthError) {\n        title = \"Authentication Required\";\n        message = \"Please log in to continue.\";\n      }\n\n      const contextMessage = context ? ` while ${context.toLowerCase()}` : \"\";\n\n      return notify.error(title, message + contextMessage, {\n        actions: [\n          {\n            label: \"Retry\",\n            action: () => window.location.reload(),\n          },\n          ...(isAuthError\n            ? [\n                {\n                  label: \"Log In\",\n                  action: () => {\n                    window.location.href = \"/auth/login\";\n                  },\n                  primary: true,\n                },\n              ]\n            : []),\n        ],\n        metadata: {\n          error,\n          context,\n          status,\n          isNetworkError,\n          isServerError,\n          isAuthError,\n        },\n      });\n    },\n    [notify],\n  );\n\n  const notifyApiSuccess = useCallback(\n    (message: string, context?: string) => {\n      const contextMessage = context ? ` ${context}` : \"\";\n\n      return notify.success(\"Success\", message + contextMessage);\n    },\n    [notify],\n  );\n\n  return {\n    notifyApiError,\n    notifyApiSuccess,\n  };\n}\n\n// Hook for handling specific error types\nexport function useErrorNotifications() {\n  const { notify } = useNotifications();\n\n  const notifyNetworkError = useCallback(() => {\n    return notify.error(\"Network Error\", \"Please check your internet connection and try again.\", {\n      actions: [\n        {\n          label: \"Retry\",\n          action: () => window.location.reload(),\n          primary: true,\n        },\n      ],\n    });\n  }, [notify]);\n\n  const notifyValidationError = useCallback(\n    (errors: Record<string, string[]>) => {\n      const errorMessages = Object.values(errors).flat();\n\n      return notify.warning(\n        \"Validation Error\",\n        errorMessages.length === 1\n          ? errorMessages[0]\n          : `${errorMessages.length} validation errors occurred`,\n        {\n          metadata: { errors },\n        },\n      );\n    },\n    [notify],\n  );\n\n  const notifyPermissionError = useCallback(() => {\n    return notify.error(\"Permission Denied\", \"You do not have permission to perform this action.\", {\n      actions: [\n        {\n          label: \"Contact Support\",\n          action: () => {\n            // Navigate to support page\n            window.location.href = \"/support\";\n          },\n        },\n      ],\n    });\n  }, [notify]);\n\n  const notifyMaintenanceMode = useCallback(\n    (estimatedTime?: string) => {\n      return notify.warning(\n        \"Maintenance Mode\",\n        estimatedTime\n          ? `Service will resume at ${estimatedTime}`\n          : \"The service is temporarily unavailable for maintenance.\",\n        {\n          persistent: true,\n          actions: [\n            {\n              label: \"Check Status\",\n              action: () => {\n                window.open(\"https://status.dotmac.com\", \"_blank\");\n              },\n            },\n          ],\n        },\n      );\n    },\n    [notify],\n  );\n\n  return {\n    notifyNetworkError,\n    notifyValidationError,\n    notifyPermissionError,\n    notifyMaintenanceMode,\n  };\n}\n\n// Global error listener hook\nexport function useGlobalErrorListener() {\n  const { notifyApiError } = useApiErrorNotifications();\n\n  useEffect(() => {\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      // Check if it's an API error\n      if (event.reason?.status || event.reason?.message) {\n        notifyApiError(event.reason, \"processing request\");\n      }\n    };\n\n    const handleError = (event: ErrorEvent) => {\n      // Only notify for unexpected errors, not development/console errors\n      if (event.error && !event.error.message?.includes(\"ResizeObserver\")) {\n        notifyApiError(\n          {\n            message: event.error.message || \"An unexpected error occurred\",\n          },\n          \"loading page\",\n        );\n      }\n    };\n\n    window.addEventListener(\"unhandledrejection\", handleUnhandledRejection);\n    window.addEventListener(\"error\", handleError);\n\n    return () => {\n      window.removeEventListener(\"unhandledrejection\", handleUnhandledRejection);\n      window.removeEventListener(\"error\", handleError);\n    };\n  }, [notifyApiError]);\n}\n\nexport { useNotificationStore };\n","/**\n * Base API Client\n * Provides common HTTP operations for all module clients with standardized error handling\n * Integrated with audit logging for comprehensive API tracking\n */\n\nimport { ISPError, ErrorFactory } from \"../../utils/errorUtils\";\n\nexport interface RequestConfig {\n  params?: Record<string, any> | undefined;\n  headers?: Record<string, string>;\n  timeout?: number;\n  retryable?: boolean;\n}\n\nexport interface ApiResponse<T = any> {\n  data: T;\n  status: number;\n  statusText: string;\n  headers: Headers;\n}\n\nexport class BaseApiClient {\n  protected baseURL: string;\n  protected defaultHeaders: Record<string, string>;\n  protected context: string;\n\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}, context = \"API\") {\n    this.baseURL = baseURL;\n    this.defaultHeaders = defaultHeaders;\n    this.context = context;\n  }\n\n  protected async request<T = any>(\n    method: string,\n    endpoint: string,\n    data?: any,\n    config: RequestConfig = {},\n  ): Promise<T> {\n    const url = `${this.baseURL}${endpoint}`;\n    const { params, headers = {}, timeout = 30000, retryable = true } = config;\n\n    // Build query string\n    const searchParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, String(value));\n        }\n      });\n    }\n\n    const finalUrl = searchParams.toString() ? `${url}?${searchParams.toString()}` : url;\n\n    const requestOptions: RequestInit = {\n      method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.defaultHeaders,\n        ...headers,\n      },\n      signal: AbortSignal.timeout(timeout),\n    };\n\n    if (data && method !== \"GET\" && method !== \"HEAD\") {\n      requestOptions.body = JSON.stringify(data);\n    }\n\n    try {\n      const response = await fetch(finalUrl, requestOptions);\n\n      if (!response.ok) {\n        throw this.createHttpError(response, endpoint, method);\n      }\n\n      const contentType = response.headers.get(\"content-type\");\n      if (contentType && contentType.includes(\"application/json\")) {\n        return await response.json();\n      }\n\n      return response as T;\n    } catch (error) {\n      if (error instanceof ISPError) {\n        throw error;\n      }\n\n      // Handle different error types\n      if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n        throw ErrorFactory.network(\n          `Network error for ${method} ${endpoint}: ${error.message}`,\n          `${this.context} - ${endpoint}`,\n        );\n      }\n\n      if ((error as any)?.name === \"AbortError\") {\n        throw new ISPError({\n          message: `Request timeout for ${method} ${endpoint}`,\n          category: \"network\",\n          severity: \"medium\",\n          context: `${this.context} - ${endpoint}`,\n          retryable: retryable,\n          userMessage: \"Request timed out. Please try again.\",\n          technicalDetails: { method, endpoint, timeout },\n        });\n      }\n\n      // Generic error fallback\n      throw ErrorFactory.system(\n        `Request failed for ${method} ${endpoint}: ${(error as any)?.message || \"Unknown error\"}`,\n        `${this.context} - ${endpoint}`,\n      );\n    }\n  }\n\n  private async createHttpError(\n    response: Response,\n    endpoint: string,\n    method: string,\n  ): Promise<ISPError> {\n    let errorDetails: any = {};\n\n    try {\n      const contentType = response.headers.get(\"content-type\");\n      if (contentType?.includes(\"application/json\")) {\n        errorDetails = await response.json();\n      } else {\n        errorDetails.message = await response.text();\n      }\n    } catch {\n      // Ignore errors parsing response body\n    }\n\n    const baseMessage = `${method} ${endpoint} failed with status ${response.status}`;\n    const userMessage = errorDetails.message || response.statusText || \"Request failed\";\n\n    return new ISPError({\n      message: `${baseMessage}: ${userMessage}`,\n      status: response.status,\n      code: errorDetails.code || `HTTP_${response.status}`,\n      category: this.categorizeHttpError(response.status),\n      severity: this.getSeverityForStatus(response.status),\n      context: `${this.context} - ${endpoint}`,\n      retryable: this.isRetryableStatus(response.status),\n      userMessage: this.getUserMessageForStatus(response.status, userMessage),\n      technicalDetails: {\n        method,\n        endpoint,\n        status: response.status,\n        statusText: response.statusText,\n        responseBody: errorDetails,\n      },\n    });\n  }\n\n  private categorizeHttpError(\n    status: number,\n  ):\n    | \"network\"\n    | \"validation\"\n    | \"authentication\"\n    | \"authorization\"\n    | \"business\"\n    | \"system\"\n    | \"unknown\" {\n    if (status === 401) return \"authentication\";\n    if (status === 403) return \"authorization\";\n    if (status === 422 || (status >= 400 && status < 500)) return \"validation\";\n    if (status >= 500) return \"system\";\n    return \"network\";\n  }\n\n  private getSeverityForStatus(status: number): \"low\" | \"medium\" | \"high\" | \"critical\" {\n    if (status === 401 || status === 403) return \"high\";\n    if (status >= 500) return \"critical\";\n    if (status === 429) return \"medium\";\n    if (status >= 400 && status < 500) return \"low\";\n    return \"medium\";\n  }\n\n  private isRetryableStatus(status: number): boolean {\n    // Retry on server errors, rate limits, and some network issues\n    return status >= 500 || status === 429 || status === 408 || status === 0;\n  }\n\n  private getUserMessageForStatus(status: number, serverMessage: string): string {\n    switch (status) {\n      case 401:\n        return \"Please log in again to continue.\";\n      case 403:\n        return \"You don't have permission to perform this action.\";\n      case 404:\n        return \"The requested resource was not found.\";\n      case 409:\n        return \"This action conflicts with the current state. Please refresh and try again.\";\n      case 422:\n        return \"Please check your input and try again.\";\n      case 429:\n        return \"Too many requests. Please wait a moment before trying again.\";\n      case 500:\n        return \"Server error. Please try again in a few minutes.\";\n      case 502:\n      case 503:\n      case 504:\n        return \"Service temporarily unavailable. Please try again later.\";\n      default:\n        return serverMessage || \"Something went wrong. Please try again.\";\n    }\n  }\n\n  protected async get<T = any>(endpoint: string, config?: RequestConfig): Promise<T> {\n    return this.request<T>(\"GET\", endpoint, undefined, config);\n  }\n\n  protected async post<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    return this.request<T>(\"POST\", endpoint, data, config);\n  }\n\n  protected async put<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    return this.request<T>(\"PUT\", endpoint, data, config);\n  }\n\n  protected async patch<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    return this.request<T>(\"PATCH\", endpoint, data, config);\n  }\n\n  protected async delete<T = any>(endpoint: string, config?: RequestConfig): Promise<T> {\n    return this.request<T>(\"DELETE\", endpoint, undefined, config);\n  }\n}\n","/**\n * Identity Management API Client\n * Handles customer, user, and authentication operations\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type {\n  PaginatedResponse,\n  QueryParams,\n  CustomerData,\n  UserData,\n  CreateCustomerRequest,\n  UpdateCustomerRequest,\n} from \"../types/api\";\n\nexport class IdentityApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Customer operations\n  async getCustomers(params?: QueryParams): Promise<PaginatedResponse<CustomerData>> {\n    return this.get(\"/api/identity/customers\", { params });\n  }\n\n  async getCustomer(customerId: string, params?: QueryParams): Promise<{ data: CustomerData }> {\n    return this.get(`/api/identity/customers/${customerId}`, { params });\n  }\n\n  async createCustomer(data: CreateCustomerRequest): Promise<{ data: CustomerData }> {\n    return this.post(\"/api/identity/customers\", data);\n  }\n\n  async updateCustomer(\n    customerId: string,\n    data: UpdateCustomerRequest,\n  ): Promise<{ data: CustomerData }> {\n    return this.put(`/api/identity/customers/${customerId}`, data);\n  }\n\n  async deleteCustomer(customerId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/identity/customers/${customerId}`);\n  }\n\n  // User operations\n  async getUsers(params?: QueryParams): Promise<PaginatedResponse<UserData>> {\n    return this.get(\"/api/identity/users\", { params });\n  }\n\n  async getUser(userId: string): Promise<{ data: UserData }> {\n    return this.get(`/api/identity/users/${userId}`);\n  }\n\n  async createUser(data: any): Promise<{ data: UserData }> {\n    return this.post(\"/api/identity/users\", data);\n  }\n\n  async updateUser(userId: string, data: any): Promise<{ data: UserData }> {\n    return this.put(`/api/identity/users/${userId}`, data);\n  }\n\n  async deleteUser(userId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/identity/users/${userId}`);\n  }\n\n  // Authentication operations\n  async authenticate(credentials: any): Promise<{ data: any }> {\n    return this.post(\"/api/identity/auth/login\", credentials);\n  }\n\n  async logout(): Promise<{ success: boolean }> {\n    return this.post(\"/api/identity/auth/logout\", {});\n  }\n\n  async refreshToken(refreshToken: string): Promise<{ data: any }> {\n    return this.post(\"/api/identity/auth/refresh\", {\n      refresh_token: refreshToken,\n    });\n  }\n}\n","/**\n * Networking Management API Client\n * Handles network devices, topology, and monitoring\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface NetworkDevice {\n  id: string;\n  name: string;\n  type: \"router\" | \"switch\" | \"access_point\" | \"modem\" | \"ont\";\n  status: \"online\" | \"offline\" | \"warning\" | \"error\";\n  ip_address: string;\n  mac_address: string;\n  location: string;\n  last_seen: string;\n  uptime: number;\n  firmware_version: string;\n}\n\nexport interface NetworkTopology {\n  nodes: NetworkDevice[];\n  connections: Array<{\n    source: string;\n    target: string;\n    type: \"physical\" | \"logical\";\n    status: \"active\" | \"inactive\";\n  }>;\n}\n\nexport class NetworkingApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Network device operations\n  async getNetworkDevices(params?: QueryParams): Promise<PaginatedResponse<NetworkDevice>> {\n    return this.get(\"/api/networking/devices\", { params });\n  }\n\n  async getNetworkDevice(deviceId: string): Promise<{ data: NetworkDevice }> {\n    return this.get(`/api/networking/devices/${deviceId}`);\n  }\n\n  async updateNetworkDevice(\n    deviceId: string,\n    data: Partial<NetworkDevice>,\n  ): Promise<{ data: NetworkDevice }> {\n    return this.put(`/api/networking/devices/${deviceId}`, data);\n  }\n\n  async rebootDevice(deviceId: string): Promise<{ success: boolean }> {\n    return this.post(`/api/networking/devices/${deviceId}/reboot`, {});\n  }\n\n  // Network topology operations\n  async getNetworkTopology(params?: {\n    depth?: number;\n    filter?: string;\n  }): Promise<{ data: NetworkTopology }> {\n    return this.get(\"/api/networking/topology\", { params });\n  }\n\n  async discoverDevices(params?: {\n    subnet?: string;\n    timeout?: number;\n  }): Promise<{ data: NetworkDevice[] }> {\n    return this.post(\"/api/networking/discover\", params);\n  }\n\n  // Monitoring operations\n  async getDeviceMetrics(\n    deviceId: string,\n    params?: {\n      start_time?: string;\n      end_time?: string;\n      metrics?: string[];\n    },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/networking/devices/${deviceId}/metrics`, { params });\n  }\n\n  async getNetworkHealth(): Promise<{ data: any }> {\n    return this.get(\"/api/networking/health\");\n  }\n\n  async getDeviceAlerts(params?: {\n    severity?: \"low\" | \"medium\" | \"high\" | \"critical\";\n    status?: \"active\" | \"resolved\";\n    limit?: number;\n  }): Promise<PaginatedResponse<any>> {\n    return this.get(\"/api/networking/alerts\", { params });\n  }\n}\n","/**\n * Billing Management API Client\n * Handles invoices, payments, subscriptions\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\nimport type {\n  PaymentProcessor,\n  Transaction,\n  Invoice,\n  CreatePaymentIntentRequest,\n  PaymentIntent,\n} from \"../../types/billing\";\n\nexport class BillingApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Payment processor operations\n  async getBillingProcessors(params?: QueryParams): Promise<PaginatedResponse<PaymentProcessor>> {\n    return this.get(\"/api/billing/processors\", { params });\n  }\n\n  async updateBillingProcessor(\n    processorId: string,\n    data: any,\n  ): Promise<{ data: PaymentProcessor }> {\n    return this.put(`/api/billing/processors/${processorId}`, data);\n  }\n\n  async testBillingProcessor(processorId: string, params?: any): Promise<{ success: boolean }> {\n    return this.post(`/api/billing/processors/${processorId}/test`, params);\n  }\n\n  // Payment operations\n  async createPaymentIntent(data: CreatePaymentIntentRequest): Promise<{ data: PaymentIntent }> {\n    return this.post(\"/api/billing/payment-intents\", data);\n  }\n\n  async confirmPaymentIntent(data: any): Promise<{ data: PaymentIntent }> {\n    return this.post(\"/api/billing/payment-intents/confirm\", data);\n  }\n\n  async capturePaymentIntent(\n    paymentIntentId: string,\n    data?: any,\n  ): Promise<{ data: PaymentIntent }> {\n    return this.post(`/api/billing/payment-intents/${paymentIntentId}/capture`, data);\n  }\n\n  async cancelPaymentIntent(paymentIntentId: string, data?: any): Promise<{ data: PaymentIntent }> {\n    return this.post(`/api/billing/payment-intents/${paymentIntentId}/cancel`, data);\n  }\n\n  // Transaction operations\n  async getTransactions(params?: QueryParams): Promise<PaginatedResponse<Transaction>> {\n    return this.get(\"/api/billing/transactions\", { params });\n  }\n\n  async getTransaction(transactionId: string, params?: any): Promise<{ data: Transaction }> {\n    return this.get(`/api/billing/transactions/${transactionId}`, { params });\n  }\n\n  async processRefund(data: any): Promise<{ data: Transaction }> {\n    return this.post(\"/api/billing/refunds\", data);\n  }\n\n  // Invoice operations\n  async getInvoices(params?: QueryParams): Promise<PaginatedResponse<Invoice>> {\n    return this.get(\"/api/billing/invoices\", { params });\n  }\n\n  async getInvoice(invoiceId: string): Promise<{ data: Invoice }> {\n    return this.get(`/api/billing/invoices/${invoiceId}`);\n  }\n\n  async createInvoice(data: any): Promise<{ data: Invoice }> {\n    return this.post(\"/api/billing/invoices\", data);\n  }\n\n  // Analytics operations\n  async getBillingAnalytics(params?: any): Promise<{ data: any }> {\n    return this.get(\"/api/billing/analytics\", { params });\n  }\n\n  async generateBillingReport(params?: any): Promise<{ data: Blob }> {\n    return this.post(\"/api/billing/reports\", params);\n  }\n\n  // Utility operations\n  async calculateProcessorFees(processorId: string, params?: any): Promise<{ data: any }> {\n    return this.post(`/api/billing/processors/${processorId}/calculate-fees`, params);\n  }\n\n  async tokenizePaymentMethod(data: any): Promise<{ data: any }> {\n    return this.post(\"/api/billing/tokenize\", data);\n  }\n\n  async encryptBillingData(data: any): Promise<{ data: any }> {\n    return this.post(\"/api/billing/encrypt\", data);\n  }\n}\n","/**\n * Services Management API Client\n * Handles service provisioning, lifecycle management, and configuration\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams, ServiceData, ServicePlanData } from \"../types/api\";\n\nexport interface ServiceOrder {\n  id: string;\n  customer_id: string;\n  service_plan_id: string;\n  status: \"PENDING\" | \"APPROVED\" | \"PROVISIONING\" | \"ACTIVE\" | \"CANCELLED\";\n  installation_date?: string;\n  installation_address: string;\n  technical_requirements?: Record<string, any>;\n  monthly_cost: number;\n  setup_fee: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ServiceProvisioning {\n  id: string;\n  service_order_id: string;\n  status: \"QUEUED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"FAILED\";\n  steps: ProvisioningStep[];\n  assigned_technician?: string;\n  completion_date?: string;\n  notes?: string;\n}\n\nexport interface ProvisioningStep {\n  id: string;\n  name: string;\n  status: \"PENDING\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"FAILED\";\n  description: string;\n  estimated_duration: number;\n  actual_duration?: number;\n  dependencies?: string[];\n}\n\nexport class ServicesApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Service Plans\n  async getServicePlans(params?: QueryParams): Promise<PaginatedResponse<ServicePlanData>> {\n    return this.get(\"/api/services/plans\", { params });\n  }\n\n  async getServicePlan(planId: string): Promise<{ data: ServicePlanData }> {\n    return this.get(`/api/services/plans/${planId}`);\n  }\n\n  async createServicePlan(data: Omit<ServicePlanData, \"id\">): Promise<{ data: ServicePlanData }> {\n    return this.post(\"/api/services/plans\", data);\n  }\n\n  async updateServicePlan(\n    planId: string,\n    data: Partial<ServicePlanData>,\n  ): Promise<{ data: ServicePlanData }> {\n    return this.put(`/api/services/plans/${planId}`, data);\n  }\n\n  // Customer Services\n  async getCustomerServices(\n    customerId: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<ServiceData>> {\n    return this.get(`/api/services/customers/${customerId}/services`, {\n      params,\n    });\n  }\n\n  async activateService(customerId: string, serviceId: string): Promise<{ data: ServiceData }> {\n    return this.post(`/api/services/customers/${customerId}/services/${serviceId}/activate`, {});\n  }\n\n  async suspendService(\n    customerId: string,\n    serviceId: string,\n    reason?: string,\n  ): Promise<{ data: ServiceData }> {\n    return this.post(`/api/services/customers/${customerId}/services/${serviceId}/suspend`, {\n      reason,\n    });\n  }\n\n  async terminateService(\n    customerId: string,\n    serviceId: string,\n    termination_date?: string,\n  ): Promise<{ success: boolean }> {\n    return this.post(`/api/services/customers/${customerId}/services/${serviceId}/terminate`, {\n      termination_date,\n    });\n  }\n\n  // Service Orders\n  async createServiceOrder(\n    data: Omit<ServiceOrder, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: ServiceOrder }> {\n    return this.post(\"/api/services/orders\", data);\n  }\n\n  async getServiceOrders(params?: QueryParams): Promise<PaginatedResponse<ServiceOrder>> {\n    return this.get(\"/api/services/orders\", { params });\n  }\n\n  async getServiceOrder(orderId: string): Promise<{ data: ServiceOrder }> {\n    return this.get(`/api/services/orders/${orderId}`);\n  }\n\n  async updateServiceOrder(\n    orderId: string,\n    data: Partial<ServiceOrder>,\n  ): Promise<{ data: ServiceOrder }> {\n    return this.put(`/api/services/orders/${orderId}`, data);\n  }\n\n  async approveServiceOrder(orderId: string, notes?: string): Promise<{ data: ServiceOrder }> {\n    return this.post(`/api/services/orders/${orderId}/approve`, { notes });\n  }\n\n  async cancelServiceOrder(orderId: string, reason: string): Promise<{ data: ServiceOrder }> {\n    return this.post(`/api/services/orders/${orderId}/cancel`, { reason });\n  }\n\n  // Service Provisioning\n  async getProvisioningStatus(orderIds: string[]): Promise<{ data: ServiceProvisioning[] }> {\n    return this.post(\"/api/services/provisioning/status\", {\n      order_ids: orderIds,\n    });\n  }\n\n  async updateProvisioningStep(\n    provisioningId: string,\n    stepId: string,\n    data: Partial<ProvisioningStep>,\n  ): Promise<{ data: ProvisioningStep }> {\n    return this.put(`/api/services/provisioning/${provisioningId}/steps/${stepId}`, data);\n  }\n\n  // Service Configuration\n  async getServiceConfiguration(serviceId: string): Promise<{ data: Record<string, any> }> {\n    return this.get(`/api/services/${serviceId}/configuration`);\n  }\n\n  async updateServiceConfiguration(\n    serviceId: string,\n    config: Record<string, any>,\n  ): Promise<{ data: Record<string, any> }> {\n    return this.put(`/api/services/${serviceId}/configuration`, config);\n  }\n\n  // Usage and Metrics\n  async getServiceUsage(\n    serviceId: string,\n    params?: { start_date?: string; end_date?: string },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/services/${serviceId}/usage`, { params });\n  }\n\n  async getServiceMetrics(\n    serviceId: string,\n    params?: { metrics?: string[]; period?: string },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/services/${serviceId}/metrics`, { params });\n  }\n}\n","/**\n * Support Management API Client\n * Handles support tickets, knowledge base, and customer assistance\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface SupportTicket {\n  id: string;\n  ticket_number: string;\n  customer_id: string;\n  customer_name: string;\n  subject: string;\n  description: string;\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\";\n  status: \"OPEN\" | \"IN_PROGRESS\" | \"WAITING_CUSTOMER\" | \"RESOLVED\" | \"CLOSED\";\n  category: \"TECHNICAL\" | \"BILLING\" | \"GENERAL\" | \"COMPLAINT\" | \"FEATURE_REQUEST\";\n  assigned_to?: string;\n  assigned_team?: string;\n  tags: string[];\n  attachments: TicketAttachment[];\n  created_at: string;\n  updated_at: string;\n  resolved_at?: string;\n  closed_at?: string;\n}\n\nexport interface TicketComment {\n  id: string;\n  ticket_id: string;\n  author_id: string;\n  author_name: string;\n  author_type: \"CUSTOMER\" | \"AGENT\" | \"SYSTEM\";\n  content: string;\n  internal: boolean;\n  attachments?: TicketAttachment[];\n  created_at: string;\n}\n\nexport interface TicketAttachment {\n  id: string;\n  filename: string;\n  file_size: number;\n  file_type: string;\n  download_url: string;\n  uploaded_by: string;\n  uploaded_at: string;\n}\n\nexport interface KnowledgeArticle {\n  id: string;\n  title: string;\n  content: string;\n  category: string;\n  tags: string[];\n  status: \"DRAFT\" | \"PUBLISHED\" | \"ARCHIVED\";\n  author_id: string;\n  author_name: string;\n  views: number;\n  helpful_votes: number;\n  total_votes: number;\n  created_at: string;\n  updated_at: string;\n  published_at?: string;\n}\n\nexport interface SupportAgent {\n  id: string;\n  name: string;\n  email: string;\n  status: \"AVAILABLE\" | \"BUSY\" | \"AWAY\" | \"OFFLINE\";\n  specializations: string[];\n  current_tickets: number;\n  max_tickets: number;\n  response_time_avg: number;\n  resolution_rate: number;\n}\n\nexport class SupportApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Support Tickets\n  async getTickets(params?: QueryParams): Promise<PaginatedResponse<SupportTicket>> {\n    return this.get(\"/api/support/tickets\", { params });\n  }\n\n  async getTicket(ticketId: string): Promise<{ data: SupportTicket }> {\n    return this.get(`/api/support/tickets/${ticketId}`);\n  }\n\n  async createTicket(\n    data: Omit<SupportTicket, \"id\" | \"ticket_number\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: SupportTicket }> {\n    return this.post(\"/api/support/tickets\", data);\n  }\n\n  async updateTicket(\n    ticketId: string,\n    data: Partial<SupportTicket>,\n  ): Promise<{ data: SupportTicket }> {\n    return this.put(`/api/support/tickets/${ticketId}`, data);\n  }\n\n  async assignTicket(ticketId: string, agentId: string): Promise<{ data: SupportTicket }> {\n    return this.post(`/api/support/tickets/${ticketId}/assign`, {\n      agent_id: agentId,\n    });\n  }\n\n  async closeTicket(ticketId: string, resolution_notes: string): Promise<{ data: SupportTicket }> {\n    return this.post(`/api/support/tickets/${ticketId}/close`, {\n      resolution_notes,\n    });\n  }\n\n  async reopenTicket(ticketId: string, reason: string): Promise<{ data: SupportTicket }> {\n    return this.post(`/api/support/tickets/${ticketId}/reopen`, { reason });\n  }\n\n  // Ticket Comments\n  async getTicketComments(\n    ticketId: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<TicketComment>> {\n    return this.get(`/api/support/tickets/${ticketId}/comments`, { params });\n  }\n\n  async addTicketComment(\n    ticketId: string,\n    data: Omit<TicketComment, \"id\" | \"ticket_id\" | \"created_at\">,\n  ): Promise<{ data: TicketComment }> {\n    return this.post(`/api/support/tickets/${ticketId}/comments`, data);\n  }\n\n  async updateTicketComment(\n    ticketId: string,\n    commentId: string,\n    data: { content: string },\n  ): Promise<{ data: TicketComment }> {\n    return this.put(`/api/support/tickets/${ticketId}/comments/${commentId}`, data);\n  }\n\n  async deleteTicketComment(ticketId: string, commentId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/support/tickets/${ticketId}/comments/${commentId}`);\n  }\n\n  // File Attachments\n  async uploadAttachment(ticketId: string, file: File): Promise<{ data: TicketAttachment }> {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    const response = await fetch(`${this.baseURL}/api/support/tickets/${ticketId}/attachments`, {\n      method: \"POST\",\n      headers: {\n        ...this.defaultHeaders,\n        // Don't set Content-Type, let browser set it for FormData\n      },\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(`Upload failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async deleteAttachment(ticketId: string, attachmentId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/support/tickets/${ticketId}/attachments/${attachmentId}`);\n  }\n\n  // Knowledge Base\n  async getKnowledgeArticles(params?: QueryParams): Promise<PaginatedResponse<KnowledgeArticle>> {\n    return this.get(\"/api/support/knowledge\", { params });\n  }\n\n  async getKnowledgeArticle(articleId: string): Promise<{ data: KnowledgeArticle }> {\n    return this.get(`/api/support/knowledge/${articleId}`);\n  }\n\n  async searchKnowledge(\n    query: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<KnowledgeArticle>> {\n    return this.get(\"/api/support/knowledge/search\", {\n      params: { q: query, ...params },\n    });\n  }\n\n  async createKnowledgeArticle(\n    data: Omit<\n      KnowledgeArticle,\n      \"id\" | \"views\" | \"helpful_votes\" | \"total_votes\" | \"created_at\" | \"updated_at\"\n    >,\n  ): Promise<{ data: KnowledgeArticle }> {\n    return this.post(\"/api/support/knowledge\", data);\n  }\n\n  async updateKnowledgeArticle(\n    articleId: string,\n    data: Partial<KnowledgeArticle>,\n  ): Promise<{ data: KnowledgeArticle }> {\n    return this.put(`/api/support/knowledge/${articleId}`, data);\n  }\n\n  async publishKnowledgeArticle(articleId: string): Promise<{ data: KnowledgeArticle }> {\n    return this.post(`/api/support/knowledge/${articleId}/publish`, {});\n  }\n\n  async voteKnowledgeArticle(\n    articleId: string,\n    helpful: boolean,\n  ): Promise<{ data: KnowledgeArticle }> {\n    return this.post(`/api/support/knowledge/${articleId}/vote`, { helpful });\n  }\n\n  // Support Agents\n  async getSupportAgents(params?: QueryParams): Promise<PaginatedResponse<SupportAgent>> {\n    return this.get(\"/api/support/agents\", { params });\n  }\n\n  async getSupportAgent(agentId: string): Promise<{ data: SupportAgent }> {\n    return this.get(`/api/support/agents/${agentId}`);\n  }\n\n  async updateAgentStatus(\n    agentId: string,\n    status: SupportAgent[\"status\"],\n  ): Promise<{ data: SupportAgent }> {\n    return this.put(`/api/support/agents/${agentId}/status`, { status });\n  }\n\n  // Support Analytics\n  async getSupportMetrics(params?: {\n    start_date?: string;\n    end_date?: string;\n    agent_id?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/support/metrics\", { params });\n  }\n\n  async getTicketStats(): Promise<{ data: any }> {\n    return this.get(\"/api/support/tickets/stats\");\n  }\n\n  async getResponseTimeStats(params?: { period?: string }): Promise<{ data: any }> {\n    return this.get(\"/api/support/response-times\", { params });\n  }\n}\n","/**\n * Resellers & Channel Management API Client\n * Handles partner relationships, commission tracking, and channel sales\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams, AddressData } from \"../types/api\";\n\nexport interface ResellerPartner {\n  id: string;\n  partner_code: string;\n  company_name: string;\n  legal_name: string;\n  partner_type: \"AGENT\" | \"DEALER\" | \"DISTRIBUTOR\" | \"VAR\" | \"REFERRAL\" | \"FRANCHISE\";\n  tier: \"BRONZE\" | \"SILVER\" | \"GOLD\" | \"PLATINUM\" | \"DIAMOND\";\n  status: \"ACTIVE\" | \"INACTIVE\" | \"SUSPENDED\" | \"PENDING_APPROVAL\" | \"TERMINATED\";\n  contact_info: PartnerContact;\n  business_info: BusinessInformation;\n  territories: Territory[];\n  service_authorizations: ServiceAuthorization[];\n  commission_structure: CommissionStructure;\n  performance_metrics: PartnerMetrics;\n  contract_info: ContractInformation;\n  onboarding_status: OnboardingStatus;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface PartnerContact {\n  primary_contact: ContactPerson;\n  billing_contact?: ContactPerson;\n  technical_contact?: ContactPerson;\n  sales_contact?: ContactPerson;\n  address: AddressData;\n  phone: string;\n  email: string;\n  website?: string;\n}\n\nexport interface ContactPerson {\n  name: string;\n  title: string;\n  email: string;\n  phone: string;\n  mobile?: string;\n}\n\nexport interface BusinessInformation {\n  tax_id: string;\n  business_license: string;\n  business_type: \"CORPORATION\" | \"LLC\" | \"PARTNERSHIP\" | \"SOLE_PROPRIETORSHIP\";\n  years_in_business: number;\n  employee_count: number;\n  annual_revenue?: number;\n  credit_rating?: string;\n  bank_references?: BankReference[];\n  insurance_info?: InsuranceInformation;\n}\n\nexport interface BankReference {\n  bank_name: string;\n  account_type: string;\n  years_with_bank: number;\n  contact_person: string;\n  contact_phone: string;\n}\n\nexport interface InsuranceInformation {\n  general_liability: InsurancePolicy;\n  professional_liability?: InsurancePolicy;\n  workers_compensation?: InsurancePolicy;\n}\n\nexport interface InsurancePolicy {\n  provider: string;\n  policy_number: string;\n  coverage_amount: number;\n  expiry_date: string;\n}\n\nexport interface Territory {\n  id: string;\n  name: string;\n  type: \"GEOGRAPHIC\" | \"VERTICAL\" | \"ACCOUNT_BASED\";\n  boundaries: TerritoryBoundary[];\n  exclusive: boolean;\n  population?: number;\n  market_potential?: number;\n}\n\nexport interface TerritoryBoundary {\n  type: \"POSTAL_CODE\" | \"CITY\" | \"COUNTY\" | \"STATE\" | \"COORDINATE\";\n  values: string[];\n  coordinates?: Array<{ latitude: number; longitude: number }>;\n}\n\nexport interface ServiceAuthorization {\n  service_type: \"INTERNET\" | \"VOICE\" | \"TV\" | \"BUNDLE\" | \"ENTERPRISE\";\n  authorized: boolean;\n  training_required: boolean;\n  training_completed: boolean;\n  certification_level: \"BASIC\" | \"INTERMEDIATE\" | \"ADVANCED\" | \"EXPERT\";\n  authorization_date?: string;\n  expiry_date?: string;\n}\n\nexport interface CommissionStructure {\n  commission_type: \"PERCENTAGE\" | \"FLAT_RATE\" | \"TIERED\" | \"HYBRID\";\n  base_commission_rate: number;\n  tiers?: CommissionTier[];\n  bonus_structures?: BonusStructure[];\n  payment_terms: \"NET_30\" | \"NET_45\" | \"NET_60\" | \"IMMEDIATE\";\n  minimum_payout: number;\n  effective_date: string;\n  expiry_date?: string;\n}\n\nexport interface CommissionTier {\n  tier_name: string;\n  sales_threshold: number;\n  commission_rate: number;\n  bonus_multiplier?: number;\n}\n\nexport interface BonusStructure {\n  bonus_type: \"VOLUME\" | \"RETENTION\" | \"NEW_CUSTOMER\" | \"UPSELL\" | \"REFERRAL\";\n  threshold: number;\n  bonus_amount: number;\n  bonus_percentage?: number;\n  calculation_period: \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\";\n}\n\nexport interface PartnerMetrics {\n  total_sales: number;\n  monthly_sales: number;\n  quarterly_sales: number;\n  annual_sales: number;\n  customer_count: number;\n  active_customers: number;\n  churned_customers: number;\n  average_deal_size: number;\n  conversion_rate: number;\n  customer_satisfaction: number;\n  performance_score: number;\n  ranking: number;\n  last_sale_date?: string;\n}\n\nexport interface ContractInformation {\n  contract_number: string;\n  contract_type: \"STANDARD\" | \"CUSTOM\" | \"ENTERPRISE\";\n  start_date: string;\n  end_date?: string;\n  auto_renewal: boolean;\n  renewal_terms: string;\n  termination_notice_days: number;\n  exclusivity_clause: boolean;\n  non_compete_clause: boolean;\n  contract_documents: ContractDocument[];\n}\n\nexport interface ContractDocument {\n  document_type: \"AGREEMENT\" | \"AMENDMENT\" | \"ADDENDUM\" | \"TERMINATION\";\n  document_name: string;\n  file_url: string;\n  signed_date?: string;\n  effective_date: string;\n  version: string;\n}\n\nexport interface OnboardingStatus {\n  stage: \"APPLICATION\" | \"REVIEW\" | \"BACKGROUND_CHECK\" | \"TRAINING\" | \"CERTIFICATION\" | \"COMPLETED\";\n  progress_percentage: number;\n  completed_steps: string[];\n  pending_steps: string[];\n  assigned_onboarding_manager?: string;\n  estimated_completion_date?: string;\n  notes?: string;\n}\n\nexport interface Sale {\n  id: string;\n  sale_number: string;\n  partner_id: string;\n  customer_id: string;\n  customer_name: string;\n  sale_type: \"NEW_CUSTOMER\" | \"UPGRADE\" | \"DOWNGRADE\" | \"ADD_ON\" | \"RENEWAL\";\n  products: SaleProduct[];\n  total_value: number;\n  commission_amount: number;\n  commission_rate: number;\n  sale_date: string;\n  activation_date?: string;\n  status: \"PENDING\" | \"APPROVED\" | \"ACTIVATED\" | \"CANCELLED\" | \"REFUNDED\";\n  payment_status: \"PENDING\" | \"PAID\" | \"PARTIALLY_PAID\" | \"OVERDUE\" | \"CANCELLED\";\n  notes?: string;\n  created_at: string;\n}\n\nexport interface SaleProduct {\n  product_id: string;\n  product_name: string;\n  product_type: \"SERVICE\" | \"EQUIPMENT\" | \"INSTALLATION\" | \"SUPPORT\";\n  quantity: number;\n  unit_price: number;\n  total_price: number;\n  commission_rate: number;\n  commission_amount: number;\n  recurring: boolean;\n  billing_cycle?: \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\";\n}\n\nexport interface CommissionPayment {\n  id: string;\n  payment_number: string;\n  partner_id: string;\n  period_start: string;\n  period_end: string;\n  sales_included: string[];\n  gross_commission: number;\n  deductions: PaymentDeduction[];\n  net_commission: number;\n  payment_date?: string;\n  payment_method: \"ACH\" | \"WIRE\" | \"CHECK\" | \"CREDIT\";\n  status: \"CALCULATED\" | \"APPROVED\" | \"PAID\" | \"DISPUTED\" | \"CANCELLED\";\n  payment_reference?: string;\n  created_at: string;\n}\n\nexport interface PaymentDeduction {\n  type: \"TAX\" | \"CHARGEBACK\" | \"ADJUSTMENT\" | \"FEE\" | \"PENALTY\";\n  description: string;\n  amount: number;\n  reference?: string;\n}\n\nexport interface PartnerTraining {\n  id: string;\n  training_name: string;\n  training_type: \"ONBOARDING\" | \"PRODUCT\" | \"SALES\" | \"TECHNICAL\" | \"COMPLIANCE\";\n  description: string;\n  required: boolean;\n  duration_hours: number;\n  delivery_method: \"ONLINE\" | \"IN_PERSON\" | \"WEBINAR\" | \"SELF_PACED\";\n  prerequisites?: string[];\n  certification_provided: boolean;\n  expiry_period?: number;\n  materials: TrainingMaterial[];\n}\n\nexport interface TrainingMaterial {\n  type: \"VIDEO\" | \"DOCUMENT\" | \"QUIZ\" | \"PRESENTATION\" | \"INTERACTIVE\";\n  title: string;\n  description: string;\n  url: string;\n  duration?: number;\n  required: boolean;\n}\n\nexport interface PartnerTrainingRecord {\n  id: string;\n  partner_id: string;\n  training_id: string;\n  status: \"NOT_STARTED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"EXPIRED\" | \"FAILED\";\n  start_date?: string;\n  completion_date?: string;\n  score?: number;\n  passing_score: number;\n  certificate_url?: string;\n  expiry_date?: string;\n  notes?: string;\n}\n\nexport class ResellersApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Partner Management\n  async getPartners(params?: QueryParams): Promise<PaginatedResponse<ResellerPartner>> {\n    return this.get(\"/api/resellers/partners\", { params });\n  }\n\n  async getPartner(partnerId: string): Promise<{ data: ResellerPartner }> {\n    return this.get(`/api/resellers/partners/${partnerId}`);\n  }\n\n  async createPartner(\n    data: Omit<\n      ResellerPartner,\n      \"id\" | \"partner_code\" | \"performance_metrics\" | \"created_at\" | \"updated_at\"\n    >,\n  ): Promise<{ data: ResellerPartner }> {\n    return this.post(\"/api/resellers/partners\", data);\n  }\n\n  async updatePartner(\n    partnerId: string,\n    data: Partial<ResellerPartner>,\n  ): Promise<{ data: ResellerPartner }> {\n    return this.put(`/api/resellers/partners/${partnerId}`, data);\n  }\n\n  async activatePartner(partnerId: string): Promise<{ data: ResellerPartner }> {\n    return this.post(`/api/resellers/partners/${partnerId}/activate`, {});\n  }\n\n  async suspendPartner(partnerId: string, reason: string): Promise<{ data: ResellerPartner }> {\n    return this.post(`/api/resellers/partners/${partnerId}/suspend`, {\n      reason,\n    });\n  }\n\n  async terminatePartner(\n    partnerId: string,\n    data: {\n      termination_reason: string;\n      effective_date: string;\n      final_commission_calculation: boolean;\n      notice_provided: boolean;\n    },\n  ): Promise<{ data: ResellerPartner }> {\n    return this.post(`/api/resellers/partners/${partnerId}/terminate`, data);\n  }\n\n  // Territory Management\n  async getPartnerTerritories(partnerId: string): Promise<{ data: Territory[] }> {\n    return this.get(`/api/resellers/partners/${partnerId}/territories`);\n  }\n\n  async assignTerritory(\n    partnerId: string,\n    territoryData: Omit<Territory, \"id\">,\n  ): Promise<{ data: Territory }> {\n    return this.post(`/api/resellers/partners/${partnerId}/territories`, territoryData);\n  }\n\n  async updateTerritory(\n    partnerId: string,\n    territoryId: string,\n    data: Partial<Territory>,\n  ): Promise<{ data: Territory }> {\n    return this.put(`/api/resellers/partners/${partnerId}/territories/${territoryId}`, data);\n  }\n\n  async removeTerritory(partnerId: string, territoryId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/resellers/partners/${partnerId}/territories/${territoryId}`);\n  }\n\n  async checkTerritoryConflicts(territoryData: Territory): Promise<{\n    data: {\n      conflicts: Array<{\n        partner_id: string;\n        territory_id: string;\n        overlap_percentage: number;\n      }>;\n    };\n  }> {\n    return this.post(\"/api/resellers/territories/check-conflicts\", territoryData);\n  }\n\n  // Sales Management\n  async getSales(\n    params?: QueryParams & {\n      partner_id?: string;\n      start_date?: string;\n      end_date?: string;\n      status?: string;\n    },\n  ): Promise<PaginatedResponse<Sale>> {\n    return this.get(\"/api/resellers/sales\", { params });\n  }\n\n  async getSale(saleId: string): Promise<{ data: Sale }> {\n    return this.get(`/api/resellers/sales/${saleId}`);\n  }\n\n  async createSale(\n    data: Omit<Sale, \"id\" | \"sale_number\" | \"commission_amount\" | \"commission_rate\" | \"created_at\">,\n  ): Promise<{ data: Sale }> {\n    return this.post(\"/api/resellers/sales\", data);\n  }\n\n  async updateSale(saleId: string, data: Partial<Sale>): Promise<{ data: Sale }> {\n    return this.put(`/api/resellers/sales/${saleId}`, data);\n  }\n\n  async approveSale(saleId: string, approvalNotes?: string): Promise<{ data: Sale }> {\n    return this.post(`/api/resellers/sales/${saleId}/approve`, {\n      approval_notes: approvalNotes,\n    });\n  }\n\n  async cancelSale(saleId: string, cancellationReason: string): Promise<{ data: Sale }> {\n    return this.post(`/api/resellers/sales/${saleId}/cancel`, {\n      cancellation_reason: cancellationReason,\n    });\n  }\n\n  async getPartnerSales(partnerId: string, params?: QueryParams): Promise<PaginatedResponse<Sale>> {\n    return this.get(`/api/resellers/partners/${partnerId}/sales`, { params });\n  }\n\n  // Commission Management\n  async calculateCommissions(\n    partnerId: string,\n    period: { start_date: string; end_date: string },\n  ): Promise<{ data: CommissionPayment }> {\n    return this.post(`/api/resellers/partners/${partnerId}/calculate-commissions`, period);\n  }\n\n  async getCommissionPayments(\n    params?: QueryParams & {\n      partner_id?: string;\n      status?: string;\n      start_date?: string;\n      end_date?: string;\n    },\n  ): Promise<PaginatedResponse<CommissionPayment>> {\n    return this.get(\"/api/resellers/commissions\", { params });\n  }\n\n  async getCommissionPayment(paymentId: string): Promise<{ data: CommissionPayment }> {\n    return this.get(`/api/resellers/commissions/${paymentId}`);\n  }\n\n  async approveCommissionPayment(\n    paymentId: string,\n    approvalNotes?: string,\n  ): Promise<{ data: CommissionPayment }> {\n    return this.post(`/api/resellers/commissions/${paymentId}/approve`, {\n      approval_notes: approvalNotes,\n    });\n  }\n\n  async processCommissionPayment(\n    paymentId: string,\n    paymentDetails: {\n      payment_method: CommissionPayment[\"payment_method\"];\n      payment_reference: string;\n      payment_date: string;\n    },\n  ): Promise<{ data: CommissionPayment }> {\n    return this.post(`/api/resellers/commissions/${paymentId}/process`, paymentDetails);\n  }\n\n  async disputeCommissionPayment(\n    paymentId: string,\n    disputeReason: string,\n  ): Promise<{ data: CommissionPayment }> {\n    return this.post(`/api/resellers/commissions/${paymentId}/dispute`, {\n      dispute_reason: disputeReason,\n    });\n  }\n\n  async getPartnerCommissionStatement(\n    partnerId: string,\n    params: {\n      start_date: string;\n      end_date: string;\n      format?: \"PDF\" | \"CSV\" | \"JSON\";\n    },\n  ): Promise<{ data: { statement_url: string } }> {\n    return this.get(`/api/resellers/partners/${partnerId}/commission-statement`, { params });\n  }\n\n  // Training & Certification\n  async getTrainingPrograms(params?: QueryParams): Promise<PaginatedResponse<PartnerTraining>> {\n    return this.get(\"/api/resellers/training/programs\", { params });\n  }\n\n  async getTrainingProgram(trainingId: string): Promise<{ data: PartnerTraining }> {\n    return this.get(`/api/resellers/training/programs/${trainingId}`);\n  }\n\n  async getPartnerTrainingRecords(\n    partnerId: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<PartnerTrainingRecord>> {\n    return this.get(`/api/resellers/partners/${partnerId}/training`, {\n      params,\n    });\n  }\n\n  async enrollPartnerInTraining(\n    partnerId: string,\n    trainingId: string,\n  ): Promise<{ data: PartnerTrainingRecord }> {\n    return this.post(`/api/resellers/partners/${partnerId}/training/${trainingId}/enroll`, {});\n  }\n\n  async updateTrainingProgress(\n    partnerId: string,\n    trainingRecordId: string,\n    data: {\n      progress_percentage?: number;\n      completed_materials?: string[];\n      quiz_scores?: Record<string, number>;\n    },\n  ): Promise<{ data: PartnerTrainingRecord }> {\n    return this.put(`/api/resellers/training-records/${trainingRecordId}/progress`, data);\n  }\n\n  async completeTraining(\n    partnerId: string,\n    trainingRecordId: string,\n    finalScore: number,\n  ): Promise<{ data: PartnerTrainingRecord }> {\n    return this.post(`/api/resellers/training-records/${trainingRecordId}/complete`, {\n      final_score: finalScore,\n    });\n  }\n\n  // Performance Analytics\n  async getPartnerPerformance(\n    partnerId: string,\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      metrics?: string[];\n    },\n  ): Promise<{\n    data: PartnerMetrics & {\n      sales_trend: any[];\n      commission_trend: any[];\n      customer_acquisition_trend: any[];\n    };\n  }> {\n    return this.get(`/api/resellers/partners/${partnerId}/performance`, {\n      params,\n    });\n  }\n\n  async getChannelPerformance(params?: {\n    start_date?: string;\n    end_date?: string;\n    territory?: string;\n    partner_tier?: string;\n  }): Promise<{\n    data: {\n      total_partners: number;\n      active_partners: number;\n      total_sales: number;\n      total_commissions: number;\n      top_performers: Array<{\n        partner_id: string;\n        partner_name: string;\n        sales_amount: number;\n        ranking: number;\n      }>;\n      performance_by_tier: any[];\n      sales_by_region: any[];\n    };\n  }> {\n    return this.get(\"/api/resellers/analytics/channel-performance\", { params });\n  }\n\n  async getPartnerLeaderboard(params?: {\n    metric?: \"SALES\" | \"CUSTOMERS\" | \"COMMISSION\" | \"SATISFACTION\";\n    period?: \"MONTH\" | \"QUARTER\" | \"YEAR\";\n    territory?: string;\n    tier?: string;\n    limit?: number;\n  }): Promise<{\n    data: Array<{\n      rank: number;\n      partner_id: string;\n      partner_name: string;\n      metric_value: number;\n      change_from_previous: number;\n    }>;\n  }> {\n    return this.get(\"/api/resellers/analytics/leaderboard\", { params });\n  }\n\n  // Onboarding Management\n  async updateOnboardingStatus(\n    partnerId: string,\n    data: {\n      stage: OnboardingStatus[\"stage\"];\n      completed_steps?: string[];\n      notes?: string;\n    },\n  ): Promise<{ data: ResellerPartner }> {\n    return this.put(`/api/resellers/partners/${partnerId}/onboarding`, data);\n  }\n\n  async assignOnboardingManager(\n    partnerId: string,\n    managerId: string,\n  ): Promise<{ data: ResellerPartner }> {\n    return this.post(`/api/resellers/partners/${partnerId}/assign-onboarding-manager`, {\n      manager_id: managerId,\n    });\n  }\n\n  async getOnboardingChecklist(partnerId: string): Promise<{\n    data: Array<{\n      step_name: string;\n      description: string;\n      required: boolean;\n      completed: boolean;\n      completion_date?: string;\n      dependencies?: string[];\n    }>;\n  }> {\n    return this.get(`/api/resellers/partners/${partnerId}/onboarding-checklist`);\n  }\n\n  // Document Management\n  async uploadPartnerDocument(\n    partnerId: string,\n    file: File,\n    documentType: string,\n  ): Promise<{ data: ContractDocument }> {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"document_type\", documentType);\n\n    const response = await fetch(`${this.baseURL}/api/resellers/partners/${partnerId}/documents`, {\n      method: \"POST\",\n      headers: this.defaultHeaders,\n      body: formData,\n    });\n\n    if (!response.ok) {\n      throw new Error(`Document upload failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async getPartnerDocuments(partnerId: string): Promise<{ data: ContractDocument[] }> {\n    return this.get(`/api/resellers/partners/${partnerId}/documents`);\n  }\n\n  async signDocument(\n    partnerId: string,\n    documentId: string,\n    signatureData: {\n      signature_method: \"ELECTRONIC\" | \"WET_SIGNATURE\" | \"DOCUSIGN\";\n      signer_name: string;\n      signature_date: string;\n      ip_address?: string;\n    },\n  ): Promise<{ data: ContractDocument }> {\n    return this.post(\n      `/api/resellers/partners/${partnerId}/documents/${documentId}/sign`,\n      signatureData,\n    );\n  }\n}\n","/**\n * Field Operations API Client\n * Handles technician dispatch, work orders, and field service management\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams, AddressData } from \"../types/api\";\n\nexport interface Technician {\n  id: string;\n  employee_id: string;\n  name: string;\n  email: string;\n  phone: string;\n  status: \"AVAILABLE\" | \"BUSY\" | \"ON_BREAK\" | \"OFF_DUTY\" | \"UNAVAILABLE\";\n  skills: TechnicianSkill[];\n  certifications: Certification[];\n  territories: string[];\n  current_location?: GeoLocation;\n  truck_inventory?: string[];\n  shift_start?: string;\n  shift_end?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TechnicianSkill {\n  skill_id: string;\n  skill_name: string;\n  proficiency_level: \"BEGINNER\" | \"INTERMEDIATE\" | \"ADVANCED\" | \"EXPERT\";\n  certified: boolean;\n  certification_date?: string;\n}\n\nexport interface Certification {\n  id: string;\n  name: string;\n  issuing_authority: string;\n  issue_date: string;\n  expiry_date?: string;\n  status: \"VALID\" | \"EXPIRED\" | \"SUSPENDED\";\n}\n\nexport interface GeoLocation {\n  latitude: number;\n  longitude: number;\n  accuracy?: number;\n  timestamp: string;\n  address?: string;\n}\n\nexport interface FieldWorkOrder {\n  id: string;\n  work_order_number: string;\n  type:\n    | \"INSTALLATION\"\n    | \"MAINTENANCE\"\n    | \"REPAIR\"\n    | \"UPGRADE\"\n    | \"DISCONNECT\"\n    | \"SURVEY\"\n    | \"EMERGENCY\";\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\" | \"EMERGENCY\";\n  status:\n    | \"CREATED\"\n    | \"SCHEDULED\"\n    | \"ASSIGNED\"\n    | \"EN_ROUTE\"\n    | \"ON_SITE\"\n    | \"IN_PROGRESS\"\n    | \"COMPLETED\"\n    | \"CANCELLED\";\n  customer_id: string;\n  customer_name: string;\n  customer_phone: string;\n  service_address: AddressData;\n  description: string;\n  special_instructions?: string;\n  estimated_duration: number;\n  scheduled_start: string;\n  scheduled_end: string;\n  assigned_technician?: TechnicianAssignment;\n  required_skills: string[];\n  required_equipment: EquipmentRequirement[];\n  completion_notes?: string;\n  customer_signature?: string;\n  photos?: WorkOrderPhoto[];\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TechnicianAssignment {\n  technician_id: string;\n  technician_name: string;\n  assigned_at: string;\n  accepted_at?: string;\n  started_at?: string;\n  completed_at?: string;\n  travel_time?: number;\n  on_site_time?: number;\n}\n\nexport interface EquipmentRequirement {\n  item_sku: string;\n  quantity: number;\n  required: boolean;\n  alternatives?: string[];\n  assigned_items?: string[];\n}\n\nexport interface WorkOrderPhoto {\n  id: string;\n  url: string;\n  caption?: string;\n  photo_type: \"BEFORE\" | \"AFTER\" | \"PROBLEM\" | \"SOLUTION\" | \"DOCUMENTATION\";\n  uploaded_at: string;\n}\n\nexport interface Route {\n  id: string;\n  technician_id: string;\n  date: string;\n  work_orders: RouteStop[];\n  optimized: boolean;\n  total_distance: number;\n  estimated_duration: number;\n  status: \"PLANNED\" | \"ACTIVE\" | \"COMPLETED\";\n  created_at: string;\n}\n\nexport interface RouteStop {\n  work_order_id: string;\n  sequence: number;\n  estimated_arrival: string;\n  actual_arrival?: string;\n  estimated_departure: string;\n  actual_departure?: string;\n  travel_time_to_next?: number;\n  distance_to_next?: number;\n}\n\nexport interface TimeEntry {\n  id: string;\n  technician_id: string;\n  work_order_id?: string;\n  entry_type: \"WORK\" | \"TRAVEL\" | \"BREAK\" | \"TRAINING\" | \"ADMIN\" | \"OVERTIME\";\n  start_time: string;\n  end_time?: string;\n  duration?: number;\n  description?: string;\n  location?: GeoLocation;\n  billable: boolean;\n  approved: boolean;\n}\n\nexport interface ServiceCall {\n  id: string;\n  call_number: string;\n  customer_id: string;\n  customer_name: string;\n  call_type: \"TECHNICAL_SUPPORT\" | \"SERVICE_REQUEST\" | \"COMPLAINT\" | \"EMERGENCY\";\n  urgency: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  description: string;\n  resolution_required: boolean;\n  estimated_resolution_time?: number;\n  assigned_technician?: string;\n  status: \"OPEN\" | \"ASSIGNED\" | \"IN_PROGRESS\" | \"RESOLVED\" | \"CLOSED\";\n  created_at: string;\n  resolved_at?: string;\n}\n\nexport class FieldOpsApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Technicians\n  async getTechnicians(params?: QueryParams): Promise<PaginatedResponse<Technician>> {\n    return this.get(\"/api/field-ops/technicians\", { params });\n  }\n\n  async getTechnician(technicianId: string): Promise<{ data: Technician }> {\n    return this.get(`/api/field-ops/technicians/${technicianId}`);\n  }\n\n  async createTechnician(\n    data: Omit<Technician, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: Technician }> {\n    return this.post(\"/api/field-ops/technicians\", data);\n  }\n\n  async updateTechnician(\n    technicianId: string,\n    data: Partial<Technician>,\n  ): Promise<{ data: Technician }> {\n    return this.put(`/api/field-ops/technicians/${technicianId}`, data);\n  }\n\n  async updateTechnicianStatus(\n    technicianId: string,\n    status: Technician[\"status\"],\n  ): Promise<{ data: Technician }> {\n    return this.put(`/api/field-ops/technicians/${technicianId}/status`, {\n      status,\n    });\n  }\n\n  async updateTechnicianLocation(\n    technicianId: string,\n    location: GeoLocation,\n  ): Promise<{ data: Technician }> {\n    return this.put(`/api/field-ops/technicians/${technicianId}/location`, location);\n  }\n\n  async getAvailableTechnicians(params?: {\n    skills?: string[];\n    territory?: string;\n    date?: string;\n    time_range?: { start: string; end: string };\n  }): Promise<{ data: Technician[] }> {\n    return this.get(\"/api/field-ops/technicians/available\", { params });\n  }\n\n  // Work Orders\n  async getWorkOrders(params?: QueryParams): Promise<PaginatedResponse<FieldWorkOrder>> {\n    return this.get(\"/api/field-ops/work-orders\", { params });\n  }\n\n  async getWorkOrder(workOrderId: string): Promise<{ data: FieldWorkOrder }> {\n    return this.get(`/api/field-ops/work-orders/${workOrderId}`);\n  }\n\n  async createWorkOrder(\n    data: Omit<FieldWorkOrder, \"id\" | \"work_order_number\" | \"status\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.post(\"/api/field-ops/work-orders\", data);\n  }\n\n  async updateWorkOrder(\n    workOrderId: string,\n    data: Partial<FieldWorkOrder>,\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.put(`/api/field-ops/work-orders/${workOrderId}`, data);\n  }\n\n  async assignWorkOrder(\n    workOrderId: string,\n    technicianId: string,\n    notes?: string,\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.post(`/api/field-ops/work-orders/${workOrderId}/assign`, {\n      technician_id: technicianId,\n      notes,\n    });\n  }\n\n  async acceptWorkOrder(\n    workOrderId: string,\n    technicianId: string,\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.post(`/api/field-ops/work-orders/${workOrderId}/accept`, {\n      technician_id: technicianId,\n    });\n  }\n\n  async startWorkOrder(\n    workOrderId: string,\n    location?: GeoLocation,\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.post(`/api/field-ops/work-orders/${workOrderId}/start`, {\n      location,\n    });\n  }\n\n  async completeWorkOrder(\n    workOrderId: string,\n    data: {\n      completion_notes: string;\n      customer_signature?: string;\n      equipment_used?: string[];\n      time_spent: number;\n      location?: GeoLocation;\n    },\n  ): Promise<{ data: FieldWorkOrder }> {\n    return this.post(`/api/field-ops/work-orders/${workOrderId}/complete`, data);\n  }\n\n  async cancelWorkOrder(workOrderId: string, reason: string): Promise<{ data: FieldWorkOrder }> {\n    return this.post(`/api/field-ops/work-orders/${workOrderId}/cancel`, {\n      reason,\n    });\n  }\n\n  // Work Order Photos\n  async uploadWorkOrderPhoto(\n    workOrderId: string,\n    file: File,\n    photoType: WorkOrderPhoto[\"photo_type\"],\n    caption?: string,\n  ): Promise<{ data: WorkOrderPhoto }> {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"photo_type\", photoType);\n    if (caption) formData.append(\"caption\", caption);\n\n    const response = await fetch(\n      `${this.baseURL}/api/field-ops/work-orders/${workOrderId}/photos`,\n      {\n        method: \"POST\",\n        headers: this.defaultHeaders,\n        body: formData,\n      },\n    );\n\n    if (!response.ok) {\n      throw new Error(`Photo upload failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async deleteWorkOrderPhoto(workOrderId: string, photoId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/field-ops/work-orders/${workOrderId}/photos/${photoId}`);\n  }\n\n  // Routing & Scheduling\n  async createRoute(\n    technicianId: string,\n    date: string,\n    workOrderIds: string[],\n  ): Promise<{ data: Route }> {\n    return this.post(\"/api/field-ops/routes\", {\n      technician_id: technicianId,\n      date,\n      work_order_ids: workOrderIds,\n    });\n  }\n\n  async optimizeRoute(routeId: string): Promise<{ data: Route }> {\n    return this.post(`/api/field-ops/routes/${routeId}/optimize`, {});\n  }\n\n  async getTechnicianRoute(technicianId: string, date: string): Promise<{ data: Route | null }> {\n    return this.get(`/api/field-ops/technicians/${technicianId}/route`, {\n      params: { date },\n    });\n  }\n\n  async updateRouteStop(\n    routeId: string,\n    stopId: string,\n    data: Partial<RouteStop>,\n  ): Promise<{ data: RouteStop }> {\n    return this.put(`/api/field-ops/routes/${routeId}/stops/${stopId}`, data);\n  }\n\n  // Time Tracking\n  async startTimeEntry(\n    data: Omit<TimeEntry, \"id\" | \"end_time\" | \"duration\">,\n  ): Promise<{ data: TimeEntry }> {\n    return this.post(\"/api/field-ops/time-entries\", data);\n  }\n\n  async endTimeEntry(\n    timeEntryId: string,\n    endTime: string,\n    location?: GeoLocation,\n  ): Promise<{ data: TimeEntry }> {\n    return this.put(`/api/field-ops/time-entries/${timeEntryId}/end`, {\n      end_time: endTime,\n      location,\n    });\n  }\n\n  async getTechnicianTimeEntries(\n    technicianId: string,\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      entry_type?: string;\n    },\n  ): Promise<PaginatedResponse<TimeEntry>> {\n    return this.get(`/api/field-ops/technicians/${technicianId}/time-entries`, {\n      params,\n    });\n  }\n\n  async approveTimeEntries(\n    timeEntryIds: string[],\n  ): Promise<{ data: { approved: number; rejected: number } }> {\n    return this.post(\"/api/field-ops/time-entries/approve\", {\n      time_entry_ids: timeEntryIds,\n    });\n  }\n\n  // Service Calls\n  async getServiceCalls(params?: QueryParams): Promise<PaginatedResponse<ServiceCall>> {\n    return this.get(\"/api/field-ops/service-calls\", { params });\n  }\n\n  async createServiceCall(\n    data: Omit<ServiceCall, \"id\" | \"call_number\" | \"status\" | \"created_at\">,\n  ): Promise<{ data: ServiceCall }> {\n    return this.post(\"/api/field-ops/service-calls\", data);\n  }\n\n  async assignServiceCall(callId: string, technicianId: string): Promise<{ data: ServiceCall }> {\n    return this.post(`/api/field-ops/service-calls/${callId}/assign`, {\n      technician_id: technicianId,\n    });\n  }\n\n  async escalateServiceCall(\n    callId: string,\n    reason: string,\n    escalateTo: string,\n  ): Promise<{ data: ServiceCall }> {\n    return this.post(`/api/field-ops/service-calls/${callId}/escalate`, {\n      reason,\n      escalate_to: escalateTo,\n    });\n  }\n\n  async resolveServiceCall(callId: string, resolution: string): Promise<{ data: ServiceCall }> {\n    return this.post(`/api/field-ops/service-calls/${callId}/resolve`, {\n      resolution,\n    });\n  }\n\n  // Analytics & Reporting\n  async getTechnicianPerformance(\n    technicianId: string,\n    params?: {\n      start_date?: string;\n      end_date?: string;\n    },\n  ): Promise<{\n    data: {\n      work_orders_completed: number;\n      average_completion_time: number;\n      customer_satisfaction: number;\n      efficiency_rating: number;\n      on_time_percentage: number;\n    };\n  }> {\n    return this.get(`/api/field-ops/technicians/${technicianId}/performance`, {\n      params,\n    });\n  }\n\n  async getFieldOpsMetrics(params?: {\n    start_date?: string;\n    end_date?: string;\n    territory?: string;\n  }): Promise<{\n    data: {\n      total_work_orders: number;\n      completed_work_orders: number;\n      average_resolution_time: number;\n      first_time_fix_rate: number;\n      technician_utilization: number;\n      customer_satisfaction: number;\n    };\n  }> {\n    return this.get(\"/api/field-ops/metrics\", { params });\n  }\n\n  async getDispatchMetrics(date: string): Promise<{\n    data: {\n      scheduled_appointments: number;\n      completed_appointments: number;\n      cancelled_appointments: number;\n      emergency_calls: number;\n      technicians_active: number;\n      average_travel_time: number;\n    };\n  }> {\n    return this.get(\"/api/field-ops/dispatch/metrics\", { params: { date } });\n  }\n\n  // Emergency & Priority Services\n  async createEmergencyWorkOrder(data: {\n    customer_id: string;\n    description: string;\n    location: AddressData;\n    contact_phone: string;\n    severity: \"MINOR\" | \"MAJOR\" | \"CRITICAL\";\n  }): Promise<{ data: FieldWorkOrder }> {\n    return this.post(\"/api/field-ops/emergency/work-order\", data);\n  }\n\n  async dispatchNearestTechnician(\n    location: GeoLocation,\n    skills?: string[],\n  ): Promise<{\n    data: {\n      technician: Technician;\n      estimated_arrival: string;\n      distance: number;\n    };\n  }> {\n    return this.post(\"/api/field-ops/dispatch/nearest\", { location, skills });\n  }\n\n  async broadcastUrgentCall(data: {\n    message: string;\n    location: GeoLocation;\n    skills_required?: string[];\n    max_distance?: number;\n  }): Promise<{ data: { technicians_notified: number } }> {\n    return this.post(\"/api/field-ops/broadcast/urgent\", data);\n  }\n}\n","/**\n * Notifications & Messaging API Client\n * Handles multi-channel communication, alerts, and notification management\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface NotificationTemplate {\n  id: string;\n  name: string;\n  description: string;\n  template_type: \"EMAIL\" | \"SMS\" | \"PUSH\" | \"IN_APP\" | \"WEBHOOK\" | \"VOICE\";\n  category: \"BILLING\" | \"SERVICE\" | \"MARKETING\" | \"SYSTEM\" | \"EMERGENCY\" | \"SUPPORT\";\n  subject?: string;\n  content: string;\n  variables: TemplateVariable[];\n  channels: NotificationChannel[];\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\";\n  active: boolean;\n  version: number;\n  created_by: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TemplateVariable {\n  name: string;\n  type: \"STRING\" | \"NUMBER\" | \"DATE\" | \"BOOLEAN\" | \"URL\";\n  description: string;\n  required: boolean;\n  default_value?: string;\n  format?: string;\n}\n\nexport interface NotificationChannel {\n  type: \"EMAIL\" | \"SMS\" | \"PUSH\" | \"IN_APP\" | \"WEBHOOK\" | \"VOICE\";\n  enabled: boolean;\n  priority: number;\n  retry_attempts: number;\n  retry_delay: number;\n  fallback_channel?: string;\n  configuration: Record<string, any>;\n}\n\nexport interface Notification {\n  id: string;\n  template_id?: string;\n  recipient_id: string;\n  recipient_type: \"CUSTOMER\" | \"USER\" | \"TECHNICIAN\" | \"ADMIN\" | \"SYSTEM\";\n  recipient_contact: {\n    email?: string;\n    phone?: string;\n    device_token?: string;\n    webhook_url?: string;\n  };\n  channel: NotificationChannel[\"type\"];\n  status: \"PENDING\" | \"SENT\" | \"DELIVERED\" | \"FAILED\" | \"EXPIRED\" | \"CANCELLED\";\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\" | \"EMERGENCY\";\n  subject?: string;\n  message: string;\n  data?: Record<string, any>;\n  scheduled_at?: string;\n  sent_at?: string;\n  delivered_at?: string;\n  failed_reason?: string;\n  retry_count: number;\n  max_retries: number;\n  expires_at?: string;\n  read_at?: string;\n  clicked_at?: string;\n  created_at: string;\n}\n\nexport interface NotificationCampaign {\n  id: string;\n  name: string;\n  description: string;\n  campaign_type: \"BROADCAST\" | \"TARGETED\" | \"SCHEDULED\" | \"TRIGGERED\";\n  template_id: string;\n  target_audience: AudienceFilter;\n  channels: NotificationChannel[\"type\"][];\n  scheduling: CampaignScheduling;\n  status: \"DRAFT\" | \"SCHEDULED\" | \"RUNNING\" | \"PAUSED\" | \"COMPLETED\" | \"CANCELLED\";\n  metrics: CampaignMetrics;\n  created_by: string;\n  created_at: string;\n  started_at?: string;\n  completed_at?: string;\n}\n\nexport interface AudienceFilter {\n  customer_segments?: string[];\n  user_roles?: string[];\n  territories?: string[];\n  service_types?: string[];\n  custom_filters?: Record<string, any>;\n  exclude_opted_out: boolean;\n  max_recipients?: number;\n}\n\nexport interface CampaignScheduling {\n  schedule_type: \"IMMEDIATE\" | \"SCHEDULED\" | \"RECURRING\";\n  start_date?: string;\n  end_date?: string;\n  time_zone: string;\n  recurrence?: {\n    frequency: \"DAILY\" | \"WEEKLY\" | \"MONTHLY\";\n    interval: number;\n    days_of_week?: number[];\n    days_of_month?: number[];\n  };\n  send_time_optimization: boolean;\n}\n\nexport interface CampaignMetrics {\n  total_recipients: number;\n  sent_count: number;\n  delivered_count: number;\n  failed_count: number;\n  opened_count: number;\n  clicked_count: number;\n  unsubscribed_count: number;\n  bounce_count: number;\n  delivery_rate: number;\n  open_rate: number;\n  click_rate: number;\n  unsubscribe_rate: number;\n}\n\nexport interface Alert {\n  id: string;\n  alert_type: \"SYSTEM\" | \"BILLING\" | \"NETWORK\" | \"SERVICE\" | \"SECURITY\" | \"MAINTENANCE\";\n  severity: \"INFO\" | \"WARNING\" | \"ERROR\" | \"CRITICAL\";\n  title: string;\n  message: string;\n  source: string;\n  affected_entities?: string[];\n  actions_required?: string[];\n  auto_resolve: boolean;\n  resolved: boolean;\n  acknowledged: boolean;\n  acknowledged_by?: string;\n  acknowledged_at?: string;\n  resolved_at?: string;\n  escalation_rules: EscalationRule[];\n  metadata: Record<string, any>;\n  created_at: string;\n}\n\nexport interface EscalationRule {\n  level: number;\n  delay_minutes: number;\n  notify_roles: string[];\n  notify_users: string[];\n  escalation_message?: string;\n  triggered: boolean;\n  triggered_at?: string;\n}\n\nexport interface NotificationPreference {\n  id: string;\n  user_id: string;\n  category: NotificationTemplate[\"category\"];\n  channels: {\n    email: { enabled: boolean; address?: string };\n    sms: { enabled: boolean; number?: string };\n    push: { enabled: boolean };\n    in_app: { enabled: boolean };\n  };\n  quiet_hours?: {\n    enabled: boolean;\n    start_time: string;\n    end_time: string;\n    time_zone: string;\n  };\n  frequency_limits?: {\n    max_per_hour?: number;\n    max_per_day?: number;\n  };\n  keywords_to_filter?: string[];\n  updated_at: string;\n}\n\nexport class NotificationsApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Templates\n  async getTemplates(params?: QueryParams): Promise<PaginatedResponse<NotificationTemplate>> {\n    return this.get(\"/api/notifications/templates\", { params });\n  }\n\n  async getTemplate(templateId: string): Promise<{ data: NotificationTemplate }> {\n    return this.get(`/api/notifications/templates/${templateId}`);\n  }\n\n  async createTemplate(\n    data: Omit<NotificationTemplate, \"id\" | \"version\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: NotificationTemplate }> {\n    return this.post(\"/api/notifications/templates\", data);\n  }\n\n  async updateTemplate(\n    templateId: string,\n    data: Partial<NotificationTemplate>,\n  ): Promise<{ data: NotificationTemplate }> {\n    return this.put(`/api/notifications/templates/${templateId}`, data);\n  }\n\n  async deleteTemplate(templateId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/notifications/templates/${templateId}`);\n  }\n\n  async testTemplate(\n    templateId: string,\n    testData: {\n      recipient: string;\n      channel: NotificationChannel[\"type\"];\n      variables?: Record<string, any>;\n    },\n  ): Promise<{ data: { success: boolean; preview?: string } }> {\n    return this.post(`/api/notifications/templates/${templateId}/test`, testData);\n  }\n\n  async previewTemplate(\n    templateId: string,\n    variables?: Record<string, any>,\n  ): Promise<{\n    data: { rendered_content: string; rendered_subject?: string };\n  }> {\n    return this.post(`/api/notifications/templates/${templateId}/preview`, {\n      variables,\n    });\n  }\n\n  // Notifications\n  async getNotifications(\n    params?: QueryParams & {\n      recipient_id?: string;\n      status?: string;\n      channel?: string;\n      start_date?: string;\n      end_date?: string;\n    },\n  ): Promise<PaginatedResponse<Notification>> {\n    return this.get(\"/api/notifications\", { params });\n  }\n\n  async getNotification(notificationId: string): Promise<{ data: Notification }> {\n    return this.get(`/api/notifications/${notificationId}`);\n  }\n\n  async sendNotification(data: {\n    template_id?: string;\n    recipient_id: string;\n    recipient_contact: Notification[\"recipient_contact\"];\n    channel: NotificationChannel[\"type\"];\n    subject?: string;\n    message?: string;\n    variables?: Record<string, any>;\n    priority?: Notification[\"priority\"];\n    scheduled_at?: string;\n    expires_at?: string;\n  }): Promise<{ data: Notification }> {\n    return this.post(\"/api/notifications/send\", data);\n  }\n\n  async sendBulkNotifications(data: {\n    template_id?: string;\n    recipients: Array<{\n      recipient_id: string;\n      recipient_contact: Notification[\"recipient_contact\"];\n      variables?: Record<string, any>;\n    }>;\n    channel: NotificationChannel[\"type\"];\n    subject?: string;\n    message?: string;\n    priority?: Notification[\"priority\"];\n    scheduled_at?: string;\n  }): Promise<{ data: { notifications_created: number; batch_id: string } }> {\n    return this.post(\"/api/notifications/send-bulk\", data);\n  }\n\n  async cancelNotification(notificationId: string): Promise<{ data: Notification }> {\n    return this.post(`/api/notifications/${notificationId}/cancel`, {});\n  }\n\n  async retryNotification(notificationId: string): Promise<{ data: Notification }> {\n    return this.post(`/api/notifications/${notificationId}/retry`, {});\n  }\n\n  async markAsRead(notificationId: string): Promise<{ data: Notification }> {\n    return this.post(`/api/notifications/${notificationId}/read`, {});\n  }\n\n  async trackClick(notificationId: string, linkUrl?: string): Promise<{ data: Notification }> {\n    return this.post(`/api/notifications/${notificationId}/click`, {\n      link_url: linkUrl,\n    });\n  }\n\n  // Campaigns\n  async getCampaigns(params?: QueryParams): Promise<PaginatedResponse<NotificationCampaign>> {\n    return this.get(\"/api/notifications/campaigns\", { params });\n  }\n\n  async getCampaign(campaignId: string): Promise<{ data: NotificationCampaign }> {\n    return this.get(`/api/notifications/campaigns/${campaignId}`);\n  }\n\n  async createCampaign(\n    data: Omit<NotificationCampaign, \"id\" | \"status\" | \"metrics\" | \"created_at\">,\n  ): Promise<{ data: NotificationCampaign }> {\n    return this.post(\"/api/notifications/campaigns\", data);\n  }\n\n  async updateCampaign(\n    campaignId: string,\n    data: Partial<NotificationCampaign>,\n  ): Promise<{ data: NotificationCampaign }> {\n    return this.put(`/api/notifications/campaigns/${campaignId}`, data);\n  }\n\n  async startCampaign(campaignId: string): Promise<{ data: NotificationCampaign }> {\n    return this.post(`/api/notifications/campaigns/${campaignId}/start`, {});\n  }\n\n  async pauseCampaign(campaignId: string): Promise<{ data: NotificationCampaign }> {\n    return this.post(`/api/notifications/campaigns/${campaignId}/pause`, {});\n  }\n\n  async resumeCampaign(campaignId: string): Promise<{ data: NotificationCampaign }> {\n    return this.post(`/api/notifications/campaigns/${campaignId}/resume`, {});\n  }\n\n  async cancelCampaign(\n    campaignId: string,\n    reason?: string,\n  ): Promise<{ data: NotificationCampaign }> {\n    return this.post(`/api/notifications/campaigns/${campaignId}/cancel`, {\n      reason,\n    });\n  }\n\n  async getCampaignMetrics(campaignId: string): Promise<{ data: CampaignMetrics }> {\n    return this.get(`/api/notifications/campaigns/${campaignId}/metrics`);\n  }\n\n  async getCampaignRecipients(\n    campaignId: string,\n    params?: QueryParams,\n  ): Promise<\n    PaginatedResponse<{\n      recipient_id: string;\n      recipient_contact: Notification[\"recipient_contact\"];\n      status: Notification[\"status\"];\n      sent_at?: string;\n      delivered_at?: string;\n    }>\n  > {\n    return this.get(`/api/notifications/campaigns/${campaignId}/recipients`, {\n      params,\n    });\n  }\n\n  // Alerts\n  async getAlerts(\n    params?: QueryParams & {\n      alert_type?: string;\n      severity?: string;\n      resolved?: boolean;\n      acknowledged?: boolean;\n    },\n  ): Promise<PaginatedResponse<Alert>> {\n    return this.get(\"/api/notifications/alerts\", { params });\n  }\n\n  async getAlert(alertId: string): Promise<{ data: Alert }> {\n    return this.get(`/api/notifications/alerts/${alertId}`);\n  }\n\n  async createAlert(\n    data: Omit<Alert, \"id\" | \"resolved\" | \"acknowledged\" | \"created_at\">,\n  ): Promise<{ data: Alert }> {\n    return this.post(\"/api/notifications/alerts\", data);\n  }\n\n  async acknowledgeAlert(alertId: string, acknowledgementNote?: string): Promise<{ data: Alert }> {\n    return this.post(`/api/notifications/alerts/${alertId}/acknowledge`, {\n      note: acknowledgementNote,\n    });\n  }\n\n  async resolveAlert(alertId: string, resolutionNote?: string): Promise<{ data: Alert }> {\n    return this.post(`/api/notifications/alerts/${alertId}/resolve`, {\n      note: resolutionNote,\n    });\n  }\n\n  async escalateAlert(alertId: string, escalationLevel?: number): Promise<{ data: Alert }> {\n    return this.post(`/api/notifications/alerts/${alertId}/escalate`, {\n      level: escalationLevel,\n    });\n  }\n\n  async snoozeAlert(alertId: string, snoozeUntil: string): Promise<{ data: Alert }> {\n    return this.post(`/api/notifications/alerts/${alertId}/snooze`, {\n      snooze_until: snoozeUntil,\n    });\n  }\n\n  // User Preferences\n  async getUserPreferences(userId: string): Promise<{ data: NotificationPreference[] }> {\n    return this.get(`/api/notifications/users/${userId}/preferences`);\n  }\n\n  async updateUserPreferences(\n    userId: string,\n    preferences: Partial<NotificationPreference>[],\n  ): Promise<{ data: NotificationPreference[] }> {\n    return this.put(`/api/notifications/users/${userId}/preferences`, {\n      preferences,\n    });\n  }\n\n  async optOut(userId: string, categories: string[]): Promise<{ data: { success: boolean } }> {\n    return this.post(`/api/notifications/users/${userId}/opt-out`, {\n      categories,\n    });\n  }\n\n  async optIn(userId: string, categories: string[]): Promise<{ data: { success: boolean } }> {\n    return this.post(`/api/notifications/users/${userId}/opt-in`, {\n      categories,\n    });\n  }\n\n  // Channel Management\n  async getChannelStatus(): Promise<{\n    data: Array<{\n      channel: NotificationChannel[\"type\"];\n      status: \"HEALTHY\" | \"DEGRADED\" | \"DOWN\";\n      last_success: string;\n      error_rate: number;\n      throughput: number;\n    }>;\n  }> {\n    return this.get(\"/api/notifications/channels/status\");\n  }\n\n  async testChannelConfiguration(\n    channel: NotificationChannel[\"type\"],\n    config: Record<string, any>,\n  ): Promise<{ data: { success: boolean; error?: string } }> {\n    return this.post(\"/api/notifications/channels/test\", {\n      channel,\n      configuration: config,\n    });\n  }\n\n  // Analytics & Reporting\n  async getNotificationMetrics(params?: {\n    start_date?: string;\n    end_date?: string;\n    channel?: string;\n    template_id?: string;\n  }): Promise<{\n    data: {\n      total_sent: number;\n      delivery_rate: number;\n      open_rate: number;\n      click_rate: number;\n      bounce_rate: number;\n      unsubscribe_rate: number;\n      trends: any[];\n    };\n  }> {\n    return this.get(\"/api/notifications/metrics\", { params });\n  }\n\n  async getChannelPerformance(params?: { start_date?: string; end_date?: string }): Promise<{\n    data: Array<{\n      channel: NotificationChannel[\"type\"];\n      sent_count: number;\n      delivered_count: number;\n      failed_count: number;\n      delivery_rate: number;\n      average_delivery_time: number;\n    }>;\n  }> {\n    return this.get(\"/api/notifications/analytics/channel-performance\", {\n      params,\n    });\n  }\n\n  async getEngagementAnalytics(params?: {\n    start_date?: string;\n    end_date?: string;\n    segment?: string;\n  }): Promise<{\n    data: {\n      engagement_by_time: any[];\n      engagement_by_channel: any[];\n      top_performing_templates: any[];\n      user_engagement_segments: any[];\n    };\n  }> {\n    return this.get(\"/api/notifications/analytics/engagement\", { params });\n  }\n\n  // Webhooks & Real-time\n  async subscribeToNotificationEvents(\n    webhookUrl: string,\n    events: string[],\n  ): Promise<{ data: { subscription_id: string } }> {\n    return this.post(\"/api/notifications/webhooks/subscribe\", {\n      webhook_url: webhookUrl,\n      events,\n    });\n  }\n\n  async unsubscribeFromNotificationEvents(\n    subscriptionId: string,\n  ): Promise<{ data: { success: boolean } }> {\n    return this.delete(`/api/notifications/webhooks/subscriptions/${subscriptionId}`);\n  }\n}\n","/**\n * Compliance & Regulatory API Client\n * Handles regulatory compliance, audit trails, and policy management\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface CompliancePolicy {\n  id: string;\n  name: string;\n  description: string;\n  policy_type: \"REGULATORY\" | \"INTERNAL\" | \"INDUSTRY\" | \"CONTRACTUAL\";\n  regulation_framework:\n    | \"FCC\"\n    | \"GDPR\"\n    | \"CCPA\"\n    | \"SOX\"\n    | \"HIPAA\"\n    | \"ISO27001\"\n    | \"SOC2\"\n    | \"PCI_DSS\"\n    | \"CUSTOM\";\n  effective_date: string;\n  expiry_date?: string;\n  status: \"DRAFT\" | \"ACTIVE\" | \"SUSPENDED\" | \"EXPIRED\";\n  requirements: PolicyRequirement[];\n  controls: ComplianceControl[];\n  created_by: string;\n  approved_by?: string;\n  approved_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface PolicyRequirement {\n  id: string;\n  title: string;\n  description: string;\n  requirement_type:\n    | \"DATA_PROTECTION\"\n    | \"ACCESS_CONTROL\"\n    | \"AUDIT_LOGGING\"\n    | \"INCIDENT_RESPONSE\"\n    | \"DOCUMENTATION\"\n    | \"TRAINING\";\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  compliance_status: \"COMPLIANT\" | \"NON_COMPLIANT\" | \"PARTIAL\" | \"NOT_ASSESSED\";\n  evidence_required: string[];\n  responsible_party: string;\n  due_date?: string;\n  last_assessed?: string;\n}\n\nexport interface ComplianceControl {\n  id: string;\n  control_id: string;\n  name: string;\n  description: string;\n  control_type: \"PREVENTIVE\" | \"DETECTIVE\" | \"CORRECTIVE\" | \"COMPENSATING\";\n  implementation_status: \"NOT_IMPLEMENTED\" | \"PLANNED\" | \"IN_PROGRESS\" | \"IMPLEMENTED\" | \"TESTED\";\n  effectiveness: \"EFFECTIVE\" | \"INEFFECTIVE\" | \"NEEDS_IMPROVEMENT\" | \"NOT_TESTED\";\n  test_frequency: \"CONTINUOUS\" | \"DAILY\" | \"WEEKLY\" | \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\";\n  last_tested?: string;\n  next_test_date?: string;\n  owner: string;\n}\n\nexport interface AuditLog {\n  id: string;\n  event_type: string;\n  resource_type: string;\n  resource_id: string;\n  user_id?: string;\n  user_email?: string;\n  action: \"CREATE\" | \"READ\" | \"UPDATE\" | \"DELETE\" | \"LOGIN\" | \"LOGOUT\" | \"ACCESS\" | \"EXPORT\";\n  details: Record<string, any>;\n  ip_address?: string;\n  user_agent?: string;\n  session_id?: string;\n  tenant_id?: string;\n  risk_level: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  timestamp: string;\n}\n\nexport interface DataPrivacyRequest {\n  id: string;\n  request_type:\n    | \"ACCESS\"\n    | \"RECTIFICATION\"\n    | \"ERASURE\"\n    | \"PORTABILITY\"\n    | \"RESTRICTION\"\n    | \"OBJECTION\";\n  customer_id: string;\n  customer_email: string;\n  request_details: string;\n  legal_basis?: string;\n  status: \"SUBMITTED\" | \"VERIFIED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"REJECTED\";\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"URGENT\";\n  assigned_to?: string;\n  verification_method?: string;\n  completion_deadline: string;\n  data_categories: string[];\n  systems_involved: string[];\n  notes?: string;\n  submitted_at: string;\n  completed_at?: string;\n}\n\nexport interface IncidentReport {\n  id: string;\n  incident_type:\n    | \"DATA_BREACH\"\n    | \"PRIVACY_VIOLATION\"\n    | \"SECURITY_INCIDENT\"\n    | \"COMPLIANCE_VIOLATION\"\n    | \"SYSTEM_FAILURE\";\n  severity: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  status: \"REPORTED\" | \"INVESTIGATING\" | \"CONTAINED\" | \"RESOLVED\" | \"CLOSED\";\n  title: string;\n  description: string;\n  affected_systems: string[];\n  affected_customers?: number;\n  data_categories_affected?: string[];\n  discovered_at: string;\n  reported_by: string;\n  assigned_to?: string;\n  containment_actions: string[];\n  corrective_actions: string[];\n  regulatory_notification_required: boolean;\n  regulatory_notifications: RegulatoryNotification[];\n  lessons_learned?: string;\n  created_at: string;\n  resolved_at?: string;\n}\n\nexport interface RegulatoryNotification {\n  id: string;\n  authority: string;\n  notification_type: string;\n  status: \"PENDING\" | \"SUBMITTED\" | \"ACKNOWLEDGED\" | \"UNDER_REVIEW\" | \"CLOSED\";\n  submitted_at?: string;\n  reference_number?: string;\n  response_deadline?: string;\n  notes?: string;\n}\n\nexport interface ComplianceAssessment {\n  id: string;\n  assessment_name: string;\n  framework: CompliancePolicy[\"regulation_framework\"];\n  scope: string;\n  assessment_type: \"SELF_ASSESSMENT\" | \"INTERNAL_AUDIT\" | \"EXTERNAL_AUDIT\" | \"CERTIFICATION\";\n  status: \"PLANNED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"CANCELLED\";\n  start_date: string;\n  end_date?: string;\n  assessor: string;\n  findings: AssessmentFinding[];\n  overall_score?: number;\n  compliance_percentage?: number;\n  recommendations: string[];\n  action_plan: ActionItem[];\n  created_at: string;\n}\n\nexport interface AssessmentFinding {\n  id: string;\n  control_id: string;\n  finding_type: \"DEFICIENCY\" | \"OBSERVATION\" | \"STRENGTH\" | \"RECOMMENDATION\";\n  severity: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  title: string;\n  description: string;\n  evidence: string[];\n  risk_rating: number;\n  remediation_required: boolean;\n  remediation_timeline?: string;\n}\n\nexport interface ActionItem {\n  id: string;\n  title: string;\n  description: string;\n  priority: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  assigned_to: string;\n  due_date: string;\n  status: \"OPEN\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"OVERDUE\";\n  progress_notes?: string[];\n  completion_evidence?: string[];\n}\n\nexport class ComplianceApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Compliance Policies\n  async getPolicies(params?: QueryParams): Promise<PaginatedResponse<CompliancePolicy>> {\n    return this.get(\"/api/compliance/policies\", { params });\n  }\n\n  async getPolicy(policyId: string): Promise<{ data: CompliancePolicy }> {\n    return this.get(`/api/compliance/policies/${policyId}`);\n  }\n\n  async createPolicy(\n    data: Omit<CompliancePolicy, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: CompliancePolicy }> {\n    return this.post(\"/api/compliance/policies\", data);\n  }\n\n  async updatePolicy(\n    policyId: string,\n    data: Partial<CompliancePolicy>,\n  ): Promise<{ data: CompliancePolicy }> {\n    return this.put(`/api/compliance/policies/${policyId}`, data);\n  }\n\n  async approvePolicy(\n    policyId: string,\n    approvalNotes?: string,\n  ): Promise<{ data: CompliancePolicy }> {\n    return this.post(`/api/compliance/policies/${policyId}/approve`, {\n      approval_notes: approvalNotes,\n    });\n  }\n\n  async suspendPolicy(policyId: string, reason: string): Promise<{ data: CompliancePolicy }> {\n    return this.post(`/api/compliance/policies/${policyId}/suspend`, {\n      reason,\n    });\n  }\n\n  // Compliance Controls\n  async testControl(\n    controlId: string,\n    testResults: {\n      test_date: string;\n      effectiveness: ComplianceControl[\"effectiveness\"];\n      test_evidence: string[];\n      notes?: string;\n    },\n  ): Promise<{ data: ComplianceControl }> {\n    return this.post(`/api/compliance/controls/${controlId}/test`, testResults);\n  }\n\n  async getControlStatus(params?: {\n    framework?: string;\n    control_type?: string;\n  }): Promise<{ data: ComplianceControl[] }> {\n    return this.get(\"/api/compliance/controls/status\", { params });\n  }\n\n  async scheduleControlTest(\n    controlId: string,\n    scheduledDate: string,\n  ): Promise<{ data: ComplianceControl }> {\n    return this.post(`/api/compliance/controls/${controlId}/schedule-test`, {\n      scheduled_date: scheduledDate,\n    });\n  }\n\n  // Audit Logs\n  async getAuditLogs(\n    params?: QueryParams & {\n      event_type?: string;\n      user_id?: string;\n      resource_type?: string;\n      start_date?: string;\n      end_date?: string;\n      risk_level?: string;\n    },\n  ): Promise<PaginatedResponse<AuditLog>> {\n    return this.get(\"/api/compliance/audit-logs\", { params });\n  }\n\n  async getAuditLog(logId: string): Promise<{ data: AuditLog }> {\n    return this.get(`/api/compliance/audit-logs/${logId}`);\n  }\n\n  async exportAuditLogs(params: {\n    start_date: string;\n    end_date: string;\n    format: \"CSV\" | \"JSON\" | \"PDF\";\n    filters?: Record<string, any>;\n  }): Promise<{ data: { export_id: string; download_url: string } }> {\n    return this.post(\"/api/compliance/audit-logs/export\", params);\n  }\n\n  async searchAuditLogs(\n    query: string,\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      event_types?: string[];\n    },\n  ): Promise<PaginatedResponse<AuditLog>> {\n    return this.post(\"/api/compliance/audit-logs/search\", { query, ...params });\n  }\n\n  // Data Privacy Requests\n  async getPrivacyRequests(params?: QueryParams): Promise<PaginatedResponse<DataPrivacyRequest>> {\n    return this.get(\"/api/compliance/privacy-requests\", { params });\n  }\n\n  async getPrivacyRequest(requestId: string): Promise<{ data: DataPrivacyRequest }> {\n    return this.get(`/api/compliance/privacy-requests/${requestId}`);\n  }\n\n  async createPrivacyRequest(\n    data: Omit<DataPrivacyRequest, \"id\" | \"status\" | \"submitted_at\">,\n  ): Promise<{ data: DataPrivacyRequest }> {\n    return this.post(\"/api/compliance/privacy-requests\", data);\n  }\n\n  async verifyPrivacyRequest(\n    requestId: string,\n    verificationMethod: string,\n  ): Promise<{ data: DataPrivacyRequest }> {\n    return this.post(`/api/compliance/privacy-requests/${requestId}/verify`, {\n      verification_method: verificationMethod,\n    });\n  }\n\n  async processPrivacyRequest(\n    requestId: string,\n    data: {\n      processing_notes: string;\n      data_extracted?: any[];\n      data_deleted?: string[];\n      data_modified?: any[];\n    },\n  ): Promise<{ data: DataPrivacyRequest }> {\n    return this.post(`/api/compliance/privacy-requests/${requestId}/process`, data);\n  }\n\n  async completePrivacyRequest(\n    requestId: string,\n    completionNotes: string,\n  ): Promise<{ data: DataPrivacyRequest }> {\n    return this.post(`/api/compliance/privacy-requests/${requestId}/complete`, {\n      completion_notes: completionNotes,\n    });\n  }\n\n  // Incident Management\n  async getIncidents(params?: QueryParams): Promise<PaginatedResponse<IncidentReport>> {\n    return this.get(\"/api/compliance/incidents\", { params });\n  }\n\n  async getIncident(incidentId: string): Promise<{ data: IncidentReport }> {\n    return this.get(`/api/compliance/incidents/${incidentId}`);\n  }\n\n  async createIncident(\n    data: Omit<IncidentReport, \"id\" | \"status\" | \"created_at\">,\n  ): Promise<{ data: IncidentReport }> {\n    return this.post(\"/api/compliance/incidents\", data);\n  }\n\n  async updateIncident(\n    incidentId: string,\n    data: Partial<IncidentReport>,\n  ): Promise<{ data: IncidentReport }> {\n    return this.put(`/api/compliance/incidents/${incidentId}`, data);\n  }\n\n  async escalateIncident(\n    incidentId: string,\n    escalationReason: string,\n    escalateTo: string,\n  ): Promise<{ data: IncidentReport }> {\n    return this.post(`/api/compliance/incidents/${incidentId}/escalate`, {\n      escalation_reason: escalationReason,\n      escalate_to: escalateTo,\n    });\n  }\n\n  async resolveIncident(\n    incidentId: string,\n    resolution: {\n      resolution_summary: string;\n      corrective_actions_taken: string[];\n      lessons_learned: string;\n      follow_up_required: boolean;\n    },\n  ): Promise<{ data: IncidentReport }> {\n    return this.post(`/api/compliance/incidents/${incidentId}/resolve`, resolution);\n  }\n\n  // Regulatory Notifications\n  async submitRegulatoryNotification(\n    incidentId: string,\n    notification: {\n      authority: string;\n      notification_type: string;\n      notification_data: Record<string, any>;\n    },\n  ): Promise<{ data: RegulatoryNotification }> {\n    return this.post(`/api/compliance/incidents/${incidentId}/notify`, notification);\n  }\n\n  async trackNotificationStatus(notificationId: string): Promise<{ data: RegulatoryNotification }> {\n    return this.get(`/api/compliance/notifications/${notificationId}`);\n  }\n\n  // Compliance Assessments\n  async getAssessments(params?: QueryParams): Promise<PaginatedResponse<ComplianceAssessment>> {\n    return this.get(\"/api/compliance/assessments\", { params });\n  }\n\n  async getAssessment(assessmentId: string): Promise<{ data: ComplianceAssessment }> {\n    return this.get(`/api/compliance/assessments/${assessmentId}`);\n  }\n\n  async createAssessment(\n    data: Omit<ComplianceAssessment, \"id\" | \"status\" | \"findings\" | \"action_plan\" | \"created_at\">,\n  ): Promise<{ data: ComplianceAssessment }> {\n    return this.post(\"/api/compliance/assessments\", data);\n  }\n\n  async addAssessmentFinding(\n    assessmentId: string,\n    finding: Omit<AssessmentFinding, \"id\">,\n  ): Promise<{ data: AssessmentFinding }> {\n    return this.post(`/api/compliance/assessments/${assessmentId}/findings`, finding);\n  }\n\n  async updateAssessmentFinding(\n    assessmentId: string,\n    findingId: string,\n    data: Partial<AssessmentFinding>,\n  ): Promise<{ data: AssessmentFinding }> {\n    return this.put(`/api/compliance/assessments/${assessmentId}/findings/${findingId}`, data);\n  }\n\n  async completeAssessment(\n    assessmentId: string,\n    data: {\n      overall_score: number;\n      compliance_percentage: number;\n      recommendations: string[];\n      final_report?: string;\n    },\n  ): Promise<{ data: ComplianceAssessment }> {\n    return this.post(`/api/compliance/assessments/${assessmentId}/complete`, data);\n  }\n\n  // Action Items\n  async createActionItem(\n    assessmentId: string,\n    actionItem: Omit<ActionItem, \"id\" | \"status\">,\n  ): Promise<{ data: ActionItem }> {\n    return this.post(`/api/compliance/assessments/${assessmentId}/action-items`, actionItem);\n  }\n\n  async updateActionItem(\n    actionItemId: string,\n    data: Partial<ActionItem>,\n  ): Promise<{ data: ActionItem }> {\n    return this.put(`/api/compliance/action-items/${actionItemId}`, data);\n  }\n\n  async completeActionItem(\n    actionItemId: string,\n    completionEvidence: string[],\n  ): Promise<{ data: ActionItem }> {\n    return this.post(`/api/compliance/action-items/${actionItemId}/complete`, {\n      completion_evidence: completionEvidence,\n    });\n  }\n\n  // Compliance Dashboard & Reporting\n  async getComplianceDashboard(framework?: string): Promise<{\n    data: {\n      overall_compliance_score: number;\n      policies_active: number;\n      controls_effective: number;\n      open_incidents: number;\n      pending_privacy_requests: number;\n      overdue_action_items: number;\n      recent_assessments: ComplianceAssessment[];\n      compliance_trends: any[];\n    };\n  }> {\n    return this.get(\"/api/compliance/dashboard\", { params: { framework } });\n  }\n\n  async generateComplianceReport(params: {\n    framework: string;\n    report_type: \"COMPLIANCE_STATUS\" | \"AUDIT_SUMMARY\" | \"INCIDENT_ANALYSIS\" | \"RISK_ASSESSMENT\";\n    start_date?: string;\n    end_date?: string;\n    format: \"PDF\" | \"HTML\" | \"JSON\";\n  }): Promise<{ data: { report_id: string; download_url: string } }> {\n    return this.post(\"/api/compliance/reports/generate\", params);\n  }\n\n  async getComplianceMetrics(params?: {\n    framework?: string;\n    start_date?: string;\n    end_date?: string;\n  }): Promise<{\n    data: {\n      compliance_score_trend: any[];\n      incidents_by_type: any[];\n      control_effectiveness: any[];\n      privacy_request_resolution_time: any[];\n    };\n  }> {\n    return this.get(\"/api/compliance/metrics\", { params });\n  }\n}\n","/**\n * Licensing & Software Activation API Client\n * Handles software licensing, activation, and compliance management\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface SoftwareLicense {\n  id: string;\n  license_key: string;\n  product_id: string;\n  product_name: string;\n  product_version: string;\n  license_type: \"PERPETUAL\" | \"SUBSCRIPTION\" | \"TRIAL\" | \"EVALUATION\" | \"CONCURRENT\" | \"NAMED_USER\";\n  license_model: \"PER_SEAT\" | \"PER_DEVICE\" | \"PER_CPU\" | \"PER_CORE\" | \"SITE_LICENSE\" | \"ENTERPRISE\";\n  customer_id?: string;\n  reseller_id?: string;\n  issued_to: string;\n  max_activations: number;\n  current_activations: number;\n  features: LicenseFeature[];\n  restrictions: LicenseRestriction[];\n  issued_date: string;\n  activation_date?: string;\n  expiry_date?: string;\n  maintenance_expiry?: string;\n  status: \"ACTIVE\" | \"INACTIVE\" | \"EXPIRED\" | \"SUSPENDED\" | \"REVOKED\" | \"PENDING\";\n  auto_renewal: boolean;\n  trial_period_days?: number;\n  grace_period_days?: number;\n  metadata: Record<string, any>;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface LicenseFeature {\n  feature_id: string;\n  feature_name: string;\n  enabled: boolean;\n  limit_value?: number;\n  limit_type?: \"COUNT\" | \"SIZE\" | \"DURATION\" | \"BANDWIDTH\";\n  expires_at?: string;\n}\n\nexport interface LicenseRestriction {\n  restriction_type:\n    | \"GEOGRAPHIC\"\n    | \"DOMAIN\"\n    | \"IP_RANGE\"\n    | \"MAC_ADDRESS\"\n    | \"HARDWARE_ID\"\n    | \"TIME_BASED\";\n  values: string[];\n  operator: \"ALLOW\" | \"DENY\";\n}\n\nexport interface Activation {\n  id: string;\n  license_id: string;\n  activation_token: string;\n  device_fingerprint: string;\n  machine_name?: string;\n  hardware_id?: string;\n  mac_address?: string;\n  ip_address?: string;\n  operating_system?: string;\n  user_agent?: string;\n  application_version: string;\n  activation_type: \"ONLINE\" | \"OFFLINE\" | \"EMERGENCY\";\n  status: \"ACTIVE\" | \"DEACTIVATED\" | \"SUSPENDED\" | \"EXPIRED\";\n  activated_at: string;\n  last_heartbeat?: string;\n  deactivated_at?: string;\n  deactivation_reason?: string;\n  location?: ActivationLocation;\n  usage_metrics?: UsageMetrics;\n}\n\nexport interface ActivationLocation {\n  country: string;\n  region?: string;\n  city?: string;\n  timezone: string;\n  coordinates?: { latitude: number; longitude: number };\n}\n\nexport interface UsageMetrics {\n  total_runtime_hours: number;\n  feature_usage: Record<string, number>;\n  api_calls_count: number;\n  data_processed_mb: number;\n  last_used_at: string;\n  peak_concurrent_users?: number;\n}\n\nexport interface LicenseTemplate {\n  id: string;\n  template_name: string;\n  product_id: string;\n  description: string;\n  license_type: SoftwareLicense[\"license_type\"];\n  license_model: SoftwareLicense[\"license_model\"];\n  default_duration: number;\n  max_activations: number;\n  features: TemplateFeature[];\n  restrictions: TemplateRestriction[];\n  pricing: LicensePricing;\n  auto_renewal_enabled: boolean;\n  trial_allowed: boolean;\n  trial_duration_days: number;\n  grace_period_days: number;\n  active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TemplateFeature {\n  feature_id: string;\n  feature_name: string;\n  included: boolean;\n  default_limit?: number;\n  configurable: boolean;\n  required: boolean;\n}\n\nexport interface TemplateRestriction {\n  restriction_type: LicenseRestriction[\"restriction_type\"];\n  operator: LicenseRestriction[\"operator\"];\n  configurable: boolean;\n  default_values?: string[];\n}\n\nexport interface LicensePricing {\n  base_price: number;\n  currency: string;\n  billing_cycle: \"MONTHLY\" | \"QUARTERLY\" | \"ANNUALLY\" | \"ONE_TIME\";\n  per_seat_price?: number;\n  volume_discounts?: VolumeDiscount[];\n  maintenance_percentage?: number;\n}\n\nexport interface VolumeDiscount {\n  min_quantity: number;\n  max_quantity?: number;\n  discount_percentage: number;\n  discount_amount?: number;\n}\n\nexport interface LicenseOrder {\n  id: string;\n  order_number: string;\n  customer_id?: string;\n  reseller_id?: string;\n  template_id: string;\n  quantity: number;\n  custom_features?: LicenseFeature[];\n  custom_restrictions?: LicenseRestriction[];\n  duration_override?: number;\n  pricing_override?: Partial<LicensePricing>;\n  special_instructions?: string;\n  status: \"PENDING\" | \"APPROVED\" | \"FULFILLED\" | \"CANCELLED\";\n  total_amount: number;\n  discount_applied?: number;\n  payment_status: \"PENDING\" | \"PAID\" | \"PARTIAL\" | \"FAILED\" | \"REFUNDED\";\n  fulfillment_method: \"AUTO\" | \"MANUAL\" | \"BATCH\";\n  generated_licenses?: string[];\n  created_at: string;\n  fulfilled_at?: string;\n}\n\nexport interface ComplianceAudit {\n  id: string;\n  audit_type: \"SCHEDULED\" | \"RANDOM\" | \"COMPLAINT_DRIVEN\" | \"RENEWAL\";\n  customer_id?: string;\n  product_ids: string[];\n  audit_scope: \"FULL\" | \"PARTIAL\" | \"SPOT_CHECK\";\n  status: \"SCHEDULED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"CANCELLED\";\n  auditor_id: string;\n  audit_date: string;\n  findings: AuditFinding[];\n  violations: ComplianceViolation[];\n  compliance_score: number;\n  recommendations: string[];\n  follow_up_required: boolean;\n  follow_up_date?: string;\n  report_url?: string;\n  created_at: string;\n  completed_at?: string;\n}\n\nexport interface AuditFinding {\n  finding_type:\n    | \"OVER_DEPLOYMENT\"\n    | \"UNLICENSED_SOFTWARE\"\n    | \"EXPIRED_LICENSE\"\n    | \"FEATURE_MISUSE\"\n    | \"DOCUMENTATION_MISSING\";\n  severity: \"LOW\" | \"MEDIUM\" | \"HIGH\" | \"CRITICAL\";\n  description: string;\n  evidence: string[];\n  affected_licenses: string[];\n  impact_assessment: string;\n  recommended_action: string;\n}\n\nexport interface ComplianceViolation {\n  violation_type:\n    | \"UNAUTHORIZED_USE\"\n    | \"OVER_DEPLOYMENT\"\n    | \"FEATURE_ABUSE\"\n    | \"TRANSFER_VIOLATION\"\n    | \"REVERSE_ENGINEERING\";\n  severity: \"MINOR\" | \"MAJOR\" | \"CRITICAL\";\n  license_id: string;\n  description: string;\n  detected_at: string;\n  evidence: string[];\n  financial_impact?: number;\n  resolution_required: boolean;\n  resolution_deadline?: string;\n  status: \"OPEN\" | \"ACKNOWLEDGED\" | \"RESOLVED\" | \"DISPUTED\";\n}\n\nexport interface LicenseUsageReport {\n  report_id: string;\n  customer_id?: string;\n  product_id?: string;\n  report_period: { start_date: string; end_date: string };\n  license_summary: {\n    total_licenses: number;\n    active_licenses: number;\n    expired_licenses: number;\n    suspended_licenses: number;\n  };\n  activation_summary: {\n    total_activations: number;\n    active_activations: number;\n    peak_concurrent_activations: number;\n    average_utilization: number;\n  };\n  feature_usage: Array<{\n    feature_name: string;\n    total_usage: number;\n    unique_users: number;\n    peak_usage: number;\n  }>;\n  compliance_status: \"COMPLIANT\" | \"NON_COMPLIANT\" | \"REQUIRES_REVIEW\";\n  recommendations: string[];\n  generated_at: string;\n}\n\nexport class LicensingApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // License Management\n  async getLicenses(\n    params?: QueryParams & {\n      customer_id?: string;\n      product_id?: string;\n      status?: string;\n      license_type?: string;\n      expiry_date_from?: string;\n      expiry_date_to?: string;\n    },\n  ): Promise<PaginatedResponse<SoftwareLicense>> {\n    return this.get(\"/api/licensing/licenses\", { params });\n  }\n\n  async getLicense(licenseId: string): Promise<{ data: SoftwareLicense }> {\n    return this.get(`/api/licensing/licenses/${licenseId}`);\n  }\n\n  async getLicenseByKey(licenseKey: string): Promise<{ data: SoftwareLicense }> {\n    return this.get(`/api/licensing/licenses/by-key/${licenseKey}`);\n  }\n\n  async createLicense(\n    data: Omit<\n      SoftwareLicense,\n      \"id\" | \"license_key\" | \"current_activations\" | \"created_at\" | \"updated_at\"\n    >,\n  ): Promise<{ data: SoftwareLicense }> {\n    return this.post(\"/api/licensing/licenses\", data);\n  }\n\n  async updateLicense(\n    licenseId: string,\n    data: Partial<SoftwareLicense>,\n  ): Promise<{ data: SoftwareLicense }> {\n    return this.put(`/api/licensing/licenses/${licenseId}`, data);\n  }\n\n  async renewLicense(\n    licenseId: string,\n    data: {\n      duration_months: number;\n      extend_maintenance?: boolean;\n      upgrade_features?: LicenseFeature[];\n    },\n  ): Promise<{ data: SoftwareLicense }> {\n    return this.post(`/api/licensing/licenses/${licenseId}/renew`, data);\n  }\n\n  async suspendLicense(licenseId: string, reason: string): Promise<{ data: SoftwareLicense }> {\n    return this.post(`/api/licensing/licenses/${licenseId}/suspend`, {\n      reason,\n    });\n  }\n\n  async revokeLicense(licenseId: string, reason: string): Promise<{ data: SoftwareLicense }> {\n    return this.post(`/api/licensing/licenses/${licenseId}/revoke`, { reason });\n  }\n\n  async transferLicense(\n    licenseId: string,\n    data: {\n      new_customer_id?: string;\n      new_issued_to: string;\n      transfer_reason: string;\n      deactivate_existing: boolean;\n    },\n  ): Promise<{ data: SoftwareLicense }> {\n    return this.post(`/api/licensing/licenses/${licenseId}/transfer`, data);\n  }\n\n  // Activation Management\n  async activateLicense(data: {\n    license_key: string;\n    device_fingerprint: string;\n    machine_name?: string;\n    hardware_id?: string;\n    activation_type?: Activation[\"activation_type\"];\n    metadata?: Record<string, any>;\n  }): Promise<{ data: Activation }> {\n    return this.post(\"/api/licensing/activations\", data);\n  }\n\n  async getActivations(\n    params?: QueryParams & {\n      license_id?: string;\n      status?: string;\n      device_fingerprint?: string;\n    },\n  ): Promise<PaginatedResponse<Activation>> {\n    return this.get(\"/api/licensing/activations\", { params });\n  }\n\n  async getActivation(activationId: string): Promise<{ data: Activation }> {\n    return this.get(`/api/licensing/activations/${activationId}`);\n  }\n\n  async validateActivation(activationToken: string): Promise<{\n    data: {\n      valid: boolean;\n      activation?: Activation;\n      license?: SoftwareLicense;\n    };\n  }> {\n    return this.post(\"/api/licensing/activations/validate\", {\n      activation_token: activationToken,\n    });\n  }\n\n  async deactivateLicense(activationId: string, reason?: string): Promise<{ data: Activation }> {\n    return this.post(`/api/licensing/activations/${activationId}/deactivate`, {\n      reason,\n    });\n  }\n\n  async sendHeartbeat(\n    activationToken: string,\n    metrics?: Partial<UsageMetrics>,\n  ): Promise<{ data: { status: string; message?: string } }> {\n    return this.post(\"/api/licensing/activations/heartbeat\", {\n      activation_token: activationToken,\n      metrics,\n    });\n  }\n\n  async getOfflineActivationRequest(\n    licenseKey: string,\n    deviceFingerprint: string,\n  ): Promise<{ data: { request_code: string; instructions: string } }> {\n    return this.post(\"/api/licensing/activations/offline-request\", {\n      license_key: licenseKey,\n      device_fingerprint: deviceFingerprint,\n    });\n  }\n\n  async processOfflineActivation(\n    requestCode: string,\n    responseCode: string,\n  ): Promise<{ data: Activation }> {\n    return this.post(\"/api/licensing/activations/offline-activate\", {\n      request_code: requestCode,\n      response_code: responseCode,\n    });\n  }\n\n  // License Templates\n  async getTemplates(params?: QueryParams): Promise<PaginatedResponse<LicenseTemplate>> {\n    return this.get(\"/api/licensing/templates\", { params });\n  }\n\n  async getTemplate(templateId: string): Promise<{ data: LicenseTemplate }> {\n    return this.get(`/api/licensing/templates/${templateId}`);\n  }\n\n  async createTemplate(\n    data: Omit<LicenseTemplate, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: LicenseTemplate }> {\n    return this.post(\"/api/licensing/templates\", data);\n  }\n\n  async updateTemplate(\n    templateId: string,\n    data: Partial<LicenseTemplate>,\n  ): Promise<{ data: LicenseTemplate }> {\n    return this.put(`/api/licensing/templates/${templateId}`, data);\n  }\n\n  async duplicateTemplate(templateId: string, newName: string): Promise<{ data: LicenseTemplate }> {\n    return this.post(`/api/licensing/templates/${templateId}/duplicate`, {\n      new_name: newName,\n    });\n  }\n\n  // License Orders\n  async getOrders(params?: QueryParams): Promise<PaginatedResponse<LicenseOrder>> {\n    return this.get(\"/api/licensing/orders\", { params });\n  }\n\n  async getOrder(orderId: string): Promise<{ data: LicenseOrder }> {\n    return this.get(`/api/licensing/orders/${orderId}`);\n  }\n\n  async createOrder(\n    data: Omit<LicenseOrder, \"id\" | \"order_number\" | \"status\" | \"total_amount\" | \"created_at\">,\n  ): Promise<{ data: LicenseOrder }> {\n    return this.post(\"/api/licensing/orders\", data);\n  }\n\n  async approveOrder(orderId: string, approvalNotes?: string): Promise<{ data: LicenseOrder }> {\n    return this.post(`/api/licensing/orders/${orderId}/approve`, {\n      approval_notes: approvalNotes,\n    });\n  }\n\n  async fulfillOrder(orderId: string): Promise<{ data: LicenseOrder }> {\n    return this.post(`/api/licensing/orders/${orderId}/fulfill`, {});\n  }\n\n  async cancelOrder(orderId: string, reason: string): Promise<{ data: LicenseOrder }> {\n    return this.post(`/api/licensing/orders/${orderId}/cancel`, { reason });\n  }\n\n  // Compliance & Auditing\n  async getComplianceAudits(params?: QueryParams): Promise<PaginatedResponse<ComplianceAudit>> {\n    return this.get(\"/api/licensing/compliance/audits\", { params });\n  }\n\n  async getComplianceAudit(auditId: string): Promise<{ data: ComplianceAudit }> {\n    return this.get(`/api/licensing/compliance/audits/${auditId}`);\n  }\n\n  async scheduleComplianceAudit(data: {\n    customer_id?: string;\n    product_ids: string[];\n    audit_type: ComplianceAudit[\"audit_type\"];\n    audit_scope: ComplianceAudit[\"audit_scope\"];\n    audit_date: string;\n    special_instructions?: string;\n  }): Promise<{ data: ComplianceAudit }> {\n    return this.post(\"/api/licensing/compliance/audits\", data);\n  }\n\n  async submitAuditFindings(\n    auditId: string,\n    findings: AuditFinding[],\n  ): Promise<{ data: ComplianceAudit }> {\n    return this.post(`/api/licensing/compliance/audits/${auditId}/findings`, {\n      findings,\n    });\n  }\n\n  async resolveComplianceViolation(\n    violationId: string,\n    data: {\n      resolution_action: string;\n      resolution_notes: string;\n      evidence?: string[];\n    },\n  ): Promise<{ data: ComplianceViolation }> {\n    return this.post(`/api/licensing/compliance/violations/${violationId}/resolve`, data);\n  }\n\n  async getComplianceStatus(customerId: string): Promise<{\n    data: {\n      overall_score: number;\n      license_compliance: number;\n      feature_compliance: number;\n      activation_compliance: number;\n      violations: ComplianceViolation[];\n      recommendations: string[];\n    };\n  }> {\n    return this.get(`/api/licensing/compliance/status/${customerId}`);\n  }\n\n  // Usage Analytics & Reporting\n  async generateUsageReport(params: {\n    customer_id?: string;\n    product_id?: string;\n    start_date: string;\n    end_date: string;\n    report_format: \"JSON\" | \"PDF\" | \"CSV\";\n    include_details?: boolean;\n  }): Promise<{\n    data: {\n      report_id: string;\n      download_url?: string;\n      report_data?: LicenseUsageReport;\n    };\n  }> {\n    return this.post(\"/api/licensing/reports/usage\", params);\n  }\n\n  async getLicenseUtilization(params?: {\n    customer_id?: string;\n    product_id?: string;\n    time_period?: \"DAY\" | \"WEEK\" | \"MONTH\" | \"QUARTER\";\n  }): Promise<{\n    data: {\n      total_licenses: number;\n      utilized_licenses: number;\n      utilization_percentage: number;\n      peak_utilization: number;\n      underutilized_licenses: Array<{\n        license_id: string;\n        utilization: number;\n      }>;\n    };\n  }> {\n    return this.get(\"/api/licensing/analytics/utilization\", { params });\n  }\n\n  async getFeatureUsageAnalytics(params?: {\n    product_id?: string;\n    start_date?: string;\n    end_date?: string;\n  }): Promise<{\n    data: Array<{\n      feature_name: string;\n      total_usage_hours: number;\n      unique_licenses: number;\n      average_usage_per_license: number;\n      peak_concurrent_usage: number;\n    }>;\n  }> {\n    return this.get(\"/api/licensing/analytics/feature-usage\", { params });\n  }\n\n  async getExpiryAlerts(daysAhead: number = 30): Promise<{\n    data: Array<{\n      license_id: string;\n      customer_name: string;\n      product_name: string;\n      expiry_date: string;\n      days_remaining: number;\n      auto_renewal_enabled: boolean;\n    }>;\n  }> {\n    return this.get(\"/api/licensing/alerts/expiring\", {\n      params: { days_ahead: daysAhead },\n    });\n  }\n\n  // License Validation & Security\n  async validateLicenseKey(licenseKey: string): Promise<{\n    data: {\n      valid: boolean;\n      license?: SoftwareLicense;\n      validation_details: any;\n    };\n  }> {\n    return this.post(\"/api/licensing/validate\", { license_key: licenseKey });\n  }\n\n  async checkLicenseIntegrity(\n    licenseKey: string,\n    signature?: string,\n  ): Promise<{\n    data: { integrity_check: boolean; tampering_detected: boolean };\n  }> {\n    return this.post(\"/api/licensing/integrity-check\", {\n      license_key: licenseKey,\n      signature,\n    });\n  }\n\n  async generateEmergencyCode(\n    licenseKey: string,\n    reason: string,\n  ): Promise<{ data: { emergency_code: string; valid_until: string } }> {\n    return this.post(\"/api/licensing/emergency-code\", {\n      license_key: licenseKey,\n      reason,\n    });\n  }\n\n  async blacklistDevice(\n    deviceFingerprint: string,\n    reason: string,\n  ): Promise<{ data: { success: boolean } }> {\n    return this.post(\"/api/licensing/security/blacklist-device\", {\n      device_fingerprint: deviceFingerprint,\n      reason,\n    });\n  }\n\n  async reportSuspiciousActivity(data: {\n    license_key?: string;\n    activation_token?: string;\n    activity_type: \"MULTIPLE_ACTIVATIONS\" | \"UNUSUAL_LOCATION\" | \"TAMPERING_ATTEMPT\" | \"API_ABUSE\";\n    description: string;\n    evidence?: Record<string, any>;\n  }): Promise<{ data: { incident_id: string } }> {\n    return this.post(\"/api/licensing/security/report-activity\", data);\n  }\n}\n","/**\n * Inventory & Asset Management API Client\n * Handles equipment tracking, asset lifecycle, and stock management\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface InventoryItem {\n  id: string;\n  sku: string;\n  name: string;\n  description: string;\n  category: \"MODEM\" | \"ROUTER\" | \"ONT\" | \"CABLE\" | \"ANTENNA\" | \"SWITCH\" | \"ACCESSORY\" | \"OTHER\";\n  manufacturer: string;\n  model: string;\n  serial_number?: string;\n  mac_address?: string;\n  status: \"IN_STOCK\" | \"DEPLOYED\" | \"RESERVED\" | \"MAINTENANCE\" | \"DEFECTIVE\" | \"RETIRED\";\n  condition: \"NEW\" | \"REFURBISHED\" | \"USED\" | \"DAMAGED\";\n  location: InventoryLocation;\n  purchase_info?: PurchaseInfo;\n  warranty_info?: WarrantyInfo;\n  specifications: Record<string, any>;\n  cost: number;\n  retail_price?: number;\n  assigned_to?: string;\n  deployment_date?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface InventoryLocation {\n  type: \"WAREHOUSE\" | \"TRUCK\" | \"CUSTOMER\" | \"TECHNICIAN\" | \"REPAIR_CENTER\";\n  location_id: string;\n  location_name: string;\n  address?: string;\n  coordinates?: { latitude: number; longitude: number };\n  zone?: string;\n  bin_location?: string;\n}\n\nexport interface PurchaseInfo {\n  vendor: string;\n  purchase_order: string;\n  purchase_date: string;\n  purchase_price: number;\n  invoice_number?: string;\n}\n\nexport interface WarrantyInfo {\n  warranty_period: number;\n  warranty_start: string;\n  warranty_end: string;\n  warranty_provider: string;\n  warranty_terms: string;\n}\n\nexport interface StockMovement {\n  id: string;\n  item_id: string;\n  movement_type: \"RECEIVE\" | \"ISSUE\" | \"TRANSFER\" | \"RETURN\" | \"ADJUSTMENT\" | \"WRITE_OFF\";\n  quantity: number;\n  from_location?: InventoryLocation;\n  to_location?: InventoryLocation;\n  reason: string;\n  reference_number?: string;\n  performed_by: string;\n  notes?: string;\n  created_at: string;\n}\n\nexport interface StockLevel {\n  sku: string;\n  item_name: string;\n  location_id: string;\n  location_name: string;\n  current_stock: number;\n  reserved_stock: number;\n  available_stock: number;\n  reorder_level: number;\n  max_stock_level: number;\n  last_movement: string;\n}\n\nexport interface WorkOrder {\n  id: string;\n  work_order_number: string;\n  type: \"INSTALLATION\" | \"MAINTENANCE\" | \"REPAIR\" | \"UPGRADE\" | \"REMOVAL\";\n  customer_id: string;\n  customer_name: string;\n  address: string;\n  scheduled_date: string;\n  technician_id?: string;\n  technician_name?: string;\n  status: \"SCHEDULED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"CANCELLED\";\n  required_equipment: EquipmentRequirement[];\n  assigned_equipment: AssignedEquipment[];\n  notes?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface EquipmentRequirement {\n  sku: string;\n  quantity: number;\n  required: boolean;\n  alternatives?: string[];\n}\n\nexport interface AssignedEquipment {\n  item_id: string;\n  sku: string;\n  serial_number?: string;\n  quantity: number;\n  status: \"ASSIGNED\" | \"DEPLOYED\" | \"RETURNED\";\n}\n\nexport interface Vendor {\n  id: string;\n  name: string;\n  contact_info: {\n    email: string;\n    phone: string;\n    address: string;\n  };\n  payment_terms: string;\n  lead_time_days: number;\n  preferred: boolean;\n  active: boolean;\n}\n\nexport class InventoryApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Inventory Items\n  async getInventoryItems(params?: QueryParams): Promise<PaginatedResponse<InventoryItem>> {\n    return this.get(\"/api/inventory/items\", { params });\n  }\n\n  async getInventoryItem(itemId: string): Promise<{ data: InventoryItem }> {\n    return this.get(`/api/inventory/items/${itemId}`);\n  }\n\n  async createInventoryItem(\n    data: Omit<InventoryItem, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: InventoryItem }> {\n    return this.post(\"/api/inventory/items\", data);\n  }\n\n  async updateInventoryItem(\n    itemId: string,\n    data: Partial<InventoryItem>,\n  ): Promise<{ data: InventoryItem }> {\n    return this.put(`/api/inventory/items/${itemId}`, data);\n  }\n\n  async deleteInventoryItem(itemId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/inventory/items/${itemId}`);\n  }\n\n  async searchInventoryBySku(sku: string): Promise<{ data: InventoryItem[] }> {\n    return this.get(`/api/inventory/items/search`, { params: { sku } });\n  }\n\n  async searchInventoryBySerial(serialNumber: string): Promise<{ data: InventoryItem[] }> {\n    return this.get(`/api/inventory/items/search`, {\n      params: { serial_number: serialNumber },\n    });\n  }\n\n  // Stock Management\n  async getStockLevels(params?: {\n    location_id?: string;\n    sku?: string;\n    low_stock?: boolean;\n  }): Promise<PaginatedResponse<StockLevel>> {\n    return this.get(\"/api/inventory/stock-levels\", { params });\n  }\n\n  async getStockMovements(\n    itemId?: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<StockMovement>> {\n    const endpoint = itemId\n      ? `/api/inventory/items/${itemId}/movements`\n      : \"/api/inventory/movements\";\n    return this.get(endpoint, { params });\n  }\n\n  async recordStockMovement(\n    data: Omit<StockMovement, \"id\" | \"created_at\">,\n  ): Promise<{ data: StockMovement }> {\n    return this.post(\"/api/inventory/movements\", data);\n  }\n\n  async receiveStock(data: {\n    items: Array<{\n      sku: string;\n      quantity: number;\n      serial_numbers?: string[];\n      location_id: string;\n      purchase_info?: PurchaseInfo;\n    }>;\n    reference_number?: string;\n    notes?: string;\n  }): Promise<{ data: StockMovement[] }> {\n    return this.post(\"/api/inventory/receive\", data);\n  }\n\n  async issueStock(data: {\n    items: Array<{\n      item_id?: string;\n      sku: string;\n      quantity: number;\n      serial_numbers?: string[];\n    }>;\n    issued_to: string;\n    work_order_id?: string;\n    purpose: string;\n    notes?: string;\n  }): Promise<{ data: StockMovement[] }> {\n    return this.post(\"/api/inventory/issue\", data);\n  }\n\n  async transferStock(data: {\n    items: Array<{\n      item_id: string;\n      quantity: number;\n    }>;\n    from_location_id: string;\n    to_location_id: string;\n    reason: string;\n    notes?: string;\n  }): Promise<{ data: StockMovement[] }> {\n    return this.post(\"/api/inventory/transfer\", data);\n  }\n\n  // Work Orders\n  async getWorkOrders(params?: QueryParams): Promise<PaginatedResponse<WorkOrder>> {\n    return this.get(\"/api/inventory/work-orders\", { params });\n  }\n\n  async getWorkOrder(workOrderId: string): Promise<{ data: WorkOrder }> {\n    return this.get(`/api/inventory/work-orders/${workOrderId}`);\n  }\n\n  async createWorkOrder(\n    data: Omit<WorkOrder, \"id\" | \"work_order_number\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: WorkOrder }> {\n    return this.post(\"/api/inventory/work-orders\", data);\n  }\n\n  async updateWorkOrder(\n    workOrderId: string,\n    data: Partial<WorkOrder>,\n  ): Promise<{ data: WorkOrder }> {\n    return this.put(`/api/inventory/work-orders/${workOrderId}`, data);\n  }\n\n  async assignEquipmentToWorkOrder(\n    workOrderId: string,\n    equipment: AssignedEquipment[],\n  ): Promise<{ data: WorkOrder }> {\n    return this.post(`/api/inventory/work-orders/${workOrderId}/assign-equipment`, { equipment });\n  }\n\n  async completeWorkOrder(\n    workOrderId: string,\n    data: {\n      equipment_used: AssignedEquipment[];\n      equipment_returned?: AssignedEquipment[];\n      notes?: string;\n    },\n  ): Promise<{ data: WorkOrder }> {\n    return this.post(`/api/inventory/work-orders/${workOrderId}/complete`, data);\n  }\n\n  // Asset Lifecycle\n  async deployAsset(\n    itemId: string,\n    data: {\n      customer_id: string;\n      installation_address: string;\n      technician_id: string;\n      work_order_id?: string;\n      notes?: string;\n    },\n  ): Promise<{ data: InventoryItem }> {\n    return this.post(`/api/inventory/items/${itemId}/deploy`, data);\n  }\n\n  async returnAsset(\n    itemId: string,\n    data: {\n      reason: string;\n      condition: InventoryItem[\"condition\"];\n      return_location_id: string;\n      notes?: string;\n    },\n  ): Promise<{ data: InventoryItem }> {\n    return this.post(`/api/inventory/items/${itemId}/return`, data);\n  }\n\n  async markAssetForMaintenance(\n    itemId: string,\n    data: {\n      issue_description: string;\n      maintenance_type: \"PREVENTIVE\" | \"CORRECTIVE\" | \"EMERGENCY\";\n      estimated_repair_date?: string;\n    },\n  ): Promise<{ data: InventoryItem }> {\n    return this.post(`/api/inventory/items/${itemId}/maintenance`, data);\n  }\n\n  async retireAsset(itemId: string, reason: string): Promise<{ data: InventoryItem }> {\n    return this.post(`/api/inventory/items/${itemId}/retire`, { reason });\n  }\n\n  // Vendors & Procurement\n  async getVendors(params?: QueryParams): Promise<PaginatedResponse<Vendor>> {\n    return this.get(\"/api/inventory/vendors\", { params });\n  }\n\n  async createPurchaseOrder(data: {\n    vendor_id: string;\n    items: Array<{\n      sku: string;\n      quantity: number;\n      unit_price: number;\n    }>;\n    delivery_date?: string;\n    notes?: string;\n  }): Promise<{ data: { purchase_order_id: string; po_number: string } }> {\n    return this.post(\"/api/inventory/purchase-orders\", data);\n  }\n\n  // Reports & Analytics\n  async getInventoryReport(\n    reportType: \"STOCK_LEVELS\" | \"MOVEMENTS\" | \"AGING\" | \"VALUATION\",\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      location_id?: string;\n      category?: string;\n    },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/inventory/reports/${reportType.toLowerCase()}`, {\n      params,\n    });\n  }\n\n  async getAssetUtilization(params?: {\n    start_date?: string;\n    end_date?: string;\n    asset_category?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/inventory/analytics/utilization\", { params });\n  }\n\n  async getLowStockAlerts(): Promise<{\n    data: Array<{\n      sku: string;\n      current_stock: number;\n      reorder_level: number;\n      location: string;\n    }>;\n  }> {\n    return this.get(\"/api/inventory/alerts/low-stock\");\n  }\n\n  async getWarrantyExpirations(params?: { days_ahead?: number }): Promise<{\n    data: Array<{\n      item_id: string;\n      warranty_end: string;\n      days_remaining: number;\n    }>;\n  }> {\n    return this.get(\"/api/inventory/alerts/warranty-expiring\", { params });\n  }\n\n  // Barcode & RFID\n  async generateBarcode(\n    itemId: string,\n  ): Promise<{ data: { barcode: string; barcode_image_url: string } }> {\n    return this.post(`/api/inventory/items/${itemId}/barcode`, {});\n  }\n\n  async scanBarcode(barcode: string): Promise<{ data: InventoryItem }> {\n    return this.get(`/api/inventory/scan/${barcode}`);\n  }\n\n  async bulkUpdateByBarcode(\n    updates: Array<{\n      barcode: string;\n      updates: Partial<InventoryItem>;\n    }>,\n  ): Promise<{ data: { updated: number; errors: any[] } }> {\n    return this.post(\"/api/inventory/bulk-update\", { updates });\n  }\n}\n","/**\n * Analytics & Business Intelligence API Client\n * Handles data visualization, reporting, and business metrics\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"../types/api\";\n\nexport interface AnalyticsReport {\n  id: string;\n  name: string;\n  description: string;\n  category: \"FINANCIAL\" | \"OPERATIONAL\" | \"CUSTOMER\" | \"TECHNICAL\" | \"COMPLIANCE\";\n  report_type: \"STANDARD\" | \"CUSTOM\" | \"SCHEDULED\" | \"REAL_TIME\";\n  data_sources: string[];\n  parameters: ReportParameter[];\n  output_formats: (\"PDF\" | \"CSV\" | \"EXCEL\" | \"JSON\")[];\n  schedule?: ReportSchedule;\n  created_by: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ReportParameter {\n  name: string;\n  type: \"STRING\" | \"NUMBER\" | \"DATE\" | \"BOOLEAN\" | \"SELECT\";\n  required: boolean;\n  default_value?: any;\n  options?: string[];\n  description: string;\n}\n\nexport interface ReportSchedule {\n  frequency: \"DAILY\" | \"WEEKLY\" | \"MONTHLY\" | \"QUARTERLY\";\n  time: string;\n  recipients: string[];\n  enabled: boolean;\n}\n\nexport interface ReportExecution {\n  id: string;\n  report_id: string;\n  status: \"QUEUED\" | \"RUNNING\" | \"COMPLETED\" | \"FAILED\";\n  parameters: Record<string, any>;\n  output_format: string;\n  file_url?: string;\n  error_message?: string;\n  execution_time?: number;\n  started_at: string;\n  completed_at?: string;\n}\n\nexport interface DashboardWidget {\n  id: string;\n  dashboard_id: string;\n  title: string;\n  type: \"CHART\" | \"TABLE\" | \"METRIC\" | \"MAP\" | \"TEXT\";\n  position: { x: number; y: number; width: number; height: number };\n  config: WidgetConfig;\n  data_source: string;\n  refresh_interval?: number;\n}\n\nexport interface WidgetConfig {\n  chart_type?: \"LINE\" | \"BAR\" | \"PIE\" | \"AREA\" | \"SCATTER\";\n  metrics: string[];\n  dimensions?: string[];\n  filters?: Record<string, any>;\n  time_range?: string;\n  aggregation?: \"SUM\" | \"AVG\" | \"COUNT\" | \"MIN\" | \"MAX\";\n}\n\nexport interface Dashboard {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  widgets: DashboardWidget[];\n  shared_with: string[];\n  is_public: boolean;\n  created_by: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface MetricDefinition {\n  id: string;\n  name: string;\n  display_name: string;\n  description: string;\n  unit: string;\n  data_type: \"NUMBER\" | \"PERCENTAGE\" | \"CURRENCY\" | \"DURATION\";\n  aggregation_method: \"SUM\" | \"AVG\" | \"COUNT\" | \"MIN\" | \"MAX\";\n  formula?: string;\n  dimensions: string[];\n}\n\nexport class AnalyticsApiClient extends BaseApiClient {\n  constructor(baseURL: string, defaultHeaders: Record<string, string> = {}) {\n    super(baseURL, defaultHeaders);\n  }\n\n  // Reports\n  async getReports(params?: QueryParams): Promise<PaginatedResponse<AnalyticsReport>> {\n    return this.get(\"/api/analytics/reports\", { params });\n  }\n\n  async getReport(reportId: string): Promise<{ data: AnalyticsReport }> {\n    return this.get(`/api/analytics/reports/${reportId}`);\n  }\n\n  async createReport(\n    data: Omit<AnalyticsReport, \"id\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: AnalyticsReport }> {\n    return this.post(\"/api/analytics/reports\", data);\n  }\n\n  async updateReport(\n    reportId: string,\n    data: Partial<AnalyticsReport>,\n  ): Promise<{ data: AnalyticsReport }> {\n    return this.put(`/api/analytics/reports/${reportId}`, data);\n  }\n\n  async deleteReport(reportId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/analytics/reports/${reportId}`);\n  }\n\n  async executeReport(\n    reportId: string,\n    parameters: Record<string, any>,\n    format: string = \"JSON\",\n  ): Promise<{ data: ReportExecution }> {\n    return this.post(`/api/analytics/reports/${reportId}/execute`, {\n      parameters,\n      format,\n    });\n  }\n\n  async getReportExecution(executionId: string): Promise<{ data: ReportExecution }> {\n    return this.get(`/api/analytics/executions/${executionId}`);\n  }\n\n  async getReportExecutions(\n    reportId: string,\n    params?: QueryParams,\n  ): Promise<PaginatedResponse<ReportExecution>> {\n    return this.get(`/api/analytics/reports/${reportId}/executions`, {\n      params,\n    });\n  }\n\n  // Dashboards\n  async getDashboards(params?: QueryParams): Promise<PaginatedResponse<Dashboard>> {\n    return this.get(\"/api/analytics/dashboards\", { params });\n  }\n\n  async getDashboard(dashboardId: string): Promise<{ data: Dashboard }> {\n    return this.get(`/api/analytics/dashboards/${dashboardId}`);\n  }\n\n  async createDashboard(\n    data: Omit<Dashboard, \"id\" | \"widgets\" | \"created_at\" | \"updated_at\">,\n  ): Promise<{ data: Dashboard }> {\n    return this.post(\"/api/analytics/dashboards\", data);\n  }\n\n  async updateDashboard(\n    dashboardId: string,\n    data: Partial<Dashboard>,\n  ): Promise<{ data: Dashboard }> {\n    return this.put(`/api/analytics/dashboards/${dashboardId}`, data);\n  }\n\n  async deleteDashboard(dashboardId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/analytics/dashboards/${dashboardId}`);\n  }\n\n  // Dashboard Widgets\n  async addWidget(\n    dashboardId: string,\n    widget: Omit<DashboardWidget, \"id\" | \"dashboard_id\">,\n  ): Promise<{ data: DashboardWidget }> {\n    return this.post(`/api/analytics/dashboards/${dashboardId}/widgets`, widget);\n  }\n\n  async updateWidget(\n    dashboardId: string,\n    widgetId: string,\n    data: Partial<DashboardWidget>,\n  ): Promise<{ data: DashboardWidget }> {\n    return this.put(`/api/analytics/dashboards/${dashboardId}/widgets/${widgetId}`, data);\n  }\n\n  async deleteWidget(dashboardId: string, widgetId: string): Promise<{ success: boolean }> {\n    return this.delete(`/api/analytics/dashboards/${dashboardId}/widgets/${widgetId}`);\n  }\n\n  async getWidgetData(\n    dashboardId: string,\n    widgetId: string,\n    params?: { time_range?: string },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/analytics/dashboards/${dashboardId}/widgets/${widgetId}/data`, {\n      params,\n    });\n  }\n\n  // Metrics\n  async getMetrics(params?: QueryParams): Promise<PaginatedResponse<MetricDefinition>> {\n    return this.get(\"/api/analytics/metrics\", { params });\n  }\n\n  async getMetricData(\n    metricName: string,\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      granularity?: string;\n      filters?: Record<string, any>;\n    },\n  ): Promise<{ data: any }> {\n    return this.get(`/api/analytics/metrics/${metricName}/data`, { params });\n  }\n\n  async getMultiMetricData(\n    metrics: string[],\n    params?: {\n      start_date?: string;\n      end_date?: string;\n      granularity?: string;\n      filters?: Record<string, any>;\n    },\n  ): Promise<{ data: Record<string, any> }> {\n    return this.post(\"/api/analytics/metrics/bulk\", { metrics, ...params });\n  }\n\n  // Business Intelligence\n  async getRevenueTrends(params?: {\n    period?: string;\n    granularity?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/analytics/bi/revenue-trends\", { params });\n  }\n\n  async getCustomerAnalytics(params?: {\n    segment?: string;\n    period?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/analytics/bi/customer-analytics\", { params });\n  }\n\n  async getChurnAnalysis(params?: { period?: string; cohort?: string }): Promise<{ data: any }> {\n    return this.get(\"/api/analytics/bi/churn-analysis\", { params });\n  }\n\n  async getServicePerformance(params?: {\n    service_type?: string;\n    period?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/analytics/bi/service-performance\", { params });\n  }\n\n  async getOperationalMetrics(params?: {\n    department?: string;\n    period?: string;\n  }): Promise<{ data: any }> {\n    return this.get(\"/api/analytics/bi/operational-metrics\", { params });\n  }\n\n  // Data Export\n  async exportData(params: {\n    data_type: string;\n    format: \"CSV\" | \"EXCEL\" | \"JSON\";\n    filters?: Record<string, any>;\n    date_range?: { start: string; end: string };\n  }): Promise<{ data: { export_id: string; download_url: string } }> {\n    return this.post(\"/api/analytics/export\", params);\n  }\n\n  async getExportStatus(exportId: string): Promise<{\n    data: { status: string; progress: number; download_url?: string };\n  }> {\n    return this.get(`/api/analytics/export/${exportId}/status`);\n  }\n\n  // Real-time Analytics\n  async getRealTimeMetrics(metrics: string[]): Promise<{ data: Record<string, any> }> {\n    return this.post(\"/api/analytics/realtime\", { metrics });\n  }\n\n  async subscribeToMetrics(\n    metrics: string[],\n    callback: (data: any) => void,\n  ): Promise<{ subscription_id: string }> {\n    const response = await this.post(\"/api/analytics/realtime/subscribe\", {\n      metrics,\n    });\n    // Note: Actual WebSocket implementation would be handled by the real-time system\n    return response;\n  }\n}\n","/**\n * ISP Framework API Client\n * Refactored using composition pattern for better maintainability\n * Composes module-specific clients into unified interface\n */\n\nimport { IdentityApiClient } from \"./clients/IdentityApiClient\";\nimport { NetworkingApiClient } from \"./clients/NetworkingApiClient\";\nimport { BillingApiClient } from \"./clients/BillingApiClient\";\nimport { ServicesApiClient } from \"./clients/ServicesApiClient\";\nimport { SupportApiClient } from \"./clients/SupportApiClient\";\nimport { ResellersApiClient } from \"./clients/ResellersApiClient\";\nimport { FieldOpsApiClient } from \"./clients/FieldOpsApiClient\";\nimport { NotificationsApiClient } from \"./clients/NotificationsApiClient\";\nimport { ComplianceApiClient } from \"./clients/ComplianceApiClient\";\nimport { LicensingApiClient } from \"./clients/LicensingApiClient\";\nimport { InventoryApiClient } from \"./clients/InventoryApiClient\";\nimport { AnalyticsApiClient } from \"./clients/AnalyticsApiClient\";\nimport type { PaginatedResponse, QueryParams } from \"./types/api\";\nimport type { ISPTenant, TenantNotification } from \"../types/tenant\";\n\ntype HttpRequestOptions = Omit<RequestInit, \"body\" | \"headers\"> & {\n  headers?: HeadersInit;\n  body?: BodyInit | Record<string, any> | Array<Record<string, any>> | null;\n};\ntype NotificationPayload = Omit<\n  Parameters<NotificationsApiClient[\"sendNotification\"]>[0],\n  \"channel\"\n>;\n\nexport interface ISPApiClientConfig {\n  baseURL: string;\n  apiKey?: string;\n  tenantId?: string;\n  timeout?: number;\n  defaultHeaders?: Record<string, string>;\n}\n\n/**\n * Main ISP API Client using Composition Pattern\n * Delegates to specialized module clients\n */\nexport class ISPApiClient {\n  private config: ISPApiClientConfig;\n  private defaultHeaders: Record<string, string>;\n  private readonly baseURL: string;\n\n  // Module-specific clients\n  public readonly identity: IdentityApiClient;\n  public readonly networking: NetworkingApiClient;\n  public readonly billing: BillingApiClient;\n  public readonly services: ServicesApiClient;\n  public readonly support: SupportApiClient;\n  public readonly resellers: ResellersApiClient;\n  public readonly fieldOps: FieldOpsApiClient;\n  public readonly notifications: NotificationsApiClient;\n  public readonly compliance: ComplianceApiClient;\n  public readonly licensing: LicensingApiClient;\n  public readonly inventory: InventoryApiClient;\n  public readonly analytics: AnalyticsApiClient;\n\n  constructor(config: ISPApiClientConfig) {\n    this.config = config;\n    this.baseURL = config.baseURL;\n\n    // Build default headers\n    this.defaultHeaders = {\n      \"X-API-Version\": \"1.0\",\n      ...config.defaultHeaders,\n    };\n\n    if (config.apiKey) {\n      this.defaultHeaders[\"Authorization\"] = `Bearer ${config.apiKey}`;\n    }\n\n    if (config.tenantId) {\n      this.defaultHeaders[\"X-Tenant-ID\"] = config.tenantId;\n    }\n\n    // Initialize module clients\n    this.identity = new IdentityApiClient(config.baseURL, this.defaultHeaders);\n    this.networking = new NetworkingApiClient(config.baseURL, this.defaultHeaders);\n    this.billing = new BillingApiClient(config.baseURL, this.defaultHeaders);\n    this.services = new ServicesApiClient(config.baseURL, this.defaultHeaders);\n    this.support = new SupportApiClient(config.baseURL, this.defaultHeaders);\n    this.resellers = new ResellersApiClient(config.baseURL, this.defaultHeaders);\n    this.fieldOps = new FieldOpsApiClient(config.baseURL, this.defaultHeaders);\n    this.notifications = new NotificationsApiClient(config.baseURL, this.defaultHeaders);\n    this.compliance = new ComplianceApiClient(config.baseURL, this.defaultHeaders);\n    this.licensing = new LicensingApiClient(config.baseURL, this.defaultHeaders);\n    this.inventory = new InventoryApiClient(config.baseURL, this.defaultHeaders);\n    this.analytics = new AnalyticsApiClient(config.baseURL, this.defaultHeaders);\n  }\n\n  private buildQuery(params?: Record<string, any>): string {\n    if (!params) return \"\";\n    const searchParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        searchParams.append(key, String(value));\n      }\n    });\n    const queryString = searchParams.toString();\n    return queryString ? `?${queryString}` : \"\";\n  }\n\n  private normalizeBody(body: HttpRequestOptions[\"body\"]): BodyInit | null | undefined {\n    if (body === null || body === undefined) {\n      return body ?? undefined;\n    }\n\n    if (typeof body === \"string\" || body instanceof URLSearchParams || body instanceof FormData) {\n      return body;\n    }\n\n    if (body instanceof Blob || body instanceof ArrayBuffer) {\n      return body;\n    }\n\n    if (ArrayBuffer.isView(body)) {\n      return body as BodyInit;\n    }\n\n    return JSON.stringify(body);\n  }\n\n  private async http<T>(path: string, options: HttpRequestOptions = {}): Promise<T> {\n    const url = `${this.baseURL}${path}`;\n    const headers: HeadersInit = {\n      \"Content-Type\": \"application/json\",\n      ...this.defaultHeaders,\n      ...(options.headers || {}),\n    };\n\n    const normalizedBody = this.normalizeBody(options.body);\n    const response = await fetch(url, {\n      ...options,\n      headers,\n      body: normalizedBody ?? null,\n    });\n\n    if (!response.ok) {\n      const message = await response.text().catch(() => response.statusText);\n      throw new Error(message || `Request failed with status ${response.status}`);\n    }\n\n    if (response.status === 204) {\n      return {} as T;\n    }\n\n    return (await response.json()) as T;\n  }\n\n  // Convenience methods for common operations\n  async getCustomers(params?: QueryParams) {\n    return this.identity.getCustomers(params);\n  }\n\n  async getCustomer(customerId: string, params?: QueryParams) {\n    return this.identity.getCustomer(customerId, params);\n  }\n\n  async getNetworkDevices(params?: QueryParams) {\n    return this.networking.getNetworkDevices(params);\n  }\n\n  async getBillingProcessors(params?: QueryParams) {\n    return this.billing.getBillingProcessors(params);\n  }\n\n  async getTransactions(params?: QueryParams) {\n    return this.billing.getTransactions(params);\n  }\n\n  async getTenant(tenantId: string) {\n    return this.http<{ data: ISPTenant }>(`/api/tenants/${tenantId}`);\n  }\n\n  async getTenantNotifications(tenantId: string, params?: Record<string, any>) {\n    return this.http<{ data: TenantNotification[] }>(\n      `/api/tenants/${tenantId}/notifications${this.buildQuery(params)}`,\n    );\n  }\n\n  async markNotificationRead(notificationId: string) {\n    await this.http(`/api/tenants/notifications/${notificationId}/read`, { method: \"POST\" });\n  }\n\n  async markAllNotificationsRead(tenantId: string) {\n    await this.http(`/api/tenants/${tenantId}/notifications/read-all`, { method: \"POST\" });\n  }\n\n  async dismissNotification(notificationId: string) {\n    await this.http(`/api/tenants/notifications/${notificationId}/dismiss`, { method: \"POST\" });\n  }\n\n  // Legacy methods for backward compatibility\n  async portalLogin(credentials: any) {\n    return this.identity.authenticate(credentials);\n  }\n\n  async createPaymentIntent(data: any) {\n    return this.billing.createPaymentIntent(data);\n  }\n\n  async getNetworkTopology(params?: any) {\n    return this.networking.getNetworkTopology(params);\n  }\n\n  // Identity module\n  async getUsers(params?: QueryParams) {\n    return this.identity.getUsers(params);\n  }\n\n  async getUser(userId: string) {\n    return this.identity.getUser(userId);\n  }\n\n  async createCustomer(customerData: Parameters<IdentityApiClient[\"createCustomer\"]>[0]) {\n    return this.identity.createCustomer(customerData);\n  }\n\n  // Billing module\n  async getInvoices(params?: QueryParams) {\n    return this.billing.getInvoices(params);\n  }\n\n  async getInvoice(invoiceId: string) {\n    return this.billing.getInvoice(invoiceId);\n  }\n\n  async getPayments(params?: QueryParams) {\n    return this.billing.getTransactions(params);\n  }\n\n  async processPayment(paymentData: any) {\n    return this.billing.createPaymentIntent(paymentData);\n  }\n\n  async getSubscriptions(customerId?: string) {\n    const query = this.buildQuery(customerId ? { customerId } : undefined);\n    return this.http(`/api/billing/subscriptions${query}`);\n  }\n\n  // Services module\n  async getServiceCatalog(params?: QueryParams) {\n    return this.services.getServicePlans(params);\n  }\n\n  async getServiceInstances(customerId?: string, params?: QueryParams) {\n    if (customerId) {\n      return this.services.getCustomerServices(customerId, params);\n    }\n    return this.services.getServiceOrders(params);\n  }\n\n  async provisionService(order: Parameters<ServicesApiClient[\"createServiceOrder\"]>[0]) {\n    return this.services.createServiceOrder(order);\n  }\n\n  async getUsageTracking(serviceId: string, period?: string) {\n    const params = period ? { start_date: period } : {};\n    return this.services.getServiceUsage(serviceId, params);\n  }\n\n  // Networking module\n  async getNetworkDevice(deviceId: string) {\n    return this.networking.getNetworkDevice(deviceId);\n  }\n\n  async getIPAMData(params?: Record<string, any>) {\n    return this.http(`/api/networking/ipam${this.buildQuery(params)}`);\n  }\n\n  async allocateIP(request: Record<string, any>) {\n    return this.http(\"/api/networking/ipam/allocate\", { method: \"POST\", body: request });\n  }\n\n  async getNetworkMonitoring() {\n    return this.networking.getNetworkHealth();\n  }\n\n  // Sales module\n  async getLeads(params?: QueryParams) {\n    return this.http(`/api/sales/leads${this.buildQuery(params)}`);\n  }\n\n  async createLead(lead: Record<string, any>) {\n    return this.http(\"/api/sales/leads\", { method: \"POST\", body: lead });\n  }\n\n  async getCRMData(customerId: string) {\n    return this.http(`/api/sales/crm/${customerId}`);\n  }\n\n  async getCampaigns(params?: QueryParams) {\n    return this.http(`/api/sales/campaigns${this.buildQuery(params)}`);\n  }\n\n  async getSalesAnalytics(params?: QueryParams) {\n    return this.http(`/api/sales/analytics${this.buildQuery(params)}`);\n  }\n\n  // Support module\n  async getSupportTickets(params?: QueryParams) {\n    return this.support.getTickets(params);\n  }\n\n  async getSupportTicket(ticketId: string) {\n    return this.support.getTicket(ticketId);\n  }\n\n  async createSupportTicket(ticket: Parameters<SupportApiClient[\"createTicket\"]>[0]) {\n    return this.support.createTicket(ticket);\n  }\n\n  async updateSupportTicket(\n    ticketId: string,\n    updates: Parameters<SupportApiClient[\"updateTicket\"]>[1],\n  ) {\n    return this.support.updateTicket(ticketId, updates);\n  }\n\n  async getKnowledgeBase(params?: QueryParams) {\n    return this.support.getKnowledgeArticles(params);\n  }\n\n  async getSLAMetrics(params?: Record<string, any>) {\n    return this.http(`/api/support/sla-metrics${this.buildQuery(params)}`);\n  }\n\n  // Resellers module\n  async getResellers(params?: QueryParams) {\n    return this.resellers.getPartners(params);\n  }\n\n  async getReseller(partnerId: string) {\n    return this.resellers.getPartner(partnerId);\n  }\n\n  async getResellerCommissions(params?: QueryParams) {\n    return this.resellers.getCommissionPayments(params);\n  }\n\n  async getResellerPerformance(params?: Record<string, any>) {\n    return this.resellers.getChannelPerformance(params);\n  }\n\n  // Analytics module\n  async getBusinessIntelligence(params?: QueryParams) {\n    return this.analytics.getDashboards(params);\n  }\n\n  async getDataVisualization(\n    dashboardId: string,\n    params?: { widgetId?: string } & Record<string, any>,\n  ) {\n    const widgetId = params?.widgetId;\n    if (!widgetId) {\n      throw new Error(\"widgetId is required to load visualization data\");\n    }\n    const { widgetId: _, ...rest } = params ?? {};\n    return this.analytics.getWidgetData(dashboardId, widgetId, rest);\n  }\n\n  async getCustomReports(params?: QueryParams) {\n    return this.analytics.getReports(params);\n  }\n\n  async generateReport(config: {\n    reportId: string;\n    parameters?: Record<string, any>;\n    format?: string;\n  }) {\n    return this.analytics.executeReport(config.reportId, config.parameters ?? {}, config.format);\n  }\n\n  // Inventory module\n  async getInventoryItems(params?: QueryParams) {\n    return this.inventory.getInventoryItems(params);\n  }\n\n  async getWarehouseManagement(params?: QueryParams) {\n    return this.http(`/api/inventory/warehouses${this.buildQuery(params)}`);\n  }\n\n  async getProcurementOrders(params?: QueryParams) {\n    return this.http(`/api/inventory/procurement${this.buildQuery(params)}`);\n  }\n\n  // Field operations module\n  async getWorkOrders(params?: QueryParams) {\n    return this.fieldOps.getWorkOrders(params);\n  }\n\n  async getWorkOrder(workOrderId: string) {\n    return this.fieldOps.getWorkOrder(workOrderId);\n  }\n\n  async createWorkOrder(data: Parameters<FieldOpsApiClient[\"createWorkOrder\"]>[0]) {\n    return this.fieldOps.createWorkOrder(data);\n  }\n\n  async getTechnicians(params?: QueryParams) {\n    return this.fieldOps.getTechnicians(params);\n  }\n\n  async getTechnicianLocation(technicianId: string) {\n    const technician = await this.fieldOps.getTechnician(technicianId);\n    return {\n      data: technician.data.current_location,\n    };\n  }\n\n  async updateTechnicianLocation(\n    technicianId: string,\n    location: Parameters<FieldOpsApiClient[\"updateTechnicianLocation\"]>[1],\n  ) {\n    return this.fieldOps.updateTechnicianLocation(technicianId, location);\n  }\n\n  // Compliance module\n  async getComplianceReports(params?: QueryParams) {\n    return this.http(`/api/compliance/reports${this.buildQuery(params)}`);\n  }\n\n  async getAuditTrail(params?: QueryParams) {\n    return this.http(`/api/compliance/audit-trail${this.buildQuery(params)}`);\n  }\n\n  async getDataProtectionStatus(params?: QueryParams) {\n    return this.http(`/api/compliance/data-protection${this.buildQuery(params)}`);\n  }\n\n  // Notifications module\n  async getNotificationTemplates(params?: QueryParams) {\n    return this.notifications.getTemplates(params);\n  }\n\n  async sendEmail(payload: NotificationPayload) {\n    return this.notifications.sendNotification({\n      ...payload,\n      channel: \"EMAIL\",\n    });\n  }\n\n  async sendSMS(payload: NotificationPayload) {\n    return this.notifications.sendNotification({\n      ...payload,\n      channel: \"SMS\",\n    });\n  }\n\n  async getAutomationRules(params?: QueryParams) {\n    return this.http(`/api/automation/rules${this.buildQuery(params)}`);\n  }\n\n  // Licensing module\n  async getLicenseInfo(params?: QueryParams) {\n    return this.http(`/api/licensing/licenses${this.buildQuery(params)}`);\n  }\n\n  async getFeatureEntitlements(params?: QueryParams) {\n    return this.http(`/api/licensing/entitlements${this.buildQuery(params)}`);\n  }\n\n  async validateLicense(payload: Record<string, any>) {\n    return this.http(\"/api/licensing/validate\", { method: \"POST\", body: payload });\n  }\n\n  // Dashboards\n  async getAdminDashboard(params?: QueryParams) {\n    return this.http(`/api/dashboards/admin${this.buildQuery(params)}`);\n  }\n\n  async getCustomerDashboard(params?: QueryParams) {\n    return this.http(`/api/dashboards/customer${this.buildQuery(params)}`);\n  }\n\n  async getResellerDashboard(params?: QueryParams) {\n    return this.http(`/api/dashboards/reseller${this.buildQuery(params)}`);\n  }\n\n  async getTechnicianDashboard(params?: QueryParams) {\n    return this.http(`/api/dashboards/technician${this.buildQuery(params)}`);\n  }\n\n  // Configuration methods\n  updateConfig(updates: Partial<ISPApiClientConfig>) {\n    this.config = { ...this.config, ...updates };\n\n    // Update headers if needed\n    if (updates.apiKey) {\n      this.defaultHeaders[\"Authorization\"] = `Bearer ${updates.apiKey}`;\n    }\n\n    if (updates.tenantId) {\n      this.defaultHeaders[\"X-Tenant-ID\"] = updates.tenantId;\n    }\n  }\n\n  getConfig(): Readonly<ISPApiClientConfig> {\n    return Object.freeze({ ...this.config });\n  }\n}\n\n// Global instance management\nlet globalClient: ISPApiClient | null = null;\n\nexport function createISPApiClient(config: ISPApiClientConfig): ISPApiClient {\n  return new ISPApiClient(config);\n}\n\nexport function setGlobalISPApiClient(client: ISPApiClient): void {\n  globalClient = client;\n}\n\nexport function getISPApiClient(): ISPApiClient {\n  if (!globalClient) {\n    throw new Error(\"ISP API client not initialized. Call setGlobalISPApiClient first.\");\n  }\n  return globalClient;\n}\n\n// Export for backward compatibility\nexport const ispApiClient = {\n  get: () => getISPApiClient(),\n  create: createISPApiClient,\n  setGlobal: setGlobalISPApiClient,\n};\n\n// Re-export types for convenience\nexport type { PaginatedResponse, QueryParams };\n","/**\n * ISP Framework Tenant Hook\n * Manages multi-tenant context for ISP operations\n * Refactored using composition pattern for better maintainability\n */\n\nimport { useContext, createContext, useMemo } from \"react\";\nimport type {\n  TenantSession,\n  TenantPermissions,\n  TenantLimitsUsage,\n  TenantBranding,\n  TenantNotification,\n} from \"../types/tenant\";\n\n// Import focused sub-hooks\nimport { useTenantSession } from \"./tenant/useTenantSession\";\nimport { useTenantPermissions } from \"./tenant/useTenantPermissions\";\nimport { useTenantLimits } from \"./tenant/useTenantLimits\";\nimport { useTenantSettings } from \"./tenant/useTenantSettings\";\nimport { useTenantNotifications } from \"./tenant/useTenantNotifications\";\n\ninterface ISPTenantContextValue {\n  // Current tenant session\n  session: TenantSession | null;\n  tenant: TenantSession[\"tenant\"] | null;\n  isLoading: boolean;\n  error: string | null;\n\n  // Tenant operations\n  loadTenant: (tenantId: string) => Promise<void>;\n  switchTenant: (tenantId: string) => Promise<void>;\n  refreshTenant: () => Promise<void>;\n  clearTenant: () => void;\n\n  // Permission checking\n  hasPermission: (permission: keyof TenantPermissions) => boolean;\n  hasAnyPermission: (permissions: (keyof TenantPermissions)[]) => boolean;\n  hasAllPermissions: (permissions: (keyof TenantPermissions)[]) => boolean;\n  hasFeature: (feature: string) => boolean;\n  hasModule: (module: string) => boolean;\n\n  // Limits and usage\n  getLimitsUsage: () => TenantLimitsUsage;\n  isLimitReached: (limit: string) => boolean;\n  getUsagePercentage: (limit: string) => number;\n  isTrialExpiring: () => boolean;\n  getTrialDaysLeft: () => number;\n  isTenantActive: () => boolean;\n\n  // Tenant settings\n  getTenantSetting: <T = any>(key: string, defaultValue?: T) => T;\n  updateTenantSetting: (key: string, value: any) => Promise<void>;\n  getBranding: () => TenantBranding;\n  applyBranding: () => void;\n\n  // Notifications\n  notifications: TenantNotification[];\n  unreadCount: number;\n  markNotificationRead: (notificationId: string) => Promise<void>;\n  markAllAsRead: () => Promise<void>;\n  dismissNotification: (notificationId: string) => Promise<void>;\n  addNotification: (notification: Omit<TenantNotification, \"id\" | \"created_at\">) => void;\n}\n\nconst ISPTenantContext = createContext<ISPTenantContextValue | null>(null);\n\n/**\n * Main ISP Tenant Hook using Composition Pattern\n * Combines focused sub-hooks for better maintainability\n */\nexport function useISPTenant(): ISPTenantContextValue {\n  const context = useContext(ISPTenantContext);\n  if (!context) {\n    throw new Error(\"useISPTenant must be used within an ISPTenantProvider\");\n  }\n  return context;\n}\n\n/**\n * Create ISP Tenant Context Value using Composition\n * Composes multiple focused hooks into a unified interface\n */\nexport function createISPTenantContextValue(): ISPTenantContextValue {\n  // Core session management\n  const sessionHook = useTenantSession();\n  const { session, isLoading, error } = sessionHook;\n\n  // Composed functionality using focused hooks\n  const permissionsHook = useTenantPermissions(session);\n  const limitsHook = useTenantLimits(session);\n  const settingsHook = useTenantSettings(session);\n  const notificationsHook = useTenantNotifications(session);\n\n  // Extract tenant for convenience\n  const tenant = useMemo(() => session?.tenant || null, [session?.tenant]);\n\n  // Compose the complete interface\n  return {\n    // Session state\n    session,\n    tenant,\n    isLoading,\n    error,\n\n    // Session operations\n    loadTenant: sessionHook.loadTenant,\n    switchTenant: sessionHook.switchTenant,\n    refreshTenant: sessionHook.refreshTenant,\n    clearTenant: sessionHook.clearTenant,\n\n    // Permissions\n    hasPermission: permissionsHook.hasPermission,\n    hasAnyPermission: permissionsHook.hasAnyPermission,\n    hasAllPermissions: permissionsHook.hasAllPermissions,\n    hasFeature: permissionsHook.hasFeature,\n    hasModule: permissionsHook.hasModule,\n\n    // Limits and usage\n    getLimitsUsage: limitsHook.getLimitsUsage,\n    isLimitReached: limitsHook.isLimitReached,\n    getUsagePercentage: limitsHook.getUsagePercentage,\n    isTrialExpiring: limitsHook.isTrialExpiring,\n    getTrialDaysLeft: limitsHook.getTrialDaysLeft,\n    isTenantActive: limitsHook.isTenantActive,\n\n    // Settings and branding\n    getTenantSetting: settingsHook.getTenantSetting,\n    updateTenantSetting: settingsHook.updateTenantSetting,\n    getBranding: settingsHook.getBranding,\n    applyBranding: settingsHook.applyBranding,\n\n    // Notifications\n    notifications: notificationsHook.notifications,\n    unreadCount: notificationsHook.unreadCount,\n    markNotificationRead: notificationsHook.markAsRead,\n    markAllAsRead: notificationsHook.markAllAsRead,\n    dismissNotification: notificationsHook.dismissNotification,\n    addNotification: notificationsHook.addNotification,\n  };\n}\n\n// Export context for provider\nexport { ISPTenantContext };\n\n// Legacy support - alias for provider compatibility\nexport const useISPTenantProvider = useISPTenant;\n\n// Legacy support - re-export types\nexport type {\n  TenantSession,\n  TenantPermissions,\n  TenantLimitsUsage,\n  TenantBranding,\n  TenantNotification,\n};\n","/**\n * Standardized Error Handler Hook\n * Provides consistent error handling across all components and hooks\n */\n\nimport { useCallback, useState, useRef, useEffect } from \"react\";\nimport {\n  ISPError,\n  classifyError,\n  shouldRetry,\n  calculateRetryDelay,\n  logError,\n  deduplicateError,\n  DEFAULT_ERROR_CONFIG,\n  type ErrorHandlingConfig,\n  type ErrorSeverity,\n} from \"../utils/errorUtils\";\nimport { useNotifications } from \"./useNotifications\";\nimport { useISPTenant } from \"./useISPTenant\";\n\nexport interface UseStandardErrorHandlerOptions {\n  context: string;\n  enableRetry?: boolean;\n  enableNotifications?: boolean;\n  enableLogging?: boolean;\n  maxRetries?: number;\n  retryDelay?: number;\n  fallbackData?: any;\n  onError?: (error: ISPError) => void;\n  onRetry?: (attempt: number, error: ISPError) => void;\n  onMaxRetriesReached?: (error: ISPError) => void;\n  onFallback?: (fallbackData: any) => void;\n}\n\nexport interface UseStandardErrorHandlerReturn {\n  error: ISPError | null;\n  isRetrying: boolean;\n  retryCount: number;\n  hasReachedMaxRetries: boolean;\n  clearError: () => void;\n  handleError: (error: unknown) => ISPError;\n  retry: () => Promise<void>;\n  withErrorHandling: <T>(operation: () => Promise<T>) => Promise<T | null>;\n}\n\nexport function useStandardErrorHandler(\n  options: UseStandardErrorHandlerOptions,\n): UseStandardErrorHandlerReturn {\n  const {\n    context,\n    enableRetry = DEFAULT_ERROR_CONFIG.maxRetries > 0,\n    enableNotifications = DEFAULT_ERROR_CONFIG.enableUserNotifications,\n    enableLogging = DEFAULT_ERROR_CONFIG.enableLogging,\n    maxRetries = DEFAULT_ERROR_CONFIG.maxRetries,\n    retryDelay = DEFAULT_ERROR_CONFIG.retryDelayMs,\n    fallbackData,\n    onError,\n    onRetry,\n    onMaxRetriesReached,\n    onFallback,\n  } = options;\n\n  const { showError, showWarning } = useNotifications();\n  const { currentTenant } = useISPTenant();\n\n  const [error, setError] = useState<ISPError | null>(null);\n  const [isRetrying, setIsRetrying] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n  const [hasReachedMaxRetries, setHasReachedMaxRetries] = useState(false);\n\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const lastOperationRef = useRef<(() => Promise<any>) | null>(null);\n\n  // Clear retry timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const clearError = useCallback(() => {\n    setError(null);\n    setRetryCount(0);\n    setIsRetrying(false);\n    setHasReachedMaxRetries(false);\n\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n      retryTimeoutRef.current = undefined;\n    }\n  }, []);\n\n  const handleError = useCallback(\n    (rawError: unknown): ISPError => {\n      const ispError = classifyError(rawError, context);\n\n      // Log error with tenant context\n      if (enableLogging && deduplicateError(ispError)) {\n        logError(ispError, {\n          tenantId: currentTenant?.id,\n          sessionId:\n            typeof window !== \"undefined\"\n              ? window.sessionStorage.getItem(\"sessionId\") || undefined\n              : undefined,\n        });\n      }\n\n      // Show user notification based on severity\n      if (enableNotifications) {\n        if (ispError.severity === \"critical\" || ispError.severity === \"high\") {\n          showError(ispError.userMessage, {\n            persistent: true,\n            actions: ispError.retryable ? [{ label: \"Retry\", action: () => retry() }] : undefined,\n          });\n        } else if (ispError.severity === \"medium\") {\n          showWarning(ispError.userMessage);\n        }\n        // Don't show notifications for 'low' severity errors\n      }\n\n      setError(ispError);\n      onError?.(ispError);\n\n      return ispError;\n    },\n    [context, enableLogging, enableNotifications, currentTenant, showError, showWarning, onError],\n  );\n\n  const retry = useCallback(async () => {\n    if (!error || !lastOperationRef.current || !shouldRetry(error, retryCount, maxRetries)) {\n      return;\n    }\n\n    setIsRetrying(true);\n    const currentRetryCount = retryCount + 1;\n    setRetryCount(currentRetryCount);\n\n    onRetry?.(currentRetryCount, error);\n\n    try {\n      // Calculate retry delay with exponential backoff\n      const delay = calculateRetryDelay(currentRetryCount - 1, retryDelay);\n\n      await new Promise((resolve) => {\n        retryTimeoutRef.current = setTimeout(resolve, delay);\n      });\n\n      if (lastOperationRef.current) {\n        const result = await lastOperationRef.current();\n        clearError(); // Success - clear error\n        return result;\n      }\n    } catch (retryError) {\n      const newError = handleError(retryError);\n\n      if (currentRetryCount >= maxRetries) {\n        setHasReachedMaxRetries(true);\n        onMaxRetriesReached?.(newError);\n\n        // Use fallback if available\n        if (fallbackData !== undefined) {\n          onFallback?.(fallbackData);\n        }\n      }\n    } finally {\n      setIsRetrying(false);\n    }\n  }, [\n    error,\n    retryCount,\n    maxRetries,\n    retryDelay,\n    onRetry,\n    onMaxRetriesReached,\n    fallbackData,\n    onFallback,\n    handleError,\n    clearError,\n  ]);\n\n  const withErrorHandling = useCallback(\n    async <T>(operation: () => Promise<T>): Promise<T | null> => {\n      // Store operation reference for retry\n      lastOperationRef.current = operation;\n\n      try {\n        clearError();\n        const result = await operation();\n        return result;\n      } catch (operationError) {\n        const ispError = handleError(operationError);\n\n        // Auto-retry if enabled and error is retryable\n        if (enableRetry && shouldRetry(ispError, 0, maxRetries)) {\n          try {\n            return await retry();\n          } catch (retryError) {\n            // Retry failed, handle as final error\n            handleError(retryError);\n          }\n        }\n\n        // Use fallback if available and max retries reached\n        if (fallbackData !== undefined && (hasReachedMaxRetries || !ispError.retryable)) {\n          onFallback?.(fallbackData);\n          return fallbackData;\n        }\n\n        return null;\n      }\n    },\n    [\n      enableRetry,\n      maxRetries,\n      handleError,\n      retry,\n      fallbackData,\n      onFallback,\n      hasReachedMaxRetries,\n      clearError,\n    ],\n  );\n\n  return {\n    error,\n    isRetrying,\n    retryCount,\n    hasReachedMaxRetries,\n    clearError,\n    handleError,\n    retry,\n    withErrorHandling,\n  };\n}\n\n/**\n * Specialized hooks for common error handling scenarios\n */\n\n// For API operations\nexport function useApiErrorHandler(\n  context: string,\n  options: Partial<UseStandardErrorHandlerOptions> = {},\n) {\n  return useStandardErrorHandler({\n    ...options,\n    context: `API: ${context}`,\n    enableRetry: options.enableRetry ?? true,\n    maxRetries: options.maxRetries ?? 3,\n  });\n}\n\n// For form operations\nexport function useFormErrorHandler(\n  formName: string,\n  options: Partial<UseStandardErrorHandlerOptions> = {},\n) {\n  return useStandardErrorHandler({\n    ...options,\n    context: `Form: ${formName}`,\n    enableRetry: options.enableRetry ?? false,\n    enableNotifications: options.enableNotifications ?? true,\n  });\n}\n\n// For data loading operations\nexport function useDataLoadingErrorHandler(\n  dataType: string,\n  options: Partial<UseStandardErrorHandlerOptions> = {},\n) {\n  return useStandardErrorHandler({\n    ...options,\n    context: `Data Loading: ${dataType}`,\n    enableRetry: options.enableRetry ?? true,\n    maxRetries: options.maxRetries ?? 2,\n  });\n}\n\n// For real-time operations (WebSocket, etc.)\nexport function useRealtimeErrorHandler(\n  connectionType: string,\n  options: Partial<UseStandardErrorHandlerOptions> = {},\n) {\n  return useStandardErrorHandler({\n    ...options,\n    context: `Realtime: ${connectionType}`,\n    enableRetry: options.enableRetry ?? true,\n    maxRetries: options.maxRetries ?? 5,\n    retryDelay: options.retryDelay ?? 2000,\n  });\n}\n\n// For file upload operations\nexport function useUploadErrorHandler(\n  uploadType: string,\n  options: Partial<UseStandardErrorHandlerOptions> = {},\n) {\n  return useStandardErrorHandler({\n    ...options,\n    context: `Upload: ${uploadType}`,\n    enableRetry: options.enableRetry ?? true,\n    maxRetries: options.maxRetries ?? 2,\n    retryDelay: options.retryDelay ?? 3000,\n  });\n}\n\n/**\n * Global error handler configuration\n */\nlet globalErrorConfig: Partial<ErrorHandlingConfig> = {};\n\nexport function configureGlobalErrorHandling(config: Partial<ErrorHandlingConfig>): void {\n  globalErrorConfig = { ...DEFAULT_ERROR_CONFIG, ...config };\n}\n\nexport function getGlobalErrorConfig(): ErrorHandlingConfig {\n  return { ...DEFAULT_ERROR_CONFIG, ...globalErrorConfig };\n}\n","/**\n * Standard Error Handler Hook - NO BACKWARD COMPATIBILITY\n * Use only useStandardErrorHandler for all error handling\n */\n\nimport { useCallback, useState } from \"react\";\n\n// NO LEGACY COMPATIBILITY - Import useStandardErrorHandler directly\nexport { useStandardErrorHandler as useErrorHandler } from \"./useStandardErrorHandler\";\n\n// Breaking change: Legacy useErrorHandler interfaces removed\n// Migration: Replace with useStandardErrorHandler\n\n// Global error handler for API client and other global error handling\ntype GlobalErrorHandler = (errorInfo: { message: string; error?: Error }) => void;\n\nlet globalErrorHandler: GlobalErrorHandler | null = null;\n\nexport function setGlobalErrorHandler(handler: GlobalErrorHandler): void {\n  globalErrorHandler = handler;\n}\n\nexport function getGlobalErrorHandler(): GlobalErrorHandler | null {\n  return globalErrorHandler;\n}\n\n// Error boundary hook for React components\nexport interface UseErrorBoundaryReturn {\n  error: Error | null;\n  resetError: () => void;\n  showError: (error: Error) => void;\n}\n\nexport function useErrorBoundary(): UseErrorBoundaryReturn {\n  const [error, setError] = useState<Error | null>(null);\n\n  const resetError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  const showError = useCallback((err: Error) => {\n    setError(err);\n    if (globalErrorHandler) {\n      globalErrorHandler({ message: err.message, error: err });\n    }\n  }, []);\n\n  return {\n    error,\n    resetError,\n    showError,\n  };\n}\n","import { setGlobalErrorHandler } from \"../hooks/useErrorHandler\";\n\nimport { type ApiClient, createApiClient } from \"./client\";\n\nexport interface ApiConfig {\n  baseUrl: string;\n  apiKey?: string;\n  tenantId?: string;\n  timeout?: number;\n  retryAttempts?: number;\n  enableErrorLogging?: boolean;\n}\n\nexport interface ApiEnvironments {\n  development: ApiConfig;\n  staging: ApiConfig;\n  production: ApiConfig;\n}\n\n// Default configurations for different environments\nexport const defaultConfigs: ApiEnvironments = {\n  development: {\n    baseUrl: \"http://localhost:8000\",\n    timeout: 10000,\n    retryAttempts: 2,\n    enableErrorLogging: true,\n  },\n  staging: {\n    baseUrl: \"https://api-staging.dotmac.com\",\n    timeout: 15000,\n    retryAttempts: 3,\n    enableErrorLogging: true,\n  },\n  production: {\n    baseUrl: \"https://api.dotmac.com\",\n    timeout: 10000,\n    retryAttempts: 3,\n    enableErrorLogging: false,\n  },\n};\n\nlet currentClient: ApiClient | null = null;\nlet currentConfig: ApiConfig | null = null;\n\nexport function initializeApi(config?: Partial<ApiConfig>): ApiClient {\n  // Determine environment\n  const environment = (process.env[\"NODE_ENV\"] || \"development\") as keyof ApiEnvironments;\n  const baseConfig = defaultConfigs[environment];\n\n  // Override with environment variables\n  const envConfig: Partial<ApiConfig> = {};\n\n  if (process.env[\"NEXT_PUBLIC_API_BASE_URL\"]) {\n    envConfig.baseUrl = process.env[\"NEXT_PUBLIC_API_BASE_URL\"];\n  }\n  if (process.env[\"NEXT_PUBLIC_API_KEY\"]) {\n    envConfig.apiKey = process.env[\"NEXT_PUBLIC_API_KEY\"];\n  }\n  if (process.env[\"NEXT_PUBLIC_TENANT_ID\"]) {\n    envConfig.tenantId = process.env[\"NEXT_PUBLIC_TENANT_ID\"];\n  }\n\n  // Merge configurations\n  const finalConfig: ApiConfig = {\n    ...baseConfig,\n    ...envConfig,\n    ...config,\n  };\n\n  // Remove undefined values\n  Object.keys(finalConfig).forEach((key) => {\n    const typedKey = key as keyof ApiConfig;\n    if (finalConfig[typedKey] === undefined) {\n      delete finalConfig[typedKey];\n    }\n  });\n\n  // Create API client\n  currentClient = createApiClient({\n    ...finalConfig,\n    onUnauthorized: () => {\n      if (currentClient) {\n        currentClient.clearAuthToken();\n      }\n\n      // Redirect to login if in browser\n      if (typeof window !== \"undefined\") {\n        const currentPath = window.location.pathname;\n        if (!currentPath.includes(\"/auth/login\")) {\n          window.location.href = \"/auth/login\";\n        }\n      }\n    },\n    onError: (_error) => {\n      if (finalConfig.enableErrorLogging) {\n        // You could integrate with error tracking services here\n        // e.g., Sentry, LogRocket, etc.\n      }\n    },\n  });\n\n  currentConfig = finalConfig;\n\n  // Set up global error handler for unhandled API errors\n  if (finalConfig.enableErrorLogging) {\n    setGlobalErrorHandler((_errorInfo) => {\n      // Send to error tracking service\n    });\n  }\n\n  return currentClient;\n}\n\nexport function getApiConfig(): ApiConfig | null {\n  return currentConfig;\n}\n\nexport function isApiInitialized(): boolean {\n  return currentClient !== null;\n}\n\nexport function requireApiClient(): ApiClient {\n  if (!currentClient) {\n    throw new Error(\"API client not initialized. Call initializeApi() first.\");\n  }\n  return currentClient;\n}\n\n// Helper function to check if API is available\nexport async function checkApiHealth(): Promise<{\n  available: boolean;\n  latency?: number;\n  error?: string;\n}> {\n  if (!currentClient || !currentConfig) {\n    return { available: false, error: \"API client not initialized\" };\n  }\n\n  const startTime = Date.now();\n\n  try {\n    // Try a simple health check endpoint\n    await fetch(`${currentConfig.baseUrl}/health`, {\n      method: \"GET\",\n      signal: AbortSignal.timeout(5000),\n    });\n\n    const latency = Date.now() - startTime;\n    return { available: true, latency };\n  } catch (error) {\n    return {\n      available: false,\n      latency: Date.now() - startTime,\n      error: error instanceof Error ? error.message : \"Unknown error\",\n    };\n  }\n}\n\n// Initialize API client automatically if environment variables are present\nif (typeof window !== \"undefined\" && process.env[\"NEXT_PUBLIC_API_BASE_URL\"]) {\n  try {\n    initializeApi();\n  } catch (_error) {\n    // Error handling intentionally empty\n  }\n}\n","/**\n * API Client Hook\n * Provides access to the configured API client instance\n * Following DRY patterns from existing hooks\n */\n\nimport { useMemo } from \"react\";\nimport { getApiClient, createApiClient, ApiClient } from \"../api/client\";\nimport type { ApiClientConfig } from \"../api/types\";\n\n// Global client instance\nlet globalClient: ApiClient | null = null;\n\nexport function useApiClient(config?: ApiClientConfig): ApiClient {\n  return useMemo(() => {\n    try {\n      // Try to get existing client first\n      return getApiClient();\n    } catch {\n      // If no client exists, create one with provided or default config\n      if (!globalClient) {\n        globalClient = createApiClient({\n          baseUrl: \"/api\",\n          defaultHeaders: {\n            \"Content-Type\": \"application/json\",\n          },\n          timeout: 30000,\n          retries: 3,\n          rateLimiting: true,\n          caching: true,\n          csrf: true,\n          auth: {\n            tokenHeader: \"Authorization\",\n            refreshEndpoint: \"/auth/refresh\",\n            autoRefresh: true,\n          },\n          onError: (error) => {\n            console.error(\"API Error:\", error);\n          },\n          onUnauthorized: () => {\n            // Handle unauthorized access\n            if (typeof window !== \"undefined\") {\n              window.location.href = \"/login\";\n            }\n          },\n          ...config,\n        });\n      }\n\n      return globalClient;\n    }\n  }, [config]);\n}\n","/**\n * Zod validation schemas for Partner Portal\n * Provides both client and server-side validation\n */\n\nimport { z } from \"zod\";\n\n// Base Partner Schema\nexport const PartnerSchema = z.object({\n  id: z.string().min(1),\n  name: z.string().min(2).max(100),\n  partnerCode: z\n    .string()\n    .min(3)\n    .max(10)\n    .regex(/^[A-Z0-9]+$/),\n  territory: z.string().min(2).max(50),\n  joinDate: z.string().datetime(),\n  status: z.enum([\"active\", \"inactive\", \"suspended\", \"pending\"]),\n  tier: z.enum([\"Bronze\", \"Silver\", \"Gold\", \"Platinum\"]),\n  contact: z.object({\n    name: z.string().min(2).max(50),\n    email: z.string().email(),\n    phone: z.string().regex(/^\\+?[1-9]\\d{1,14}$/), // E.164 format\n  }),\n});\n\n// Customer Schema with validation\nexport const CustomerSchema = z.object({\n  id: z.string().optional(),\n  name: z.string().min(2).max(100),\n  email: z.string().email(),\n  phone: z.string().regex(/^\\+?[1-9]\\d{1,14}$/),\n  address: z.string().min(10).max(200),\n  plan: z.enum([\"residential_basic\", \"residential_premium\", \"business_pro\", \"enterprise\"]),\n  mrr: z.number().min(0).max(10000),\n  status: z.enum([\"active\", \"pending\", \"suspended\", \"cancelled\"]),\n  joinDate: z.string().datetime(),\n  lastPayment: z.string().datetime().nullable(),\n  connectionStatus: z.enum([\"online\", \"offline\"]),\n  usage: z.number().min(0).max(100),\n});\n\n// Partner Login Schema\nexport const PartnerLoginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8).max(128),\n  partnerCode: z.string().min(3).max(10).optional(),\n  territory: z.string().max(50).optional(),\n  rememberMe: z.boolean().optional(),\n  mfaCode: z\n    .string()\n    .regex(/^\\d{6}$/)\n    .optional(), // 6-digit MFA code\n});\n\n// Territory Validation Schema\nexport const TerritoryValidationSchema = z.object({\n  address: z.string().min(10).max(200),\n  partnerId: z.string().min(1),\n});\n\n// Customer Creation Schema (subset for new customers)\nexport const CreateCustomerSchema = CustomerSchema.omit({\n  id: true,\n  joinDate: true,\n  lastPayment: true,\n  connectionStatus: true,\n  usage: true,\n}).extend({\n  initialPlan: z.string().optional(),\n  promotionalCode: z.string().max(20).optional(),\n});\n\n// Customer Update Schema (allows partial updates)\nexport const UpdateCustomerSchema = CustomerSchema.partial().omit({\n  id: true,\n  joinDate: true,\n});\n\n// Commission Record Schema\nexport const CommissionRecordSchema = z.object({\n  id: z.string().min(1),\n  customerId: z.string().min(1),\n  customerName: z.string().min(2).max(100),\n  period: z.string().regex(/^\\d{4}-\\d{2}$/), // YYYY-MM format\n  revenue: z.number().min(0),\n  commissionRate: z.number().min(0).max(1), // 0-100% as decimal\n  commissionAmount: z.number().min(0),\n  status: z.enum([\"pending\", \"paid\", \"disputed\"]),\n  payoutDate: z.string().datetime().optional(),\n});\n\n// API Query Parameters Schema\nexport const CustomerQueryParamsSchema = z.object({\n  page: z.number().min(1).default(1),\n  limit: z.number().min(1).max(100).default(10),\n  search: z.string().max(100).optional(),\n  status: z.enum([\"active\", \"pending\", \"suspended\", \"cancelled\"]).optional(),\n});\n\nexport const CommissionQueryParamsSchema = z.object({\n  page: z.number().min(1).default(1),\n  limit: z.number().min(1).max(100).default(10),\n  period: z\n    .string()\n    .regex(/^\\d{4}(-\\d{2})?$/)\n    .optional(), // YYYY or YYYY-MM\n  status: z.enum([\"pending\", \"paid\", \"disputed\"]).optional(),\n});\n\n// Dashboard Data Schema\nexport const DashboardDataSchema = z.object({\n  partner: PartnerSchema,\n  performance: z.object({\n    customersTotal: z.number().min(0),\n    customersActive: z.number().min(0),\n    customersThisMonth: z.number().min(0),\n    revenue: z.object({\n      total: z.number().min(0),\n      thisMonth: z.number().min(0),\n      lastMonth: z.number().min(0),\n      growth: z.number(),\n    }),\n    commissions: z.object({\n      earned: z.number().min(0),\n      pending: z.number().min(0),\n      thisMonth: z.number().min(0),\n      lastPayout: z.number().min(0),\n      nextPayoutDate: z.string().datetime(),\n    }),\n    targets: z.object({\n      monthlyCustomers: z.object({\n        current: z.number().min(0),\n        target: z.number().min(0),\n        unit: z.literal(\"customers\"),\n      }),\n      monthlyRevenue: z.object({\n        current: z.number().min(0),\n        target: z.number().min(0),\n        unit: z.literal(\"revenue\"),\n      }),\n      quarterlyGrowth: z.object({\n        current: z.number(),\n        target: z.number(),\n        unit: z.literal(\"percentage\"),\n      }),\n    }),\n  }),\n  recentCustomers: z\n    .array(\n      CustomerSchema.extend({\n        service: z.string().min(1).max(50),\n        commission: z.number().min(0),\n      }),\n    )\n    .max(10),\n  salesGoals: z\n    .array(\n      z.object({\n        id: z.string().min(1),\n        title: z.string().min(2).max(100),\n        target: z.number().min(0),\n        current: z.number().min(0),\n        progress: z.number().min(0).max(100),\n        deadline: z.string().datetime(),\n        status: z.enum([\"active\", \"completed\", \"overdue\"]),\n      }),\n    )\n    .max(20),\n});\n\n// Error Response Schema\nexport const ApiErrorSchema = z.object({\n  error: z.string(),\n  message: z.string(),\n  details: z.any().optional(),\n  timestamp: z.string().datetime(),\n  requestId: z.string().optional(),\n});\n\n// Success Response Schema (generic)\nexport const ApiSuccessSchema = <T extends z.ZodType>(dataSchema: T) =>\n  z.object({\n    data: dataSchema,\n    success: z.literal(true),\n    timestamp: z.string().datetime(),\n    requestId: z.string().optional(),\n  });\n\n// Paginated Response Schema\nexport const PaginatedResponseSchema = <T extends z.ZodType>(itemSchema: T) =>\n  z.object({\n    data: z.object({\n      items: z.array(itemSchema),\n      total: z.number().min(0),\n      page: z.number().min(1),\n      limit: z.number().min(1),\n      totalPages: z.number().min(1),\n    }),\n    success: z.literal(true),\n    timestamp: z.string().datetime(),\n  });\n\n// Input Sanitization Helpers\nexport const sanitizeInput = (input: string): string => {\n  return input\n    .trim()\n    .replace(/[<>]/g, \"\") // Basic XSS prevention\n    .slice(0, 1000); // Prevent extremely long inputs\n};\n\nexport const sanitizeSearchTerm = (term: string): string => {\n  return term\n    .trim()\n    .replace(/[^\\w\\s@.-]/g, \"\") // Allow alphanumeric, spaces, email chars, and basic punctuation\n    .slice(0, 100);\n};\n\n// Type exports\nexport type Partner = z.infer<typeof PartnerSchema>;\nexport type Customer = z.infer<typeof CustomerSchema>;\nexport type PartnerLogin = z.infer<typeof PartnerLoginSchema>;\nexport type CreateCustomer = z.infer<typeof CreateCustomerSchema>;\nexport type UpdateCustomer = z.infer<typeof UpdateCustomerSchema>;\nexport type CommissionRecord = z.infer<typeof CommissionRecordSchema>;\nexport type CustomerQueryParams = z.infer<typeof CustomerQueryParamsSchema>;\nexport type CommissionQueryParams = z.infer<typeof CommissionQueryParamsSchema>;\nexport type DashboardData = z.infer<typeof DashboardDataSchema>;\nexport type ApiError = z.infer<typeof ApiErrorSchema>;\n","/**\n * Partner Portal API Client with validation\n */\n\nimport { getApiClient } from \"./client\";\nimport type { ApiResponse } from \"./types/api\";\nimport {\n  CustomerSchema,\n  CreateCustomerSchema,\n  UpdateCustomerSchema,\n  CustomerQueryParamsSchema,\n  CommissionQueryParamsSchema,\n  TerritoryValidationSchema,\n  DashboardDataSchema,\n  sanitizeInput,\n  sanitizeSearchTerm,\n  type Customer,\n  type CreateCustomer,\n  type UpdateCustomer,\n  type DashboardData,\n} from \"../validation/partner-schemas\";\nimport type { CommissionRecord } from \"../validation/partner-schemas\";\n\n// Use types from validation schemas instead of duplicating\nexport type { DashboardData as PartnerDashboardData } from \"../validation/partner-schemas\";\nexport type {\n  Customer,\n  CreateCustomer,\n  UpdateCustomer,\n  CommissionRecord as PartnerCommissionRecord,\n} from \"../validation/partner-schemas\";\n\nexport class PartnerApiClient {\n  private _client: ReturnType<typeof getApiClient> | null = null;\n\n  private get client() {\n    if (!this._client) {\n      this._client = getApiClient();\n    }\n    return this._client;\n  }\n\n  async getDashboard(partnerId: string): Promise<ApiResponse<DashboardData>> {\n    const sanitizedPartnerId = sanitizeInput(partnerId);\n    const response = await this.client.request<ApiResponse<DashboardData>>(\n      `/api/v1/partners/${sanitizedPartnerId}/dashboard`,\n      {\n        method: \"GET\",\n      },\n    );\n\n    // Validate response data\n    try {\n      const validatedData = DashboardDataSchema.parse(response.data);\n      return { ...response, data: validatedData };\n    } catch (error) {\n      throw new Error(`Invalid dashboard data received: ${error}`);\n    }\n  }\n\n  async getCustomers(\n    partnerId: string,\n    params?: {\n      page?: number;\n      limit?: number;\n      search?: string;\n      status?: string;\n    },\n  ): Promise<ApiResponse<{ customers: Customer[]; total: number; pagination: any }>> {\n    const sanitizedPartnerId = sanitizeInput(partnerId);\n\n    // Validate and sanitize parameters\n    const validatedParams = CustomerQueryParamsSchema.parse({\n      page: params?.page,\n      limit: params?.limit,\n      search: params?.search ? sanitizeSearchTerm(params.search) : undefined,\n      status: params?.status,\n    });\n\n    const searchParams = new URLSearchParams();\n    if (validatedParams.page) searchParams.append(\"page\", validatedParams.page.toString());\n    if (validatedParams.limit) searchParams.append(\"limit\", validatedParams.limit.toString());\n    if (validatedParams.search) searchParams.append(\"search\", validatedParams.search);\n    if (validatedParams.status) searchParams.append(\"status\", validatedParams.status);\n\n    const response = await this.client.request<\n      ApiResponse<{ customers: Customer[]; total: number; pagination: any }>\n    >(`/api/v1/partners/${sanitizedPartnerId}/customers?${searchParams.toString()}`, {\n      method: \"GET\",\n    });\n\n    // Validate customer data\n    if (response.data?.customers) {\n      response.data.customers = response.data.customers.map((customer: any) =>\n        CustomerSchema.parse(customer),\n      );\n    }\n\n    return response;\n  }\n\n  async getCustomer(partnerId: string, customerId: string): Promise<ApiResponse<Customer>> {\n    const sanitizedPartnerId = sanitizeInput(partnerId);\n    const sanitizedCustomerId = sanitizeInput(customerId);\n\n    const response = await this.client.request<ApiResponse<Customer>>(\n      `/api/v1/partners/${sanitizedPartnerId}/customers/${sanitizedCustomerId}`,\n      {\n        method: \"GET\",\n      },\n    );\n\n    // Validate customer data\n    const validatedCustomer = CustomerSchema.parse(response.data);\n    return { ...response, data: validatedCustomer };\n  }\n\n  async createCustomer(\n    partnerId: string,\n    customerData: CreateCustomer,\n  ): Promise<ApiResponse<Customer>> {\n    const sanitizedPartnerId = sanitizeInput(partnerId);\n\n    // Validate input data\n    const validatedData = CreateCustomerSchema.parse(customerData);\n\n    const response = await this.client.request<ApiResponse<Customer>>(\n      `/api/v1/partners/${sanitizedPartnerId}/customers`,\n      {\n        method: \"POST\",\n        body: JSON.stringify(validatedData),\n      },\n    );\n\n    // Validate response data\n    const validatedCustomer = CustomerSchema.parse(response.data);\n    return { ...response, data: validatedCustomer };\n  }\n\n  async updateCustomer(\n    partnerId: string,\n    customerId: string,\n    customerData: UpdateCustomer,\n  ): Promise<ApiResponse<Customer>> {\n    const sanitizedPartnerId = sanitizeInput(partnerId);\n    const sanitizedCustomerId = sanitizeInput(customerId);\n\n    // Validate input data\n    const validatedData = UpdateCustomerSchema.parse(customerData);\n\n    const response = await this.client.request<ApiResponse<Customer>>(\n      `/api/v1/partners/${sanitizedPartnerId}/customers/${sanitizedCustomerId}`,\n      {\n        method: \"PUT\",\n        body: JSON.stringify(validatedData),\n      },\n    );\n\n    // Validate response data\n    const validatedCustomer = CustomerSchema.parse(response.data);\n    return { ...response, data: validatedCustomer };\n  }\n\n  async getCommissions(\n    partnerId: string,\n    params?: {\n      page?: number;\n      limit?: number;\n      period?: string;\n      status?: string;\n    },\n  ): Promise<\n    ApiResponse<{\n      commissions: CommissionRecord[];\n      total: number;\n      summary: any;\n    }>\n  > {\n    const searchParams = new URLSearchParams();\n    if (params?.page) searchParams.append(\"page\", params.page.toString());\n    if (params?.limit) searchParams.append(\"limit\", params.limit.toString());\n    if (params?.period) searchParams.append(\"period\", params.period);\n    if (params?.status) searchParams.append(\"status\", params.status);\n\n    return this.client.request<\n      ApiResponse<{ commissions: CommissionRecord[]; total: number; summary: any }>\n    >(`/api/v1/partners/${partnerId}/commissions?${searchParams.toString()}`, {\n      method: \"GET\",\n    });\n  }\n\n  async getAnalytics(\n    partnerId: string,\n    params?: {\n      period?: string;\n      metrics?: string[];\n    },\n  ): Promise<ApiResponse<any>> {\n    const searchParams = new URLSearchParams();\n    if (params?.period) searchParams.append(\"period\", params.period);\n    if (params?.metrics) {\n      params.metrics.forEach((metric) => searchParams.append(\"metrics\", metric));\n    }\n\n    return this.client.request<ApiResponse<any>>(\n      `/api/v1/partners/${partnerId}/analytics?${searchParams.toString()}`,\n      {\n        method: \"GET\",\n      },\n    );\n  }\n\n  async validateTerritory(\n    partnerId: string,\n    address: string,\n  ): Promise<ApiResponse<{ valid: boolean; territory: string }>> {\n    // Validate input data\n    const validatedData = TerritoryValidationSchema.parse({\n      partnerId,\n      address,\n    });\n\n    return this.client.request<ApiResponse<{ valid: boolean; territory: string }>>(\n      `/api/v1/partners/${validatedData.partnerId}/validate-territory`,\n      {\n        method: \"POST\",\n        body: JSON.stringify({ address: validatedData.address }),\n      },\n    );\n  }\n}\n\n// Lazy-loaded singleton instance to avoid initialization race conditions\nlet _partnerApiClient: PartnerApiClient | null = null;\n\nexport function getPartnerApiClient(): PartnerApiClient {\n  if (!_partnerApiClient) {\n    _partnerApiClient = new PartnerApiClient();\n  }\n  return _partnerApiClient;\n}\n\n// For backward compatibility, export the getter function as partnerApiClient\nexport { getPartnerApiClient as partnerApiClient };\n","\"use client\";\n\nimport React, { type ErrorInfo, type ReactNode } from \"react\";\n\nimport { useErrorBoundary } from \"../hooks/useErrorHandler\";\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: (error: Error, errorInfo?: ErrorInfo) => ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n  resetOnPropsChange?: boolean;\n  resetKeys?: Array<string | number>;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  override componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    this.setState({\n      errorInfo,\n    });\n\n    this.props.onError?.(error, errorInfo);\n  }\n\n  override componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const { resetOnPropsChange, resetKeys, children } = this.props;\n    const { hasError } = this.state;\n\n    // Reset if resetOnPropsChange is enabled and any props changed\n    if (hasError && resetOnPropsChange && prevProps.children !== children) {\n      this.resetErrorBoundary();\n      return;\n    }\n\n    // Check if resetKeys changed\n    if (\n      hasError &&\n      resetKeys &&\n      prevProps.resetKeys &&\n      resetKeys.length === prevProps.resetKeys.length &&\n      resetKeys.some((key, index) => key !== prevProps.resetKeys?.[index])\n    ) {\n      this.resetErrorBoundary();\n    }\n  }\n\n  resetErrorBoundary = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  override render() {\n    const { hasError, error, errorInfo } = this.state;\n    const { children, fallback } = this.props;\n\n    if (hasError && error) {\n      if (fallback) {\n        return fallback(error, errorInfo || undefined);\n      }\n\n      return (\n        <DefaultErrorFallback\n          error={error}\n          errorInfo={errorInfo}\n          resetError={this.resetErrorBoundary}\n        />\n      );\n    }\n\n    return children;\n  }\n}\n\ninterface DefaultErrorFallbackProps {\n  error: Error;\n  errorInfo: ErrorInfo | null;\n  resetError: () => void;\n}\n\nfunction DefaultErrorFallback({ error, errorInfo, resetError }: DefaultErrorFallbackProps) {\n  const isDevelopment = process.env[\"NODE_ENV\"] === \"development\";\n\n  return (\n    <div className=\"flex min-h-screen flex-col justify-center bg-gray-50 py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10\">\n          <div className=\"text-center\" role=\"alert\">\n            <div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100\">\n              <svg\n                aria-label=\"icon\"\n                className=\"h-6 w-6 text-red-600\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n              >\n                <title>Icon</title>\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"\n                />\n              </svg>\n            </div>\n\n            <h2 className=\"mt-4 font-medium text-gray-900 text-lg\">Something went wrong</h2>\n\n            <p className=\"mt-2 text-gray-600 text-sm\">\n              We encountered an error while loading this page. Please try again or contact support\n              if the problem persists.\n            </p>\n\n            {isDevelopment ? (\n              <details className=\"mt-4 text-left\">\n                <summary className=\"cursor-pointer font-medium text-gray-700 text-sm hover:text-gray-900\">\n                  Error Details (Development)\n                </summary>\n                <div className=\"mt-2 whitespace-pre-wrap rounded bg-gray-100 p-3 font-mono text-gray-800 text-xs\">\n                  <div className=\"mb-2\">\n                    <strong>Error:</strong> {error.message}\n                  </div>\n                  <div className=\"mb-2\">\n                    <strong>Stack:</strong> {error.stack}\n                  </div>\n                  {errorInfo ? (\n                    <div>\n                      <strong>Component Stack:</strong> {errorInfo.componentStack}\n                    </div>\n                  ) : null}\n                </div>\n              </details>\n            ) : null}\n\n            <div className=\"mt-6 flex flex-col space-y-3\">\n              <button\n                type=\"button\"\n                onClick={resetError}\n                onKeyDown={(e) => e.key === \"Enter\" && resetError}\n                className=\"flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 font-medium text-sm text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n              >\n                Try Again\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={() => window.location.reload()}\n                className=\"flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 font-medium text-gray-700 text-sm shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n              >\n                Reload Page\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Hook-based error boundary for functional components\nexport function useErrorBoundaryHook() {\n  return useErrorBoundary();\n}\n\n// Higher-order component wrapper\nexport function withErrorBoundary<P extends object>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps?: Omit<ErrorBoundaryProps, \"children\">,\n) {\n  const WrappedComponent = (props: P) => {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    );\n  };\n\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n}\n","\"use client\";\n\nimport type React from \"react\";\n\nimport { AlertCircle, RefreshCw, WifiOff } from \"lucide-react\";\n\nexport interface ErrorFallbackProps {\n  error?: Error;\n  resetError?: () => void;\n  retry?: () => Promise<void>;\n  isRetrying?: boolean;\n}\n\n// Generic error fallback\nexport function GenericErrorFallback({ error, resetError, retry, isRetrying }: ErrorFallbackProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n      <AlertCircle className=\"mb-4 h-12 w-12 text-red-500\" />\n      <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Something went wrong</h3>\n      <p className=\"mb-4 text-gray-600\">{error?.message || \"An unexpected error occurred\"}</p>\n      <div className=\"flex space-x-3\">\n        {retry ? (\n          <button\n            type=\"button\"\n            onClick={retry}\n            onKeyDown={(e) => e.key === \"Enter\" && retry}\n            disabled={isRetrying}\n            className=\"flex items-center rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50\"\n          >\n            <RefreshCw className={`mr-2 h-4 w-4 ${isRetrying ? \"animate-spin\" : \"\"}`} />\n            {isRetrying ? \"Retrying...\" : \"Retry\"}\n          </button>\n        ) : null}\n        {resetError ? (\n          <button\n            type=\"button\"\n            onClick={resetError}\n            onKeyDown={(e) => e.key === \"Enter\" && resetError}\n            className=\"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700\"\n          >\n            Reset\n          </button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\n// Network error fallback\nexport function NetworkErrorFallback({ resetError, retry, isRetrying }: ErrorFallbackProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n      <WifiOff className=\"mb-4 h-12 w-12 text-red-500\" />\n      <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Connection Problem</h3>\n      <p className=\"mb-4 text-gray-600\">\n        Unable to connect to our servers. Please check your internet connection and try again.\n      </p>\n      <div className=\"flex space-x-3\">\n        {retry ? (\n          <button\n            type=\"button\"\n            onClick={retry}\n            onKeyDown={(e) => e.key === \"Enter\" && retry}\n            disabled={isRetrying}\n            className=\"flex items-center rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50\"\n          >\n            <RefreshCw className={`mr-2 h-4 w-4 ${isRetrying ? \"animate-spin\" : \"\"}`} />\n            {isRetrying ? \"Reconnecting...\" : \"Retry Connection\"}\n          </button>\n        ) : null}\n        {resetError ? (\n          <button\n            type=\"button\"\n            onClick={resetError}\n            onKeyDown={(e) => e.key === \"Enter\" && resetError}\n            className=\"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700\"\n          >\n            Reset\n          </button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\n// Loading error fallback\nexport function LoadingErrorFallback({ error, resetError, retry, isRetrying }: ErrorFallbackProps) {\n  return (\n    <div className=\"rounded-lg border border-yellow-200 bg-yellow-50 p-4\">\n      <div className=\"flex items-start\">\n        <AlertCircle className=\"mt-0.5 mr-3 h-5 w-5 text-yellow-600\" />\n        <div className=\"flex-1\">\n          <h4 className=\"font-medium text-sm text-yellow-800\">Failed to load data</h4>\n          <p className=\"mt-1 text-sm text-yellow-700\">\n            {error?.message || \"Unable to load the requested information\"}\n          </p>\n          <div className=\"mt-3 flex space-x-2\">\n            {retry ? (\n              <button\n                type=\"button\"\n                onClick={retry}\n                onKeyDown={(e) => e.key === \"Enter\" && retry}\n                disabled={isRetrying}\n                className=\"flex items-center rounded bg-yellow-600 px-3 py-1 text-white text-xs hover:bg-yellow-700 disabled:opacity-50\"\n              >\n                <RefreshCw className={`mr-1 h-3 w-3 ${isRetrying ? \"animate-spin\" : \"\"}`} />\n                {isRetrying ? \"Retrying...\" : \"Retry\"}\n              </button>\n            ) : null}\n            {resetError ? (\n              <button\n                type=\"button\"\n                onClick={resetError}\n                onKeyDown={(e) => e.key === \"Enter\" && resetError}\n                className=\"rounded bg-gray-600 px-3 py-1 text-white text-xs hover:bg-gray-700\"\n              >\n                Reset\n              </button>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Inline error fallback for smaller components\nexport function InlineErrorFallback({ error, retry, isRetrying }: ErrorFallbackProps) {\n  return (\n    <div className=\"flex items-center justify-center rounded-lg border border-red-200 bg-red-50 px-3 py-4 text-center\">\n      <div>\n        <AlertCircle className=\"mr-2 inline h-4 w-4 text-red-500\" />\n        <span className=\"text-red-700 text-sm\">{error?.message || \"Error loading content\"}</span>\n        {retry ? (\n          <button\n            type=\"button\"\n            onClick={retry}\n            onKeyDown={(e) => e.key === \"Enter\" && retry}\n            disabled={isRetrying}\n            className=\"ml-3 text-red-700 text-xs underline hover:text-red-900 disabled:opacity-50\"\n          >\n            {isRetrying ? \"Retrying...\" : \"Retry\"}\n          </button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\n// Empty state fallback\nexport function EmptyStateFallback({\n  title = \"No data available\",\n  description = \"There&apos;s nothing to show here yet.\",\n  action,\n  actionLabel = \"Try again\",\n}: {\n  title?: string;\n  description?: string;\n  action?: () => void;\n  actionLabel?: string;\n}) {\n  return (\n    <div className=\"py-12 text-center\">\n      <div className=\"mx-auto mb-4 h-24 w-24 text-gray-400\">\n        <svg\n          aria-label=\"icon\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth=\"1.5\"\n          stroke=\"currentColor\"\n        >\n          <title>Icon</title>\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 4.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z\"\n          />\n        </svg>\n      </div>\n      <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">{title}</h3>\n      <p className=\"mb-4 text-gray-600\">{description}</p>\n      {action ? (\n        <button\n          type=\"button\"\n          onClick={action}\n          onKeyDown={(e) => e.key === \"Enter\" && action}\n          className=\"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700\"\n        >\n          {actionLabel}\n        </button>\n      ) : null}\n    </div>\n  );\n}\n\n// Unauthorized access fallback\nexport function UnauthorizedFallback({\n  onLogin,\n  message = \"You need to be logged in to access this content.\",\n}: {\n  onLogin?: () => void;\n  message?: string;\n}) {\n  return (\n    <div className=\"py-12 text-center\">\n      <div className=\"mx-auto mb-4 h-12 w-12 text-yellow-500\">\n        <svg\n          aria-label=\"icon\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth=\"1.5\"\n          stroke=\"currentColor\"\n        >\n          <title>Icon</title>\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z\"\n          />\n        </svg>\n      </div>\n      <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Access Required</h3>\n      <p className=\"mb-4 text-gray-600\">{message}</p>\n      {onLogin ? (\n        <button\n          type=\"button\"\n          onClick={onLogin}\n          onKeyDown={(e) => e.key === \"Enter\" && onLogin}\n          className=\"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700\"\n        >\n          Log In\n        </button>\n      ) : null}\n    </div>\n  );\n}\n\n// Maintenance mode fallback\nexport function MaintenanceFallback({\n  estimatedTime,\n  contactSupport,\n}: {\n  estimatedTime?: string;\n  contactSupport?: () => void;\n}) {\n  return (\n    <div className=\"py-12 text-center\">\n      <div className=\"mx-auto mb-4 h-12 w-12 text-orange-500\">\n        <svg\n          aria-label=\"icon\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth=\"1.5\"\n          stroke=\"currentColor\"\n        >\n          <title>Icon</title>\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z\"\n          />\n        </svg>\n      </div>\n      <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Under Maintenance</h3>\n      <p className=\"mb-4 text-gray-600\">\n        We're performing some maintenance to improve your experience. Please check back soon.\n      </p>\n      {estimatedTime ? (\n        <p className=\"mb-4 text-gray-500 text-sm\">Estimated completion: {estimatedTime}</p>\n      ) : null}\n      {contactSupport ? (\n        <button\n          type=\"button\"\n          onClick={contactSupport}\n          onKeyDown={(e) => e.key === \"Enter\" && contactSupport}\n          className=\"text-blue-600 text-sm underline hover:text-blue-800\"\n        >\n          Contact Support\n        </button>\n      ) : null}\n    </div>\n  );\n}\n\n// Higher-order component to wrap components with error fallbacks\nexport function withErrorFallback<P extends object>(\n  Component: React.ComponentType<P>,\n  _fallbackComponent: React.ComponentType<ErrorFallbackProps> = GenericErrorFallback,\n) {\n  return function WrappedComponent(props: P) {\n    // This would be used with an error boundary or error hook\n    return <Component {...props} />;\n  };\n}\n","/**\n * Simplified MFA components\n * Provides lightweight MFA UI components for enrollment and verification flows.\n * Integrates with the FastAPI backend 2FA endpoints.\n */\n\nimport { Shield, Smartphone, Mail, Key } from \"lucide-react\";\nimport { useState } from \"react\";\n\nexport type MFAMethod = \"totp\" | \"sms\" | \"email\" | \"backup_code\";\n\nexport interface MFASetupProps {\n  onComplete: () => void;\n  onCancel: () => void;\n}\n\nconst AVAILABLE_METHODS: MFAMethod[] = [\"totp\", \"sms\", \"email\", \"backup_code\"];\n\nexport function MFASetup({ onComplete, onCancel }: MFASetupProps) {\n  const [selectedMethod, setSelectedMethod] = useState<MFAMethod>(\"totp\");\n  const [acknowledged, setAcknowledged] = useState(false);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <Shield className=\"mx-auto mb-4 h-12 w-12 text-blue-600\" />\n        <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Multi-Factor Authentication</h3>\n        <p className=\"text-gray-600\">\n          Select the MFA method you want to use and complete the enrollment flow.\n        </p>\n      </div>\n\n      <div className=\"space-y-3\">\n        {AVAILABLE_METHODS.map((method) => (\n          <button\n            type=\"button\"\n            key={method}\n            onClick={() => setSelectedMethod(method)}\n            className={`flex w-full items-center justify-between rounded-lg border px-4 py-2 text-left transition-colors ${selectedMethod === method ? \"border-blue-500 bg-blue-50 text-blue-900\" : \"border-gray-200 bg-white text-gray-800\"}`}\n          >\n            <span className=\"capitalize\">{method.replace(\"_\", \" \")}</span>\n            {selectedMethod === method && <CheckIcon />}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm text-gray-600\">\n        Complete the enrollment process with your selected method. When the\n        enrollment succeeds, confirm below.\n      </div>\n\n      <label className=\"flex items-center space-x-2 text-sm text-gray-700\">\n        <input\n          type=\"checkbox\"\n          className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n          checked={acknowledged}\n          onChange={(event) => setAcknowledged(event.target.checked)}\n        />\n        <span>I have finished configuring MFA for this user.</span>\n      </label>\n\n      <div className=\"flex gap-3\">\n        <button\n          type=\"button\"\n          disabled={!acknowledged}\n          onClick={onComplete}\n          className={`flex-1 rounded-lg px-4 py-2 text-white transition-colors ${acknowledged ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-blue-300 cursor-not-allowed\"}`}\n        >\n          Continue\n        </button>\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport interface MFAVerificationProps {\n  method?: MFAMethod;\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nexport function MFAVerification({ method = \"totp\", onSuccess, onCancel }: MFAVerificationProps) {\n  const [code, setCode] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const validateCode = () => {\n    if (code.trim().length < 4) {\n      setError(\"Enter the code provided by your authentication method.\");\n      return;\n    }\n    setError(null);\n    onSuccess();\n  };\n\n  const label = (() => {\n    switch (method) {\n      case \"sms\":\n        return \"Enter the code we texted you\";\n      case \"email\":\n        return \"Enter the code we emailed you\";\n      case \"backup_code\":\n        return \"Enter one of your backup codes\";\n      default:\n        return \"Enter the code from your authenticator app\";\n    }\n  })();\n\n  const Icon = method === \"sms\" ? Smartphone : method === \"email\" ? Mail : Key;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <Icon className=\"mx-auto mb-4 h-12 w-12 text-blue-600\" />\n        <h3 className=\"mb-2 font-semibold text-gray-900 text-lg\">Verify your identity</h3>\n        <p className=\"text-gray-600\">{label}</p>\n      </div>\n\n      <div className=\"space-y-2\">\n        <input\n          type=\"text\"\n          value={code}\n          onChange={(event) => setCode(event.target.value.trim())}\n          className=\"w-full rounded-lg border border-gray-300 px-4 py-2 font-mono text-center text-lg tracking-widest focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200\"\n          placeholder={method === \"backup_code\" ? \"XXXX-XXXX\" : \"000000\"}\n        />\n        {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button\n          type=\"button\"\n          onClick={validateCode}\n          className=\"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700\"\n        >\n          Verify\n        </button>\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction CheckIcon() {\n  return (\n    <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-white text-xs\">\n      \n    </span>\n  );\n}\n","\"use client\";\n\nimport { AlertCircle, AlertTriangle, CheckCircle, Info, X } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\n\n// Removed unused imports: when, LayoutComposers\nimport {\n  type Notification,\n  type NotificationType,\n  useNotifications,\n} from \"../hooks/useNotifications\";\n\ninterface NotificationComponentProps {\n  notification: Notification;\n  onDismiss: (id: string) => void;\n}\n\n// Helper functions to reduce complexity\nconst notificationIcons: Record<NotificationType, JSX.Element> = {\n  success: <CheckCircle className=\"h-5 w-5 text-green-600\" />,\n  error: <AlertCircle className=\"h-5 w-5 text-red-600\" />,\n  warning: <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />,\n  info: <Info className=\"h-5 w-5 text-blue-600\" />,\n  system: <Info className=\"h-5 w-5 text-slate-600\" />,\n};\n\nconst notificationColors: Record<NotificationType, string> = {\n  success: \"bg-green-50 border-green-200 text-green-800\",\n  error: \"bg-red-50 border-red-200 text-red-800\",\n  warning: \"bg-yellow-50 border-yellow-200 text-yellow-800\",\n  info: \"bg-blue-50 border-blue-200 text-blue-800\",\n  system: \"bg-slate-50 border-slate-200 text-slate-800\",\n};\n\n// Composition helpers for notification rendering\nconst NotificationRenderers = {\n  icon: ({ type }: { type: NotificationType }) => notificationIcons[type] as JSX.Element,\n  title: ({ title }: { title: string }) => <p className=\"font-medium text-sm\">{title}</p>,\n  message: ({ message }: { message?: string }) =>\n    message ? <p className=\"mt-1 text-sm opacity-90\">{message}</p> : null,\n  closeButton: ({\n    onDismiss,\n    id,\n    persistent,\n  }: {\n    onDismiss: (id: string) => void;\n    id: string;\n    persistent?: boolean;\n  }) =>\n    persistent ? null : (\n      <button\n        type=\"button\"\n        onClick={() => onDismiss(id)}\n        className=\"ml-4 inline-flex flex-shrink-0 rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n      >\n        <X className=\"h-4 w-4\" />\n      </button>\n    ),\n  actions: ({\n    actions,\n    onDismiss,\n  }: {\n    actions?: Array<{ label: string; action: () => void; primary?: boolean }>;\n    onDismiss: () => void;\n  }) =>\n    actions && actions.length > 0 ? (\n      <div className=\"mt-3 flex space-x-2\">\n        {actions.map((action, index) => {\n          const handleActionClick = () => {\n            action.action();\n            if (!action.primary) {\n              onDismiss();\n            }\n          };\n\n          return (\n            <button\n              type=\"button\"\n              key={`action-${index}-${action.label}`}\n              onClick={handleActionClick}\n              onKeyDown={(event) => event.key === \"Enter\" && handleActionClick()}\n              className={`rounded-md px-3 py-1 font-medium text-xs transition-colors ${\n                action.primary\n                  ? \"bg-blue-600 text-white hover:bg-blue-700\"\n                  : \"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n              }`}\n            >\n              {action.label}\n            </button>\n          );\n        })}\n      </div>\n    ) : null,\n  persistentDismiss: ({\n    onDismiss,\n    persistent,\n  }: {\n    onDismiss: () => void;\n    persistent?: boolean;\n  }) =>\n    persistent ? (\n      <div className=\"mt-3 flex justify-end\">\n        <button\n          type=\"button\"\n          onClick={onDismiss}\n          onKeyDown={(e) => e.key === \"Enter\" && onDismiss}\n          className=\"text-gray-500 text-xs hover:text-gray-700\"\n        >\n          Dismiss\n        </button>\n      </div>\n    ) : null,\n  progressBar: ({ duration, persistent }: { duration?: number; persistent?: boolean }) =>\n    duration && duration > 0 && !persistent ? (\n      <div className=\"h-1 bg-gray-200\">\n        <div\n          className=\"h-full bg-current opacity-30 transition-all ease-linear\"\n          style={{\n            animationDuration: `${duration}ms`,\n            animationName: \"shrinkWidth\",\n            animationTimingFunction: \"linear\",\n            animationFillMode: \"forwards\",\n          }}\n        />\n      </div>\n    ) : null,\n};\n\nfunction NotificationComponent({ notification, onDismiss }: NotificationComponentProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isExiting, setIsExiting] = useState(false);\n\n  useEffect(() => {\n    // Animate in\n    const timer = setTimeout(() => setIsVisible(true), 100);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleDismiss = () => {\n    setIsExiting(true);\n    setTimeout(() => {\n      onDismiss(notification.id);\n    }, 300);\n  };\n\n  // Render notification header with icon, title and close button\n  const renderHeader = () => (\n    <>\n      <div className=\"flex-shrink-0\">{NotificationRenderers.icon({ type: notification.type })}</div>\n      <div className=\"ml-3 w-0 flex-1\">\n        <div className=\"flex justify-between\">\n          {NotificationRenderers.title({ title: notification.title })}\n          {NotificationRenderers.closeButton({\n            onDismiss,\n            id: notification.id,\n            persistent: notification.persistent ?? false,\n          })}\n        </div>\n      </div>\n    </>\n  );\n\n  // Render notification content body\n  const renderBody = () => (\n    <>\n      {notification.message && NotificationRenderers.message({ message: notification.message })}\n      {notification.actions &&\n        NotificationRenderers.actions({ actions: notification.actions, onDismiss: handleDismiss })}\n    </>\n  );\n\n  return (\n    <div\n      className={`transform transition-all duration-300 ease-in-out ${isVisible && !isExiting ? \"translate-x-0 opacity-100\" : \"translate-x-full opacity-0\"}\n        ${isExiting ? \"scale-95\" : \"scale-100\"}max-w-sm pointer-events-auto w-full rounded-lg border bg-white shadow-lg ${notificationColors[notification.type]}\n      `}\n    >\n      <div className=\"p-4\">\n        <div className=\"flex items-start\">{renderHeader()}</div>\n        {renderBody()}\n        {NotificationRenderers.persistentDismiss({\n          onDismiss: handleDismiss,\n          persistent: notification.persistent ?? false,\n        })}\n      </div>\n      {NotificationRenderers.progressBar({\n        duration: notification.duration ?? 5000,\n        persistent: notification.persistent ?? false,\n      })}\n    </div>\n  );\n}\n\nexport function NotificationContainer() {\n  const { notifications, remove } = useNotifications();\n\n  if (notifications.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      <style>{`\n        @keyframes shrinkWidth {\n          from {\n            width: 100%;\n          }\n          to {\n            width: 0%;\n          }\n        }\n      `}</style>\n\n      <div\n        aria-live=\"assertive\"\n        className=\"pointer-events-none fixed inset-0 z-50 flex items-end justify-end px-4 py-6 sm:p-6\"\n      >\n        <div className=\"flex w-full flex-col items-center space-y-4 sm:items-end\">\n          {notifications.slice(0, 5).map((notification) => (\n            <NotificationComponent\n              key={notification.id}\n              notification={notification}\n              onDismiss={remove}\n            />\n          ))}\n\n          {/* Overflow indicator */}\n          {notifications.length > 5 && (\n            <div className=\"w-full max-w-sm rounded-lg bg-gray-800 px-4 py-2 text-center text-white shadow-lg\">\n              <p className=\"text-xs\">+{notifications.length - 5} more notifications</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\n// Notification provider component\nexport function NotificationProvider({ children }: { children: React.ReactNode }) {\n  return (\n    <>\n      {children}\n      <NotificationContainer />\n    </>\n  );\n}\n\n// Toast notification hook for quick notifications\nexport function useToast() {\n  const { notify } = useNotifications();\n\n  return {\n    success: (message: string) => notify.success(\"Success\", message),\n    error: (message: string) => notify.error(\"Error\", message),\n    warning: (message: string) => notify.warning(\"Warning\", message),\n    info: (message: string) => notify.info(\"Info\", message),\n  };\n}\n","import * as React from \"react\";\n\nimport type { AuthContext as AuthState, LoginFlow, PortalConfig } from \"../types/auth\";\nimport type { Tenant, User } from \"../types\";\n\nexport interface ExtendedAuthState extends AuthState {\n  sessionId?: string;\n  tenantId?: string;\n  loginFlow?: LoginFlow;\n  setAuthState: (updates: Partial<ExtendedAuthState>) => void;\n}\n\nexport interface AuthProviderProps {\n  children: React.ReactNode;\n  value?: Partial<ExtendedAuthState>;\n}\n\nconst defaultAuthState: ExtendedAuthState = {\n  user: null,\n  portal: null,\n  tenant: null,\n  permissions: [],\n  roles: [],\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n  setAuthState: () => {},\n};\n\nconst AuthContext = React.createContext<ExtendedAuthState>(defaultAuthState);\n\nexport function AuthProvider({ children, value }: AuthProviderProps): JSX.Element {\n  const [state, setState] = React.useState<ExtendedAuthState>({\n    ...defaultAuthState,\n    ...value,\n  });\n\n  const setAuthState = React.useCallback((updates: Partial<ExtendedAuthState>) => {\n    setState((prev) => ({ ...prev, ...updates }));\n  }, []);\n\n  const contextValue = React.useMemo(\n    () => ({\n      ...state,\n      setAuthState,\n    }),\n    [state, setAuthState],\n  );\n\n  return <AuthContext.Provider value={contextValue}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth(): ExtendedAuthState {\n  return React.useContext(AuthContext);\n}\n\nexport type { AuthState, PortalConfig, Tenant, User };\n","/**\n * Unified Permissions Hook\n * Consolidated permission checking across all portals\n */\n\nimport { useMemo, useCallback } from \"react\";\nimport { useAuth } from \"../auth/context\";\nimport { useApiClient } from \"../api\";\n\nexport interface Permission {\n  id: string;\n  name: string;\n  resource: string;\n  action: string;\n  conditions?: Record<string, any>;\n  scope?: \"global\" | \"tenant\" | \"customer\" | \"reseller\";\n  inherited?: boolean;\n}\n\nexport interface Role {\n  id: string;\n  name: string;\n  description: string;\n  permissions: Permission[];\n  isSystem: boolean;\n  portal: string;\n}\n\nexport interface PermissionCheck {\n  resource: string;\n  action: string;\n  context?: Record<string, any>;\n}\n\nexport interface PermissionContext {\n  tenantId?: string;\n  customerId?: string;\n  resellerId?: string;\n  resourceId?: string;\n  [key: string]: any;\n}\n\n// Pre-defined permission patterns for common operations\nexport const COMMON_PERMISSIONS = {\n  // User management\n  USERS_VIEW: { resource: \"users\", action: \"read\" },\n  USERS_CREATE: { resource: \"users\", action: \"create\" },\n  USERS_UPDATE: { resource: \"users\", action: \"update\" },\n  USERS_DELETE: { resource: \"users\", action: \"delete\" },\n\n  // Billing operations\n  BILLING_VIEW: { resource: \"billing\", action: \"read\" },\n  BILLING_MANAGE: { resource: \"billing\", action: \"write\" },\n  BILLING_REPORTS: { resource: \"billing\", action: \"report\" },\n  PAYMENTS_PROCESS: { resource: \"payments\", action: \"process\" },\n  INVOICES_CREATE: { resource: \"invoices\", action: \"create\" },\n  INVOICES_SEND: { resource: \"invoices\", action: \"send\" },\n\n  // Customer management\n  CUSTOMERS_VIEW: { resource: \"customers\", action: \"read\" },\n  CUSTOMERS_CREATE: { resource: \"customers\", action: \"create\" },\n  CUSTOMERS_UPDATE: { resource: \"customers\", action: \"update\" },\n  CUSTOMERS_DELETE: { resource: \"customers\", action: \"delete\" },\n\n  // Network operations\n  NETWORK_VIEW: { resource: \"network\", action: \"read\" },\n  NETWORK_CONFIGURE: { resource: \"network\", action: \"configure\" },\n  NETWORK_MONITOR: { resource: \"network\", action: \"monitor\" },\n  DEVICES_MANAGE: { resource: \"devices\", action: \"manage\" },\n\n  // Analytics and reporting\n  ANALYTICS_VIEW: { resource: \"analytics\", action: \"read\" },\n  REPORTS_VIEW: { resource: \"reports\", action: \"read\" },\n  REPORTS_EXPORT: { resource: \"reports\", action: \"export\" },\n\n  // System administration\n  SYSTEM_CONFIG: { resource: \"system\", action: \"configure\" },\n  SYSTEM_LOGS: { resource: \"logs\", action: \"read\" },\n  SYSTEM_BACKUP: { resource: \"system\", action: \"backup\" },\n\n  // Reseller operations\n  TERRITORIES_MANAGE: { resource: \"territories\", action: \"manage\" },\n  COMMISSIONS_VIEW: { resource: \"commissions\", action: \"read\" },\n  PARTNERS_MANAGE: { resource: \"partners\", action: \"manage\" },\n\n  // Support operations\n  TICKETS_VIEW: { resource: \"tickets\", action: \"read\" },\n  TICKETS_CREATE: { resource: \"tickets\", action: \"create\" },\n  TICKETS_ASSIGN: { resource: \"tickets\", action: \"assign\" },\n  TICKETS_RESOLVE: { resource: \"tickets\", action: \"resolve\" },\n} as const;\n\n// Portal-specific permission contexts\nexport const PORTAL_CONTEXTS = {\n  admin: {\n    scope: \"global\",\n    defaultPermissions: [\n      COMMON_PERMISSIONS.SYSTEM_CONFIG,\n      COMMON_PERMISSIONS.USERS_VIEW,\n      COMMON_PERMISSIONS.BILLING_REPORTS,\n      COMMON_PERMISSIONS.ANALYTICS_VIEW,\n      COMMON_PERMISSIONS.SYSTEM_LOGS,\n    ],\n  },\n  customer: {\n    scope: \"customer\",\n    defaultPermissions: [\n      COMMON_PERMISSIONS.BILLING_VIEW,\n      { resource: \"profile\", action: \"update\" },\n      { resource: \"services\", action: \"read\" },\n      COMMON_PERMISSIONS.TICKETS_CREATE,\n    ],\n  },\n  reseller: {\n    scope: \"reseller\",\n    defaultPermissions: [\n      COMMON_PERMISSIONS.CUSTOMERS_VIEW,\n      COMMON_PERMISSIONS.CUSTOMERS_CREATE,\n      COMMON_PERMISSIONS.TERRITORIES_MANAGE,\n      COMMON_PERMISSIONS.COMMISSIONS_VIEW,\n      COMMON_PERMISSIONS.BILLING_VIEW,\n    ],\n  },\n  technician: {\n    scope: \"tenant\",\n    defaultPermissions: [\n      COMMON_PERMISSIONS.TICKETS_VIEW,\n      COMMON_PERMISSIONS.TICKETS_ASSIGN,\n      COMMON_PERMISSIONS.TICKETS_RESOLVE,\n      COMMON_PERMISSIONS.NETWORK_VIEW,\n      COMMON_PERMISSIONS.DEVICES_MANAGE,\n    ],\n  },\n  management: {\n    scope: \"global\",\n    defaultPermissions: [\n      COMMON_PERMISSIONS.USERS_VIEW,\n      COMMON_PERMISSIONS.BILLING_REPORTS,\n      COMMON_PERMISSIONS.ANALYTICS_VIEW,\n      COMMON_PERMISSIONS.REPORTS_VIEW,\n      COMMON_PERMISSIONS.PARTNERS_MANAGE,\n    ],\n  },\n} as const;\n\nexport function usePermissions() {\n  const { user, portal, tenantId } = useAuth();\n  const portalKey = typeof portal === \"string\" ? portal : portal?.type;\n  const apiClient = useApiClient();\n\n  // Get user's permissions\n  const userPermissions = useMemo<Permission[]>(() => {\n    if (!user) return [];\n\n    // Combine direct permissions and role-based permissions\n    const directPermissions = ((user.permissions || []) as Permission[]).filter(Boolean);\n    const rolePermissions = user.roles?.flatMap((role: Role) => role.permissions || []) ?? [];\n\n    // Merge and deduplicate\n    const allPermissions: Permission[] = [...directPermissions, ...rolePermissions];\n    const uniquePermissions = allPermissions.reduce<Permission[]>((acc, permission) => {\n      const key = `${permission.resource}:${permission.action}`;\n      if (!acc.some((p) => `${p.resource}:${p.action}` === key)) {\n        acc.push(permission);\n      }\n      return acc;\n    }, [] as Permission[]);\n\n    return uniquePermissions;\n  }, [user]);\n\n  // Check if user has a specific permission\n  const hasPermission = useCallback(\n    (check: PermissionCheck, context?: PermissionContext): boolean => {\n      if (!user || !userPermissions.length) {\n        return false;\n      }\n\n      // System admins have all permissions\n      if (user.isSuperAdmin || user.roles?.some((role: Role) => role.name === \"super_admin\")) {\n        return true;\n      }\n\n      // Find matching permission\n      const matchingPermission = userPermissions.find((permission) => {\n        // Basic resource and action match\n        if (permission.resource !== check.resource || permission.action !== check.action) {\n          return false;\n        }\n\n        // Check scope restrictions\n        if (permission.scope) {\n          switch (permission.scope) {\n            case \"tenant\":\n              if (!tenantId || (context?.tenantId && context.tenantId !== tenantId)) {\n                return false;\n              }\n              break;\n            case \"customer\":\n              if (!context?.customerId || context.customerId !== user.customerId) {\n                return false;\n              }\n              break;\n            case \"reseller\":\n              if (!context?.resellerId || context.resellerId !== user.resellerId) {\n                return false;\n              }\n              break;\n          }\n        }\n\n        // Check conditional permissions\n        if (permission.conditions && context) {\n          return Object.entries(permission.conditions).every(([key, value]) => {\n            const contextValue = context[key];\n            if (Array.isArray(value)) {\n              return value.includes(contextValue);\n            }\n            return contextValue === value;\n          });\n        }\n\n        return true;\n      });\n\n      return !!matchingPermission;\n    },\n    [user, userPermissions, tenantId],\n  );\n\n  // Check multiple permissions (AND logic)\n  const hasAllPermissions = useCallback(\n    (checks: PermissionCheck[], context?: PermissionContext): boolean => {\n      return checks.every((check) => hasPermission(check, context));\n    },\n    [hasPermission],\n  );\n\n  // Check multiple permissions (OR logic)\n  const hasAnyPermission = useCallback(\n    (checks: PermissionCheck[], context?: PermissionContext): boolean => {\n      return checks.some((check) => hasPermission(check, context));\n    },\n    [hasPermission],\n  );\n\n  // Get permissions for a specific resource\n  const getResourcePermissions = useCallback(\n    (resource: string): Permission[] => {\n      return userPermissions.filter((permission) => permission.resource === resource);\n    },\n    [userPermissions],\n  );\n\n  // Check if user can perform any action on a resource\n  const canAccessResource = useCallback(\n    (resource: string, context?: PermissionContext): boolean => {\n      return userPermissions.some((permission) => {\n        if (permission.resource !== resource) return false;\n\n        return hasPermission(\n          {\n            resource: permission.resource,\n            action: permission.action,\n          },\n          context,\n        );\n      });\n    },\n    [userPermissions, hasPermission],\n  );\n\n  // Portal-specific permission helpers\n  const portalPermissions = useMemo(() => {\n    if (!portalKey || !PORTAL_CONTEXTS[portalKey as keyof typeof PORTAL_CONTEXTS]) {\n      return {\n        canViewBilling: false,\n        canManageUsers: false,\n        canAccessReports: false,\n        canManageCustomers: false,\n        canConfigureSystem: false,\n      };\n    }\n\n    return {\n      // Billing permissions\n      canViewBilling: hasPermission(COMMON_PERMISSIONS.BILLING_VIEW),\n      canManageBilling: hasPermission(COMMON_PERMISSIONS.BILLING_MANAGE),\n      canProcessPayments: hasPermission(COMMON_PERMISSIONS.PAYMENTS_PROCESS),\n      canCreateInvoices: hasPermission(COMMON_PERMISSIONS.INVOICES_CREATE),\n      canSendInvoices: hasPermission(COMMON_PERMISSIONS.INVOICES_SEND),\n\n      // User management permissions\n      canViewUsers: hasPermission(COMMON_PERMISSIONS.USERS_VIEW),\n      canManageUsers:\n        hasPermission(COMMON_PERMISSIONS.USERS_CREATE) &&\n        hasPermission(COMMON_PERMISSIONS.USERS_UPDATE),\n      canDeleteUsers: hasPermission(COMMON_PERMISSIONS.USERS_DELETE),\n\n      // Customer management permissions\n      canViewCustomers: hasPermission(COMMON_PERMISSIONS.CUSTOMERS_VIEW),\n      canManageCustomers:\n        hasPermission(COMMON_PERMISSIONS.CUSTOMERS_CREATE) &&\n        hasPermission(COMMON_PERMISSIONS.CUSTOMERS_UPDATE),\n      canDeleteCustomers: hasPermission(COMMON_PERMISSIONS.CUSTOMERS_DELETE),\n\n      // Analytics and reporting permissions\n      canViewAnalytics: hasPermission(COMMON_PERMISSIONS.ANALYTICS_VIEW),\n      canAccessReports: hasPermission(COMMON_PERMISSIONS.REPORTS_VIEW),\n      canExportReports: hasPermission(COMMON_PERMISSIONS.REPORTS_EXPORT),\n      canViewBillingReports: hasPermission(COMMON_PERMISSIONS.BILLING_REPORTS),\n\n      // System administration permissions\n      canConfigureSystem: hasPermission(COMMON_PERMISSIONS.SYSTEM_CONFIG),\n      canViewLogs: hasPermission(COMMON_PERMISSIONS.SYSTEM_LOGS),\n      canManageBackups: hasPermission(COMMON_PERMISSIONS.SYSTEM_BACKUP),\n\n      // Network operations permissions\n      canViewNetwork: hasPermission(COMMON_PERMISSIONS.NETWORK_VIEW),\n      canConfigureNetwork: hasPermission(COMMON_PERMISSIONS.NETWORK_CONFIGURE),\n      canMonitorNetwork: hasPermission(COMMON_PERMISSIONS.NETWORK_MONITOR),\n      canManageDevices: hasPermission(COMMON_PERMISSIONS.DEVICES_MANAGE),\n\n      // Reseller permissions\n      canManageTerritories: hasPermission(COMMON_PERMISSIONS.TERRITORIES_MANAGE),\n      canViewCommissions: hasPermission(COMMON_PERMISSIONS.COMMISSIONS_VIEW),\n      canManagePartners: hasPermission(COMMON_PERMISSIONS.PARTNERS_MANAGE),\n\n      // Support permissions\n      canViewTickets: hasPermission(COMMON_PERMISSIONS.TICKETS_VIEW),\n      canCreateTickets: hasPermission(COMMON_PERMISSIONS.TICKETS_CREATE),\n      canAssignTickets: hasPermission(COMMON_PERMISSIONS.TICKETS_ASSIGN),\n      canResolveTickets: hasPermission(COMMON_PERMISSIONS.TICKETS_RESOLVE),\n    };\n  }, [portalKey, hasPermission]);\n\n  // Load user permissions from API\n  const refreshPermissions = useCallback(async (): Promise<Permission[]> => {\n    try {\n      const response = await apiClient.get<{ permissions: Permission[] }>(\n        \"/auth/permissions\",\n        { cache: true, cacheTTL: 5 * 60 * 1000 }, // Cache for 5 minutes\n      );\n\n      return response?.permissions ?? [];\n    } catch (error) {\n      console.error(\"Failed to refresh permissions:\", error);\n      return [];\n    }\n  }, [apiClient]);\n\n  // Check permission with API fallback for complex scenarios\n  const checkPermissionWithAPI = useCallback(\n    async (check: PermissionCheck, context?: PermissionContext): Promise<boolean> => {\n      // First try local check\n      const localResult = hasPermission(check, context);\n      if (localResult) return true;\n\n      // If local check fails, try API for complex permission scenarios\n      try {\n        const response = await apiClient.post<{ allowed: boolean }>(\"/auth/check-permission\", {\n          resource: check.resource,\n          action: check.action,\n          context: context || {},\n        });\n\n        return response?.allowed === true;\n      } catch (error) {\n        console.error(\"Permission check API call failed:\", error);\n        return false;\n      }\n    },\n    [hasPermission, apiClient],\n  );\n\n  // Generate permission-aware menu items\n  const getPermissionAwareMenuItems = useCallback(\n    (\n      menuItems: Array<{\n        key: string;\n        label: string;\n        permission?: PermissionCheck;\n        permissions?: PermissionCheck[];\n        requireAll?: boolean;\n        path?: string;\n        children?: any[];\n      }>,\n    ) => {\n      return menuItems.filter((item) => {\n        if (!item.permission && !item.permissions) return true;\n\n        if (item.permission) {\n          return hasPermission(item.permission);\n        }\n\n        if (item.permissions) {\n          return item.requireAll\n            ? hasAllPermissions(item.permissions)\n            : hasAnyPermission(item.permissions);\n        }\n\n        return true;\n      });\n    },\n    [hasPermission, hasAllPermissions, hasAnyPermission],\n  );\n\n  return {\n    // Core data\n    permissions: userPermissions,\n    roles: user?.roles || [],\n\n    // Permission checking functions\n    hasPermission,\n    hasAllPermissions,\n    hasAnyPermission,\n    canAccessResource,\n    getResourcePermissions,\n\n    // Portal-specific permissions\n    ...portalPermissions,\n\n    // Async operations\n    refreshPermissions,\n    checkPermissionWithAPI,\n\n    // Utility functions\n    getPermissionAwareMenuItems,\n\n    // Constants for easy access\n    PERMISSIONS: COMMON_PERMISSIONS,\n\n    // User context\n    isAuthenticated: !!user,\n    isSuperAdmin: user?.isSuperAdmin || false,\n    currentPortal: portalKey,\n    currentTenant: tenantId,\n    userId: user?.id,\n    userRoles: user?.roles?.map((role) => role.name) || [],\n  };\n}\n\nexport default usePermissions;\n","/**\n * Shared helpers for performing authenticated portal requests.\n *\n * These utilities centralise how we read portal tokens from browser storage,\n * construct `Authorization` headers, and execute fetch requests with the\n * required credentials.\n */\n\nexport const DEFAULT_PORTAL_TOKEN_KEY = \"access_token\";\nexport const CUSTOMER_PORTAL_TOKEN_KEY = \"customer_access_token\";\n\nexport class PortalAuthError extends Error {\n  constructor(\n    message: string,\n    public readonly code: string = \"PORTAL_AUTH_ERROR\",\n  ) {\n    super(message);\n    this.name = \"PortalAuthError\";\n  }\n}\n\ninterface GetPortalTokenOptions {\n  tokenKey?: string;\n  required?: boolean;\n  missingTokenMessage?: string;\n}\n\nconst readTokenFromStorage = (tokenKey: string): string | null => {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  const storageReaders: Array<() => string | null> = [\n    () => {\n      try {\n        return window.localStorage.getItem(tokenKey);\n      } catch {\n        return null;\n      }\n    },\n    () => {\n      try {\n        return window.sessionStorage.getItem(tokenKey);\n      } catch {\n        return null;\n      }\n    },\n  ];\n\n  for (const reader of storageReaders) {\n    const token = reader();\n    if (token) {\n      return token;\n    }\n  }\n  return null;\n};\n\nexport const getPortalAuthToken = ({\n  tokenKey = DEFAULT_PORTAL_TOKEN_KEY,\n  required = true,\n  missingTokenMessage,\n}: GetPortalTokenOptions = {}): string | null => {\n  const token = readTokenFromStorage(tokenKey);\n\n  if (!token) {\n    if (!required) {\n      return null;\n    }\n    throw new PortalAuthError(\n      missingTokenMessage ?? `Missing portal auth token for key \"${tokenKey}\".`,\n    );\n  }\n\n  return token;\n};\n\nexport interface BuildPortalAuthHeadersOptions extends GetPortalTokenOptions {\n  headers?: HeadersInit;\n  includeJsonContentType?: boolean;\n}\n\nexport const buildPortalAuthHeaders = ({\n  headers,\n  includeJsonContentType = true,\n  ...tokenOptions\n}: BuildPortalAuthHeadersOptions = {}): Headers => {\n  const resolvedHeaders = new Headers(headers ?? undefined);\n  const token = getPortalAuthToken(tokenOptions);\n\n  if (token) {\n    resolvedHeaders.set(\"Authorization\", `Bearer ${token}`);\n  }\n\n  if (includeJsonContentType && !resolvedHeaders.has(\"Content-Type\")) {\n    resolvedHeaders.set(\"Content-Type\", \"application/json\");\n  }\n\n  return resolvedHeaders;\n};\n\nexport interface PortalAuthFetchOptions extends BuildPortalAuthHeadersOptions {\n  credentials?: RequestCredentials;\n}\n\nexport const portalAuthFetch = (\n  input: RequestInfo | URL,\n  init: RequestInit = {},\n  options: PortalAuthFetchOptions = {},\n): Promise<Response> => {\n  const headers = buildPortalAuthHeaders({\n    headers: init.headers,\n    includeJsonContentType: options.includeJsonContentType,\n    tokenKey: options.tokenKey,\n    required: options.required,\n    missingTokenMessage: options.missingTokenMessage,\n  });\n\n  const finalInit: RequestInit = {\n    ...init,\n    headers,\n    credentials: options.credentials ?? init.credentials ?? \"include\",\n  };\n\n  return fetch(input, finalInit);\n};\n\nexport interface CreatePortalFetchDefaults\n  extends Omit<PortalAuthFetchOptions, \"headers\" | \"tokenKey\"> {}\n\nexport const createPortalAuthFetch = (\n  tokenKey: string,\n  defaults: CreatePortalFetchDefaults = {},\n) => {\n  return (\n    input: RequestInfo | URL,\n    init: RequestInit = {},\n    options: CreatePortalFetchDefaults = {},\n  ): Promise<Response> => {\n    return portalAuthFetch(input, init, {\n      tokenKey,\n      ...defaults,\n      ...options,\n    });\n  };\n};\n","/**\n * Portal ID Authentication Types - ISP Framework Integration\n * Aligns with dotmac_isp_framework Portal ID system\n */\n\nexport interface PortalAccount {\n  portal_id: string; // 8-character alphanumeric ID (ABC123XY format)\n  account_type: \"CUSTOMER\" | \"TECHNICIAN\" | \"RESELLER\";\n  status: \"ACTIVE\" | \"SUSPENDED\" | \"LOCKED\" | \"PENDING_ACTIVATION\" | \"DEACTIVATED\";\n  customer_id?: string; // For CUSTOMER accounts\n  technician_id?: string; // For TECHNICIAN accounts\n  reseller_id?: string; // For RESELLER accounts\n  two_factor_enabled: boolean;\n  password_last_changed: string;\n  last_login_at?: string;\n  failed_login_attempts: number;\n  locked_until?: string;\n}\n\nexport interface PortalSession {\n  session_id: string;\n  portal_id: string;\n  ip_address: string;\n  user_agent: string;\n  device_fingerprint: string;\n  geo_location?: {\n    country: string;\n    city: string;\n    coordinates?: [number, number];\n  };\n  risk_score: number; // 0-100 risk assessment\n  expires_at: string;\n  last_activity: string;\n}\n\nexport interface PortalLoginAttempt {\n  portal_id: string;\n  ip_address: string;\n  user_agent: string;\n  success: boolean;\n  failure_reason?:\n    | \"INVALID_PORTAL_ID\"\n    | \"INVALID_PASSWORD\"\n    | \"ACCOUNT_LOCKED\"\n    | \"MFA_FAILED\"\n    | \"SUSPENDED_ACCOUNT\";\n  risk_score: number;\n  geo_location?: {\n    country: string;\n    city: string;\n  };\n  timestamp: string;\n}\n\nexport interface PortalLoginCredentials {\n  portal_id: string; // Required: 8-character Portal ID\n  password: string; // Required: Account password\n  mfa_code?: string; // Optional: 6-digit TOTP code\n  device_fingerprint?: string; // Optional: Device identification\n  remember_device?: boolean; // Optional: Remember this device\n}\n\nexport interface PortalAuthResponse {\n  success: boolean;\n  portal_account: PortalAccount;\n  session: PortalSession;\n  access_token: string;\n  refresh_token: string;\n  customer?: CustomerData; // For CUSTOMER accounts\n  technician?: TechnicianData; // For TECHNICIAN accounts\n  reseller?: ResellerData; // For RESELLER accounts\n  permissions: string[];\n  requires_password_change?: boolean;\n  requires_mfa_setup?: boolean;\n}\n\nexport interface CustomerData {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  customer_type: \"RESIDENTIAL\" | \"BUSINESS\" | \"ENTERPRISE\";\n  status: \"ACTIVE\" | \"SUSPENDED\" | \"CANCELLED\";\n  billing_address?: Address;\n  service_address?: Address;\n  payment_method?: PaymentMethod;\n  subscription_tier: string;\n  services: CustomerService[];\n}\n\nexport interface TechnicianData {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  employee_id: string;\n  department: string;\n  certifications: string[];\n  territory: string;\n  status: \"ACTIVE\" | \"INACTIVE\" | \"ON_LEAVE\";\n  skills: string[];\n  current_location?: [number, number];\n}\n\nexport interface ResellerData {\n  id: string;\n  company_name: string;\n  contact_name: string;\n  email: string;\n  phone: string;\n  territory: string;\n  commission_rate: number;\n  status: \"ACTIVE\" | \"INACTIVE\" | \"SUSPENDED\";\n  license_number?: string;\n  payment_terms: string;\n  monthly_target?: number;\n}\n\nexport interface Address {\n  street: string;\n  city: string;\n  state: string;\n  zip_code: string;\n  country: string;\n}\n\nexport interface PaymentMethod {\n  type: \"CREDIT_CARD\" | \"BANK_ACCOUNT\" | \"ACH\";\n  last_four: string;\n  expires?: string;\n  is_default: boolean;\n}\n\nexport interface CustomerService {\n  id: string;\n  service_type: \"INTERNET\" | \"PHONE\" | \"TV\" | \"BUNDLE\";\n  plan_name: string;\n  status: \"ACTIVE\" | \"SUSPENDED\" | \"PENDING\" | \"CANCELLED\";\n  monthly_rate: number;\n  installation_date: string;\n  equipment: ServiceEquipment[];\n}\n\nexport interface ServiceEquipment {\n  id: string;\n  type: \"MODEM\" | \"ROUTER\" | \"SET_TOP_BOX\" | \"PHONE_ADAPTER\";\n  model: string;\n  serial_number: string;\n  status: \"ACTIVE\" | \"INACTIVE\" | \"NEEDS_REPLACEMENT\";\n  installed_date: string;\n}\n\nexport interface PortalAuthError {\n  code: string;\n  message: string;\n  details?: Record<string, any>;\n  requires_2fa?: boolean;\n  locked_until?: string;\n  password_expired?: boolean;\n}\n\nexport interface PortalIdValidation {\n  is_valid: boolean;\n  formatted: string;\n  errors: string[];\n}\n\nexport interface DeviceFingerprint {\n  screen_resolution: string;\n  timezone: string;\n  language: string;\n  platform: string;\n  user_agent_hash: string;\n  canvas_fingerprint?: string;\n}\n\n// Portal ID Generation Constants\nexport const PORTAL_ID_CONFIG = {\n  LENGTH: 8,\n  // Excludes confusing characters: 0, O, I, 1\n  ALLOWED_CHARS: \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\",\n  VALIDATION_REGEX: /^[A-Z2-9]{8}$/,\n} as const;\n\n// Account Status Transitions\nexport const ACCOUNT_STATUS_TRANSITIONS = {\n  PENDING_ACTIVATION: [\"ACTIVE\", \"DEACTIVATED\"],\n  ACTIVE: [\"SUSPENDED\", \"LOCKED\", \"DEACTIVATED\"],\n  SUSPENDED: [\"ACTIVE\", \"DEACTIVATED\"],\n  LOCKED: [\"ACTIVE\", \"DEACTIVATED\"],\n  DEACTIVATED: [\"ACTIVE\"],\n} as const;\n\n// Risk Score Thresholds\nexport const RISK_THRESHOLDS = {\n  LOW: 0,\n  MEDIUM: 30,\n  HIGH: 70,\n  CRITICAL: 90,\n} as const;\n","/**\n * Portal ID Authentication Hook - ISP Framework Integration\n * Implements ISP Framework Portal ID authentication system\n */\n\nimport { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { createPortalAuthFetch, DEFAULT_PORTAL_TOKEN_KEY } from \"../utils/portalAuth\";\nimport type {\n  PortalLoginCredentials,\n  PortalAuthResponse,\n  PortalAccount,\n  PortalSession,\n  PortalAuthError,\n  PortalIdValidation,\n  DeviceFingerprint,\n} from \"../types/portal-auth\";\nimport { PORTAL_ID_CONFIG, RISK_THRESHOLDS } from \"../types/portal-auth\";\n\ninterface UsePortalIdAuthState {\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: PortalAuthError | null;\n  portalAccount: PortalAccount | null;\n  session: PortalSession | null;\n  customerData: any | null;\n  technicianData: any | null;\n  resellerData: any | null;\n  permissions: string[];\n  requiresMfa: boolean;\n  requiresPasswordChange: boolean;\n}\n\ninterface UsePortalIdAuthActions {\n  login: (credentials: PortalLoginCredentials) => Promise<boolean>;\n  logout: () => Promise<void>;\n  refreshSession: () => Promise<boolean>;\n  validatePortalId: (portalId: string) => PortalIdValidation;\n  checkSessionHealth: () => Promise<boolean>;\n  updatePassword: (currentPassword: string, newPassword: string) => Promise<boolean>;\n  setupMfa: (secret: string, code: string) => Promise<boolean>;\n  generateDeviceFingerprint: () => DeviceFingerprint;\n}\n\nexport function usePortalIdAuth(): UsePortalIdAuthState & UsePortalIdAuthActions {\n  const portalAuthFetch = useMemo(() => createPortalAuthFetch(DEFAULT_PORTAL_TOKEN_KEY), []);\n  const [state, setState] = useState<UsePortalIdAuthState>({\n    isAuthenticated: false,\n    isLoading: false,\n    error: null,\n    portalAccount: null,\n    session: null,\n    customerData: null,\n    technicianData: null,\n    resellerData: null,\n    permissions: [],\n    requiresMfa: false,\n    requiresPasswordChange: false,\n  });\n\n  // Validate Portal ID format and characters\n  const validatePortalId = useCallback((portalId: string): PortalIdValidation => {\n    const errors: string[] = [];\n    let formatted = portalId.toUpperCase().trim();\n\n    // Remove invalid characters\n    formatted = formatted.replace(/[^A-Z2-9]/g, \"\");\n\n    // Check length\n    if (formatted.length !== PORTAL_ID_CONFIG.LENGTH) {\n      errors.push(`Portal ID must be exactly ${PORTAL_ID_CONFIG.LENGTH} characters`);\n    }\n\n    // Check format\n    if (!PORTAL_ID_CONFIG.VALIDATION_REGEX.test(formatted)) {\n      errors.push(\"Portal ID contains invalid characters (use A-Z and 2-9 only)\");\n    }\n\n    // Check for common mistakes\n    if (formatted.includes(\"0\") || formatted.includes(\"O\")) {\n      errors.push(\"Portal ID cannot contain 0 or O (zero/oh confusion)\");\n    }\n    if (formatted.includes(\"1\") || formatted.includes(\"I\")) {\n      errors.push(\"Portal ID cannot contain 1 or I (one/eye confusion)\");\n    }\n\n    return {\n      is_valid: errors.length === 0,\n      formatted,\n      errors,\n    };\n  }, []);\n\n  // Generate device fingerprint for security\n  const generateDeviceFingerprint = useCallback((): DeviceFingerprint => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      ctx.textBaseline = \"top\";\n      ctx.font = \"14px Arial\";\n      ctx.fillText(\"Portal ID fingerprint\", 2, 2);\n    }\n\n    return {\n      screen_resolution: `${screen.width}x${screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language,\n      platform: navigator.platform,\n      user_agent_hash: btoa(navigator.userAgent).slice(0, 20),\n      canvas_fingerprint: canvas.toDataURL().slice(-20),\n    };\n  }, []);\n\n  // Calculate risk score based on login patterns\n  const calculateRiskScore = useCallback(\n    (credentials: PortalLoginCredentials, deviceFingerprint: DeviceFingerprint): number => {\n      let risk = 0;\n\n      // New device increases risk\n      const storedFingerprint = localStorage.getItem(`device_fp_${credentials.portal_id}`);\n      if (!storedFingerprint || storedFingerprint !== JSON.stringify(deviceFingerprint)) {\n        risk += 20;\n      }\n\n      // Unusual timezone\n      const storedTimezone = localStorage.getItem(`timezone_${credentials.portal_id}`);\n      if (storedTimezone && storedTimezone !== deviceFingerprint.timezone) {\n        risk += 30;\n      }\n\n      // Failed attempts tracking\n      const failedAttempts = localStorage.getItem(`failed_attempts_${credentials.portal_id}`);\n      if (failedAttempts && parseInt(failedAttempts) > 2) {\n        risk += 25;\n      }\n\n      return Math.min(risk, 100);\n    },\n    [],\n  );\n\n  // Portal ID login implementation\n  const login = useCallback(\n    async (credentials: PortalLoginCredentials): Promise<boolean> => {\n      setState((prev) => ({ ...prev, isLoading: true, error: null }));\n\n      try {\n        // Validate Portal ID format\n        const validation = validatePortalId(credentials.portal_id);\n        if (!validation.is_valid) {\n          throw {\n            code: \"INVALID_PORTAL_ID_FORMAT\",\n            message: validation.errors[0],\n            details: { errors: validation.errors },\n          };\n        }\n\n        // Generate device fingerprint\n        const deviceFingerprint = generateDeviceFingerprint();\n        const riskScore = calculateRiskScore(credentials, deviceFingerprint);\n\n        // Call ISP Framework Portal ID authentication endpoint\n        const response = await fetch(\"/api/portal/v1/auth/login\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            portal_id: validation.formatted,\n            password: credentials.password,\n            mfa_code: credentials.mfa_code,\n            device_fingerprint: deviceFingerprint,\n            risk_score: riskScore,\n            remember_device: credentials.remember_device || false,\n          }),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n\n          // Handle specific error cases\n          if (errorData.requires_2fa) {\n            setState((prev) => ({ ...prev, requiresMfa: true }));\n            throw {\n              code: \"MFA_REQUIRED\",\n              message: \"Two-factor authentication required\",\n              requires_2fa: true,\n            };\n          }\n\n          if (errorData.account_locked) {\n            throw {\n              code: \"ACCOUNT_LOCKED\",\n              message: `Account locked until ${errorData.locked_until}`,\n              locked_until: errorData.locked_until,\n            };\n          }\n\n          if (errorData.password_expired) {\n            setState((prev) => ({ ...prev, requiresPasswordChange: true }));\n            throw {\n              code: \"PASSWORD_EXPIRED\",\n              message: \"Password has expired and must be changed\",\n              password_expired: true,\n            };\n          }\n\n          // Track failed attempts\n          const currentAttempts = parseInt(\n            localStorage.getItem(`failed_attempts_${credentials.portal_id}`) || \"0\",\n          );\n          localStorage.setItem(\n            `failed_attempts_${credentials.portal_id}`,\n            (currentAttempts + 1).toString(),\n          );\n\n          throw {\n            code: errorData.code || \"LOGIN_FAILED\",\n            message: errorData.message || \"Invalid Portal ID or password\",\n            details: errorData,\n          };\n        }\n\n        const authData: PortalAuthResponse = await response.json();\n\n        // Store authentication data\n        localStorage.setItem(\"portal_session\", JSON.stringify(authData.session));\n        localStorage.setItem(\"portal_account\", JSON.stringify(authData.portal_account));\n        localStorage.setItem(\"access_token\", authData.access_token);\n        localStorage.setItem(\"refresh_token\", authData.refresh_token);\n\n        // Store device fingerprint for future risk assessment\n        localStorage.setItem(\n          `device_fp_${credentials.portal_id}`,\n          JSON.stringify(deviceFingerprint),\n        );\n        localStorage.setItem(`timezone_${credentials.portal_id}`, deviceFingerprint.timezone);\n\n        // Clear failed attempts on successful login\n        localStorage.removeItem(`failed_attempts_${credentials.portal_id}`);\n\n        // Update state\n        setState((prev) => ({\n          ...prev,\n          isAuthenticated: true,\n          portalAccount: authData.portal_account,\n          session: authData.session,\n          customerData: authData.customer || null,\n          technicianData: authData.technician || null,\n          resellerData: authData.reseller || null,\n          permissions: authData.permissions,\n          requiresPasswordChange: authData.requires_password_change || false,\n          requiresMfa: false,\n          error: null,\n        }));\n\n        return true;\n      } catch (error: any) {\n        setState((prev) => ({\n          ...prev,\n          error: error as PortalAuthError,\n          isAuthenticated: false,\n        }));\n        return false;\n      } finally {\n        setState((prev) => ({ ...prev, isLoading: false }));\n      }\n    },\n    [validatePortalId, generateDeviceFingerprint, calculateRiskScore],\n  );\n\n  // Logout implementation\n  const logout = useCallback(async (): Promise<void> => {\n    setState((prev) => ({ ...prev, isLoading: true }));\n\n    try {\n      const session = localStorage.getItem(\"portal_session\");\n      if (session) {\n        // Notify backend of logout\n        await portalAuthFetch(\"/api/portal/v1/auth/logout\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ session_id: JSON.parse(session).session_id }),\n        });\n      }\n    } catch (error) {\n      console.warn(\"Logout request failed:\", error);\n    } finally {\n      // Clear all stored data\n      localStorage.removeItem(\"portal_session\");\n      localStorage.removeItem(\"portal_account\");\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n\n      setState({\n        isAuthenticated: false,\n        isLoading: false,\n        error: null,\n        portalAccount: null,\n        session: null,\n        customerData: null,\n        technicianData: null,\n        resellerData: null,\n        permissions: [],\n        requiresMfa: false,\n        requiresPasswordChange: false,\n      });\n    }\n  }, []);\n\n  // Refresh session token\n  const refreshSession = useCallback(async (): Promise<boolean> => {\n    const refreshToken = localStorage.getItem(\"refresh_token\");\n    if (!refreshToken) return false;\n\n    try {\n      const response = await fetch(\"/api/portal/v1/auth/refresh\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ refresh_token: refreshToken }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        localStorage.setItem(\"access_token\", data.access_token);\n        localStorage.setItem(\"refresh_token\", data.refresh_token);\n        return true;\n      }\n    } catch (error) {\n      console.error(\"Session refresh failed:\", error);\n    }\n\n    // If refresh fails, logout\n    await logout();\n    return false;\n  }, [logout]);\n\n  // Check session health and risk\n  const checkSessionHealth = useCallback(async (): Promise<boolean> => {\n    const session = localStorage.getItem(\"portal_session\");\n    const accessToken = localStorage.getItem(\"access_token\");\n\n    if (!session || !accessToken) return false;\n\n    try {\n      const response = await fetch(\"/api/portal/v1/auth/session/health\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n        },\n      });\n\n      if (response.ok) {\n        const healthData = await response.json();\n\n        // Check if risk score is too high\n        if (healthData.risk_score > RISK_THRESHOLDS.CRITICAL) {\n          await logout();\n          return false;\n        }\n\n        return healthData.is_healthy;\n      }\n    } catch (error) {\n      console.error(\"Session health check failed:\", error);\n    }\n\n    return false;\n  }, [logout]);\n\n  // Update password\n  const updatePassword = useCallback(\n    async (currentPassword: string, newPassword: string): Promise<boolean> => {\n      const accessToken = localStorage.getItem(\"access_token\");\n      if (!accessToken) return false;\n\n      try {\n        const response = await fetch(\"/api/portal/v1/auth/password/update\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${accessToken}`,\n          },\n          body: JSON.stringify({\n            current_password: currentPassword,\n            new_password: newPassword,\n          }),\n        });\n\n        if (response.ok) {\n          setState((prev) => ({ ...prev, requiresPasswordChange: false }));\n          return true;\n        }\n      } catch (error) {\n        console.error(\"Password update failed:\", error);\n      }\n\n      return false;\n    },\n    [],\n  );\n\n  // Setup MFA\n  const setupMfa = useCallback(async (secret: string, code: string): Promise<boolean> => {\n    const accessToken = localStorage.getItem(\"access_token\");\n    if (!accessToken) return false;\n\n    try {\n      const response = await fetch(\"/api/portal/v1/auth/mfa/setup\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify({\n          secret,\n          verification_code: code,\n        }),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error(\"MFA setup failed:\", error);\n    }\n\n    return false;\n  }, []);\n\n  // Initialize authentication state from storage\n  useEffect(() => {\n    const initAuth = async () => {\n      const portalAccount = localStorage.getItem(\"portal_account\");\n      const session = localStorage.getItem(\"portal_session\");\n      const accessToken = localStorage.getItem(\"access_token\");\n\n      if (portalAccount && session && accessToken) {\n        // Verify session is still valid\n        const isHealthy = await checkSessionHealth();\n        if (isHealthy) {\n          setState((prev) => ({\n            ...prev,\n            isAuthenticated: true,\n            portalAccount: JSON.parse(portalAccount),\n            session: JSON.parse(session),\n            // Load other data from storage if needed\n          }));\n        }\n      }\n    };\n\n    initAuth();\n  }, [checkSessionHealth]);\n\n  // Periodic session health checks\n  useEffect(() => {\n    if (state.isAuthenticated) {\n      const interval = setInterval(checkSessionHealth, 5 * 60 * 1000); // Every 5 minutes\n      return () => clearInterval(interval);\n    }\n  }, [state.isAuthenticated, checkSessionHealth]);\n\n  return {\n    ...state,\n    login,\n    logout,\n    refreshSession,\n    validatePortalId,\n    checkSessionHealth,\n    updatePassword,\n    setupMfa,\n    generateDeviceFingerprint,\n  };\n}\n","/**\n * Role-based route protection hook for ISP platform\n */\n\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport { usePermissions } from \"./usePermissions\";\nimport { usePortalIdAuth } from \"./usePortalIdAuth\";\n\ninterface RouteConfig {\n  path: string;\n  requiredRoles?: string[];\n  requiredPermissions?: string[];\n  requiredFeatures?: string[];\n  allowedPortals?: Array<\"admin\" | \"customer\" | \"reseller\">;\n  redirectTo?: string;\n  exact?: boolean;\n}\n\n// ISP-specific route configurations\nconst ROUTE_CONFIGS: RouteConfig[] = [\n  // Admin Portal Routes\n  {\n    path: \"/admin\",\n    allowedPortals: [\"admin\"],\n    requiredRoles: [\n      \"super-admin\",\n      \"tenant-admin\",\n      \"network-engineer\",\n      \"billing-manager\",\n      \"support-manager\",\n    ],\n    redirectTo: \"/unauthorized\",\n  },\n  {\n    path: \"/admin/customers\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"customers:read\"],\n    requiredRoles: [\"tenant-admin\", \"billing-manager\", \"support-agent\", \"customer-service\"],\n  },\n  {\n    path: \"/admin/customers/create\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"customers:create\"],\n    requiredRoles: [\"tenant-admin\", \"billing-manager\"],\n  },\n  {\n    path: \"/admin/network\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"network:read\"],\n    requiredRoles: [\"tenant-admin\", \"network-engineer\"],\n  },\n  {\n    path: \"/admin/network/devices\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"network:write\", \"devices:write\"],\n    requiredRoles: [\"tenant-admin\", \"network-engineer\"],\n  },\n  {\n    path: \"/admin/billing\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"billing:read\"],\n    requiredRoles: [\"tenant-admin\", \"billing-manager\"],\n  },\n  {\n    path: \"/admin/billing/invoices\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"billing:write\", \"invoices:write\"],\n    requiredRoles: [\"tenant-admin\", \"billing-manager\"],\n  },\n  {\n    path: \"/admin/support\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"support:read\"],\n    requiredRoles: [\"tenant-admin\", \"support-manager\", \"support-agent\"],\n  },\n  {\n    path: \"/admin/analytics\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"analytics:read\"],\n    requiredRoles: [\"tenant-admin\", \"network-engineer\", \"billing-manager\", \"support-manager\"],\n  },\n  {\n    path: \"/admin/workflows\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"workflows:read\"],\n    requiredRoles: [\"tenant-admin\"],\n  },\n  {\n    path: \"/admin/audit\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"audit:read\"],\n    requiredRoles: [\"tenant-admin\", \"super-admin\"],\n  },\n  {\n    path: \"/admin/security\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"security:read\"],\n    requiredRoles: [\"tenant-admin\", \"super-admin\"],\n  },\n  {\n    path: \"/admin/settings\",\n    allowedPortals: [\"admin\"],\n    requiredPermissions: [\"settings:read\"],\n    requiredRoles: [\"tenant-admin\", \"super-admin\"],\n  },\n\n  // Customer Portal Routes\n  {\n    path: \"/services\",\n    allowedPortals: [\"customer\"],\n    requiredRoles: [\"customer\"],\n    requiredPermissions: [\"services:read\"],\n  },\n  {\n    path: \"/usage\",\n    allowedPortals: [\"customer\"],\n    requiredRoles: [\"customer\"],\n    requiredPermissions: [\"usage:read\"],\n  },\n  {\n    path: \"/billing\",\n    allowedPortals: [\"customer\"],\n    requiredRoles: [\"customer\"],\n    requiredPermissions: [\"billing:read\"],\n  },\n  {\n    path: \"/support\",\n    allowedPortals: [\"customer\"],\n    requiredRoles: [\"customer\"],\n    requiredPermissions: [\"support:create\", \"support:read\"],\n  },\n  {\n    path: \"/documents\",\n    allowedPortals: [\"customer\"],\n    requiredRoles: [\"customer\"],\n    requiredPermissions: [\"documents:read\"],\n  },\n\n  // Reseller Portal Routes\n  {\n    path: \"/customers\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"customers:read\"],\n  },\n  {\n    path: \"/onboarding\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"customers:create\"],\n  },\n  {\n    path: \"/commissions\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"commissions:read\"],\n  },\n  {\n    path: \"/analytics\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\"],\n    requiredPermissions: [\"analytics:read\"],\n  },\n  {\n    path: \"/goals\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"goals:read\"],\n  },\n  {\n    path: \"/territory\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\"],\n    requiredPermissions: [\"territory:read\"],\n  },\n  {\n    path: \"/resources\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"resources:read\"],\n  },\n  {\n    path: \"/partner\",\n    allowedPortals: [\"reseller\"],\n    requiredRoles: [\"reseller-admin\", \"reseller-agent\"],\n    requiredPermissions: [\"partner:read\"],\n  },\n];\n\nexport interface RouteProtectionResult {\n  isAllowed: boolean;\n  isLoading: boolean;\n  redirectPath?: string;\n  reason?:\n    | \"portal_mismatch\"\n    | \"insufficient_role\"\n    | \"insufficient_permissions\"\n    | \"missing_features\"\n    | \"unauthenticated\";\n}\n\n// Composition helpers for route protection\nconst RouteMatchers = {\n  findExactMatch: (path: string, configs: RouteConfig[]) =>\n    configs.find((config) => config.exact !== false && config.path === path),\n\n  findPrefixMatch: (path: string, configs: RouteConfig[]) =>\n    configs\n      .filter((config) => config.exact !== true)\n      .find((config) => path.startsWith(config.path)),\n\n  findRouteConfig: (path: string): RouteConfig | null => {\n    const exactMatch = RouteMatchers.findExactMatch(path, ROUTE_CONFIGS);\n    if (exactMatch) {\n      return exactMatch;\n    }\n    return RouteMatchers.findPrefixMatch(path, ROUTE_CONFIGS) || null;\n  },\n};\n\nconst AccessValidators = {\n  checkAuthentication: (user: unknown): RouteProtectionResult | null => {\n    if (!user) {\n      return {\n        isAllowed: false,\n        isLoading: false,\n        redirectPath: \"/\",\n        reason: \"unauthenticated\",\n      };\n    }\n    return null;\n  },\n\n  checkPortalAccess: (\n    config: RouteConfig,\n    currentPortal: { type: \"admin\" | \"customer\" | \"reseller\" } | null,\n  ): RouteProtectionResult | null => {\n    if (config.allowedPortals && currentPortal) {\n      if (!config.allowedPortals.includes(currentPortal.type)) {\n        return {\n          isAllowed: false,\n          isLoading: false,\n          redirectPath: RouteHelpers.getPortalDefaultRoute(currentPortal.type),\n          reason: \"portal_mismatch\",\n        };\n      }\n    }\n    return null;\n  },\n\n  checkRoleAccess: (\n    config: RouteConfig,\n    checkAnyRole: (roles: string[]) => boolean,\n    currentPortal: { type: \"admin\" | \"customer\" | \"reseller\" } | null,\n  ): RouteProtectionResult | null => {\n    if (config.requiredRoles && config.requiredRoles.length > 0) {\n      if (!checkAnyRole(config.requiredRoles)) {\n        return {\n          isAllowed: false,\n          isLoading: false,\n          redirectPath:\n            config.redirectTo || RouteHelpers.getPortalDefaultRoute(currentPortal?.type),\n          reason: \"insufficient_role\",\n        };\n      }\n    }\n    return null;\n  },\n\n  checkPermissionAccess: (\n    config: RouteConfig,\n    hasAnyPermission: (permissions: string[]) => boolean,\n    currentPortal: { type: \"admin\" | \"customer\" | \"reseller\" } | null,\n  ): RouteProtectionResult | null => {\n    if (config.requiredPermissions && config.requiredPermissions.length > 0) {\n      if (!hasAnyPermission(config.requiredPermissions)) {\n        return {\n          isAllowed: false,\n          isLoading: false,\n          redirectPath:\n            config.redirectTo || RouteHelpers.getPortalDefaultRoute(currentPortal?.type),\n          reason: \"insufficient_permissions\",\n        };\n      }\n    }\n    return null;\n  },\n\n  checkFeatureAccess: (\n    config: RouteConfig,\n    hasFeature: (feature: string) => boolean,\n    currentPortal: { type: \"admin\" | \"customer\" | \"reseller\" } | null,\n  ): RouteProtectionResult | null => {\n    if (config.requiredFeatures && config.requiredFeatures.length > 0) {\n      const hasRequiredFeatures = config.requiredFeatures.every((feature) => hasFeature(feature));\n      if (!hasRequiredFeatures) {\n        return {\n          isAllowed: false,\n          isLoading: false,\n          redirectPath:\n            config.redirectTo || RouteHelpers.getPortalDefaultRoute(currentPortal?.type),\n          reason: \"missing_features\",\n        };\n      }\n    }\n    return null;\n  },\n};\n\nconst RouteHelpers = {\n  getPortalDefaultRoute: (portalType?: \"admin\" | \"customer\" | \"reseller\"): string => {\n    switch (portalType) {\n      case \"admin\":\n      case \"customer\":\n      case \"reseller\":\n        return \"/\";\n      default:\n        return \"/unauthorized\";\n    }\n  },\n};\n\nexport function useRouteProtection(): RouteProtectionResult {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { user, currentPortal, isLoading: authLoading } = usePortalIdAuth();\n  const { checkAnyRole, hasAnyPermission, _hasFeature } = usePermissions();\n\n  const [protectionResult, setProtectionResult] = useState<RouteProtectionResult>({\n    isAllowed: false,\n    isLoading: true,\n  });\n\n  // Find matching route configuration\n  const findRouteConfig = RouteMatchers.findRouteConfig;\n\n  // Helper functions using composition\n  const checkAuthentication = useCallback(\n    (): RouteProtectionResult | null => AccessValidators.checkAuthentication(user),\n    [user],\n  );\n\n  const checkPortalAccess = useCallback(\n    (config: RouteConfig): RouteProtectionResult | null =>\n      AccessValidators.checkPortalAccess(config, currentPortal),\n    [currentPortal],\n  );\n\n  const checkRoleAccess = useCallback(\n    (config: RouteConfig): RouteProtectionResult | null =>\n      AccessValidators.checkRoleAccess(config, checkAnyRole, currentPortal),\n    [checkAnyRole, currentPortal],\n  );\n\n  const checkPermissionAccess = useCallback(\n    (config: RouteConfig): RouteProtectionResult | null =>\n      AccessValidators.checkPermissionAccess(config, hasAnyPermission, currentPortal),\n    [hasAnyPermission, currentPortal],\n  );\n\n  const checkFeatureAccess = useCallback(\n    (config: RouteConfig): RouteProtectionResult | null =>\n      AccessValidators.checkFeatureAccess(config, _hasFeature, currentPortal),\n    [_hasFeature, currentPortal],\n  );\n\n  // Check if user has access to route\n  const checkRouteAccess = useCallback(\n    (config: RouteConfig): RouteProtectionResult => {\n      // Check authentication\n      const authResult = checkAuthentication();\n      if (authResult) {\n        return authResult;\n      }\n\n      // Check portal access\n      const portalResult = checkPortalAccess(config);\n      if (portalResult) {\n        return portalResult;\n      }\n\n      // Check role access\n      const roleResult = checkRoleAccess(config);\n      if (roleResult) {\n        return roleResult;\n      }\n\n      // Check permission access\n      const permissionResult = checkPermissionAccess(config);\n      if (permissionResult) {\n        return permissionResult;\n      }\n\n      // Check feature access\n      const featureResult = checkFeatureAccess(config);\n      if (featureResult) {\n        return featureResult;\n      }\n\n      return {\n        isAllowed: true,\n        isLoading: false,\n      };\n    },\n    [\n      checkAuthentication,\n      checkPortalAccess,\n      checkRoleAccess,\n      checkPermissionAccess,\n      checkFeatureAccess,\n    ],\n  );\n\n  // Check route protection whenever pathname, user, or portal changes\n  useEffect(() => {\n    if (authLoading) {\n      setProtectionResult({ isAllowed: false, isLoading: true });\n      return;\n    }\n\n    const routeConfig = findRouteConfig(pathname);\n\n    // If no route config, allow access (public route)\n    if (!routeConfig) {\n      setProtectionResult({ isAllowed: true, isLoading: false });\n      return;\n    }\n\n    const result = checkRouteAccess(routeConfig);\n    setProtectionResult(result);\n\n    // Redirect if access is denied\n    if (!result.isAllowed && result.redirectPath && !result.isLoading) {\n      router.push(result.redirectPath);\n    }\n  }, [pathname, authLoading, router, checkRouteAccess, findRouteConfig]);\n\n  return protectionResult;\n}\n\n// Hook for protecting specific routes with custom configuration\nexport function useCustomRouteProtection(config: Omit<RouteConfig, \"path\">): RouteProtectionResult {\n  const pathname = usePathname();\n  const { user, currentPortal, isLoading: authLoading } = usePortalIdAuth();\n  const { checkAnyRole, hasAnyPermission, _hasFeature } = usePermissions();\n\n  const [protectionResult, setProtectionResult] = useState<RouteProtectionResult>({\n    isAllowed: false,\n    isLoading: true,\n  });\n\n  // Helper to perform all custom route validations\n  const validateCustomRoute = useCallback((): RouteProtectionResult => {\n    const routeConfig: RouteConfig = { ...config, path: pathname };\n\n    // Use existing validators\n    const authResult = AccessValidators.checkAuthentication(user);\n    if (authResult) {\n      return authResult;\n    }\n\n    const portalResult = AccessValidators.checkPortalAccess(routeConfig, currentPortal);\n    if (portalResult) {\n      return portalResult;\n    }\n\n    const roleResult = AccessValidators.checkRoleAccess(routeConfig, checkAnyRole, currentPortal);\n    if (roleResult) {\n      return roleResult;\n    }\n\n    const permissionResult = AccessValidators.checkPermissionAccess(\n      routeConfig,\n      hasAnyPermission,\n      currentPortal,\n    );\n    if (permissionResult) {\n      return permissionResult;\n    }\n\n    const featureResult = AccessValidators.checkFeatureAccess(\n      routeConfig,\n      _hasFeature,\n      currentPortal,\n    );\n    if (featureResult) {\n      return featureResult;\n    }\n\n    return { isAllowed: true, isLoading: false };\n  }, [pathname, config, user, currentPortal, checkAnyRole, hasAnyPermission, _hasFeature]);\n\n  useEffect(() => {\n    if (authLoading) {\n      setProtectionResult({ isAllowed: false, isLoading: true });\n      return;\n    }\n\n    const result = validateCustomRoute();\n    setProtectionResult(result);\n  }, [authLoading, validateCustomRoute]);\n\n  return protectionResult;\n}\n\n// Higher-order component for route protection\nexport function withRouteProtection<P extends object>(\n  Component: React.ComponentType<P>,\n  config?: Omit<RouteConfig, \"path\">,\n) {\n  return function ProtectedComponent(props: P) {\n    const protection = config ? useCustomRouteProtection(config) : useRouteProtection();\n\n    if (protection.isLoading) {\n      return (\n        <div className=\"flex min-h-screen items-center justify-center\">\n          <div className=\"h-8 w-8 animate-spin rounded-full border-blue-600 border-b-2\" />\n          <span className=\"ml-2 text-gray-600\">Checking permissions...</span>\n        </div>\n      );\n    }\n\n    if (!protection.isAllowed) {\n      return (\n        <div className=\"flex min-h-screen flex-col items-center justify-center\">\n          <div className=\"text-center\">\n            <h1 className=\"mb-4 font-bold text-2xl text-gray-900\">Access Denied</h1>\n            <p className=\"mb-6 text-gray-600\">{getAccessDeniedMessage(protection.reason)}</p>\n            <button\n              type=\"button\"\n              onClick={() => window.history.back()}\n              className=\"rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700\"\n            >\n              Go Back\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return <Component {...props} />;\n  };\n}\n\n// Get user-friendly access denied message\nfunction getAccessDeniedMessage(reason?: string): string {\n  switch (reason) {\n    case \"unauthenticated\":\n      return \"Please sign in to access this page.\";\n    case \"portal_mismatch\":\n      return \"This page is not available in your current portal.\";\n    case \"insufficient_role\":\n      return \"Your role does not have access to this page.\";\n    case \"insufficient_permissions\":\n      return \"You do not have the required permissions to access this page.\";\n    case \"missing_features\":\n      return \"This feature is not available in your current plan.\";\n    default:\n      return \"You do not have permission to access this page.\";\n  }\n}\n","/**\n * Route guard component for protecting pages and components\n */\n\nimport type { ReactNode } from \"react\";\n\nimport { useCustomRouteProtection } from \"../hooks/useRouteProtection\";\n\ninterface RouteGuardProps {\n  children: ReactNode;\n  requiredRoles?: string[];\n  requiredPermissions?: string[];\n  requiredFeatures?: string[];\n  allowedPortals?: Array<\"admin\" | \"customer\" | \"reseller\">;\n  fallback?: ReactNode;\n  loadingComponent?: ReactNode;\n  unauthorizedComponent?: ReactNode;\n}\n\nexport function RouteGuard({\n  children,\n  requiredRoles,\n  requiredPermissions,\n  requiredFeatures,\n  allowedPortals,\n  fallback,\n  loadingComponent,\n  unauthorizedComponent,\n}: RouteGuardProps) {\n  const protection = useCustomRouteProtection({\n    requiredRoles: requiredRoles ?? [],\n    requiredPermissions: requiredPermissions ?? [],\n    requiredFeatures: requiredFeatures ?? [],\n    allowedPortals: allowedPortals ?? [],\n  });\n\n  if (protection.isLoading) {\n    return (\n      loadingComponent || (\n        <div className=\"flex items-center justify-center p-8\">\n          <div className=\"h-6 w-6 animate-spin rounded-full border-blue-600 border-b-2\" />\n          <span className=\"ml-2 text-gray-600 text-sm\">Checking permissions...</span>\n        </div>\n      )\n    );\n  }\n\n  if (!protection.isAllowed) {\n    if (unauthorizedComponent) {\n      return <>{unauthorizedComponent}</>;\n    }\n\n    if (fallback) {\n      return <>{fallback}</>;\n    }\n\n    return (\n      <div className=\"p-8 text-center\">\n        <div className=\"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full bg-red-100\">\n          <svg\n            aria-label=\"icon\"\n            className=\"h-6 w-6 text-red-600\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <title>Icon</title>\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n            />\n          </svg>\n        </div>\n        <h3 className=\"mb-2 font-medium text-gray-900 text-lg\">Access Restricted</h3>\n        <p className=\"text-gray-600 text-sm\">{getAccessDeniedMessage(protection.reason)}</p>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}\n\n// Specific guard components for common use cases\nexport function AdminOnlyGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard\n      allowedPortals={[\"admin\"]}\n      requiredRoles={[\"super-admin\", \"tenant-admin\"]}\n      fallback={fallback}\n    >\n      {children}\n    </RouteGuard>\n  );\n}\n\nexport function CustomerOnlyGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard allowedPortals={[\"customer\"]} requiredRoles={[\"customer\"]} fallback={fallback}>\n      {children}\n    </RouteGuard>\n  );\n}\n\nexport function ResellerOnlyGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard\n      allowedPortals={[\"reseller\"]}\n      requiredRoles={[\"reseller-admin\", \"reseller-agent\"]}\n      fallback={fallback}\n    >\n      {children}\n    </RouteGuard>\n  );\n}\n\nexport function NetworkEngineerGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard\n      allowedPortals={[\"admin\"]}\n      requiredRoles={[\"tenant-admin\", \"network-engineer\"]}\n      requiredPermissions={[\"network:read\"]}\n      fallback={fallback}\n    >\n      {children}\n    </RouteGuard>\n  );\n}\n\nexport function BillingManagerGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard\n      allowedPortals={[\"admin\"]}\n      requiredRoles={[\"tenant-admin\", \"billing-manager\"]}\n      requiredPermissions={[\"billing:read\"]}\n      fallback={fallback}\n    >\n      {children}\n    </RouteGuard>\n  );\n}\n\nexport function SupportAgentGuard({\n  children,\n  fallback,\n}: {\n  children: ReactNode;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard\n      allowedPortals={[\"admin\"]}\n      requiredRoles={[\"tenant-admin\", \"support-manager\", \"support-agent\"]}\n      requiredPermissions={[\"support:read\"]}\n      fallback={fallback}\n    >\n      {children}\n    </RouteGuard>\n  );\n}\n\n// Permission-based guards\nexport function PermissionGuard({\n  children,\n  permissions,\n  requireAll = false,\n  fallback,\n}: {\n  children: ReactNode;\n  permissions: string[];\n  requireAll?: boolean;\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard requiredPermissions={permissions} fallback={fallback}>\n      {children}\n    </RouteGuard>\n  );\n}\n\n// Feature-based guards\nexport function FeatureGuard({\n  children,\n  features,\n  fallback,\n}: {\n  children: ReactNode;\n  features: string[];\n  fallback?: ReactNode;\n}) {\n  return (\n    <RouteGuard requiredFeatures={features} fallback={fallback}>\n      {children}\n    </RouteGuard>\n  );\n}\n\nfunction getAccessDeniedMessage(reason?: string): string {\n  switch (reason) {\n    case \"unauthenticated\":\n      return \"Please sign in to view this content.\";\n    case \"portal_mismatch\":\n      return \"This content is not available in your current portal.\";\n    case \"insufficient_role\":\n      return \"Your role does not have access to this content.\";\n    case \"insufficient_permissions\":\n      return \"You do not have the required permissions to view this content.\";\n    case \"missing_features\":\n      return \"This feature is not available in your current plan.\";\n    default:\n      return \"You do not have permission to view this content.\";\n  }\n}\n","/**\n * ISP Framework Tenant Provider\n * Provides multi-tenant context to the entire application\n */\n\nimport { useEffect } from \"react\";\nimport type { ReactNode } from \"react\";\nimport { ISPTenantContext, useISPTenantProvider } from \"../hooks/useISPTenant\";\nimport { usePortalIdAuth } from \"../hooks/usePortalIdAuth\";\n\ninterface ISPTenantProviderProps {\n  children: ReactNode;\n  tenantId?: string; // Optional override for specific tenant\n  autoLoadOnAuth?: boolean; // Auto-load tenant when user authenticates\n}\n\nexport function ISPTenantProvider({\n  children,\n  tenantId,\n  autoLoadOnAuth = true,\n}: ISPTenantProviderProps) {\n  const tenantHook = useISPTenantProvider();\n  const { isAuthenticated, portalAccount, customerData, technicianData, resellerData } =\n    usePortalIdAuth();\n  const extractTenantId = (record: any): string | undefined =>\n    record?.tenant_id ?? record?.tenantId;\n\n  // Auto-load tenant when user authenticates\n  useEffect(() => {\n    if (!autoLoadOnAuth || !isAuthenticated || tenantHook.session) return;\n\n    // Determine tenant ID from authenticated user data\n    let targetTenantId = tenantId;\n\n    if (!targetTenantId) {\n      targetTenantId =\n        extractTenantId(customerData) ??\n        extractTenantId(technicianData) ??\n        extractTenantId(resellerData) ??\n        extractTenantId(portalAccount);\n    }\n\n    if (targetTenantId) {\n      tenantHook.loadTenant(targetTenantId).catch((err) => {\n        console.error(\"Failed to auto-load tenant:\", err);\n      });\n    }\n  }, [\n    isAuthenticated,\n    tenantId,\n    autoLoadOnAuth,\n    tenantHook,\n    tenantHook.session,\n    customerData,\n    technicianData,\n    resellerData,\n    portalAccount,\n  ]);\n\n  // Clear tenant when user logs out\n  useEffect(() => {\n    if (!isAuthenticated && tenantHook.session) {\n      tenantHook.clearTenant();\n    }\n  }, [isAuthenticated, tenantHook]);\n\n  // Apply branding when tenant session changes\n  useEffect(() => {\n    if (tenantHook.session) {\n      tenantHook.applyBranding();\n    }\n  }, [tenantHook.session, tenantHook.applyBranding]);\n\n  return <ISPTenantContext.Provider value={tenantHook}>{children}</ISPTenantContext.Provider>;\n}\n","\"use client\";\n\n/**\n * Operator Auth Token Utilities\n *\n * Centralises how the operator portals persist and retrieve bearer tokens.\n * Tokens are constrained to sessionStorage to minimise exposure surface and\n * legacy values in localStorage are automatically migrated and cleared.\n *\n * Refresh tokens are never persisted in web-accessible storage; the backend\n * should manage them via httpOnly cookies.\n */\n\nconst ACCESS_TOKEN_KEY = \"access_token\";\nconst REFRESH_TOKEN_KEY = \"refresh_token\";\n\nlet inMemoryAccessToken: string | null = null;\n\nconst safeSessionStorage = () => {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  try {\n    return window.sessionStorage;\n  } catch {\n    return null;\n  }\n};\n\nconst safeLocalStorage = () => {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  try {\n    return window.localStorage;\n  } catch {\n    return null;\n  }\n};\n\nconst readFromStorage = (storage: Storage | null, key: string): string | null => {\n  if (!storage) {\n    return null;\n  }\n\n  try {\n    return storage.getItem(key);\n  } catch {\n    return null;\n  }\n};\n\nconst removeFromStorage = (storage: Storage | null, key: string) => {\n  if (!storage) {\n    return;\n  }\n\n  try {\n    storage.removeItem(key);\n  } catch {\n    // no-op\n  }\n};\n\n/**\n * Persist the access token for the current browser session only.\n */\nexport const setOperatorAccessToken = (token: string | null) => {\n  const session = safeSessionStorage();\n  const local = safeLocalStorage();\n\n  if (token) {\n    if (session) {\n      try {\n        session.setItem(ACCESS_TOKEN_KEY, token);\n      } catch {\n        // Ignore storage errors (e.g. quota exceeded, private mode)\n      }\n    }\n    inMemoryAccessToken = token;\n  } else {\n    removeFromStorage(session, ACCESS_TOKEN_KEY);\n    inMemoryAccessToken = null;\n  }\n\n  // Always clear legacy copies from localStorage for security.\n  removeFromStorage(local, ACCESS_TOKEN_KEY);\n};\n\n/**\n * Retrieve the access token, migrating any legacy localStorage copies into\n * sessionStorage when found.\n */\nexport const getOperatorAccessToken = (): string | null => {\n  const session = safeSessionStorage();\n  const local = safeLocalStorage();\n\n  const sessionToken = readFromStorage(session, ACCESS_TOKEN_KEY);\n  if (sessionToken) {\n    inMemoryAccessToken = sessionToken;\n    return sessionToken;\n  }\n\n  const localToken = readFromStorage(local, ACCESS_TOKEN_KEY);\n  if (localToken) {\n    // Migrate legacy token to session storage and clear the old copy.\n    setOperatorAccessToken(localToken);\n    return localToken;\n  }\n\n  return inMemoryAccessToken;\n};\n\n/**\n * Clear all persisted tokens, including legacy refresh tokens.\n */\nexport const clearOperatorAuthTokens = () => {\n  const session = safeSessionStorage();\n  const local = safeLocalStorage();\n\n  removeFromStorage(session, ACCESS_TOKEN_KEY);\n  removeFromStorage(local, ACCESS_TOKEN_KEY);\n  removeFromStorage(session, REFRESH_TOKEN_KEY);\n  removeFromStorage(local, REFRESH_TOKEN_KEY);\n\n  inMemoryAccessToken = null;\n};\n","/**\n * WebSocket Hook for Real-Time ISP Framework Updates\n * Provides real-time connectivity for network monitoring, customer updates, and system events\n */\n\nimport { useEffect, useRef, useState, useCallback } from \"react\";\nimport { getOperatorAccessToken } from \"../utils/operatorAuth\";\nimport { useISPTenant } from \"./useISPTenant\";\nimport { usePortalIdAuth } from \"./usePortalIdAuth\";\n\nexport interface WebSocketMessage {\n  type: string;\n  event: string;\n  data: any;\n  timestamp: string;\n  tenant_id?: string;\n  user_id?: string;\n}\n\nexport interface WebSocketConfig {\n  url?: string;\n  reconnectInterval?: number;\n  maxReconnectAttempts?: number;\n  heartbeatInterval?: number;\n  protocols?: string[];\n}\n\ninterface UseWebSocketReturn {\n  isConnected: boolean;\n  isConnecting: boolean;\n  error: string | null;\n  lastMessage: WebSocketMessage | null;\n  connectionQuality: \"excellent\" | \"good\" | \"poor\" | \"offline\";\n  sendMessage: (message: Partial<WebSocketMessage>) => void;\n  subscribe: (eventType: string, callback: (data: any) => void) => () => void;\n  unsubscribe: (eventType: string) => void;\n  reconnect: () => void;\n  disconnect: () => void;\n}\n\nexport function useWebSocket(config: WebSocketConfig = {}): UseWebSocketReturn {\n  const { session } = useISPTenant();\n  const { isAuthenticated } = usePortalIdAuth();\n\n  const {\n    url = process.env[\"NEXT_PUBLIC_WS_URL\"] || \"ws://localhost:8000/ws\",\n    reconnectInterval = 3000,\n    maxReconnectAttempts = 10,\n    heartbeatInterval = 30000,\n    protocols = [\"isp-protocol-v1\"],\n  } = config;\n\n  const [isConnected, setIsConnected] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [lastMessage, setLastMessage] = useState<WebSocketMessage | null>(null);\n  const [connectionQuality, setConnectionQuality] = useState<\n    \"excellent\" | \"good\" | \"poor\" | \"offline\"\n  >(\"offline\");\n\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectAttemptsRef = useRef(0);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout>();\n  const heartbeatTimeoutRef = useRef<NodeJS.Timeout>();\n  const subscribersRef = useRef<Map<string, Set<(data: any) => void>>>(new Map());\n  const pingStartTimeRef = useRef<number>(0);\n\n  // Build WebSocket URL with authentication\n  const buildWebSocketUrl = useCallback(() => {\n    const accessToken = getOperatorAccessToken();\n    const tenantId = session?.tenant.id;\n\n    const wsUrl = new URL(url);\n    if (accessToken) {\n      wsUrl.searchParams.set(\"token\", accessToken);\n    }\n    if (tenantId) {\n      wsUrl.searchParams.set(\"tenant_id\", tenantId);\n    }\n\n    return wsUrl.toString();\n  }, [url, session?.tenant.id]);\n\n  // Send heartbeat to maintain connection and measure latency\n  const sendHeartbeat = useCallback(() => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      pingStartTimeRef.current = Date.now();\n      wsRef.current.send(\n        JSON.stringify({\n          type: \"heartbeat\",\n          event: \"ping\",\n          timestamp: new Date().toISOString(),\n          tenant_id: session?.tenant.id,\n        }),\n      );\n    }\n  }, [session?.tenant.id]);\n\n  // Start heartbeat interval\n  const startHeartbeat = useCallback(() => {\n    if (heartbeatTimeoutRef.current) {\n      clearInterval(heartbeatTimeoutRef.current);\n    }\n\n    heartbeatTimeoutRef.current = setInterval(sendHeartbeat, heartbeatInterval);\n    sendHeartbeat(); // Send initial heartbeat\n  }, [sendHeartbeat, heartbeatInterval]);\n\n  // Stop heartbeat interval\n  const stopHeartbeat = useCallback(() => {\n    if (heartbeatTimeoutRef.current) {\n      clearInterval(heartbeatTimeoutRef.current);\n      heartbeatTimeoutRef.current = undefined;\n    }\n  }, []);\n\n  // Handle incoming WebSocket messages\n  const handleMessage = useCallback((event: MessageEvent) => {\n    try {\n      const message: WebSocketMessage = JSON.parse(event.data);\n      setLastMessage(message);\n      setError(null);\n\n      // Handle heartbeat response and calculate connection quality\n      if (message.type === \"heartbeat\" && message.event === \"pong\") {\n        const latency = Date.now() - pingStartTimeRef.current;\n        if (latency < 100) {\n          setConnectionQuality(\"excellent\");\n        } else if (latency < 300) {\n          setConnectionQuality(\"good\");\n        } else {\n          setConnectionQuality(\"poor\");\n        }\n        return;\n      }\n\n      // Notify subscribers\n      const eventSubscribers = subscribersRef.current.get(message.event);\n      if (eventSubscribers) {\n        eventSubscribers.forEach((callback) => callback(message.data));\n      }\n\n      // Notify wildcard subscribers\n      const wildcardSubscribers = subscribersRef.current.get(\"*\");\n      if (wildcardSubscribers) {\n        wildcardSubscribers.forEach((callback) => callback(message));\n      }\n    } catch (err) {\n      console.error(\"Failed to parse WebSocket message:\", err);\n      setError(\"Invalid message format received\");\n    }\n  }, []);\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    if (!isAuthenticated || !session) {\n      return;\n    }\n\n    if (\n      wsRef.current?.readyState === WebSocket.CONNECTING ||\n      wsRef.current?.readyState === WebSocket.OPEN\n    ) {\n      return;\n    }\n\n    setIsConnecting(true);\n    setError(null);\n\n    try {\n      const wsUrl = buildWebSocketUrl();\n      wsRef.current = new WebSocket(wsUrl, protocols);\n\n      wsRef.current.onopen = () => {\n        setIsConnected(true);\n        setIsConnecting(false);\n        setConnectionQuality(\"good\");\n        reconnectAttemptsRef.current = 0;\n        setError(null);\n\n        // Send authentication message\n        wsRef.current?.send(\n          JSON.stringify({\n            type: \"auth\",\n            event: \"authenticate\",\n            data: {\n              tenant_id: session.tenant.id,\n              user_id: session.user.id,\n              portal_type: session.portal_type,\n              permissions: session.permissions,\n            },\n            timestamp: new Date().toISOString(),\n          }),\n        );\n\n        startHeartbeat();\n      };\n\n      wsRef.current.onmessage = handleMessage;\n\n      wsRef.current.onclose = (event) => {\n        setIsConnected(false);\n        setIsConnecting(false);\n        setConnectionQuality(\"offline\");\n        stopHeartbeat();\n\n        if (event.code !== 1000 && reconnectAttemptsRef.current < maxReconnectAttempts) {\n          // Attempt to reconnect unless it was a clean close\n          const delay = Math.min(\n            reconnectInterval * Math.pow(2, reconnectAttemptsRef.current),\n            30000,\n          );\n          reconnectTimeoutRef.current = setTimeout(() => {\n            reconnectAttemptsRef.current++;\n            connect();\n          }, delay);\n        }\n      };\n\n      wsRef.current.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n        setError(\"Connection error occurred\");\n        setIsConnecting(false);\n        setConnectionQuality(\"offline\");\n      };\n    } catch (err) {\n      setIsConnecting(false);\n      setError(`Connection failed: ${err}`);\n    }\n  }, [\n    isAuthenticated,\n    session,\n    buildWebSocketUrl,\n    protocols,\n    handleMessage,\n    startHeartbeat,\n    stopHeartbeat,\n    reconnectInterval,\n    maxReconnectAttempts,\n  ]);\n\n  // Disconnect from WebSocket\n  const disconnect = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n    }\n\n    stopHeartbeat();\n\n    if (wsRef.current) {\n      wsRef.current.close(1000, \"Client disconnect\");\n      wsRef.current = null;\n    }\n\n    setIsConnected(false);\n    setIsConnecting(false);\n    setConnectionQuality(\"offline\");\n    setError(null);\n  }, [stopHeartbeat]);\n\n  // Reconnect to WebSocket\n  const reconnect = useCallback(() => {\n    disconnect();\n    reconnectAttemptsRef.current = 0;\n    setTimeout(connect, 100);\n  }, [disconnect, connect]);\n\n  // Send message through WebSocket\n  const sendMessage = useCallback(\n    (message: Partial<WebSocketMessage>) => {\n      if (wsRef.current?.readyState === WebSocket.OPEN) {\n        const fullMessage: WebSocketMessage = {\n          type: message.type || \"message\",\n          event: message.event || \"generic\",\n          data: message.data || {},\n          timestamp: new Date().toISOString(),\n          tenant_id: session?.tenant.id,\n          user_id: session?.user.id,\n          ...message,\n        };\n\n        wsRef.current.send(JSON.stringify(fullMessage));\n      } else {\n        setError(\"WebSocket is not connected\");\n      }\n    },\n    [session?.tenant.id, session?.user.id],\n  );\n\n  // Subscribe to specific events\n  const subscribe = useCallback((eventType: string, callback: (data: any) => void) => {\n    if (!subscribersRef.current.has(eventType)) {\n      subscribersRef.current.set(eventType, new Set());\n    }\n    subscribersRef.current.get(eventType)!.add(callback);\n\n    // Return unsubscribe function\n    return () => {\n      const subscribers = subscribersRef.current.get(eventType);\n      if (subscribers) {\n        subscribers.delete(callback);\n        if (subscribers.size === 0) {\n          subscribersRef.current.delete(eventType);\n        }\n      }\n    };\n  }, []);\n\n  // Unsubscribe from events\n  const unsubscribe = useCallback((eventType: string) => {\n    subscribersRef.current.delete(eventType);\n  }, []);\n\n  // Connect when authenticated and tenant is available\n  useEffect(() => {\n    if (isAuthenticated && session) {\n      connect();\n    } else {\n      disconnect();\n    }\n\n    return () => {\n      disconnect();\n    };\n  }, [isAuthenticated, session, connect, disconnect]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      disconnect();\n    };\n  }, [disconnect]);\n\n  return {\n    isConnected,\n    isConnecting,\n    error,\n    lastMessage,\n    connectionQuality,\n    sendMessage,\n    subscribe,\n    unsubscribe,\n    reconnect,\n    disconnect,\n  };\n}\n\n// Specialized hooks for specific ISP Framework events\nexport function useNetworkMonitoring() {\n  const webSocket = useWebSocket();\n  const [deviceUpdates, setDeviceUpdates] = useState<any[]>([]);\n  const [networkAlerts, setNetworkAlerts] = useState<any[]>([]);\n\n  useEffect(() => {\n    const unsubscribeDevices = webSocket.subscribe(\"device_status_update\", (data) => {\n      setDeviceUpdates((prev) => [data, ...prev.slice(0, 49)]); // Keep last 50 updates\n    });\n\n    const unsubscribeAlerts = webSocket.subscribe(\"network_alert\", (data) => {\n      setNetworkAlerts((prev) => [data, ...prev.slice(0, 19)]); // Keep last 20 alerts\n    });\n\n    return () => {\n      unsubscribeDevices();\n      unsubscribeAlerts();\n    };\n  }, [webSocket]);\n\n  return {\n    ...webSocket,\n    deviceUpdates,\n    networkAlerts,\n    clearDeviceUpdates: () => setDeviceUpdates([]),\n    clearNetworkAlerts: () => setNetworkAlerts([]),\n  };\n}\n\nexport function useCustomerActivity() {\n  const webSocket = useWebSocket();\n  const [customerEvents, setCustomerEvents] = useState<any[]>([]);\n\n  useEffect(() => {\n    const unsubscribeCustomers = webSocket.subscribe(\"customer_update\", (data) => {\n      setCustomerEvents((prev) => [data, ...prev.slice(0, 29)]); // Keep last 30 events\n    });\n\n    const unsubscribeServices = webSocket.subscribe(\"service_update\", (data) => {\n      setCustomerEvents((prev) => [data, ...prev.slice(0, 29)]);\n    });\n\n    return () => {\n      unsubscribeCustomers();\n      unsubscribeServices();\n    };\n  }, [webSocket]);\n\n  return {\n    ...webSocket,\n    customerEvents,\n    clearCustomerEvents: () => setCustomerEvents([]),\n  };\n}\n\nexport function useFieldOperations() {\n  const webSocket = useWebSocket();\n  const [workOrderUpdates, setWorkOrderUpdates] = useState<any[]>([]);\n  const [technicianLocations, setTechnicianLocations] = useState<Map<string, any>>(new Map());\n\n  useEffect(() => {\n    const unsubscribeWorkOrders = webSocket.subscribe(\"work_order_update\", (data) => {\n      setWorkOrderUpdates((prev) => [data, ...prev.slice(0, 19)]);\n    });\n\n    const unsubscribeTechLocations = webSocket.subscribe(\"technician_location_update\", (data) => {\n      setTechnicianLocations((prev) => new Map(prev.set(data.technician_id, data)));\n    });\n\n    return () => {\n      unsubscribeWorkOrders();\n      unsubscribeTechLocations();\n    };\n  }, [webSocket]);\n\n  return {\n    ...webSocket,\n    workOrderUpdates,\n    technicianLocations: Array.from(technicianLocations.values()),\n    clearWorkOrderUpdates: () => setWorkOrderUpdates([]),\n    clearTechnicianLocations: () => setTechnicianLocations(new Map()),\n  };\n}\n","/**\n * Real-Time Provider for ISP Framework\n * Manages WebSocket connections and real-time data distribution\n */\n\nimport { createContext, useContext } from \"react\";\nimport type { ReactNode } from \"react\";\nimport {\n  useWebSocket,\n  useNetworkMonitoring,\n  useCustomerActivity,\n  useFieldOperations,\n} from \"../hooks/useWebSocket\";\n\ninterface RealTimeContextValue {\n  // WebSocket connection\n  isConnected: boolean;\n  isConnecting: boolean;\n  connectionQuality: \"excellent\" | \"good\" | \"poor\" | \"offline\";\n  error: string | null;\n\n  // Network monitoring\n  deviceUpdates: any[];\n  networkAlerts: any[];\n\n  // Customer activity\n  customerEvents: any[];\n\n  // Field operations\n  workOrderUpdates: any[];\n  technicianLocations: any[];\n\n  // Actions\n  reconnect: () => void;\n  sendMessage: (message: any) => void;\n  subscribe: (eventType: string, callback: (data: any) => void) => () => void;\n}\n\nconst RealTimeContext = createContext<RealTimeContextValue | null>(null);\n\nexport function useRealTime(): RealTimeContextValue {\n  const context = useContext(RealTimeContext);\n  if (!context) {\n    throw new Error(\"useRealTime must be used within a RealTimeProvider\");\n  }\n  return context;\n}\n\ninterface RealTimeProviderProps {\n  children: ReactNode;\n  enabled?: boolean;\n}\n\nexport function RealTimeProvider({ children, enabled = true }: RealTimeProviderProps) {\n  const webSocket = useWebSocket();\n  const networkMonitoring = useNetworkMonitoring();\n  const customerActivity = useCustomerActivity();\n  const fieldOperations = useFieldOperations();\n\n  if (!enabled) {\n    // Return a mock context when real-time is disabled\n    const mockContext: RealTimeContextValue = {\n      isConnected: false,\n      isConnecting: false,\n      connectionQuality: \"offline\",\n      error: null,\n      deviceUpdates: [],\n      networkAlerts: [],\n      customerEvents: [],\n      workOrderUpdates: [],\n      technicianLocations: [],\n      reconnect: () => {},\n      sendMessage: () => {},\n      subscribe: () => () => {},\n    };\n\n    return <RealTimeContext.Provider value={mockContext}>{children}</RealTimeContext.Provider>;\n  }\n\n  const contextValue: RealTimeContextValue = {\n    isConnected: webSocket.isConnected,\n    isConnecting: webSocket.isConnecting,\n    connectionQuality: webSocket.connectionQuality,\n    error: webSocket.error,\n    deviceUpdates: networkMonitoring.deviceUpdates,\n    networkAlerts: networkMonitoring.networkAlerts,\n    customerEvents: customerActivity.customerEvents,\n    workOrderUpdates: fieldOperations.workOrderUpdates,\n    technicianLocations: fieldOperations.technicianLocations,\n    reconnect: webSocket.reconnect,\n    sendMessage: webSocket.sendMessage,\n    subscribe: webSocket.subscribe,\n  };\n\n  return <RealTimeContext.Provider value={contextValue}>{children}</RealTimeContext.Provider>;\n}\n","/**\n * Real-Time Connection Status Component\n * Shows WebSocket connection status and quality indicator\n */\n\nimport { Wifi, WifiOff, AlertTriangle, CheckCircle, Clock } from \"lucide-react\";\nimport { useRealTime } from \"./RealTimeProvider\";\n\ninterface RealTimeStatusProps {\n  showDetails?: boolean;\n  className?: string;\n}\n\nexport function RealTimeStatus({ showDetails = false, className = \"\" }: RealTimeStatusProps) {\n  const { isConnected, isConnecting, connectionQuality, error, reconnect } = useRealTime();\n\n  const getStatusInfo = () => {\n    if (error) {\n      return {\n        icon: AlertTriangle,\n        color: \"text-red-500\",\n        bg: \"bg-red-50\",\n        border: \"border-red-200\",\n        status: \"Error\",\n        description: error,\n      };\n    }\n\n    if (isConnecting) {\n      return {\n        icon: Clock,\n        color: \"text-yellow-500\",\n        bg: \"bg-yellow-50\",\n        border: \"border-yellow-200\",\n        status: \"Connecting\",\n        description: \"Establishing real-time connection...\",\n      };\n    }\n\n    if (!isConnected) {\n      return {\n        icon: WifiOff,\n        color: \"text-gray-500\",\n        bg: \"bg-gray-50\",\n        border: \"border-gray-200\",\n        status: \"Offline\",\n        description: \"Real-time updates unavailable\",\n      };\n    }\n\n    // Connected - show quality\n    switch (connectionQuality) {\n      case \"excellent\":\n        return {\n          icon: CheckCircle,\n          color: \"text-green-500\",\n          bg: \"bg-green-50\",\n          border: \"border-green-200\",\n          status: \"Excellent\",\n          description: \"Real-time updates active (< 100ms)\",\n        };\n      case \"good\":\n        return {\n          icon: Wifi,\n          color: \"text-blue-500\",\n          bg: \"bg-blue-50\",\n          border: \"border-blue-200\",\n          status: \"Good\",\n          description: \"Real-time updates active (< 300ms)\",\n        };\n      case \"poor\":\n        return {\n          icon: AlertTriangle,\n          color: \"text-orange-500\",\n          bg: \"bg-orange-50\",\n          border: \"border-orange-200\",\n          status: \"Poor\",\n          description: \"Slow connection (> 300ms)\",\n        };\n      default:\n        return {\n          icon: WifiOff,\n          color: \"text-gray-500\",\n          bg: \"bg-gray-50\",\n          border: \"border-gray-200\",\n          status: \"Unknown\",\n          description: \"Connection status unknown\",\n        };\n    }\n  };\n\n  const statusInfo = getStatusInfo();\n  const Icon = statusInfo.icon;\n\n  if (!showDetails) {\n    // Simple indicator\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        <div className=\"relative\">\n          <Icon className={`w-4 h-4 ${statusInfo.color}`} />\n          {isConnected && (\n            <div\n              className={`absolute -top-1 -right-1 w-2 h-2 rounded-full ${\n                connectionQuality === \"excellent\"\n                  ? \"bg-green-400\"\n                  : connectionQuality === \"good\"\n                    ? \"bg-blue-400\"\n                    : \"bg-orange-400\"\n              } animate-pulse`}\n            />\n          )}\n        </div>\n        {showDetails && (\n          <span className={`text-sm font-medium ${statusInfo.color}`}>{statusInfo.status}</span>\n        )}\n      </div>\n    );\n  }\n\n  // Detailed status card\n  return (\n    <div className={`${statusInfo.bg} ${statusInfo.border} border rounded-lg p-3 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Icon className={`w-5 h-5 ${statusInfo.color}`} />\n          <div>\n            <p className={`text-sm font-medium ${statusInfo.color}`}>\n              Real-Time: {statusInfo.status}\n            </p>\n            <p className=\"text-xs text-gray-600\">{statusInfo.description}</p>\n          </div>\n        </div>\n\n        {error && (\n          <button\n            onClick={reconnect}\n            className=\"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200 transition-colors\"\n          >\n            Retry\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * Audit API Client\n * Provides comprehensive audit logging integration with backend audit system\n */\n\nimport { BaseApiClient } from \"./BaseApiClient\";\nimport type { RequestConfig } from \"./BaseApiClient\";\nimport type {\n  AuditEvent,\n  AuditEventQuery,\n  AuditEventResponse,\n  AuditHealthResponse,\n} from \"../types/audit\";\n\nexport class AuditApiClient extends BaseApiClient {\n  constructor(baseURL: string, headers: Record<string, string> = {}) {\n    super(baseURL, headers, \"AuditAPI\");\n  }\n\n  /**\n   * Log an audit event to the backend\n   */\n  async logEvent(event: Omit<AuditEvent, \"event_id\" | \"timestamp\">): Promise<{ event_id: string }> {\n    return this.post<{ event_id: string }>(\"/audit/events\", event);\n  }\n\n  /**\n   * Log multiple audit events in a batch\n   */\n  async logEventsBatch(\n    events: Omit<AuditEvent, \"event_id\" | \"timestamp\">[],\n  ): Promise<{ event_ids: string[] }> {\n    return this.post<{ event_ids: string[] }>(\"/audit/events/batch\", {\n      events,\n    });\n  }\n\n  /**\n   * Query audit events with filtering\n   */\n  async queryEvents(query: AuditEventQuery = {}): Promise<AuditEventResponse> {\n    const config: RequestConfig = { params: query };\n    return this.get<AuditEventResponse>(\"/audit/events\", config);\n  }\n\n  /**\n   * Stream audit events (Server-Sent Events)\n   */\n  async streamEvents(query: AuditEventQuery = {}): Promise<EventSource> {\n    const params = new URLSearchParams();\n    Object.entries(query).forEach(([key, value]) => {\n      if (value !== undefined) {\n        params.append(key, String(value));\n      }\n    });\n\n    const url = `${this.baseURL}/audit/events/stream?${params.toString()}`;\n    return new EventSource(url);\n  }\n\n  /**\n   * Export audit events\n   */\n  async exportEvents(format: \"json\" | \"csv\", query: AuditEventQuery = {}): Promise<Blob> {\n    const config: RequestConfig = {\n      params: { ...query, format },\n      headers: { Accept: format === \"csv\" ? \"text/csv\" : \"application/json\" },\n    };\n    return this.get<Blob>(\"/audit/events/export\", config);\n  }\n\n  /**\n   * Get audit system health\n   */\n  async getHealth(): Promise<AuditHealthResponse> {\n    return this.get<AuditHealthResponse>(\"/audit/health\");\n  }\n\n  /**\n   * Get audit metrics\n   */\n  async getMetrics(): Promise<Record<string, any>> {\n    return this.get<Record<string, any>>(\"/audit/metrics\");\n  }\n\n  /**\n   * Get compliance report\n   */\n  async getComplianceReport(framework?: string): Promise<Record<string, any>> {\n    const config: RequestConfig = framework ? { params: { framework } } : {};\n    return this.get<Record<string, any>>(\"/audit/compliance/report\", config);\n  }\n}\n","/**\n * React Hook for Integrated Audit Logging\n * Provides unified audit logging combining frontend events with backend persistence\n * Follows DRY principles by centralizing audit logic across all frontend apps\n */\n\nimport { useCallback, useRef, useEffect } from \"react\";\nimport { AuditApiClient } from \"../api/clients/AuditApiClient\";\nimport {\n  AuditEventType,\n  FrontendAuditEventType,\n  AuditSeverity,\n  AuditOutcome,\n} from \"../api/types/audit\";\nimport type {\n  CreateFrontendAuditEvent,\n  AuditContext,\n  AuditEvent,\n  AuditActor,\n} from \"../api/types/audit\";\nimport { useISPTenant } from \"./useISPTenant\";\nimport { useAuth } from \"../auth/context\";\n\ninterface AuditLoggerConfig {\n  serviceName: string;\n  batchSize?: number;\n  batchTimeout?: number;\n  enableLocalStorage?: boolean;\n  enableConsoleLogging?: boolean;\n}\n\nexport interface UseAuditLoggerReturn {\n  // Core logging methods\n  logEvent: (event: CreateFrontendAuditEvent) => Promise<void>;\n  logBatch: (events: CreateFrontendAuditEvent[]) => Promise<void>;\n\n  // Convenience methods for common events\n  logAuthEvent: (\n    type: AuditEventType,\n    outcome: AuditOutcome,\n    message: string,\n    metadata?: Record<string, any>,\n  ) => Promise<void>;\n  logDataAccess: (\n    operation: string,\n    resourceType: string,\n    resourceId: string,\n    outcome: AuditOutcome,\n    metadata?: Record<string, any>,\n  ) => Promise<void>;\n  logUIEvent: (\n    type: FrontendAuditEventType,\n    element: string,\n    metadata?: Record<string, any>,\n  ) => Promise<void>;\n  logError: (error: Error, context: string, metadata?: Record<string, any>) => Promise<void>;\n  logBusinessEvent: (\n    type: AuditEventType,\n    workflow: string,\n    outcome: AuditOutcome,\n    metadata?: Record<string, any>,\n  ) => Promise<void>;\n\n  // Batch management\n  flushBatch: () => Promise<void>;\n\n  // Health and status\n  isHealthy: boolean;\n  getQueueSize: () => number;\n}\n\nexport function useAuditLogger(config: AuditLoggerConfig): UseAuditLoggerReturn {\n  const {\n    serviceName,\n    batchSize = 10,\n    batchTimeout = 5000,\n    enableLocalStorage = true,\n    enableConsoleLogging = false,\n  } = config;\n\n  const { tenant } = useISPTenant();\n  const tenantId = tenant?.id;\n  const { user, sessionId } = useAuth();\n\n  const auditClientRef = useRef<AuditApiClient | null>(null);\n  const batchQueueRef = useRef<CreateFrontendAuditEvent[]>([]);\n  const batchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const isHealthyRef = useRef<boolean>(true);\n\n  // Initialize audit client\n  useEffect(() => {\n    const baseURL = process.env[\"NEXT_PUBLIC_API_BASE_URL\"] || \"/api\";\n    const headers: Record<string, string> = {};\n\n    if (user?.token) {\n      headers[\"Authorization\"] = `Bearer ${user.token}`;\n    }\n\n    auditClientRef.current = new AuditApiClient(baseURL, headers);\n  }, [user?.token]);\n\n  // Auto-flush batch on timeout\n  useEffect(() => {\n    const flushOnTimeout = () => {\n      if (batchTimeoutRef.current) {\n        clearTimeout(batchTimeoutRef.current);\n      }\n\n      batchTimeoutRef.current = setTimeout(() => {\n        if (batchQueueRef.current.length > 0) {\n          flushBatch();\n        }\n      }, batchTimeout);\n    };\n\n    flushOnTimeout();\n\n    return () => {\n      if (batchTimeoutRef.current) {\n        clearTimeout(batchTimeoutRef.current);\n      }\n    };\n  }, [batchTimeout]);\n\n  // Create actor information from current user context\n  const createActor = useCallback(() => {\n    const actor: AuditActor = {\n      id: user?.id || \"anonymous\",\n      type: user?.id ? (\"user\" as const) : (\"anonymous\" as const),\n    };\n\n    if (user?.name) {\n      actor.name = user.name;\n    }\n    if (user?.email) {\n      actor.email = user.email;\n    }\n    if (sessionId) {\n      actor.session_id = sessionId;\n    }\n    if (typeof navigator !== \"undefined\") {\n      actor.user_agent = navigator.userAgent;\n    }\n\n    return actor;\n  }, [user, sessionId]);\n\n  // Create context information\n  const createContext = useCallback(\n    (additionalContext?: Record<string, any>) => {\n      return {\n        source: serviceName,\n        environment: process.env[\"NODE_ENV\"] || \"development\",\n        correlation_id: sessionId ?? `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        request_id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        additional: {\n          url: typeof window !== \"undefined\" ? window.location.href : undefined,\n          ...additionalContext,\n        },\n      };\n    },\n    [serviceName, sessionId],\n  );\n\n  // Store event locally for offline support\n  const storeLocally = useCallback(\n    (event: CreateFrontendAuditEvent) => {\n      if (!enableLocalStorage || typeof window === \"undefined\") return;\n\n      try {\n        const stored = localStorage.getItem(\"audit_events\") || \"[]\";\n        const events = JSON.parse(stored);\n        events.push({\n          ...event,\n          timestamp: Date.now(),\n          stored_offline: true,\n        });\n\n        // Keep only last 100 events locally\n        const recentEvents = events.slice(-100);\n        localStorage.setItem(\"audit_events\", JSON.stringify(recentEvents));\n      } catch (error) {\n        console.warn(\"Failed to store audit event locally:\", error);\n      }\n    },\n    [enableLocalStorage],\n  );\n\n  // Console logging for development\n  const consoleLog = useCallback(\n    (event: CreateFrontendAuditEvent) => {\n      if (!enableConsoleLogging) return;\n\n      const logLevel =\n        event.severity === AuditSeverity.CRITICAL || event.severity === AuditSeverity.HIGH\n          ? \"error\"\n          : event.severity === AuditSeverity.MEDIUM\n            ? \"warn\"\n            : \"info\";\n\n      console[logLevel](`[AUDIT] ${event.event_type}: ${event.message}`, {\n        actor: event.actor?.id,\n        resource: event.resource?.type,\n        metadata: event.metadata,\n      });\n    },\n    [enableConsoleLogging],\n  );\n\n  // Core event logging function\n  const logEvent = useCallback(\n    async (event: CreateFrontendAuditEvent) => {\n      try {\n        const incomingContext = event.context as AuditContext | undefined;\n        const resolvedContext = incomingContext ?? createContext();\n        const fullEvent: CreateFrontendAuditEvent = {\n          ...event,\n          actor: event.actor || createActor(),\n          context: resolvedContext,\n          tenant_id: event.tenant_id ?? tenantId ?? \"unknown\",\n          severity: event.severity || AuditSeverity.LOW,\n          outcome: event.outcome || AuditOutcome.SUCCESS,\n          service_name: event.service_name || serviceName,\n        };\n\n        // Store locally and log to console\n        storeLocally(fullEvent);\n        consoleLog(fullEvent);\n\n        // Add to batch queue\n        batchQueueRef.current.push(fullEvent);\n\n        // Auto-flush if batch is full\n        if (batchQueueRef.current.length >= batchSize) {\n          await flushBatch();\n        }\n      } catch (error) {\n        console.error(\"Failed to log audit event:\", error);\n        isHealthyRef.current = false;\n      }\n    },\n    [createActor, createContext, tenantId, storeLocally, consoleLog, batchSize],\n  );\n\n  // Flush the batch queue\n  const flushBatch = useCallback(async () => {\n    if (!auditClientRef.current || batchQueueRef.current.length === 0) return;\n\n    const eventsToSend = [...batchQueueRef.current];\n    batchQueueRef.current = [];\n\n    try {\n      const payload = eventsToSend as Omit<AuditEvent, \"event_id\" | \"timestamp\">[];\n      await auditClientRef.current.logEventsBatch(payload);\n      isHealthyRef.current = true;\n    } catch (error) {\n      console.error(\"Failed to send audit batch:\", error);\n      isHealthyRef.current = false;\n\n      // Re-add events to queue for retry\n      batchQueueRef.current = [...eventsToSend, ...batchQueueRef.current];\n    }\n  }, []);\n\n  // Batch logging\n  const logBatch = useCallback(\n    async (events: CreateFrontendAuditEvent[]) => {\n      for (const event of events) {\n        await logEvent(event);\n      }\n    },\n    [logEvent],\n  );\n\n  // Convenience method for auth events\n  const logAuthEvent = useCallback(\n    async (\n      type: AuditEventType,\n      outcome: AuditOutcome,\n      message: string,\n      metadata?: Record<string, any>,\n    ) => {\n      const eventPayload: CreateFrontendAuditEvent = {\n        event_type: type,\n        message,\n        outcome,\n        severity: outcome === AuditOutcome.FAILURE ? AuditSeverity.HIGH : AuditSeverity.LOW,\n        actor: createActor(),\n        context: createContext(),\n      };\n\n      if (metadata) {\n        eventPayload.metadata = metadata;\n      }\n\n      await logEvent(eventPayload);\n    },\n    [logEvent, createActor, createContext],\n  );\n\n  // Convenience method for data access events\n  const logDataAccess = useCallback(\n    async (\n      operation: string,\n      resourceType: string,\n      resourceId: string,\n      outcome: AuditOutcome,\n      metadata?: Record<string, any>,\n    ) => {\n      const eventType =\n        operation === \"create\"\n          ? AuditEventType.DATA_CREATE\n          : operation === \"read\"\n            ? AuditEventType.DATA_READ\n            : operation === \"update\"\n              ? AuditEventType.DATA_UPDATE\n              : operation === \"delete\"\n                ? AuditEventType.DATA_DELETE\n                : AuditEventType.DATA_READ;\n\n      const eventPayload: CreateFrontendAuditEvent = {\n        event_type: eventType,\n        message: `${operation} operation on ${resourceType} ${resourceId}`,\n        outcome,\n        severity:\n          operation === \"delete\" && outcome === AuditOutcome.SUCCESS\n            ? AuditSeverity.MEDIUM\n            : AuditSeverity.LOW,\n        actor: createActor(),\n        resource: {\n          id: resourceId,\n          type: resourceType,\n        },\n        context: createContext(),\n      };\n\n      if (metadata) {\n        eventPayload.metadata = metadata;\n      }\n\n      await logEvent(eventPayload);\n    },\n    [logEvent, createActor, createContext],\n  );\n\n  // Convenience method for UI events\n  const logUIEvent = useCallback(\n    async (type: FrontendAuditEventType, element: string, metadata?: Record<string, any>) => {\n      const eventPayload: CreateFrontendAuditEvent = {\n        event_type: type,\n        message: `UI interaction: ${element}`,\n        outcome: AuditOutcome.SUCCESS,\n        severity: AuditSeverity.LOW,\n        actor: createActor(),\n        context: createContext({ ui_element: element }),\n      };\n\n      if (metadata) {\n        eventPayload.metadata = metadata;\n      }\n\n      await logEvent(eventPayload);\n    },\n    [logEvent, createActor, createContext],\n  );\n\n  // Convenience method for error events\n  const logError = useCallback(\n    async (error: Error, context: string, metadata?: Record<string, any>) => {\n      await logEvent({\n        event_type: AuditEventType.SYSTEM_ERROR,\n        message: `Error in ${context}: ${error.message}`,\n        outcome: AuditOutcome.FAILURE,\n        severity: AuditSeverity.HIGH,\n        actor: createActor(),\n        context: createContext({ error_context: context }),\n        metadata: {\n          ...metadata,\n          error_name: error.name,\n          error_message: error.message,\n          error_stack: error.stack,\n        },\n      });\n    },\n    [logEvent, createActor, createContext],\n  );\n\n  // Convenience method for business events\n  const logBusinessEvent = useCallback(\n    async (\n      type: AuditEventType,\n      workflow: string,\n      outcome: AuditOutcome,\n      metadata?: Record<string, any>,\n    ) => {\n      const eventPayload: CreateFrontendAuditEvent = {\n        event_type: type,\n        message: `Business workflow: ${workflow}`,\n        outcome,\n        severity: outcome === AuditOutcome.FAILURE ? AuditSeverity.MEDIUM : AuditSeverity.LOW,\n        actor: createActor(),\n        context: createContext({ workflow }),\n      };\n\n      if (metadata) {\n        eventPayload.metadata = metadata;\n      }\n\n      await logEvent(eventPayload);\n    },\n    [logEvent, createActor, createContext],\n  );\n\n  return {\n    logEvent,\n    logBatch,\n    logAuthEvent,\n    logDataAccess,\n    logUIEvent,\n    logError,\n    logBusinessEvent,\n    flushBatch,\n    isHealthy: isHealthyRef.current,\n    getQueueSize: () => batchQueueRef.current.length,\n  };\n}\n","/**\n * Audit Provider Component\n * Provides audit logging context across the entire application\n * Implements DRY principle by centralizing audit configuration and management\n */\n\nimport React, { createContext, useContext, useEffect } from \"react\";\nimport type { ReactNode } from \"react\";\nimport { useAuditLogger } from \"../hooks/useAuditLogger\";\nimport type { UseAuditLoggerReturn } from \"../hooks/useAuditLogger\";\nimport {\n  AuditEventType,\n  AuditOutcome,\n  FrontendAuditEventType,\n  AuditSeverity,\n} from \"../api/types/audit\";\n\ninterface AuditContextType extends UseAuditLoggerReturn {\n  serviceName: string;\n  isEnabled: boolean;\n}\n\nconst AuditContext = createContext<AuditContextType | null>(null);\n\ninterface AuditProviderProps {\n  children: ReactNode;\n  serviceName: string;\n  enabled?: boolean;\n  batchSize?: number;\n  batchTimeout?: number;\n  enableLocalStorage?: boolean;\n  enableConsoleLogging?: boolean;\n}\n\nexport function AuditProvider({\n  children,\n  serviceName,\n  enabled = true,\n  batchSize = 10,\n  batchTimeout = 5000,\n  enableLocalStorage = true,\n  enableConsoleLogging = process.env[\"NODE_ENV\"] === \"development\",\n}: AuditProviderProps) {\n  const auditLogger = useAuditLogger({\n    serviceName,\n    batchSize,\n    batchTimeout,\n    enableLocalStorage,\n    enableConsoleLogging,\n  });\n\n  // Log application startup\n  useEffect(() => {\n    if (enabled) {\n      auditLogger.logEvent({\n        event_type: AuditEventType.SYSTEM_STARTUP,\n        message: `Application ${serviceName} started`,\n        outcome: AuditOutcome.SUCCESS,\n        severity: AuditSeverity.LOW,\n        actor: { id: \"system\", type: \"system\" },\n        context: {\n          source: serviceName,\n          environment: process.env[\"NODE_ENV\"] || \"development\",\n        },\n      });\n    }\n  }, [enabled, serviceName, auditLogger]);\n\n  // Log page visibility changes\n  useEffect(() => {\n    if (!enabled || typeof window === \"undefined\") return;\n\n    const handleVisibilityChange = () => {\n      const isVisible = !document.hidden;\n      auditLogger.logUIEvent(\n        isVisible ? FrontendAuditEventType.UI_SESSION_START : FrontendAuditEventType.UI_SESSION_END,\n        \"page_visibility\",\n        { visible: isVisible },\n      );\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    return () => document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n  }, [enabled, auditLogger]);\n\n  // Log unhandled errors\n  useEffect(() => {\n    if (!enabled || typeof window === \"undefined\") return;\n\n    const handleError = (event: ErrorEvent) => {\n      auditLogger.logError(new Error(event.message), \"unhandled_error\", {\n        filename: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n      });\n    };\n\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      auditLogger.logError(\n        new Error(event.reason?.message || \"Unhandled promise rejection\"),\n        \"unhandled_promise_rejection\",\n        { reason: event.reason },\n      );\n    };\n\n    window.addEventListener(\"error\", handleError);\n    window.addEventListener(\"unhandledrejection\", handleUnhandledRejection);\n\n    return () => {\n      window.removeEventListener(\"error\", handleError);\n      window.removeEventListener(\"unhandledrejection\", handleUnhandledRejection);\n    };\n  }, [enabled, auditLogger]);\n\n  // Flush batch on page unload\n  useEffect(() => {\n    if (!enabled || typeof window === \"undefined\") return;\n\n    const handleBeforeUnload = () => {\n      auditLogger.flushBatch();\n      auditLogger.logUIEvent(FrontendAuditEventType.UI_SESSION_END, \"page_unload\");\n    };\n\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    return () => window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n  }, [enabled, auditLogger]);\n\n  const contextValue: AuditContextType = {\n    ...auditLogger,\n    serviceName,\n    isEnabled: enabled,\n  };\n\n  return <AuditContext.Provider value={contextValue}>{children}</AuditContext.Provider>;\n}\n\nexport function useAudit(): AuditContextType {\n  const context = useContext(AuditContext);\n  if (!context) {\n    throw new Error(\"useAudit must be used within an AuditProvider\");\n  }\n  return context;\n}\n\n// Higher-order component for easy integration\nexport function withAudit<P extends object>(\n  Component: React.ComponentType<P>,\n  serviceName: string,\n  auditConfig?: Omit<AuditProviderProps, \"children\" | \"serviceName\">,\n) {\n  return function AuditWrappedComponent(props: P) {\n    return (\n      <AuditProvider serviceName={serviceName} {...auditConfig}>\n        <Component {...props} />\n      </AuditProvider>\n    );\n  };\n}\n","/**\n * Audit Interceptor Hook\n * Automatically intercepts API calls, form submissions, and user interactions\n * Implements DRY principle by providing centralized audit interception across all components\n */\n\nimport { useEffect, useCallback, useRef } from \"react\";\nimport { useAudit } from \"../components/AuditProvider\";\nimport {\n  AuditEventType,\n  AuditOutcome,\n  FrontendAuditEventType,\n  AuditSeverity,\n} from \"../api/types/audit\";\n\ninterface AuditInterceptorConfig {\n  interceptFetch?: boolean;\n  interceptClicks?: boolean;\n  interceptForms?: boolean;\n  interceptNavigation?: boolean;\n  interceptErrors?: boolean;\n  excludeUrls?: RegExp[];\n  excludeElements?: string[];\n}\n\nexport function useAuditInterceptor(config: AuditInterceptorConfig = {}) {\n  const {\n    interceptFetch = true,\n    interceptClicks = true,\n    interceptForms = true,\n    interceptNavigation = true,\n    interceptErrors = true,\n    excludeUrls = [],\n    excludeElements = [\".audit-ignore\"],\n  } = config;\n\n  const { logEvent, logDataAccess, logUIEvent, logError, isEnabled } = useAudit();\n  const originalFetchRef = useRef<typeof fetch>();\n  const interceptorsSetupRef = useRef<boolean>(false);\n\n  // Check if URL should be excluded from auditing\n  const shouldExcludeUrl = useCallback(\n    (url: string): boolean => {\n      return excludeUrls.some((pattern) => pattern.test(url));\n    },\n    [excludeUrls],\n  );\n\n  // Check if element should be excluded from auditing\n  const shouldExcludeElement = useCallback(\n    (element: Element): boolean => {\n      return excludeElements.some((selector) => element.matches(selector));\n    },\n    [excludeElements],\n  );\n\n  // Intercept fetch API calls\n  useEffect(() => {\n    if (!interceptFetch || !isEnabled || typeof window === \"undefined\") return;\n\n    if (!originalFetchRef.current) {\n      originalFetchRef.current = window.fetch;\n    }\n\n    window.fetch = async (input: RequestInfo | URL, init?: RequestInit) => {\n      const url = typeof input === \"string\" ? input : input.toString();\n      const method = init?.method || \"GET\";\n      const startTime = performance.now();\n\n      // Skip audit URLs and excluded URLs\n      if (url.includes(\"/audit/\") || shouldExcludeUrl(url)) {\n        return originalFetchRef.current!(input, init);\n      }\n\n      try {\n        const response = await originalFetchRef.current!(input, init);\n        const duration = performance.now() - startTime;\n\n        // Log successful API call\n        await logDataAccess(\n          method.toLowerCase(),\n          \"api_endpoint\",\n          url,\n          response.ok ? AuditOutcome.SUCCESS : AuditOutcome.FAILURE,\n          {\n            method,\n            status_code: response.status,\n            duration_ms: Math.round(duration),\n            response_size: response.headers.get(\"content-length\"),\n          },\n        );\n\n        return response;\n      } catch (error) {\n        const duration = performance.now() - startTime;\n\n        // Log failed API call\n        await logDataAccess(method.toLowerCase(), \"api_endpoint\", url, AuditOutcome.FAILURE, {\n          method,\n          duration_ms: Math.round(duration),\n          error_message: (error as Error).message,\n        });\n\n        throw error;\n      }\n    };\n\n    return () => {\n      if (originalFetchRef.current) {\n        window.fetch = originalFetchRef.current;\n      }\n    };\n  }, [interceptFetch, isEnabled, logDataAccess, shouldExcludeUrl]);\n\n  // Intercept click events\n  useEffect(() => {\n    if (!interceptClicks || !isEnabled || typeof document === \"undefined\") return;\n\n    const handleClick = async (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target || shouldExcludeElement(target)) return;\n\n      const elementInfo = {\n        tag: target.tagName.toLowerCase(),\n        id: target.id,\n        className: target.className,\n        text: target.textContent?.slice(0, 100),\n        href: target.getAttribute(\"href\"),\n        type: target.getAttribute(\"type\"),\n      };\n\n      await logUIEvent(FrontendAuditEventType.UI_BUTTON_CLICK, elementInfo.tag, {\n        element: elementInfo,\n        coordinates: { x: event.clientX, y: event.clientY },\n      });\n    };\n\n    document.addEventListener(\"click\", handleClick, { capture: true });\n    return () => document.removeEventListener(\"click\", handleClick, { capture: true });\n  }, [interceptClicks, isEnabled, logUIEvent, shouldExcludeElement]);\n\n  // Intercept form submissions\n  useEffect(() => {\n    if (!interceptForms || !isEnabled || typeof document === \"undefined\") return;\n\n    const handleSubmit = async (event: SubmitEvent) => {\n      const form = event.target as HTMLFormElement;\n      if (!form || shouldExcludeElement(form)) return;\n\n      const formData = new FormData(form);\n      const fields = Array.from(formData.keys());\n      const sensitiveFields = fields.filter((field) =>\n        /password|secret|token|key|ssn|credit/i.test(field),\n      );\n\n      await logUIEvent(\n        FrontendAuditEventType.UI_FORM_SUBMIT,\n        form.id || form.className || \"unnamed_form\",\n        {\n          form_id: form.id,\n          form_action: form.action,\n          form_method: form.method,\n          field_count: fields.length,\n          sensitive_fields: sensitiveFields.length > 0 ? [\"[REDACTED]\"] : [],\n          fields: fields.filter((field) => !sensitiveFields.includes(field)),\n        },\n      );\n    };\n\n    document.addEventListener(\"submit\", handleSubmit, { capture: true });\n    return () => document.removeEventListener(\"submit\", handleSubmit, { capture: true });\n  }, [interceptForms, isEnabled, logUIEvent, shouldExcludeElement]);\n\n  // Intercept navigation events\n  useEffect(() => {\n    if (!interceptNavigation || !isEnabled || typeof window === \"undefined\") return;\n\n    const handlePopState = async () => {\n      await logUIEvent(FrontendAuditEventType.UI_PAGE_VIEW, \"navigation\", {\n        url: window.location.href,\n        referrer: document.referrer,\n        navigation_type: \"popstate\",\n      });\n    };\n\n    const originalPushState = history.pushState;\n    const originalReplaceState = history.replaceState;\n\n    history.pushState = function (state, title, url) {\n      originalPushState.apply(history, arguments as any);\n      logUIEvent(FrontendAuditEventType.UI_PAGE_VIEW, \"navigation\", {\n        url: url?.toString() || window.location.href,\n        navigation_type: \"pushstate\",\n        state,\n      });\n    };\n\n    history.replaceState = function (state, title, url) {\n      originalReplaceState.apply(history, arguments as any);\n      logUIEvent(FrontendAuditEventType.UI_PAGE_VIEW, \"navigation\", {\n        url: url?.toString() || window.location.href,\n        navigation_type: \"replacestate\",\n        state,\n      });\n    };\n\n    window.addEventListener(\"popstate\", handlePopState);\n\n    return () => {\n      history.pushState = originalPushState;\n      history.replaceState = originalReplaceState;\n      window.removeEventListener(\"popstate\", handlePopState);\n    };\n  }, [interceptNavigation, isEnabled, logUIEvent]);\n\n  // Intercept console errors\n  useEffect(() => {\n    if (!interceptErrors || !isEnabled || typeof console === \"undefined\") return;\n\n    const originalConsoleError = console.error;\n    console.error = (...args) => {\n      const message = args\n        .map((arg) => (typeof arg === \"object\" ? JSON.stringify(arg) : String(arg)))\n        .join(\" \");\n\n      logError(new Error(message), \"console_error\", { console_args: args });\n\n      originalConsoleError.apply(console, args);\n    };\n\n    return () => {\n      console.error = originalConsoleError;\n    };\n  }, [interceptErrors, isEnabled, logError]);\n\n  // Setup flag to prevent multiple setups\n  useEffect(() => {\n    interceptorsSetupRef.current = true;\n  }, []);\n\n  return {\n    isSetup: interceptorsSetupRef.current,\n    manualLog: {\n      logAPICall: useCallback(\n        async (method: string, url: string, outcome: AuditOutcome, metadata?: any) => {\n          await logDataAccess(method.toLowerCase(), \"api_endpoint\", url, outcome, metadata);\n        },\n        [logDataAccess],\n      ),\n\n      logUserAction: useCallback(\n        async (action: string, element: string, metadata?: any) => {\n          await logUIEvent(FrontendAuditEventType.UI_FEATURE_USED, element, {\n            action,\n            ...metadata,\n          });\n        },\n        [logUIEvent],\n      ),\n\n      logBusinessProcess: useCallback(\n        async (workflow: string, outcome: AuditOutcome, metadata?: any) => {\n          await logEvent({\n            event_type: AuditEventType.BUSINESS_WORKFLOW_START,\n            message: `Business process: ${workflow}`,\n            outcome,\n            severity: AuditSeverity.LOW,\n            actor: { id: \"system\", type: \"system\" },\n            context: {\n              source: \"business_process\",\n              environment: process.env[\"NODE_ENV\"] || \"development\",\n            },\n            metadata,\n          });\n        },\n        [logEvent],\n      ),\n    },\n  };\n}\n","/**\n * Audit Integration Wrapper\n * DRY component for easy audit integration into any frontend app\n * Provides standardized audit setup with minimal configuration\n */\n\nimport React from \"react\";\nimport { AuditProvider } from \"./AuditProvider\";\nimport { useAuditInterceptor } from \"../hooks/useAuditInterceptor\";\n\ninterface AuditWrapperContentProps {\n  children: React.ReactNode;\n  interceptorConfig?: Parameters<typeof useAuditInterceptor>[0];\n}\n\nfunction AuditWrapperContent({ children, interceptorConfig }: AuditWrapperContentProps) {\n  // Setup automatic audit interception\n  useAuditInterceptor(interceptorConfig);\n  return <>{children}</>;\n}\n\ninterface AuditIntegrationWrapperProps {\n  children: React.ReactNode;\n  serviceName: string;\n\n  // Audit provider options\n  enabled?: boolean;\n  batchSize?: number;\n  batchTimeout?: number;\n  enableLocalStorage?: boolean;\n  enableConsoleLogging?: boolean;\n\n  // Interceptor options\n  interceptFetch?: boolean;\n  interceptClicks?: boolean;\n  interceptForms?: boolean;\n  interceptNavigation?: boolean;\n  excludeUrls?: RegExp[];\n  excludeElements?: string[];\n}\n\nexport function AuditIntegrationWrapper({\n  children,\n  serviceName,\n  enabled = true,\n  batchSize = 10,\n  batchTimeout = 5000,\n  enableLocalStorage = true,\n  enableConsoleLogging = process.env[\"NODE_ENV\"] === \"development\",\n  interceptFetch = true,\n  interceptClicks = true,\n  interceptForms = true,\n  interceptNavigation = true,\n  excludeUrls = [/\\/audit\\//, /\\/health/, /\\/metrics/, /\\/_next\\//, /\\/api\\/auth\\//],\n  excludeElements = [\".no-audit\", \"[data-no-audit]\", \".audit-ignore\"],\n}: AuditIntegrationWrapperProps) {\n  if (!enabled) {\n    return <>{children}</>;\n  }\n\n  const interceptorConfig = {\n    interceptFetch,\n    interceptClicks,\n    interceptForms,\n    interceptNavigation,\n    excludeUrls,\n    excludeElements,\n  };\n\n  return (\n    <AuditProvider\n      serviceName={serviceName}\n      enabled={enabled}\n      batchSize={batchSize}\n      batchTimeout={batchTimeout}\n      enableLocalStorage={enableLocalStorage}\n      enableConsoleLogging={enableConsoleLogging}\n    >\n      <AuditWrapperContent interceptorConfig={interceptorConfig}>{children}</AuditWrapperContent>\n    </AuditProvider>\n  );\n}\n\n// Preset configurations for different app types\nexport const AuditPresets = {\n  customerPortal: {\n    serviceName: \"customer-portal\",\n    batchSize: 15,\n    batchTimeout: 3000,\n    excludeElements: [\".no-audit\", \"[data-no-audit]\", \".customer-pii\"],\n  },\n\n  adminPortal: {\n    serviceName: \"admin-portal\",\n    batchSize: 5,\n    batchTimeout: 2000,\n    interceptClicks: true,\n    interceptForms: true,\n  },\n\n  technicianApp: {\n    serviceName: \"technician-mobile\",\n    batchSize: 20,\n    batchTimeout: 10000, // Longer timeout for mobile/offline scenarios\n    enableLocalStorage: true,\n  },\n\n  resellerPortal: {\n    serviceName: \"reseller-portal\",\n    batchSize: 8,\n    batchTimeout: 4000,\n    excludeUrls: [/\\/audit\\//, /\\/partner\\//, /\\/commission\\//],\n  },\n\n  managementPortal: {\n    serviceName: \"management-portal\",\n    batchSize: 5,\n    batchTimeout: 1000, // Fastest for management actions\n    interceptNavigation: true,\n    interceptForms: true,\n  },\n};\n\n// Convenience components for each app type\nexport const CustomerPortalAudit = ({ children }: { children: React.ReactNode }) => (\n  <AuditIntegrationWrapper {...AuditPresets.customerPortal}>{children}</AuditIntegrationWrapper>\n);\n\nexport const AdminPortalAudit = ({ children }: { children: React.ReactNode }) => (\n  <AuditIntegrationWrapper {...AuditPresets.adminPortal}>{children}</AuditIntegrationWrapper>\n);\n\nexport const TechnicianAppAudit = ({ children }: { children: React.ReactNode }) => (\n  <AuditIntegrationWrapper {...AuditPresets.technicianApp}>{children}</AuditIntegrationWrapper>\n);\n\nexport const ResellerPortalAudit = ({ children }: { children: React.ReactNode }) => (\n  <AuditIntegrationWrapper {...AuditPresets.resellerPortal}>{children}</AuditIntegrationWrapper>\n);\n\nexport const ManagementPortalAudit = ({ children }: { children: React.ReactNode }) => (\n  <AuditIntegrationWrapper {...AuditPresets.managementPortal}>{children}</AuditIntegrationWrapper>\n);\n","/**\n * DotMac Framework Configuration\n * Central configuration for ISP framework customization\n */\n\nexport interface LocaleConfig {\n  primary: string;\n  supported: string[];\n  fallback: string;\n  dateFormat: {\n    short: Intl.DateTimeFormatOptions;\n    medium: Intl.DateTimeFormatOptions;\n    long: Intl.DateTimeFormatOptions;\n    time: Intl.DateTimeFormatOptions;\n  };\n}\n\nexport interface CurrencyConfig {\n  primary: string;\n  symbol: string;\n  position: \"before\" | \"after\";\n  precision: number;\n  thousandsSeparator: string;\n  decimalSeparator: string;\n}\n\nexport interface BusinessConfig {\n  planTypes: {\n    [key: string]: {\n      label: string;\n      category: \"residential\" | \"business\" | \"enterprise\";\n      features: string[];\n    };\n  };\n  statusTypes: {\n    [key: string]: {\n      label: string;\n      color: \"success\" | \"warning\" | \"danger\" | \"info\" | \"default\";\n      description: string;\n    };\n  };\n  partnerTiers: {\n    [key: string]: {\n      label: string;\n      color: \"primary\" | \"secondary\" | \"warning\" | \"success\" | \"danger\";\n      benefits: string[];\n      requirements: {\n        customers: number;\n        revenue: number;\n      };\n    };\n  };\n  units: {\n    bandwidth: \"mbps\" | \"gbps\";\n    data: \"gb\" | \"tb\";\n    currency: string;\n  };\n}\n\nexport interface BrandingConfig {\n  company: {\n    name: string;\n    logo: string;\n    favicon: string;\n    colors: {\n      primary: string;\n      secondary: string;\n      accent: string;\n    };\n  };\n  portal: {\n    [key: string]: {\n      name: string;\n      theme: string;\n      logo?: string;\n    };\n  };\n}\n\nexport interface FeatureFlags {\n  multiTenancy: boolean;\n  advancedAnalytics: boolean;\n  automatedBilling: boolean;\n  apiAccess: boolean;\n  whiteLabel: boolean;\n  customDomains: boolean;\n  ssoIntegration: boolean;\n  mobileApp: boolean;\n}\n\nexport interface FrameworkConfig {\n  locale: LocaleConfig;\n  currency: CurrencyConfig;\n  business: BusinessConfig;\n  branding: BrandingConfig;\n  features: FeatureFlags;\n  api: {\n    baseUrl: string;\n    version: string;\n    timeout: number;\n    retries: number;\n  };\n  monitoring: {\n    analytics: boolean;\n    errorReporting: boolean;\n    performanceMonitoring: boolean;\n    endpoint?: string;\n  };\n}\n\n// Default configuration\nexport const defaultFrameworkConfig: FrameworkConfig = {\n  locale: {\n    primary: \"en-US\",\n    supported: [\"en-US\", \"es-ES\", \"fr-FR\", \"de-DE\"],\n    fallback: \"en-US\",\n    dateFormat: {\n      short: { year: \"numeric\", month: \"short\", day: \"numeric\" },\n      medium: { year: \"numeric\", month: \"long\", day: \"numeric\" },\n      long: { weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\" },\n      time: { hour: \"2-digit\", minute: \"2-digit\" },\n    },\n  },\n  currency: {\n    primary: \"USD\",\n    symbol: \"$\",\n    position: \"before\",\n    precision: 2,\n    thousandsSeparator: \",\",\n    decimalSeparator: \".\",\n  },\n  business: {\n    planTypes: {\n      residential_basic: {\n        label: \"Residential Basic\",\n        category: \"residential\",\n        features: [\"Basic Internet\", \"24/7 Support\", \"WiFi Included\"],\n      },\n      residential_premium: {\n        label: \"Residential Premium\",\n        category: \"residential\",\n        features: [\"High-Speed Internet\", \"Priority Support\", \"Advanced WiFi\", \"Security Suite\"],\n      },\n      business_starter: {\n        label: \"Business Starter\",\n        category: \"business\",\n        features: [\"Business Internet\", \"Static IP\", \"Business Support\", \"SLA\"],\n      },\n      business_pro: {\n        label: \"Business Pro\",\n        category: \"business\",\n        features: [\"High-Speed Business\", \"Multiple IPs\", \"Priority Support\", \"99.9% SLA\"],\n      },\n      enterprise: {\n        label: \"Enterprise\",\n        category: \"enterprise\",\n        features: [\n          \"Dedicated Connection\",\n          \"Custom Configuration\",\n          \"Dedicated Support\",\n          \"99.99% SLA\",\n        ],\n      },\n    },\n    statusTypes: {\n      active: {\n        label: \"Active\",\n        color: \"success\",\n        description: \"Service is active and running\",\n      },\n      pending: {\n        label: \"Pending\",\n        color: \"warning\",\n        description: \"Service activation in progress\",\n      },\n      suspended: {\n        label: \"Suspended\",\n        color: \"danger\",\n        description: \"Service temporarily suspended\",\n      },\n      cancelled: {\n        label: \"Cancelled\",\n        color: \"default\",\n        description: \"Service has been cancelled\",\n      },\n      maintenance: {\n        label: \"Maintenance\",\n        color: \"info\",\n        description: \"Service under maintenance\",\n      },\n    },\n    partnerTiers: {\n      bronze: {\n        label: \"Bronze Partner\",\n        color: \"secondary\",\n        benefits: [\"5% Commission\", \"Basic Support\", \"Marketing Materials\"],\n        requirements: { customers: 10, revenue: 5000 },\n      },\n      silver: {\n        label: \"Silver Partner\",\n        color: \"primary\",\n        benefits: [\"10% Commission\", \"Priority Support\", \"Co-marketing\"],\n        requirements: { customers: 25, revenue: 15000 },\n      },\n      gold: {\n        label: \"Gold Partner\",\n        color: \"warning\",\n        benefits: [\"15% Commission\", \"Dedicated Support\", \"Custom Materials\"],\n        requirements: { customers: 50, revenue: 35000 },\n      },\n      platinum: {\n        label: \"Platinum Partner\",\n        color: \"success\",\n        benefits: [\"20% Commission\", \"Account Manager\", \"API Access\"],\n        requirements: { customers: 100, revenue: 75000 },\n      },\n    },\n    units: {\n      bandwidth: \"mbps\",\n      data: \"gb\",\n      currency: \"USD\",\n    },\n  },\n  branding: {\n    company: {\n      name: \"DotMac ISP\",\n      logo: \"/assets/logo.svg\",\n      favicon: \"/assets/favicon.ico\",\n      colors: {\n        primary: \"#3b82f6\",\n        secondary: \"#64748b\",\n        accent: \"#10b981\",\n      },\n    },\n    portal: {\n      admin: {\n        name: \"Admin Portal\",\n        theme: \"professional\",\n      },\n      customer: {\n        name: \"Customer Portal\",\n        theme: \"friendly\",\n      },\n      reseller: {\n        name: \"Partner Portal\",\n        theme: \"business\",\n      },\n    },\n  },\n  features: {\n    multiTenancy: true,\n    advancedAnalytics: true,\n    automatedBilling: true,\n    apiAccess: true,\n    whiteLabel: false,\n    customDomains: false,\n    ssoIntegration: false,\n    mobileApp: false,\n  },\n  api: {\n    baseUrl: \"/api\",\n    version: \"v1\",\n    timeout: 30000,\n    retries: 3,\n  },\n  monitoring: {\n    analytics: true,\n    errorReporting: true,\n    performanceMonitoring: true,\n  },\n};\n\n// Configuration provider types\nexport interface ConfigContextType {\n  config: FrameworkConfig;\n  updateConfig: (updates: Partial<FrameworkConfig>) => void;\n  resetConfig: () => void;\n}\n","/**\n * Configuration Provider for DotMac Framework\n * Provides centralized configuration management across the application\n */\n\n\"use client\";\n\nimport { createContext, type ReactNode, useContext, useEffect, useState } from \"react\";\n\nimport {\n  type ConfigContextType,\n  defaultFrameworkConfig,\n  type FrameworkConfig,\n} from \"./framework.config\";\n\nconst ConfigContext = createContext<ConfigContextType | undefined>(undefined);\n\ninterface ConfigProviderProps {\n  children: ReactNode;\n  initialConfig?: Partial<FrameworkConfig>;\n  configEndpoint?: string;\n}\n\nexport function ConfigProvider({\n  children,\n  initialConfig = {\n    // Implementation pending\n  },\n  configEndpoint,\n}: ConfigProviderProps) {\n  const [config, setConfig] = useState<FrameworkConfig>(() => ({\n    ...defaultFrameworkConfig,\n    ...initialConfig,\n  }));\n\n  // Load configuration from endpoint if provided\n  useEffect(() => {\n    if (configEndpoint) {\n      fetch(configEndpoint)\n        .then((res) => res.json())\n        .then((remoteConfig) => {\n          setConfig((prev) => ({\n            ...prev,\n            ...remoteConfig,\n          }));\n        })\n        .catch((_error) => {\n          // Error handler implementation pending\n        });\n    }\n  }, [configEndpoint]);\n\n  // Load configuration from localStorage\n  useEffect(() => {\n    const savedConfig = localStorage.getItem(\"dotmac-framework-config\");\n    if (savedConfig) {\n      try {\n        const parsedConfig = JSON.parse(savedConfig);\n        setConfig((prev) => ({\n          ...prev,\n          ...parsedConfig,\n        }));\n      } catch (_error) {\n        // Error handling intentionally empty\n      }\n    }\n  }, []);\n\n  // Save configuration changes to localStorage\n  const updateConfig = (updates: Partial<FrameworkConfig>) => {\n    setConfig((prev) => {\n      const newConfig = {\n        ...prev,\n        ...updates,\n      };\n\n      // Save to localStorage\n      try {\n        localStorage.setItem(\"dotmac-framework-config\", JSON.stringify(newConfig));\n      } catch (_error) {\n        // Error handling intentionally empty\n      }\n\n      return newConfig;\n    });\n  };\n\n  const resetConfig = () => {\n    setConfig(defaultFrameworkConfig);\n    localStorage.removeItem(\"dotmac-framework-config\");\n  };\n\n  const value: ConfigContextType = {\n    config,\n    updateConfig,\n    resetConfig,\n  };\n\n  return <ConfigContext.Provider value={value}>{children}</ConfigContext.Provider>;\n}\n\n// Hook to use configuration\nexport function useConfig(): ConfigContextType {\n  const context = useContext(ConfigContext);\n  if (!context) {\n    throw new Error(\"useConfig must be used within a ConfigProvider\");\n  }\n  return context;\n}\n\n// Utility hook to get specific config sections\nexport function useLocaleConfig() {\n  const { config } = useConfig();\n  return config.locale;\n}\n\nexport function useCurrencyConfig() {\n  const { config } = useConfig();\n  return config.currency;\n}\n\nexport function useBusinessConfig() {\n  const { config } = useConfig();\n  return config.business;\n}\n\nexport function useBrandingConfig() {\n  const { config } = useConfig();\n  return config.branding;\n}\n\nexport function useFeatureFlags() {\n  const { config } = useConfig();\n  return config.features;\n}\n","/**\n * Theme Configuration for DotMac Framework\n * Configurable theming system supporting multiple brands and portals\n */\n\nexport interface ColorPalette {\n  50: string;\n  100: string;\n  200: string;\n  300: string;\n  400: string;\n  500: string;\n  600: string;\n  700: string;\n  800: string;\n  900: string;\n  950: string;\n}\n\nexport interface ThemeColors {\n  primary: ColorPalette;\n  secondary: ColorPalette;\n  accent: ColorPalette;\n  success: ColorPalette;\n  warning: ColorPalette;\n  danger: ColorPalette;\n  info: ColorPalette;\n  neutral: ColorPalette;\n}\n\nexport interface TypographyConfig {\n  fontFamily: {\n    sans: string[];\n    serif: string[];\n    mono: string[];\n  };\n  fontSize: {\n    xs: [string, { lineHeight: string }];\n    sm: [string, { lineHeight: string }];\n    base: [string, { lineHeight: string }];\n    lg: [string, { lineHeight: string }];\n    xl: [string, { lineHeight: string }];\n    \"2xl\": [string, { lineHeight: string }];\n    \"3xl\": [string, { lineHeight: string }];\n    \"4xl\": [string, { lineHeight: string }];\n    \"5xl\": [string, { lineHeight: string }];\n    \"6xl\": [string, { lineHeight: string }];\n  };\n  fontWeight: {\n    thin: string;\n    extralight: string;\n    light: string;\n    normal: string;\n    medium: string;\n    semibold: string;\n    bold: string;\n    extrabold: string;\n    black: string;\n  };\n}\n\nexport interface SpacingConfig {\n  0: string;\n  px: string;\n  0.5: string;\n  1: string;\n  1.5: string;\n  2: string;\n  2.5: string;\n  3: string;\n  3.5: string;\n  4: string;\n  5: string;\n  6: string;\n  7: string;\n  8: string;\n  9: string;\n  10: string;\n  11: string;\n  12: string;\n  14: string;\n  16: string;\n  20: string;\n  24: string;\n  28: string;\n  32: string;\n  36: string;\n  40: string;\n  44: string;\n  48: string;\n  52: string;\n  56: string;\n  60: string;\n  64: string;\n  72: string;\n  80: string;\n  96: string;\n}\n\nexport interface BorderRadiusConfig {\n  none: string;\n  sm: string;\n  base: string;\n  md: string;\n  lg: string;\n  xl: string;\n  \"2xl\": string;\n  \"3xl\": string;\n  full: string;\n}\n\nexport interface ShadowConfig {\n  sm: string;\n  base: string;\n  md: string;\n  lg: string;\n  xl: string;\n  \"2xl\": string;\n  inner: string;\n  none: string;\n}\n\nexport interface ThemeConfig {\n  colors: ThemeColors;\n  typography: TypographyConfig;\n  spacing: SpacingConfig;\n  borderRadius: BorderRadiusConfig;\n  shadows: ShadowConfig;\n  breakpoints: {\n    sm: string;\n    md: string;\n    lg: string;\n    xl: string;\n    \"2xl\": string;\n  };\n  zIndex: {\n    auto: string;\n    0: string;\n    10: string;\n    20: string;\n    30: string;\n    40: string;\n    50: string;\n  };\n}\n\nexport interface PortalTheme extends ThemeConfig {\n  name: string;\n  variant: \"professional\" | \"friendly\" | \"business\" | \"minimal\";\n}\n\n// Default color palettes\nconst defaultBlue: ColorPalette = {\n  50: \"#eff6ff\",\n  100: \"#dbeafe\",\n  200: \"#bfdbfe\",\n  300: \"#93c5fd\",\n  400: \"#60a5fa\",\n  500: \"#3b82f6\",\n  600: \"#2563eb\",\n  700: \"#1d4ed8\",\n  800: \"#1e40af\",\n  900: \"#1e3a8a\",\n  950: \"#172554\",\n};\n\nconst defaultGray: ColorPalette = {\n  50: \"#f8fafc\",\n  100: \"#f1f5f9\",\n  200: \"#e2e8f0\",\n  300: \"#cbd5e1\",\n  400: \"#94a3b8\",\n  500: \"#64748b\",\n  600: \"#475569\",\n  700: \"#334155\",\n  800: \"#1e293b\",\n  900: \"#0f172a\",\n  950: \"#020617\",\n};\n\nconst defaultGreen: ColorPalette = {\n  50: \"#f0fdf4\",\n  100: \"#dcfce7\",\n  200: \"#bbf7d0\",\n  300: \"#86efac\",\n  400: \"#4ade80\",\n  500: \"#22c55e\",\n  600: \"#16a34a\",\n  700: \"#15803d\",\n  800: \"#166534\",\n  900: \"#14532d\",\n  950: \"#052e16\",\n};\n\nconst defaultRed: ColorPalette = {\n  50: \"#fef2f2\",\n  100: \"#fee2e2\",\n  200: \"#fecaca\",\n  300: \"#fca5a5\",\n  400: \"#f87171\",\n  500: \"#ef4444\",\n  600: \"#dc2626\",\n  700: \"#b91c1c\",\n  800: \"#991b1b\",\n  900: \"#7f1d1d\",\n  950: \"#450a0a\",\n};\n\nconst defaultYellow: ColorPalette = {\n  50: \"#fefce8\",\n  100: \"#fef9c3\",\n  200: \"#fef08a\",\n  300: \"#fde047\",\n  400: \"#facc15\",\n  500: \"#eab308\",\n  600: \"#ca8a04\",\n  700: \"#a16207\",\n  800: \"#854d0e\",\n  900: \"#713f12\",\n  950: \"#422006\",\n};\n\nconst defaultCyan: ColorPalette = {\n  50: \"#ecfeff\",\n  100: \"#cffafe\",\n  200: \"#a5f3fc\",\n  300: \"#67e8f9\",\n  400: \"#22d3ee\",\n  500: \"#06b6d4\",\n  600: \"#0891b2\",\n  700: \"#0e7490\",\n  800: \"#155e75\",\n  900: \"#164e63\",\n  950: \"#083344\",\n};\n\n// Default theme configuration\nexport const defaultTheme: ThemeConfig = {\n  colors: {\n    primary: defaultBlue,\n    secondary: defaultGray,\n    accent: defaultCyan,\n    success: defaultGreen,\n    warning: defaultYellow,\n    danger: defaultRed,\n    info: defaultCyan,\n    neutral: defaultGray,\n  },\n  typography: {\n    fontFamily: {\n      sans: [\"Inter\", \"ui-sans-serif\", \"system-ui\", \"sans-serif\"],\n      serif: [\"ui-serif\", \"Georgia\", \"Cambria\", \"serif\"],\n      mono: [\"ui-monospace\", \"SFMono-Regular\", \"Consolas\", \"monospace\"],\n    },\n    fontSize: {\n      xs: [\"0.75rem\", { lineHeight: \"1rem\" }],\n      sm: [\"0.875rem\", { lineHeight: \"1.25rem\" }],\n      base: [\"1rem\", { lineHeight: \"1.5rem\" }],\n      lg: [\"1.125rem\", { lineHeight: \"1.75rem\" }],\n      xl: [\"1.25rem\", { lineHeight: \"1.75rem\" }],\n      \"2xl\": [\"1.5rem\", { lineHeight: \"2rem\" }],\n      \"3xl\": [\"1.875rem\", { lineHeight: \"2.25rem\" }],\n      \"4xl\": [\"2.25rem\", { lineHeight: \"2.5rem\" }],\n      \"5xl\": [\"3rem\", { lineHeight: \"1\" }],\n      \"6xl\": [\"3.75rem\", { lineHeight: \"1\" }],\n    },\n    fontWeight: {\n      thin: \"100\",\n      extralight: \"200\",\n      light: \"300\",\n      normal: \"400\",\n      medium: \"500\",\n      semibold: \"600\",\n      bold: \"700\",\n      extrabold: \"800\",\n      black: \"900\",\n    },\n  },\n  spacing: {\n    0: \"0px\",\n    px: \"1px\",\n    0.5: \"0.125rem\",\n    1: \"0.25rem\",\n    1.5: \"0.375rem\",\n    2: \"0.5rem\",\n    2.5: \"0.625rem\",\n    3: \"0.75rem\",\n    3.5: \"0.875rem\",\n    4: \"1rem\",\n    5: \"1.25rem\",\n    6: \"1.5rem\",\n    7: \"1.75rem\",\n    8: \"2rem\",\n    9: \"2.25rem\",\n    10: \"2.5rem\",\n    11: \"2.75rem\",\n    12: \"3rem\",\n    14: \"3.5rem\",\n    16: \"4rem\",\n    20: \"5rem\",\n    24: \"6rem\",\n    28: \"7rem\",\n    32: \"8rem\",\n    36: \"9rem\",\n    40: \"10rem\",\n    44: \"11rem\",\n    48: \"12rem\",\n    52: \"13rem\",\n    56: \"14rem\",\n    60: \"15rem\",\n    64: \"16rem\",\n    72: \"18rem\",\n    80: \"20rem\",\n    96: \"24rem\",\n  },\n  borderRadius: {\n    none: \"0px\",\n    sm: \"0.125rem\",\n    base: \"0.25rem\",\n    md: \"0.375rem\",\n    lg: \"0.5rem\",\n    xl: \"0.75rem\",\n    \"2xl\": \"1rem\",\n    \"3xl\": \"1.5rem\",\n    full: \"9999px\",\n  },\n  shadows: {\n    sm: \"0 1px 2px 0 rgb(0 0 0 / 0.05)\",\n    base: \"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)\",\n    md: \"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)\",\n    lg: \"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)\",\n    xl: \"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)\",\n    \"2xl\": \"0 25px 50px -12px rgb(0 0 0 / 0.25)\",\n    inner: \"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)\",\n    none: \"none\",\n  },\n  breakpoints: {\n    sm: \"640px\",\n    md: \"768px\",\n    lg: \"1024px\",\n    xl: \"1280px\",\n    \"2xl\": \"1536px\",\n  },\n  zIndex: {\n    auto: \"auto\",\n    0: \"0\",\n    10: \"10\",\n    20: \"20\",\n    30: \"30\",\n    40: \"40\",\n    50: \"50\",\n  },\n};\n\n// Portal-specific themes\nexport const adminTheme: PortalTheme = {\n  ...defaultTheme,\n  name: \"Admin Portal\",\n  variant: \"professional\",\n  colors: {\n    ...defaultTheme.colors,\n    primary: {\n      ...defaultGray,\n      500: \"#374151\",\n      600: \"#1f2937\",\n    },\n  },\n};\n\nexport const customerTheme: PortalTheme = {\n  ...defaultTheme,\n  name: \"Customer Portal\",\n  variant: \"friendly\",\n  colors: {\n    ...defaultTheme.colors,\n    primary: defaultBlue,\n    accent: defaultGreen,\n  },\n};\n\nexport const resellerTheme: PortalTheme = {\n  ...defaultTheme,\n  name: \"Reseller Portal\",\n  variant: \"business\",\n  colors: {\n    ...defaultTheme.colors,\n    primary: {\n      ...defaultBlue,\n      500: \"#1e40af\",\n      600: \"#1d4ed8\",\n    },\n    accent: {\n      ...defaultYellow,\n      500: \"#f59e0b\",\n      600: \"#d97706\",\n    },\n  },\n};\n\nexport const themes = {\n  default: defaultTheme,\n  admin: adminTheme,\n  customer: customerTheme,\n  reseller: resellerTheme,\n};\n\nexport type ThemeName = keyof typeof themes;\n","/**\n * Theme Provider for DotMac Framework\n * Provides configurable theming across the application\n */\n\n\"use client\";\n\nimport { createContext, type ReactNode, useContext, useEffect, useState } from \"react\";\n\nimport { defaultTheme, type ThemeConfig, type ThemeName, themes } from \"./theme.config\";\n\ninterface ThemeContextType {\n  theme: ThemeConfig;\n  currentTheme: ThemeName;\n  setTheme: (themeName: ThemeName) => void;\n  customizeTheme: (customizations: Partial<ThemeConfig>) => void;\n  resetTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n  defaultThemeName?: ThemeName;\n  portalType?: \"admin\" | \"customer\" | \"reseller\";\n  allowCustomization?: boolean;\n}\n\nexport function ThemeProvider({\n  children,\n  defaultThemeName = \"default\",\n  portalType,\n  allowCustomization = true,\n}: ThemeProviderProps) {\n  const [currentTheme, setCurrentTheme] = useState<ThemeName>(() => {\n    // Use portal-specific theme if specified\n    if (portalType && themes[portalType]) {\n      return portalType as ThemeName;\n    }\n    return defaultThemeName;\n  });\n\n  const [customizations, setCustomizations] = useState<Partial<ThemeConfig>>({});\n\n  // Load theme customizations from localStorage\n  useEffect(() => {\n    if (allowCustomization && typeof window !== \"undefined\") {\n      const savedCustomizations = window.localStorage.getItem(`dotmac-theme-${currentTheme}`);\n      if (savedCustomizations) {\n        try {\n          const parsed = JSON.parse(savedCustomizations);\n          setCustomizations(parsed);\n        } catch (_error) {\n          // Silently ignore parse errors for corrupted localStorage data\n        }\n      } else {\n        setCustomizations({});\n      }\n    }\n  }, [currentTheme, allowCustomization]);\n\n  // Apply theme to CSS custom properties\n  useEffect(() => {\n    const baseTheme = themes[currentTheme] || defaultTheme;\n    const finalTheme = {\n      ...baseTheme,\n      ...customizations,\n      colors: {\n        ...baseTheme.colors,\n        ...(customizations.colors ||\n          {\n            // Implementation pending\n          }),\n      },\n    };\n\n    // Apply CSS custom properties\n    const root = document.documentElement;\n\n    // Apply color palette\n    Object.entries(finalTheme.colors).forEach(([colorName, palette]) => {\n      Object.entries(palette).forEach(([shade, value]) => {\n        root.style.setProperty(`--color-${colorName}-${shade}`, value);\n      });\n    });\n\n    // Apply typography\n    if (finalTheme.typography?.fontFamily) {\n      root.style.setProperty(\"--font-sans\", finalTheme.typography.fontFamily.sans.join(\", \"));\n      root.style.setProperty(\"--font-serif\", finalTheme.typography.fontFamily.serif.join(\", \"));\n      root.style.setProperty(\"--font-mono\", finalTheme.typography.fontFamily.mono.join(\", \"));\n    }\n\n    // Apply spacing\n    Object.entries(finalTheme.spacing).forEach(([key, value]) => {\n      root.style.setProperty(`--spacing-${key}`, value);\n    });\n\n    // Apply border radius\n    Object.entries(finalTheme.borderRadius).forEach(([key, value]) => {\n      root.style.setProperty(`--radius-${key}`, value);\n    });\n\n    // Apply shadows\n    Object.entries(finalTheme.shadows).forEach(([key, value]) => {\n      root.style.setProperty(`--shadow-${key}`, value);\n    });\n\n    // Apply breakpoints\n    Object.entries(finalTheme.breakpoints).forEach(([key, value]) => {\n      root.style.setProperty(`--breakpoint-${key}`, value);\n    });\n\n    // Apply z-index values\n    Object.entries(finalTheme.zIndex).forEach(([key, value]) => {\n      root.style.setProperty(`--z-${key}`, value);\n    });\n  }, [currentTheme, customizations]);\n\n  const setTheme = (themeName: ThemeName) => {\n    setCurrentTheme(themeName);\n    setCustomizations({});\n  };\n\n  const customizeTheme = (newCustomizations: Partial<ThemeConfig>) => {\n    if (!allowCustomization) {\n      return;\n    }\n\n    const updatedCustomizations = {\n      ...customizations,\n      ...newCustomizations,\n    };\n\n    setCustomizations(updatedCustomizations);\n\n    // Save to localStorage\n    try {\n      if (typeof window !== \"undefined\") {\n        window.localStorage.setItem(\n          `dotmac-theme-${currentTheme}`,\n          JSON.stringify(updatedCustomizations),\n        );\n      }\n    } catch (_error) {\n      // Silently ignore localStorage write errors (e.g., quota exceeded)\n    }\n  };\n\n  const resetTheme = () => {\n    setCustomizations({});\n    if (typeof window !== \"undefined\") {\n      window.localStorage.removeItem(`dotmac-theme-${currentTheme}`);\n    }\n  };\n\n  const theme = {\n    ...(themes[currentTheme] || defaultTheme),\n    ...customizations,\n    colors: {\n      ...(themes[currentTheme] || defaultTheme).colors,\n      ...(customizations.colors ||\n        {\n          // Implementation pending\n        }),\n    },\n  };\n\n  const value: ThemeContextType = {\n    theme,\n    currentTheme,\n    setTheme,\n    customizeTheme,\n    resetTheme,\n  };\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n\n// Hook to use theme\nexport function useTheme(): ThemeContextType {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n}\n\n// Utility hooks for specific theme aspects\nexport function useColors() {\n  const { theme } = useTheme();\n  return theme.colors;\n}\n\nexport function useTypography() {\n  const { theme } = useTheme();\n  return theme.typography;\n}\n\nexport function useSpacing() {\n  const { theme } = useTheme();\n  return theme.spacing;\n}\n\nexport function useBorderRadius() {\n  const { theme } = useTheme();\n  return theme.borderRadius;\n}\n\nexport function useShadows() {\n  const { theme } = useTheme();\n  return theme.shadows;\n}\n\nexport function useBreakpoints() {\n  const { theme } = useTheme();\n  return theme.breakpoints;\n}\n","/**\n * Multi-tenant store for managing tenant context and switching\n */\n\nimport { create } from \"zustand\";\nimport { createJSONStorage, persist } from \"zustand/middleware\";\n\nimport { getApiClient } from \"../api\";\nimport type { Tenant, User } from \"../types\";\n\ninterface TenantPermissions {\n  [key: string]: boolean;\n}\n\ninterface TenantContext {\n  tenant: Tenant | null;\n  user: User | null;\n  permissions: TenantPermissions;\n  features: string[];\n  settings: Record<string, unknown>;\n}\n\ninterface TenantState {\n  // Current tenant context\n  currentTenant: TenantContext | null;\n\n  // Available tenants for current user\n  availableTenants: Tenant[];\n\n  // Tenant switching\n  isLoading: boolean;\n  switchingTenant: boolean;\n\n  // Actions\n  setCurrentTenant: (tenant: Tenant, user: User) => void;\n  switchTenant: (tenantId: string) => Promise<void>;\n  loadTenantPermissions: (tenantId: string) => Promise<void>;\n  updateTenantSettings: (settings: Record<string, unknown>) => void;\n  clearTenant: () => void;\n\n  // Permission helpers\n  hasPermission: (permission: string) => boolean;\n  hasAnyPermission: (permissions: string[]) => boolean;\n  hasAllPermissions: (permissions: string[]) => boolean;\n  hasFeature: (feature: string) => boolean;\n\n  // Multi-tenant utilities\n  getTenantSetting: (key: string, defaultValue?: unknown) => any;\n  isTenantActive: () => boolean;\n  getTenantBranding: () => {\n    logo?: string;\n    primaryColor?: string;\n    secondaryColor?: string;\n    companyName?: string;\n  };\n}\n\nexport const useTenantStore = create<TenantState>()(\n  persist(\n    (set, get) => ({\n      currentTenant: null,\n      availableTenants: [],\n      isLoading: false,\n      switchingTenant: false,\n\n      setCurrentTenant: (tenant: Tenant, user: User) => {\n        set({\n          currentTenant: {\n            tenant,\n            user,\n            permissions: {\n              // Implementation pending\n            },\n            features: [],\n            settings:\n              tenant.settings ||\n              {\n                // Implementation pending\n              },\n          },\n        });\n      },\n\n      switchTenant: async (tenantId: string) => {\n        const { availableTenants, loadTenantPermissions } = get();\n\n        set({ switchingTenant: true });\n\n        try {\n          const targetTenant = availableTenants.find((t) => t.id === tenantId);\n          if (!targetTenant) {\n            throw new Error(\"Tenant not found\");\n          }\n\n          // Load tenant-specific permissions\n          await loadTenantPermissions(tenantId);\n\n          // Update current tenant\n          set((state) => ({\n            currentTenant: state.currentTenant\n              ? {\n                  ...state.currentTenant,\n                  tenant: targetTenant,\n                  settings:\n                    targetTenant.settings ||\n                    {\n                      // Implementation pending\n                    },\n                }\n              : null,\n            switchingTenant: false,\n          }));\n\n          // Trigger tenant-specific UI updates\n          window.dispatchEvent(\n            new CustomEvent(\"tenantChanged\", {\n              detail: { tenantId, tenant: targetTenant },\n            }),\n          );\n        } catch (_error) {\n          set({ switchingTenant: false });\n          throw error;\n        }\n      },\n\n      loadTenantPermissions: async (tenantId: string) => {\n        set({ isLoading: true });\n\n        try {\n          const apiClient = getApiClient();\n          const response = await apiClient.request(`/api/v1/tenants/${tenantId}/permissions`, {\n            method: \"GET\",\n          });\n\n          const { permissions, _features } = response.data;\n\n          set((state) => ({\n            currentTenant: state.currentTenant\n              ? {\n                  ...state.currentTenant,\n                  permissions:\n                    permissions ||\n                    {\n                      // Implementation pending\n                    },\n                  features: features || [],\n                }\n              : null,\n            isLoading: false,\n          }));\n        } catch (_error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateTenantSettings: (settings: Record<string, unknown>) => {\n        set((state) => ({\n          currentTenant: state.currentTenant\n            ? {\n                ...state.currentTenant,\n                settings: { ...state.currentTenant.settings, ...settings },\n              }\n            : null,\n        }));\n      },\n\n      clearTenant: () => {\n        set({\n          currentTenant: null,\n          availableTenants: [],\n          isLoading: false,\n          switchingTenant: false,\n        });\n      },\n\n      // Permission helpers\n      hasPermission: (permission: string) => {\n        const { currentTenant } = get();\n        return currentTenant?.permissions[permission] || false;\n      },\n\n      hasAnyPermission: (permissions: string[]) => {\n        const { hasPermission } = get();\n        return permissions.some((permission) => hasPermission(permission));\n      },\n\n      hasAllPermissions: (permissions: string[]) => {\n        const { hasPermission } = get();\n        return permissions.every((permission) => hasPermission(permission));\n      },\n\n      hasFeature: (feature: string) => {\n        const { currentTenant } = get();\n        return currentTenant?.features.includes(feature) || false;\n      },\n\n      // Multi-tenant utilities\n      getTenantSetting: (key: string, defaultValue?: unknown) => {\n        const { currentTenant } = get();\n        return currentTenant?.settings[key] ?? defaultValue;\n      },\n\n      isTenantActive: () => {\n        const { currentTenant } = get();\n        return currentTenant?.tenant?.status === \"active\";\n      },\n\n      getTenantBranding: () => {\n        const { currentTenant } = get();\n        const settings =\n          currentTenant?.settings ||\n          {\n            // Implementation pending\n          };\n\n        return {\n          logo: settings.branding?.logo,\n          primaryColor: settings.branding?.primaryColor || \"#2563eb\",\n          secondaryColor: settings.branding?.secondaryColor || \"#64748b\",\n          companyName: currentTenant?.tenant?.name || \"DotMac Platform\",\n        };\n      },\n    }),\n    {\n      name: \"tenant-store\",\n      storage: createJSONStorage(() => localStorage),\n      // Only persist essential data\n      partialize: (state) => ({\n        currentTenant: state.currentTenant,\n        availableTenants: state.availableTenants,\n      }),\n    },\n  ),\n);\n","type StorageBackend = \"localStorage\" | \"sessionStorage\";\n\nexport interface SecureStorageOptions {\n  backend?: StorageBackend;\n  prefix?: string;\n}\n\n/**\n * Minimal storage wrapper that gracefully falls back to an in-memory map on the server.\n * It intentionally avoids storing sensitive credentials; callers should only persist UI state.\n */\nexport class SecureStorage {\n  private backend: StorageBackend;\n  private prefix: string;\n  private memoryStore = new Map<string, string>();\n\n  constructor(options: SecureStorageOptions = {}) {\n    this.backend = options.backend ?? \"localStorage\";\n    this.prefix = options.prefix ?? \"dotmac:\";\n  }\n\n  private get storage(): Storage | null {\n    if (typeof window === \"undefined\") {\n      return null;\n    }\n\n    if (this.backend === \"sessionStorage\") {\n      return window.sessionStorage;\n    }\n\n    return window.localStorage;\n  }\n\n  private withPrefix(key: string): string {\n    return `${this.prefix}${key}`;\n  }\n\n  getItem(key: string): string | null {\n    const storage = this.storage;\n    const namespacedKey = this.withPrefix(key);\n\n    if (!storage) {\n      return this.memoryStore.get(namespacedKey) ?? null;\n    }\n\n    return storage.getItem(namespacedKey);\n  }\n\n  setItem(key: string, value: string): void {\n    const storage = this.storage;\n    const namespacedKey = this.withPrefix(key);\n\n    if (!storage) {\n      this.memoryStore.set(namespacedKey, value);\n      return;\n    }\n\n    storage.setItem(namespacedKey, value);\n  }\n\n  removeItem(key: string): void {\n    const storage = this.storage;\n    const namespacedKey = this.withPrefix(key);\n\n    if (!storage) {\n      this.memoryStore.delete(namespacedKey);\n      return;\n    }\n\n    storage.removeItem(namespacedKey);\n  }\n}\n","/**\n * Shared App Store Factory\n * Creates consistent app stores across all portals\n */\n\nimport { create } from \"zustand\";\nimport { createJSONStorage, persist } from \"zustand/middleware\";\nimport { immer } from \"zustand/middleware/immer\";\n\nimport type {\n  AppStore,\n  AppState,\n  FilterState,\n  PaginationState,\n  SelectionState,\n  LoadingState,\n  UIState,\n  PreferencesState,\n  ContextState,\n  NotificationItem,\n} from \"./types\";\nimport { SecureStorage } from \"../auth/storage\";\n\n// Default state values\nconst defaultFilterState: FilterState = {\n  searchTerm: \"\",\n  statusFilter: \"all\",\n  sortBy: \"name\",\n  sortOrder: \"asc\",\n  dateRange: { start: null, end: null },\n  customFilters: {},\n  showAdvanced: false,\n};\n\nconst defaultPaginationState: PaginationState = {\n  currentPage: 1,\n  itemsPerPage: 25,\n  totalItems: 0,\n  totalPages: 0,\n  hasNext: false,\n  hasPrev: false,\n};\n\nconst defaultSelectionState: SelectionState<any> = {\n  selectedItems: [],\n  lastSelected: null,\n  selectAll: false,\n  isMultiSelect: true,\n};\n\nconst defaultLoadingState: LoadingState = {\n  isLoading: false,\n  error: null,\n  lastUpdated: null,\n  operationId: null,\n};\n\nconst defaultUIState: UIState = {\n  sidebarOpen: true,\n  sidebarCollapsed: false,\n  activeTab: \"\",\n  activeView: \"list\",\n  showFilters: false,\n  showBulkActions: false,\n  theme: \"light\",\n  density: \"comfortable\",\n  language: \"en\",\n  notifications: [],\n  modals: {\n    confirmDialog: {\n      open: false,\n    },\n  },\n  globalLoading: {\n    visible: false,\n  },\n};\n\nconst defaultPreferencesState: PreferencesState = {\n  dataRefreshInterval: 30000, // 30 seconds\n  autoSave: true,\n  compactMode: false,\n  showAdvancedFeatures: false,\n  tablePageSize: 25,\n  timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  dateFormat: \"MM/dd/yyyy\",\n  numberFormat: \"en-US\",\n  emailNotifications: true,\n  pushNotifications: false,\n  soundEnabled: true,\n  keyboardShortcuts: true,\n};\n\nexport interface AppStoreConfig {\n  portalType: string;\n  persistenceKey?: string;\n  secureStorage?: boolean;\n  includePersistence?: boolean;\n  initialState?: Partial<AppState>;\n  storagePrefix?: string;\n}\n\nexport function createAppStore(config: AppStoreConfig) {\n  const {\n    portalType,\n    persistenceKey = `dotmac-app-${portalType}`,\n    secureStorage = false,\n    includePersistence = true,\n    initialState = {},\n    storagePrefix = \"app_\",\n  } = config;\n\n  // Setup storage if needed\n  const storage = secureStorage\n    ? new SecureStorage({ backend: \"localStorage\", prefix: storagePrefix })\n    : undefined;\n\n  const store = create<AppStore>()(\n    includePersistence && storage\n      ? persist(\n          immer((set, get) => ({\n            // Initial state\n            ui: { ...defaultUIState, ...initialState.ui },\n            preferences: {\n              ...defaultPreferencesState,\n              ...initialState.preferences,\n            },\n            contexts: initialState.contexts || {},\n            portalData: initialState.portalData || {},\n\n            // Filter Actions\n            updateFilters: (context: string, updates: Partial<FilterState>) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                Object.assign(state.contexts[context].filters, updates);\n              });\n            },\n\n            resetFilters: (context: string) => {\n              set((state) => {\n                if (state.contexts[context]) {\n                  state.contexts[context].filters = { ...defaultFilterState };\n                }\n              });\n            },\n\n            setSearchTerm: (context: string, term: string) => {\n              get().updateFilters(context, { searchTerm: term });\n            },\n\n            setStatusFilter: (context: string, status: string) => {\n              get().updateFilters(context, { statusFilter: status });\n            },\n\n            setSorting: (context: string, sortBy: string, sortOrder = \"asc\") => {\n              get().updateFilters(context, { sortBy, sortOrder });\n            },\n\n            setDateRange: (context: string, start: Date | null, end: Date | null) => {\n              get().updateFilters(context, { dateRange: { start, end } });\n            },\n\n            setCustomFilter: (context: string, key: string, value: any) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                state.contexts[context].filters.customFilters[key] = value;\n              });\n            },\n\n            toggleAdvancedFilters: (context: string) => {\n              set((state) => {\n                if (state.contexts[context]) {\n                  state.contexts[context].filters.showAdvanced =\n                    !state.contexts[context].filters.showAdvanced;\n                }\n              });\n            },\n\n            // Pagination Actions\n            updatePagination: (context: string, updates: Partial<PaginationState>) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                const pagination = state.contexts[context].pagination;\n                Object.assign(pagination, updates);\n\n                // Auto-calculate derived values\n                if (\"totalItems\" in updates || \"itemsPerPage\" in updates) {\n                  pagination.totalPages = Math.ceil(\n                    pagination.totalItems / pagination.itemsPerPage,\n                  );\n                  pagination.hasNext = pagination.currentPage < pagination.totalPages;\n                  pagination.hasPrev = pagination.currentPage > 1;\n                }\n              });\n            },\n\n            setCurrentPage: (context: string, page: number) => {\n              get().updatePagination(context, { currentPage: page });\n            },\n\n            setItemsPerPage: (context: string, itemsPerPage: number) => {\n              get().updatePagination(context, { itemsPerPage, currentPage: 1 });\n            },\n\n            setTotalItems: (context: string, totalItems: number) => {\n              get().updatePagination(context, { totalItems });\n            },\n\n            goToFirstPage: (context: string) => {\n              get().setCurrentPage(context, 1);\n            },\n\n            goToLastPage: (context: string) => {\n              const pagination = get().contexts[context]?.pagination;\n              if (pagination) {\n                get().setCurrentPage(context, pagination.totalPages);\n              }\n            },\n\n            goToNextPage: (context: string) => {\n              const pagination = get().contexts[context]?.pagination;\n              if (pagination?.hasNext) {\n                get().setCurrentPage(context, pagination.currentPage + 1);\n              }\n            },\n\n            goToPrevPage: (context: string) => {\n              const pagination = get().contexts[context]?.pagination;\n              if (pagination?.hasPrev) {\n                get().setCurrentPage(context, pagination.currentPage - 1);\n              }\n            },\n\n            // Selection Actions\n            updateSelection: (context: string, updates: Partial<SelectionState<any>>) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                Object.assign(state.contexts[context].selection, updates);\n              });\n            },\n\n            selectItem: (context: string, item: any, multiple = true) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                const selection = state.contexts[context].selection;\n                const isSelected = selection.selectedItems.includes(item);\n\n                if (isSelected) {\n                  selection.selectedItems = selection.selectedItems.filter((i) => i !== item);\n                } else {\n                  if (multiple && selection.isMultiSelect) {\n                    selection.selectedItems.push(item);\n                  } else {\n                    selection.selectedItems = [item];\n                  }\n                }\n\n                selection.lastSelected = item;\n                selection.selectAll = false;\n              });\n            },\n\n            deselectItem: (context: string, item: any) => {\n              set((state) => {\n                if (state.contexts[context]) {\n                  const selection = state.contexts[context].selection;\n                  selection.selectedItems = selection.selectedItems.filter((i) => i !== item);\n                  selection.selectAll = false;\n                }\n              });\n            },\n\n            toggleSelectAll: (context: string, allItems: any[]) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                const selection = state.contexts[context].selection;\n                const allSelected =\n                  selection.selectAll || selection.selectedItems.length === allItems.length;\n\n                selection.selectedItems = allSelected ? [] : [...allItems];\n                selection.selectAll = !allSelected;\n                selection.lastSelected = null;\n              });\n            },\n\n            clearSelection: (context: string) => {\n              set((state) => {\n                if (state.contexts[context]) {\n                  state.contexts[context].selection = {\n                    ...defaultSelectionState,\n                  };\n                }\n              });\n            },\n\n            selectRange: (context: string, startItem: any, endItem: any, allItems: any[]) => {\n              const startIndex = allItems.indexOf(startItem);\n              const endIndex = allItems.indexOf(endItem);\n\n              if (startIndex === -1 || endIndex === -1) return;\n\n              const start = Math.min(startIndex, endIndex);\n              const end = Math.max(startIndex, endIndex);\n              const rangeItems = allItems.slice(start, end + 1);\n\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                const selection = state.contexts[context].selection;\n\n                // Add all items in range to selection\n                rangeItems.forEach((item) => {\n                  if (!selection.selectedItems.includes(item)) {\n                    selection.selectedItems.push(item);\n                  }\n                });\n              });\n            },\n\n            // Loading Actions\n            updateLoading: (context: string, updates: Partial<LoadingState>) => {\n              set((state) => {\n                if (!state.contexts[context]) {\n                  state.contexts[context] = createDefaultContext();\n                }\n                Object.assign(state.contexts[context].loading, updates);\n              });\n            },\n\n            setLoading: (context: string, isLoading: boolean, operationId?: string) => {\n              get().updateLoading(context, {\n                isLoading,\n                operationId,\n                error: isLoading ? null : get().contexts[context]?.loading.error,\n              });\n            },\n\n            setError: (context: string, error: string | null) => {\n              get().updateLoading(context, { error, isLoading: false });\n            },\n\n            setLastUpdated: (context: string, timestamp = new Date()) => {\n              get().updateLoading(context, { lastUpdated: timestamp });\n            },\n\n            setProgress: (context: string, current: number, total: number, message?: string) => {\n              get().updateLoading(context, {\n                progress: { current, total, message },\n              });\n            },\n\n            clearProgress: (context: string) => {\n              get().updateLoading(context, { progress: undefined });\n            },\n\n            // UI Actions\n            updateUI: (updates: Partial<UIState>) => {\n              set((state) => {\n                Object.assign(state.ui, updates);\n              });\n            },\n\n            toggleSidebar: () => {\n              set((state) => {\n                state.ui.sidebarOpen = !state.ui.sidebarOpen;\n              });\n            },\n\n            setSidebarCollapsed: (collapsed: boolean) => {\n              set((state) => {\n                state.ui.sidebarCollapsed = collapsed;\n              });\n            },\n\n            setActiveTab: (tab: string) => {\n              set((state) => {\n                state.ui.activeTab = tab;\n              });\n            },\n\n            setActiveView: (view: string) => {\n              set((state) => {\n                state.ui.activeView = view;\n              });\n            },\n\n            toggleFilters: (context?: string) => {\n              if (context) {\n                get().toggleAdvancedFilters(context);\n              } else {\n                set((state) => {\n                  state.ui.showFilters = !state.ui.showFilters;\n                });\n              }\n            },\n\n            toggleBulkActions: () => {\n              set((state) => {\n                state.ui.showBulkActions = !state.ui.showBulkActions;\n              });\n            },\n\n            setTheme: (theme: \"light\" | \"dark\" | \"auto\") => {\n              set((state) => {\n                state.ui.theme = theme;\n              });\n            },\n\n            setDensity: (density: \"compact\" | \"comfortable\" | \"spacious\") => {\n              set((state) => {\n                state.ui.density = density;\n              });\n            },\n\n            setLanguage: (language: string) => {\n              set((state) => {\n                state.ui.language = language;\n              });\n            },\n\n            // Notification actions\n            addNotification: (notification) => {\n              const id = `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n              set((state) => {\n                state.ui.notifications.push({\n                  ...notification,\n                  id,\n                  timestamp: new Date(),\n                  dismissed: false,\n                });\n              });\n            },\n\n            dismissNotification: (id: string) => {\n              set((state) => {\n                const notification = state.ui.notifications.find((n) => n.id === id);\n                if (notification) {\n                  notification.dismissed = true;\n                }\n              });\n            },\n\n            clearNotifications: () => {\n              set((state) => {\n                state.ui.notifications = [];\n              });\n            },\n\n            clearNotificationsByType: (type: NotificationItem[\"type\"]) => {\n              set((state) => {\n                state.ui.notifications = state.ui.notifications.filter((n) => n.type !== type);\n              });\n            },\n\n            // Modal actions\n            openConfirmDialog: (config) => {\n              set((state) => {\n                state.ui.modals.confirmDialog = { ...config, open: true };\n              });\n            },\n\n            closeConfirmDialog: () => {\n              set((state) => {\n                state.ui.modals.confirmDialog = { open: false };\n              });\n            },\n\n            openModal: (modalId: string, props: any = {}) => {\n              set((state) => {\n                state.ui.modals[modalId] = { open: true, ...props };\n              });\n            },\n\n            closeModal: (modalId: string) => {\n              set((state) => {\n                if (state.ui.modals[modalId]) {\n                  state.ui.modals[modalId].open = false;\n                }\n              });\n            },\n\n            setGlobalLoading: (visible: boolean, message?: string, progress?: number) => {\n              set((state) => {\n                state.ui.globalLoading = { visible, message, progress };\n              });\n            },\n\n            // Preferences actions\n            updatePreferences: (updates: Partial<PreferencesState>) => {\n              set((state) => {\n                Object.assign(state.preferences, updates);\n              });\n            },\n\n            resetPreferences: () => {\n              set((state) => {\n                state.preferences = { ...defaultPreferencesState };\n              });\n            },\n\n            exportPreferences: () => {\n              return get().preferences;\n            },\n\n            importPreferences: (preferences: Partial<PreferencesState>) => {\n              set((state) => {\n                Object.assign(state.preferences, preferences);\n              });\n            },\n\n            setTimezone: (timezone: string) => {\n              set((state) => {\n                state.preferences.timezone = timezone;\n              });\n            },\n\n            toggleCompactMode: () => {\n              set((state) => {\n                state.preferences.compactMode = !state.preferences.compactMode;\n              });\n            },\n\n            toggleAdvancedFeatures: () => {\n              set((state) => {\n                state.preferences.showAdvancedFeatures = !state.preferences.showAdvancedFeatures;\n              });\n            },\n\n            // Context actions\n            createContext: (contextId: string, initialData: any[] = []) => {\n              set((state) => {\n                if (!state.contexts[contextId]) {\n                  state.contexts[contextId] = createDefaultContext(initialData);\n                }\n              });\n            },\n\n            updateContext: (contextId: string, updates: Partial<ContextState<any>>) => {\n              set((state) => {\n                if (!state.contexts[contextId]) {\n                  state.contexts[contextId] = createDefaultContext();\n                }\n                Object.assign(state.contexts[contextId], updates);\n              });\n            },\n\n            setContextData: (contextId: string, data: any[]) => {\n              get().updateContext(contextId, { data });\n            },\n\n            clearContext: (contextId: string) => {\n              set((state) => {\n                if (state.contexts[contextId]) {\n                  state.contexts[contextId] = createDefaultContext();\n                }\n              });\n            },\n\n            removeContext: (contextId: string) => {\n              set((state) => {\n                delete state.contexts[contextId];\n              });\n            },\n\n            resetContext: (contextId: string) => {\n              set((state) => {\n                state.contexts[contextId] = createDefaultContext();\n              });\n            },\n\n            refreshContext: async (contextId: string) => {\n              // This would be implemented by specific portal stores\n              console.warn(`refreshContext not implemented for ${contextId}`);\n            },\n\n            exportContext: (contextId: string) => {\n              return get().contexts[contextId] || null;\n            },\n\n            importContext: (contextId: string, state: ContextState<any>) => {\n              set((draft) => {\n                draft.contexts[contextId] = state;\n              });\n            },\n\n            // Utility methods\n            getContext: (contextId: string) => {\n              return get().contexts[contextId] || null;\n            },\n\n            getFilterState: (contextId: string) => {\n              if (!get().contexts[contextId]) {\n                set((state) => {\n                  state.contexts[contextId] = createDefaultContext();\n                });\n              }\n              return get().contexts[contextId]!.filters;\n            },\n\n            getPaginationState: (contextId: string) => {\n              if (!get().contexts[contextId]) {\n                set((state) => {\n                  state.contexts[contextId] = createDefaultContext();\n                });\n              }\n              return get().contexts[contextId]!.pagination;\n            },\n\n            getSelectionState: <T>(contextId: string) => {\n              if (!get().contexts[contextId]) {\n                set((state) => {\n                  state.contexts[contextId] = createDefaultContext();\n                });\n              }\n              return get().contexts[contextId]!.selection as SelectionState<T>;\n            },\n\n            getLoadingState: (contextId: string) => {\n              if (!get().contexts[contextId]) {\n                set((state) => {\n                  state.contexts[contextId] = createDefaultContext();\n                });\n              }\n              return get().contexts[contextId]!.loading;\n            },\n\n            getFilteredData: (contextId: string, customFilter?: (item: any) => boolean) => {\n              const context = get().contexts[contextId];\n              if (!context) return [];\n\n              let filtered = [...context.data];\n\n              // Apply filters\n              const { searchTerm, statusFilter, customFilters } = context.filters;\n\n              if (searchTerm) {\n                filtered = filtered.filter((item) =>\n                  JSON.stringify(item).toLowerCase().includes(searchTerm.toLowerCase()),\n                );\n              }\n\n              if (statusFilter && statusFilter !== \"all\") {\n                filtered = filtered.filter((item) => item.status === statusFilter);\n              }\n\n              // Apply custom filters\n              Object.entries(customFilters).forEach(([key, value]) => {\n                if (value !== undefined && value !== null && value !== \"\") {\n                  filtered = filtered.filter((item) => item[key] === value);\n                }\n              });\n\n              // Apply custom filter function\n              if (customFilter) {\n                filtered = filtered.filter(customFilter);\n              }\n\n              // Apply sorting\n              const { sortBy, sortOrder } = context.filters;\n              if (sortBy) {\n                filtered.sort((a, b) => {\n                  const aVal = a[sortBy];\n                  const bVal = b[sortBy];\n\n                  if (aVal < bVal) return sortOrder === \"asc\" ? -1 : 1;\n                  if (aVal > bVal) return sortOrder === \"asc\" ? 1 : -1;\n                  return 0;\n                });\n              }\n\n              return filtered;\n            },\n\n            getSelectedItems: (contextId: string) => {\n              return get().contexts[contextId]?.selection.selectedItems || [];\n            },\n\n            isContextLoading: (contextId: string) => {\n              return get().contexts[contextId]?.loading.isLoading || false;\n            },\n\n            getContextError: (contextId: string) => {\n              return get().contexts[contextId]?.loading.error || null;\n            },\n\n            // Bulk operations\n            resetAllContexts: () => {\n              set((state) => {\n                Object.keys(state.contexts).forEach((contextId) => {\n                  state.contexts[contextId] = createDefaultContext();\n                });\n              });\n            },\n\n            clearAllSelections: () => {\n              set((state) => {\n                Object.values(state.contexts).forEach((context) => {\n                  context.selection = { ...defaultSelectionState };\n                });\n              });\n            },\n\n            resetAllFilters: () => {\n              set((state) => {\n                Object.values(state.contexts).forEach((context) => {\n                  context.filters = { ...defaultFilterState };\n                });\n              });\n            },\n\n            // State persistence\n            exportState: () => {\n              const { contexts, preferences, ui } = get();\n              return { contexts, preferences, ui };\n            },\n\n            importState: (state: Partial<AppState>) => {\n              set((draft) => {\n                Object.assign(draft, state);\n              });\n            },\n\n            resetToDefaults: () => {\n              set({\n                ui: { ...defaultUIState },\n                preferences: { ...defaultPreferencesState },\n                contexts: {},\n                portalData: {},\n              });\n            },\n          })),\n          {\n            name: persistenceKey,\n            storage: storage ? createJSONStorage(() => storage) : undefined,\n            partialize: (state) => ({\n              preferences: state.preferences,\n              ui: {\n                // Only persist certain UI state\n                theme: state.ui.theme,\n                density: state.ui.density,\n                language: state.ui.language,\n                sidebarCollapsed: state.ui.sidebarCollapsed,\n              },\n              // Don't persist contexts or notifications - they should reload fresh\n            }),\n          },\n        )\n      : immer((set, get) => ({\n          // Same implementation but without persistence\n          // ... (implementation would be identical)\n        })),\n  );\n\n  return store;\n}\n\n// Helper function to create default context state\nfunction createDefaultContext<T = any>(initialData: T[] = []): ContextState<T> {\n  return {\n    data: initialData,\n    filters: { ...defaultFilterState },\n    pagination: { ...defaultPaginationState },\n    selection: { ...defaultSelectionState },\n    loading: { ...defaultLoadingState },\n  };\n}\n","import { createAppStore } from \"./createAppStore\";\n\nexport const useAppStore = createAppStore({\n  portalType: \"headless\",\n  secureStorage: true,\n});\n\nexport type {\n  AppStore,\n  FilterState,\n  PaginationState,\n  SelectionState,\n  LoadingState,\n  UIState,\n  PreferencesState,\n  ContextState,\n  NotificationItem,\n} from \"./types\";\n","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { useNotifications } from \"./useNotifications\";\n\nexport interface BillingAccount {\n  id: string;\n  customerId: string;\n  accountNumber: string;\n  billingCycle: \"monthly\" | \"quarterly\" | \"annually\";\n  status: \"active\" | \"suspended\" | \"cancelled\" | \"past_due\";\n  balance: number;\n  nextBillDate: Date;\n  lastPaymentDate?: Date;\n  paymentMethod?: PaymentMethod;\n  billingAddress: Address;\n  preferences: BillingPreferences;\n  metadata?: Record<string, any>;\n}\n\nexport interface PaymentMethod {\n  id: string;\n  type: \"credit_card\" | \"bank_account\" | \"paypal\" | \"ach\" | \"wire\";\n  isDefault: boolean;\n  lastFour: string;\n  expiryDate?: string;\n  brand?: string;\n  status: \"active\" | \"expired\" | \"declined\";\n  billingAddress?: Address;\n}\n\nexport interface Address {\n  street: string;\n  city: string;\n  state: string;\n  zip: string;\n  country: string;\n}\n\nexport interface BillingPreferences {\n  paperlessBilling: boolean;\n  autoPayEnabled: boolean;\n  reminderDays: number[];\n  currency: string;\n  language: string;\n  emailNotifications: boolean;\n  smsNotifications: boolean;\n}\n\nexport interface Invoice {\n  id: string;\n  invoiceNumber: string;\n  customerId: string;\n  accountId: string;\n  status: \"draft\" | \"sent\" | \"paid\" | \"overdue\" | \"cancelled\" | \"refunded\";\n  issueDate: Date;\n  dueDate: Date;\n  paidDate?: Date;\n  subtotal: number;\n  taxAmount: number;\n  discountAmount: number;\n  totalAmount: number;\n  amountPaid: number;\n  amountDue: number;\n  lineItems: InvoiceLineItem[];\n  payments: Payment[];\n  notes?: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface InvoiceLineItem {\n  id: string;\n  description: string;\n  quantity: number;\n  unitPrice: number;\n  amount: number;\n  taxRate?: number;\n  serviceId?: string;\n  servicePeriod?: {\n    start: Date;\n    end: Date;\n  };\n}\n\nexport interface Payment {\n  id: string;\n  invoiceId: string;\n  customerId: string;\n  amount: number;\n  currency: string;\n  status: \"pending\" | \"processing\" | \"completed\" | \"failed\" | \"cancelled\" | \"refunded\";\n  method: PaymentMethod;\n  gateway: \"stripe\" | \"paypal\" | \"square\" | \"authorize_net\" | \"manual\";\n  transactionId?: string;\n  gatewayTransactionId?: string;\n  processedAt?: Date;\n  failureReason?: string;\n  refundedAmount?: number;\n  metadata?: Record<string, any>;\n}\n\nexport interface BillingPlan {\n  id: string;\n  name: string;\n  description: string;\n  pricing: {\n    setup?: number;\n    monthly?: number;\n    quarterly?: number;\n    annually?: number;\n  };\n  features: string[];\n  limits?: Record<string, number>;\n  trialDays?: number;\n  isActive: boolean;\n  category: string;\n}\n\nexport interface Subscription {\n  id: string;\n  customerId: string;\n  planId: string;\n  status: \"active\" | \"cancelled\" | \"past_due\" | \"unpaid\" | \"trialing\";\n  currentPeriodStart: Date;\n  currentPeriodEnd: Date;\n  trialStart?: Date;\n  trialEnd?: Date;\n  cancelledAt?: Date;\n  cancelAtPeriodEnd: boolean;\n  quantity: number;\n  unitAmount: number;\n  metadata?: Record<string, any>;\n}\n\nexport interface BillingStats {\n  totalRevenue: number;\n  monthlyRecurringRevenue: number;\n  averageRevenuePerUser: number;\n  churnRate: number;\n  totalInvoices: number;\n  paidInvoices: number;\n  overdueInvoices: number;\n  totalOutstanding: number;\n  collectionRate: number;\n  paymentMethodBreakdown: Record<string, number>;\n  revenueByPlan: Record<string, number>;\n  recentPayments: Payment[];\n  upcomingRenewals: Subscription[];\n}\n\ninterface UseBillingOptions {\n  apiEndpoint?: string;\n  websocketEndpoint?: string;\n  apiKey?: string;\n  tenantId?: string;\n  resellerId?: string;\n  stripePk?: string;\n  paypalClientId?: string;\n  pollInterval?: number;\n  enableRealtime?: boolean;\n  maxRetries?: number;\n}\n\ninterface BillingState {\n  accounts: BillingAccount[];\n  invoices: Invoice[];\n  payments: Payment[];\n  plans: BillingPlan[];\n  subscriptions: Subscription[];\n  stats: BillingStats | null;\n  selectedAccount: BillingAccount | null;\n  isLoading: boolean;\n  error: string | null;\n  isConnected: boolean;\n  paymentProcessing: boolean;\n}\n\nconst initialStats: BillingStats = {\n  totalRevenue: 0,\n  monthlyRecurringRevenue: 0,\n  averageRevenuePerUser: 0,\n  churnRate: 0,\n  totalInvoices: 0,\n  paidInvoices: 0,\n  overdueInvoices: 0,\n  totalOutstanding: 0,\n  collectionRate: 0,\n  paymentMethodBreakdown: {},\n  revenueByPlan: {},\n  recentPayments: [],\n  upcomingRenewals: [],\n};\n\nconst initialState: BillingState = {\n  accounts: [],\n  invoices: [],\n  payments: [],\n  plans: [],\n  subscriptions: [],\n  stats: initialStats,\n  selectedAccount: null,\n  isLoading: false,\n  error: null,\n  isConnected: false,\n  paymentProcessing: false,\n};\n\nexport function useBilling(options: UseBillingOptions = {}) {\n  const {\n    apiEndpoint = \"/api/billing\",\n    websocketEndpoint,\n    apiKey,\n    tenantId,\n    resellerId,\n    stripePk,\n    paypalClientId,\n    pollInterval = 60000,\n    enableRealtime = true,\n    maxRetries = 3,\n  } = options;\n\n  const [state, setState] = useState<BillingState>(initialState);\n  const websocketRef = useRef<WebSocket | null>(null);\n  const pollIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const retryCountRef = useRef(0);\n  const { addNotification } = useNotifications();\n\n  // API Helper\n  const apiCall = useCallback(\n    async (endpoint: string, options: RequestInit = {}) => {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n        ...(options.headers as Record<string, string>),\n      };\n\n      if (apiKey) {\n        headers[\"Authorization\"] = `Bearer ${apiKey}`;\n      }\n\n      if (tenantId) {\n        headers[\"X-Tenant-ID\"] = tenantId;\n      }\n\n      if (resellerId) {\n        headers[\"X-Reseller-ID\"] = resellerId;\n      }\n\n      const response = await fetch(`${apiEndpoint}${endpoint}`, {\n        ...options,\n        headers,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      return response.json();\n    },\n    [apiEndpoint, apiKey, tenantId, resellerId],\n  );\n\n  // WebSocket Connection\n  const connectWebSocket = useCallback(() => {\n    if (!websocketEndpoint || !enableRealtime) return;\n\n    try {\n      if (websocketRef.current?.readyState === WebSocket.OPEN) return;\n\n      const wsUrl = new URL(websocketEndpoint);\n      if (apiKey) wsUrl.searchParams.set(\"apiKey\", apiKey);\n      if (tenantId) wsUrl.searchParams.set(\"tenantId\", tenantId);\n      if (resellerId) wsUrl.searchParams.set(\"resellerId\", resellerId);\n\n      const ws = new WebSocket(wsUrl.toString());\n      websocketRef.current = ws;\n\n      ws.onopen = () => {\n        setState((prev) => ({ ...prev, isConnected: true, error: null }));\n        retryCountRef.current = 0;\n\n        addNotification({\n          type: \"system\",\n          priority: \"low\",\n          title: \"Billing System\",\n          message: \"Real-time billing updates connected\",\n          channel: [\"browser\"],\n          persistent: false,\n        });\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n\n          switch (data.type) {\n            case \"payment_completed\":\n              setState((prev) => ({\n                ...prev,\n                payments: [data.payment, ...prev.payments],\n                invoices: prev.invoices.map((inv) =>\n                  inv.id === data.payment.invoiceId\n                    ? {\n                        ...inv,\n                        status: \"paid\",\n                        paidDate: new Date(data.payment.processedAt),\n                      }\n                    : inv,\n                ),\n              }));\n\n              addNotification({\n                type: \"success\",\n                priority: \"medium\",\n                title: \"Payment Received\",\n                message: `Payment of $${data.payment.amount} completed successfully`,\n                channel: [\"browser\"],\n                persistent: false,\n              });\n              break;\n\n            case \"payment_failed\":\n              setState((prev) => ({\n                ...prev,\n                payments: prev.payments.map((payment) =>\n                  payment.id === data.paymentId\n                    ? {\n                        ...payment,\n                        status: \"failed\",\n                        failureReason: data.reason,\n                      }\n                    : payment,\n                ),\n              }));\n\n              addNotification({\n                type: \"error\",\n                priority: \"high\",\n                title: \"Payment Failed\",\n                message: `Payment failed: ${data.reason}`,\n                channel: [\"browser\"],\n                persistent: true,\n              });\n              break;\n\n            case \"invoice_created\":\n              setState((prev) => ({\n                ...prev,\n                invoices: [data.invoice, ...prev.invoices],\n              }));\n\n              addNotification({\n                type: \"info\",\n                priority: \"medium\",\n                title: \"New Invoice\",\n                message: `Invoice ${data.invoice.invoiceNumber} created`,\n                channel: [\"browser\"],\n                persistent: false,\n              });\n              break;\n\n            case \"invoice_overdue\":\n              setState((prev) => ({\n                ...prev,\n                invoices: prev.invoices.map((inv) =>\n                  inv.id === data.invoiceId ? { ...inv, status: \"overdue\" } : inv,\n                ),\n              }));\n\n              addNotification({\n                type: \"warning\",\n                priority: \"high\",\n                title: \"Invoice Overdue\",\n                message: `Invoice ${data.invoiceNumber} is now overdue`,\n                channel: [\"browser\"],\n                persistent: true,\n              });\n              break;\n\n            case \"subscription_renewed\":\n              setState((prev) => ({\n                ...prev,\n                subscriptions: prev.subscriptions.map((sub) =>\n                  sub.id === data.subscriptionId ? { ...sub, ...data.updates } : sub,\n                ),\n              }));\n              break;\n\n            case \"stats_update\":\n              setState((prev) => ({\n                ...prev,\n                stats: data.stats,\n              }));\n              break;\n          }\n        } catch (error) {\n          console.error(\"Failed to parse WebSocket message:\", error);\n        }\n      };\n\n      ws.onclose = () => {\n        setState((prev) => ({ ...prev, isConnected: false }));\n\n        // Reconnect with exponential backoff\n        if (retryCountRef.current < maxRetries) {\n          const delay = Math.min(1000 * Math.pow(2, retryCountRef.current), 30000);\n          setTimeout(() => {\n            retryCountRef.current++;\n            connectWebSocket();\n          }, delay);\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n        setState((prev) => ({\n          ...prev,\n          isConnected: false,\n          error: \"WebSocket connection failed\",\n        }));\n      };\n    } catch (error) {\n      console.error(\"Failed to establish WebSocket connection:\", error);\n      setState((prev) => ({\n        ...prev,\n        isConnected: false,\n        error: error instanceof Error ? error.message : \"Connection failed\",\n      }));\n    }\n  }, [\n    websocketEndpoint,\n    enableRealtime,\n    apiKey,\n    tenantId,\n    resellerId,\n    maxRetries,\n    addNotification,\n  ]);\n\n  // Load Billing Accounts\n  const loadAccounts = useCallback(\n    async (\n      filters: {\n        status?: string;\n        customerId?: string;\n        limit?: number;\n      } = {},\n    ) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true, error: null }));\n\n        const params = new URLSearchParams();\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined) {\n            params.append(key, String(value));\n          }\n        });\n\n        const data = await apiCall(`/accounts?${params.toString()}`);\n        setState((prev) => ({\n          ...prev,\n          accounts: data.accounts || [],\n          isLoading: false,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load accounts\",\n          isLoading: false,\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Load Invoices\n  const loadInvoices = useCallback(\n    async (\n      filters: {\n        status?: string;\n        customerId?: string;\n        accountId?: string;\n        dateFrom?: Date;\n        dateTo?: Date;\n        limit?: number;\n      } = {},\n    ) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const params = new URLSearchParams();\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined) {\n            params.append(key, value instanceof Date ? value.toISOString() : String(value));\n          }\n        });\n\n        const data = await apiCall(`/invoices?${params.toString()}`);\n        setState((prev) => ({\n          ...prev,\n          invoices: data.invoices || [],\n          isLoading: false,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load invoices\",\n          isLoading: false,\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Load Payments\n  const loadPayments = useCallback(\n    async (\n      filters: {\n        status?: string;\n        customerId?: string;\n        invoiceId?: string;\n        dateFrom?: Date;\n        dateTo?: Date;\n        limit?: number;\n      } = {},\n    ) => {\n      try {\n        const params = new URLSearchParams();\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined) {\n            params.append(key, value instanceof Date ? value.toISOString() : String(value));\n          }\n        });\n\n        const data = await apiCall(`/payments?${params.toString()}`);\n        setState((prev) => ({\n          ...prev,\n          payments: data.payments || [],\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load payments\",\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Load Statistics\n  const loadStats = useCallback(\n    async (timeRange: \"30d\" | \"90d\" | \"1y\" = \"30d\") => {\n      try {\n        const data = await apiCall(`/stats?range=${timeRange}`);\n        setState((prev) => ({\n          ...prev,\n          stats: data.stats || initialStats,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load statistics\",\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Process Payment\n  const processPayment = useCallback(\n    async (paymentData: {\n      invoiceId: string;\n      amount: number;\n      paymentMethodId: string;\n      gateway?: string;\n      metadata?: Record<string, any>;\n    }) => {\n      try {\n        setState((prev) => ({ ...prev, paymentProcessing: true }));\n\n        const data = await apiCall(\"/payments\", {\n          method: \"POST\",\n          body: JSON.stringify(paymentData),\n        });\n\n        const newPayment = data.payment;\n        setState((prev) => ({\n          ...prev,\n          payments: [newPayment, ...prev.payments],\n          paymentProcessing: false,\n        }));\n\n        if (newPayment.status === \"completed\") {\n          addNotification({\n            type: \"success\",\n            priority: \"medium\",\n            title: \"Payment Processed\",\n            message: `Payment of $${newPayment.amount} processed successfully`,\n            channel: [\"browser\"],\n            persistent: false,\n          });\n        } else if (newPayment.status === \"failed\") {\n          addNotification({\n            type: \"error\",\n            priority: \"high\",\n            title: \"Payment Failed\",\n            message: newPayment.failureReason || \"Payment processing failed\",\n            channel: [\"browser\"],\n            persistent: true,\n          });\n        }\n\n        return newPayment;\n      } catch (error) {\n        setState((prev) => ({ ...prev, paymentProcessing: false }));\n\n        const errorMessage = error instanceof Error ? error.message : \"Payment processing failed\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"high\",\n          title: \"Payment Error\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: true,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Create Invoice\n  const createInvoice = useCallback(\n    async (invoiceData: {\n      customerId: string;\n      accountId?: string;\n      dueDate: Date;\n      lineItems: Omit<InvoiceLineItem, \"id\">[];\n      notes?: string;\n      sendEmail?: boolean;\n    }) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const data = await apiCall(\"/invoices\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            ...invoiceData,\n            dueDate: invoiceData.dueDate.toISOString(),\n          }),\n        });\n\n        const newInvoice = data.invoice;\n        setState((prev) => ({\n          ...prev,\n          invoices: [newInvoice, ...prev.invoices],\n          isLoading: false,\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"medium\",\n          title: \"Invoice Created\",\n          message: `Invoice ${newInvoice.invoiceNumber} created successfully`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return newInvoice;\n      } catch (error) {\n        setState((prev) => ({ ...prev, isLoading: false }));\n\n        const errorMessage = error instanceof Error ? error.message : \"Failed to create invoice\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"high\",\n          title: \"Invoice Creation Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Update Invoice Status\n  const updateInvoiceStatus = useCallback(\n    async (invoiceId: string, status: Invoice[\"status\"], notes?: string) => {\n      try {\n        const data = await apiCall(`/invoices/${invoiceId}/status`, {\n          method: \"PUT\",\n          body: JSON.stringify({ status, notes }),\n        });\n\n        const updatedInvoice = data.invoice;\n        setState((prev) => ({\n          ...prev,\n          invoices: prev.invoices.map((inv) => (inv.id === invoiceId ? updatedInvoice : inv)),\n        }));\n\n        return updatedInvoice;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to update invoice\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Update Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Send Invoice\n  const sendInvoice = useCallback(\n    async (invoiceId: string, email?: string) => {\n      try {\n        await apiCall(`/invoices/${invoiceId}/send`, {\n          method: \"POST\",\n          body: JSON.stringify({ email }),\n        });\n\n        setState((prev) => ({\n          ...prev,\n          invoices: prev.invoices.map((inv) =>\n            inv.id === invoiceId ? { ...inv, status: \"sent\" as const } : inv,\n          ),\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"low\",\n          title: \"Invoice Sent\",\n          message: \"Invoice has been sent to customer\",\n          channel: [\"browser\"],\n          persistent: false,\n        });\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to send invoice\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Send Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Add Payment Method\n  const addPaymentMethod = useCallback(\n    async (\n      customerId: string,\n      paymentMethodData: {\n        type: PaymentMethod[\"type\"];\n        token: string; // From payment gateway\n        isDefault?: boolean;\n        billingAddress?: Address;\n      },\n    ) => {\n      try {\n        const data = await apiCall(\"/payment-methods\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            customerId,\n            ...paymentMethodData,\n          }),\n        });\n\n        const paymentMethod = data.paymentMethod;\n\n        addNotification({\n          type: \"success\",\n          priority: \"low\",\n          title: \"Payment Method Added\",\n          message: `${paymentMethod.type} ending in ${paymentMethod.lastFour} added successfully`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return paymentMethod;\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error ? error.message : \"Failed to add payment method\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Payment Method Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Refund Payment\n  const refundPayment = useCallback(\n    async (paymentId: string, amount: number, reason: string) => {\n      try {\n        const data = await apiCall(`/payments/${paymentId}/refund`, {\n          method: \"POST\",\n          body: JSON.stringify({ amount, reason }),\n        });\n\n        const refundedPayment = data.payment;\n        setState((prev) => ({\n          ...prev,\n          payments: prev.payments.map((payment) =>\n            payment.id === paymentId ? refundedPayment : payment,\n          ),\n        }));\n\n        addNotification({\n          type: \"info\",\n          priority: \"medium\",\n          title: \"Refund Processed\",\n          message: `Refund of $${amount} processed successfully`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return refundedPayment;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to process refund\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"high\",\n          title: \"Refund Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Retry Failed Payment\n  const retryPayment = useCallback(\n    async (paymentId: string) => {\n      try {\n        const data = await apiCall(`/payments/${paymentId}/retry`, {\n          method: \"POST\",\n        });\n\n        const retriedPayment = data.payment;\n        setState((prev) => ({\n          ...prev,\n          payments: prev.payments.map((payment) =>\n            payment.id === paymentId ? retriedPayment : payment,\n          ),\n        }));\n\n        return retriedPayment;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to retry payment\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Retry Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Initialize\n  useEffect(() => {\n    loadAccounts({ limit: 50 });\n    loadInvoices({ limit: 50 });\n    loadPayments({ limit: 50 });\n    loadStats();\n\n    if (enableRealtime) {\n      connectWebSocket();\n    }\n\n    // Set up polling for non-realtime updates\n    if (!enableRealtime && pollInterval > 0) {\n      pollIntervalRef.current = setInterval(() => {\n        loadStats();\n        loadInvoices({ limit: 10 });\n        loadPayments({ limit: 10 });\n      }, pollInterval);\n    }\n\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, [\n    loadAccounts,\n    loadInvoices,\n    loadPayments,\n    loadStats,\n    connectWebSocket,\n    enableRealtime,\n    pollInterval,\n  ]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // State\n    ...state,\n\n    // Actions\n    processPayment,\n    createInvoice,\n    updateInvoiceStatus,\n    sendInvoice,\n    addPaymentMethod,\n    refundPayment,\n    retryPayment,\n\n    // Data loaders\n    loadAccounts,\n    loadInvoices,\n    loadPayments,\n    loadStats,\n\n    // Connection management\n    connect: connectWebSocket,\n    disconnect: useCallback(() => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n    }, []),\n\n    // Utils\n    clearError: useCallback(() => {\n      setState((prev) => ({ ...prev, error: null }));\n    }, []),\n\n    selectAccount: useCallback((account: BillingAccount | null) => {\n      setState((prev) => ({ ...prev, selectedAccount: account }));\n    }, []),\n\n    // Computed values\n    overdueInvoices: state.invoices.filter((inv) => inv.status === \"overdue\"),\n    unpaidInvoices: state.invoices.filter((inv) => inv.status === \"sent\" && inv.amountDue > 0),\n    failedPayments: state.payments.filter((payment) => payment.status === \"failed\"),\n    pendingPayments: state.payments.filter((payment) => payment.status === \"pending\"),\n    recentPayments: state.payments.slice(0, 10),\n    totalOutstanding: state.invoices\n      .filter((inv) => [\"sent\", \"overdue\"].includes(inv.status))\n      .reduce((sum, inv) => sum + inv.amountDue, 0),\n  };\n}\n\nexport default useBilling;\n","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { useNotifications } from \"./useNotifications\";\n\nexport interface CommunicationChannel {\n  id: string;\n  name: string;\n  type: \"email\" | \"sms\" | \"push\" | \"websocket\" | \"webhook\";\n  status: \"active\" | \"inactive\" | \"error\";\n  config: Record<string, any>;\n  metadata?: Record<string, any>;\n}\n\nexport interface CommunicationTemplate {\n  id: string;\n  name: string;\n  channel: string;\n  subject?: string;\n  body: string;\n  variables: string[];\n  priority: \"low\" | \"medium\" | \"high\" | \"critical\";\n  category: string;\n}\n\nexport interface CommunicationMessage {\n  id: string;\n  templateId?: string;\n  channel: string;\n  recipient: string;\n  subject?: string;\n  body: string;\n  priority: \"low\" | \"medium\" | \"high\" | \"critical\";\n  status: \"pending\" | \"sent\" | \"delivered\" | \"failed\" | \"bounced\";\n  scheduledAt?: Date;\n  sentAt?: Date;\n  deliveredAt?: Date;\n  failureReason?: string;\n  metadata?: Record<string, any>;\n  tenantId?: string;\n}\n\nexport interface CommunicationStats {\n  totalSent: number;\n  totalDelivered: number;\n  totalFailed: number;\n  deliveryRate: number;\n  failureRate: number;\n  channelBreakdown: Record<\n    string,\n    {\n      sent: number;\n      delivered: number;\n      failed: number;\n      rate: number;\n    }\n  >;\n  recentActivity: CommunicationMessage[];\n}\n\ninterface UseCommunicationOptions {\n  apiEndpoint?: string;\n  websocketEndpoint?: string;\n  apiKey?: string;\n  tenantId?: string;\n  pollInterval?: number;\n  enableRealtime?: boolean;\n  maxRetries?: number;\n}\n\ninterface CommunicationState {\n  channels: CommunicationChannel[];\n  templates: CommunicationTemplate[];\n  messages: CommunicationMessage[];\n  stats: CommunicationStats | null;\n  isLoading: boolean;\n  error: string | null;\n  isConnected: boolean;\n}\n\nconst initialStats: CommunicationStats = {\n  totalSent: 0,\n  totalDelivered: 0,\n  totalFailed: 0,\n  deliveryRate: 0,\n  failureRate: 0,\n  channelBreakdown: {},\n  recentActivity: [],\n};\n\nconst initialState: CommunicationState = {\n  channels: [],\n  templates: [],\n  messages: [],\n  stats: initialStats,\n  isLoading: false,\n  error: null,\n  isConnected: false,\n};\n\nexport function useCommunication(options: UseCommunicationOptions = {}) {\n  const {\n    apiEndpoint = \"/api/communication\",\n    websocketEndpoint,\n    apiKey,\n    tenantId,\n    pollInterval = 30000,\n    enableRealtime = true,\n    maxRetries = 3,\n  } = options;\n\n  const [state, setState] = useState<CommunicationState>(initialState);\n  const websocketRef = useRef<WebSocket | null>(null);\n  const pollIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const retryCountRef = useRef(0);\n  const { notify } = useNotifications();\n\n  // API Helper\n  const apiCall = useCallback(\n    async (endpoint: string, options: RequestInit = {}) => {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n        ...(options.headers as Record<string, string>),\n      };\n\n      if (apiKey) {\n        headers[\"Authorization\"] = `Bearer ${apiKey}`;\n      }\n\n      if (tenantId) {\n        headers[\"X-Tenant-ID\"] = tenantId;\n      }\n\n      const response = await fetch(`${apiEndpoint}${endpoint}`, {\n        ...options,\n        headers,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      return response.json();\n    },\n    [apiEndpoint, apiKey, tenantId],\n  );\n\n  // WebSocket Connection\n  const connectWebSocket = useCallback(() => {\n    if (!websocketEndpoint || !enableRealtime) return;\n\n    try {\n      if (websocketRef.current?.readyState === WebSocket.OPEN) return;\n\n      const wsUrl = new URL(websocketEndpoint);\n      if (apiKey) wsUrl.searchParams.set(\"apiKey\", apiKey);\n      if (tenantId) wsUrl.searchParams.set(\"tenantId\", tenantId);\n\n      const ws = new WebSocket(wsUrl.toString());\n      websocketRef.current = ws;\n\n      ws.onopen = () => {\n        setState((prev) => ({ ...prev, isConnected: true, error: null }));\n        retryCountRef.current = 0;\n\n        notify.info(\"Communication System\", \"Real-time communication connected\", {\n          metadata: { priority: \"low\", channel: [\"browser\"] },\n        });\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n\n          switch (data.type) {\n            case \"message_status_update\":\n              setState((prev) => ({\n                ...prev,\n                messages: prev.messages.map((msg) => {\n                  if (msg.id !== data.messageId) {\n                    return msg;\n                  }\n\n                  const update: Partial<CommunicationMessage> = { status: data.status };\n\n                  if (data.deliveredAt) {\n                    update.deliveredAt = new Date(data.deliveredAt);\n                  }\n\n                  return { ...msg, ...update };\n                }),\n              }));\n              break;\n\n            case \"new_message\":\n              setState((prev) => ({\n                ...prev,\n                messages: [data.message, ...prev.messages],\n              }));\n              break;\n\n            case \"channel_status_update\":\n              setState((prev) => ({\n                ...prev,\n                channels: prev.channels.map((channel) =>\n                  channel.id === data.channelId ? { ...channel, status: data.status } : channel,\n                ),\n              }));\n              break;\n\n            case \"stats_update\":\n              setState((prev) => ({\n                ...prev,\n                stats: data.stats,\n              }));\n              break;\n          }\n        } catch (error) {\n          console.error(\"Failed to parse WebSocket message:\", error);\n        }\n      };\n\n      ws.onclose = () => {\n        setState((prev) => ({ ...prev, isConnected: false }));\n\n        // Reconnect with exponential backoff\n        if (retryCountRef.current < maxRetries) {\n          const delay = Math.min(1000 * Math.pow(2, retryCountRef.current), 30000);\n          setTimeout(() => {\n            retryCountRef.current++;\n            connectWebSocket();\n          }, delay);\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n        setState((prev) => ({\n          ...prev,\n          isConnected: false,\n          error: \"WebSocket connection failed\",\n        }));\n      };\n    } catch (error) {\n      console.error(\"Failed to establish WebSocket connection:\", error);\n      setState((prev) => ({\n        ...prev,\n        isConnected: false,\n        error: error instanceof Error ? error.message : \"Connection failed\",\n      }));\n    }\n  }, [websocketEndpoint, enableRealtime, apiKey, tenantId, maxRetries, notify]);\n\n  // Load Channels\n  const loadChannels = useCallback(async () => {\n    try {\n      setState((prev) => ({ ...prev, isLoading: true, error: null }));\n      const data = await apiCall(\"/channels\");\n      setState((prev) => ({\n        ...prev,\n        channels: data.channels || [],\n        isLoading: false,\n      }));\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        error: error instanceof Error ? error.message : \"Failed to load channels\",\n        isLoading: false,\n      }));\n    }\n  }, [apiCall]);\n\n  // Load Templates\n  const loadTemplates = useCallback(async () => {\n    try {\n      const data = await apiCall(\"/templates\");\n      setState((prev) => ({\n        ...prev,\n        templates: data.templates || [],\n      }));\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        error: error instanceof Error ? error.message : \"Failed to load templates\",\n      }));\n    }\n  }, [apiCall]);\n\n  // Load Messages\n  const loadMessages = useCallback(\n    async (\n      filters: {\n        limit?: number;\n        offset?: number;\n        status?: string;\n        channel?: string;\n        priority?: string;\n        dateFrom?: Date;\n        dateTo?: Date;\n      } = {},\n    ) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const params = new URLSearchParams();\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined) {\n            params.append(key, value instanceof Date ? value.toISOString() : String(value));\n          }\n        });\n\n        const data = await apiCall(`/messages?${params.toString()}`);\n        setState((prev) => ({\n          ...prev,\n          messages: data.messages || [],\n          isLoading: false,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load messages\",\n          isLoading: false,\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Load Statistics\n  const loadStats = useCallback(\n    async (timeRange: \"24h\" | \"7d\" | \"30d\" | \"90d\" = \"24h\") => {\n      try {\n        const data = await apiCall(`/stats?range=${timeRange}`);\n        setState((prev) => ({\n          ...prev,\n          stats: data.stats || initialStats,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load statistics\",\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Send Message\n  const sendMessage = useCallback(\n    async (messageData: {\n      templateId?: string;\n      channel: string;\n      recipient: string;\n      subject?: string;\n      body?: string;\n      variables?: Record<string, any>;\n      priority?: \"low\" | \"medium\" | \"high\" | \"critical\";\n      scheduledAt?: Date;\n      metadata?: Record<string, any>;\n    }) => {\n      try {\n        const data = await apiCall(\"/messages\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            ...messageData,\n            scheduledAt: messageData.scheduledAt?.toISOString(),\n          }),\n        });\n\n        const newMessage = data.message;\n        setState((prev) => ({\n          ...prev,\n          messages: [newMessage, ...prev.messages],\n        }));\n\n        notify.success(\n          \"Message Sent\",\n          `Message sent to ${messageData.recipient} via ${messageData.channel}`,\n          {\n            metadata: { priority: \"medium\", channel: [\"browser\"] },\n          },\n        );\n\n        return newMessage;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to send message\";\n\n        notify.error(\"Message Failed\", `Failed to send message: ${errorMessage}`, {\n          metadata: { priority: \"high\", channel: [\"browser\"] },\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, notify],\n  );\n\n  // Bulk Send Messages\n  const sendBulkMessages = useCallback(\n    async (\n      messages: Array<{\n        templateId?: string;\n        channel: string;\n        recipient: string;\n        subject?: string;\n        body?: string;\n        variables?: Record<string, any>;\n        priority?: \"low\" | \"medium\" | \"high\" | \"critical\";\n        scheduledAt?: Date;\n        metadata?: Record<string, any>;\n      }>,\n    ) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const data = await apiCall(\"/messages/bulk\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            messages: messages.map((msg) => ({\n              ...msg,\n              scheduledAt: msg.scheduledAt?.toISOString(),\n            })),\n          }),\n        });\n\n        const newMessages = data.messages || [];\n        setState((prev) => ({\n          ...prev,\n          messages: [...newMessages, ...prev.messages],\n          isLoading: false,\n        }));\n\n        notify.success(\"Bulk Messages Sent\", `${newMessages.length} messages queued for delivery`, {\n          metadata: { priority: \"medium\", channel: [\"browser\"] },\n        });\n\n        return newMessages;\n      } catch (error) {\n        setState((prev) => ({ ...prev, isLoading: false }));\n\n        const errorMessage =\n          error instanceof Error ? error.message : \"Failed to send bulk messages\";\n\n        notify.error(\"Bulk Send Failed\", `Failed to send bulk messages: ${errorMessage}`, {\n          metadata: { priority: \"high\", channel: [\"browser\"] },\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, notify],\n  );\n\n  // Create Template\n  const createTemplate = useCallback(\n    async (templateData: Omit<CommunicationTemplate, \"id\">) => {\n      try {\n        const data = await apiCall(\"/templates\", {\n          method: \"POST\",\n          body: JSON.stringify(templateData),\n        });\n\n        const newTemplate = data.template;\n        setState((prev) => ({\n          ...prev,\n          templates: [newTemplate, ...prev.templates],\n        }));\n\n        return newTemplate;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to create template\";\n        setState((prev) => ({\n          ...prev,\n          error: errorMessage,\n        }));\n        throw error;\n      }\n    },\n    [apiCall],\n  );\n\n  // Update Template\n  const updateTemplate = useCallback(\n    async (id: string, templateData: Partial<CommunicationTemplate>) => {\n      try {\n        const data = await apiCall(`/templates/${id}`, {\n          method: \"PUT\",\n          body: JSON.stringify(templateData),\n        });\n\n        const updatedTemplate = data.template;\n        setState((prev) => ({\n          ...prev,\n          templates: prev.templates.map((template) =>\n            template.id === id ? updatedTemplate : template,\n          ),\n        }));\n\n        return updatedTemplate;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to update template\";\n        setState((prev) => ({\n          ...prev,\n          error: errorMessage,\n        }));\n        throw error;\n      }\n    },\n    [apiCall],\n  );\n\n  // Delete Template\n  const deleteTemplate = useCallback(\n    async (id: string) => {\n      try {\n        await apiCall(`/templates/${id}`, {\n          method: \"DELETE\",\n        });\n\n        setState((prev) => ({\n          ...prev,\n          templates: prev.templates.filter((template) => template.id !== id),\n        }));\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to delete template\";\n        setState((prev) => ({\n          ...prev,\n          error: errorMessage,\n        }));\n        throw error;\n      }\n    },\n    [apiCall],\n  );\n\n  // Test Channel\n  const testChannel = useCallback(\n    async (channelId: string, testData: Record<string, any>) => {\n      try {\n        const data = await apiCall(`/channels/${channelId}/test`, {\n          method: \"POST\",\n          body: JSON.stringify(testData),\n        });\n\n        const notifier = data.success ? notify.success : notify.error;\n        notifier(\n          \"Channel Test\",\n          data.message || `Channel ${channelId} test ${data.success ? \"passed\" : \"failed\"}`,\n          {\n            metadata: { priority: \"medium\", channel: [\"browser\"] },\n          },\n        );\n\n        return data;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Channel test failed\";\n\n        notify.error(\"Channel Test Failed\", errorMessage, {\n          metadata: { priority: \"high\", channel: [\"browser\"] },\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, notify],\n  );\n\n  // Cancel Message\n  const cancelMessage = useCallback(\n    async (messageId: string) => {\n      try {\n        await apiCall(`/messages/${messageId}/cancel`, {\n          method: \"POST\",\n        });\n\n        setState((prev) => ({\n          ...prev,\n          messages: prev.messages.map((msg) =>\n            msg.id === messageId\n              ? { ...msg, status: \"failed\", failureReason: \"Cancelled by user\" }\n              : msg,\n          ),\n        }));\n\n        notify.info(\"Message Cancelled\", \"Message has been cancelled successfully\", {\n          metadata: { priority: \"low\", channel: [\"browser\"] },\n        });\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to cancel message\";\n\n        notify.error(\"Cancel Failed\", errorMessage, {\n          metadata: { priority: \"medium\", channel: [\"browser\"] },\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, notify],\n  );\n\n  // Retry Failed Message\n  const retryMessage = useCallback(\n    async (messageId: string) => {\n      try {\n        const data = await apiCall(`/messages/${messageId}/retry`, {\n          method: \"POST\",\n        });\n\n        const retriedMessage = data.message;\n        setState((prev) => ({\n          ...prev,\n          messages: prev.messages.map((msg) => (msg.id === messageId ? retriedMessage : msg)),\n        }));\n\n        notify.info(\"Message Retried\", \"Message has been queued for retry\", {\n          metadata: { priority: \"low\", channel: [\"browser\"] },\n        });\n\n        return retriedMessage;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to retry message\";\n\n        notify.error(\"Retry Failed\", errorMessage, {\n          metadata: { priority: \"medium\", channel: [\"browser\"] },\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, notify],\n  );\n\n  // Initialize\n  useEffect(() => {\n    loadChannels();\n    loadTemplates();\n    loadMessages({ limit: 50 });\n    loadStats();\n\n    if (enableRealtime) {\n      connectWebSocket();\n    }\n\n    // Set up polling for non-realtime updates\n    if (!enableRealtime && pollInterval > 0) {\n      pollIntervalRef.current = setInterval(() => {\n        loadStats();\n        loadMessages({ limit: 10 }); // Get recent messages\n      }, pollInterval);\n    }\n\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, [\n    loadChannels,\n    loadTemplates,\n    loadMessages,\n    loadStats,\n    connectWebSocket,\n    enableRealtime,\n    pollInterval,\n  ]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // State\n    ...state,\n\n    // Actions\n    sendMessage,\n    sendBulkMessages,\n    createTemplate,\n    updateTemplate,\n    deleteTemplate,\n    testChannel,\n    cancelMessage,\n    retryMessage,\n\n    // Data loaders\n    loadChannels,\n    loadTemplates,\n    loadMessages,\n    loadStats,\n\n    // Connection management\n    connect: connectWebSocket,\n    disconnect: useCallback(() => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n    }, []),\n\n    // Utils\n    clearError: useCallback(() => {\n      setState((prev) => ({ ...prev, error: null }));\n    }, []),\n\n    // Computed values\n    activeChannels: state.channels.filter((ch) => ch.status === \"active\"),\n    failedMessages: state.messages.filter((msg) => msg.status === \"failed\"),\n    pendingMessages: state.messages.filter((msg) => msg.status === \"pending\"),\n    recentMessages: state.messages.slice(0, 10),\n  };\n}\n\nexport default useCommunication;\n","/**\n * ISP Business Operations Interface\n * Centralized business logic for ISP core operations\n *\n * ELIMINATES DUPLICATION across Admin, Customer, Reseller, Management, and Technician portals\n */\n\nimport { ApiClient } from \"../api/client\";\nimport { ISPError } from \"../utils/errorUtils\";\n\n// ===========================\n// Core Business Types\n// ===========================\n\nexport interface DateRange {\n  startDate: Date;\n  endDate: Date;\n}\n\nexport interface CustomerProfile {\n  id: string;\n  accountNumber: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  status: \"active\" | \"suspended\" | \"cancelled\" | \"pending\";\n  billingAddress: Address;\n  serviceAddress: Address;\n  currentPlan: ServicePlan;\n  installationDate: Date;\n  lastPaymentDate?: Date;\n  accountBalance: number;\n  creditLimit: number;\n  preferences: CustomerPreferences;\n}\n\nexport interface Address {\n  street: string;\n  city: string;\n  state: string;\n  zipCode: string;\n  country: string;\n  coordinates?: { lat: number; lng: number };\n}\n\nexport interface ServicePlan {\n  id: string;\n  name: string;\n  description: string;\n  category: \"residential\" | \"business\" | \"enterprise\";\n  downloadSpeed: number; // Mbps\n  uploadSpeed: number; // Mbps\n  dataLimit?: number; // GB, null for unlimited\n  monthlyPrice: number;\n  setupFee: number;\n  contractTerm: number; // months\n  features: string[];\n  isActive: boolean;\n}\n\nexport interface CustomerPreferences {\n  preferredContactMethod: \"email\" | \"phone\" | \"sms\";\n  billingNotifications: boolean;\n  serviceNotifications: boolean;\n  marketingOptIn: boolean;\n  paperlessBilling: boolean;\n  autoPayEnabled: boolean;\n}\n\nexport interface UsageData {\n  id: string;\n  customerId: string;\n  date: Date;\n  downloadGB: number;\n  uploadGB: number;\n  totalGB: number;\n  peakSpeed: number;\n  averageSpeed: number;\n  uptime: number; // percentage\n}\n\nexport interface Invoice {\n  id: string;\n  invoiceNumber: string;\n  customerId: string;\n  issueDate: Date;\n  dueDate: Date;\n  amount: number;\n  status: \"draft\" | \"sent\" | \"paid\" | \"overdue\" | \"cancelled\";\n  lineItems: InvoiceLineItem[];\n  paidDate?: Date;\n  paymentMethod?: string;\n}\n\nexport interface InvoiceLineItem {\n  id: string;\n  description: string;\n  quantity: number;\n  unitPrice: number;\n  amount: number;\n  serviceId?: string;\n  period?: DateRange;\n}\n\nexport interface ServiceStatus {\n  customerId: string;\n  status: \"active\" | \"inactive\" | \"maintenance\" | \"suspended\";\n  uptime: number; // percentage\n  lastOutage?: Date;\n  currentSpeed: {\n    download: number;\n    upload: number;\n  };\n  signalStrength: number;\n  deviceStatus: \"online\" | \"offline\" | \"error\";\n  maintenanceScheduled?: Date;\n}\n\nexport interface MaintenanceRequest {\n  customerId: string;\n  type: \"scheduled\" | \"emergency\" | \"upgrade\";\n  priority: \"low\" | \"medium\" | \"high\" | \"critical\";\n  description: string;\n  scheduledStart: Date;\n  estimatedDuration: number; // minutes\n  affectedServices?: string[];\n  technicianId?: string;\n}\n\nexport interface MaintenanceWindow {\n  id: string;\n  customerId: string;\n  type: MaintenanceRequest[\"type\"];\n  status: \"scheduled\" | \"in_progress\" | \"completed\" | \"cancelled\";\n  scheduledStart: Date;\n  scheduledEnd: Date;\n  actualStart?: Date;\n  actualEnd?: Date;\n  description: string;\n  technicianId: string;\n  notes?: string;\n  affectedCustomers: string[];\n}\n\nexport interface DiagnosticsResult {\n  customerId: string;\n  timestamp: Date;\n  overall: \"healthy\" | \"warning\" | \"error\";\n  tests: DiagnosticTest[];\n  recommendations: string[];\n  automatedFixes: AutomatedFix[];\n}\n\nexport interface DiagnosticTest {\n  name: string;\n  status: \"pass\" | \"warning\" | \"fail\";\n  value?: string | number;\n  expectedValue?: string | number;\n  description: string;\n}\n\nexport interface AutomatedFix {\n  id: string;\n  description: string;\n  applied: boolean;\n  success?: boolean;\n  error?: string;\n}\n\nexport interface NetworkStatus {\n  overall: \"healthy\" | \"degraded\" | \"outage\";\n  uptime: number;\n  activeDevices: number;\n  totalDevices: number;\n  bandwidth: {\n    total: number;\n    used: number;\n    percentage: number;\n  };\n  alerts: NetworkAlert[];\n  regions: RegionStatus[];\n}\n\nexport interface RegionStatus {\n  id: string;\n  name: string;\n  status: \"healthy\" | \"degraded\" | \"outage\";\n  customers: number;\n  activeCustomers: number;\n  averageSpeed: number;\n}\n\nexport interface NetworkAlert {\n  id: string;\n  severity: \"info\" | \"warning\" | \"error\" | \"critical\";\n  type: \"outage\" | \"performance\" | \"maintenance\" | \"security\";\n  message: string;\n  timestamp: Date;\n  region?: string;\n  affectedCustomers?: number;\n  resolved: boolean;\n  resolvedAt?: Date;\n}\n\nexport interface DeviceStatus {\n  id: string;\n  type: \"router\" | \"switch\" | \"access_point\" | \"modem\" | \"tower\";\n  name: string;\n  location: string;\n  status: \"online\" | \"offline\" | \"warning\" | \"error\";\n  uptime: number;\n  lastSeen: Date;\n  version: string;\n  temperature?: number;\n  cpuUsage?: number;\n  memoryUsage?: number;\n  connectedClients?: number;\n  throughput: {\n    in: number;\n    out: number;\n  };\n}\n\nexport interface DeviceConfig {\n  name?: string;\n  settings: Record<string, any>;\n  firmware?: {\n    version: string;\n    autoUpdate: boolean;\n  };\n  networking?: {\n    ip: string;\n    subnet: string;\n    gateway: string;\n    dns: string[];\n  };\n  wifi?: {\n    ssid: string;\n    password: string;\n    channel: number;\n    bandwidth: \"20MHz\" | \"40MHz\" | \"80MHz\" | \"160MHz\";\n  };\n}\n\nexport interface RevenueParams {\n  dateRange: DateRange;\n  resellerId?: string;\n  region?: string;\n  serviceType?: string;\n  includeProjections?: boolean;\n}\n\nexport interface RevenueData {\n  totalRevenue: number;\n  recurringRevenue: number;\n  oneTimeRevenue: number;\n  projectedRevenue?: number;\n  breakdown: {\n    byServiceType: Record<string, number>;\n    byRegion: Record<string, number>;\n    byCustomerType: Record<string, number>;\n  };\n  growth: {\n    monthOverMonth: number;\n    yearOverYear: number;\n  };\n}\n\nexport interface PaymentRequest {\n  customerId: string;\n  amount: number;\n  currency: string;\n  paymentMethodId: string;\n  invoiceId?: string;\n  description?: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface PaymentResult {\n  id: string;\n  status: \"pending\" | \"completed\" | \"failed\" | \"cancelled\";\n  amount: number;\n  transactionId?: string;\n  failureReason?: string;\n  processedAt?: Date;\n  fees?: {\n    processing: number;\n    gateway: number;\n  };\n}\n\nexport interface Commission {\n  id: string;\n  resellerId: string;\n  customerId: string;\n  period: DateRange;\n  baseAmount: number;\n  commissionRate: number;\n  commissionAmount: number;\n  bonuses: CommissionBonus[];\n  totalAmount: number;\n  status: \"calculated\" | \"approved\" | \"paid\" | \"disputed\";\n  paidDate?: Date;\n}\n\nexport interface CommissionBonus {\n  type: \"new_customer\" | \"retention\" | \"upgrade\" | \"volume\" | \"performance\";\n  amount: number;\n  description: string;\n}\n\n// ===========================\n// ISP Business Operations Interface\n// ===========================\n\nexport interface ISPBusinessOperations {\n  // Customer Management (Used in: Admin, Customer, Reseller, Management)\n  customerService: {\n    getCustomerProfile(customerId: string): Promise<CustomerProfile>;\n    updateCustomerProfile(\n      customerId: string,\n      updates: Partial<CustomerProfile>,\n    ): Promise<CustomerProfile>;\n    updateServicePlan(customerId: string, planId: string): Promise<void>;\n    getUsageHistory(customerId: string, period: DateRange): Promise<UsageData[]>;\n    getBillingHistory(\n      customerId: string,\n      filters?: { limit?: number; status?: string },\n    ): Promise<Invoice[]>;\n    suspendService(customerId: string, reason: string): Promise<void>;\n    reactivateService(customerId: string): Promise<void>;\n    calculateUsageCost(customerId: string, period: DateRange): Promise<number>;\n  };\n\n  // Service Management (Used in: Admin, Customer, Technician)\n  serviceOperations: {\n    getServiceStatus(customerId: string): Promise<ServiceStatus>;\n    scheduleMaintenanceWindow(params: MaintenanceRequest): Promise<MaintenanceWindow>;\n    troubleshootConnection(customerId: string): Promise<DiagnosticsResult>;\n    applyAutomatedFix(customerId: string, fixId: string): Promise<boolean>;\n    getMaintenanceHistory(customerId: string): Promise<MaintenanceWindow[]>;\n    getServicePlans(filters?: { category?: string; active?: boolean }): Promise<ServicePlan[]>;\n    upgradeService(customerId: string, newPlanId: string): Promise<void>;\n  };\n\n  // Network Operations (Used in: Admin, Technician, Management)\n  networkOperations: {\n    getNetworkHealth(): Promise<NetworkStatus>;\n    getRegionStatus(regionId: string): Promise<RegionStatus>;\n    getDeviceStatus(deviceId: string): Promise<DeviceStatus>;\n    configureDevice(deviceId: string, config: DeviceConfig): Promise<void>;\n    restartDevice(deviceId: string): Promise<boolean>;\n    getNetworkAlerts(filters?: { severity?: string; resolved?: boolean }): Promise<NetworkAlert[]>;\n    resolveAlert(alertId: string, notes?: string): Promise<void>;\n    getNetworkMetrics(period: DateRange): Promise<Record<string, any>>;\n  };\n\n  // Billing Operations (Used in: Admin, Customer, Reseller, Management)\n  billingOperations: {\n    calculateRevenue(params: RevenueParams): Promise<RevenueData>;\n    processPayment(paymentRequest: PaymentRequest): Promise<PaymentResult>;\n    generateCommissions(resellerId: string, period: DateRange): Promise<Commission[]>;\n    createInvoice(customerId: string, lineItems: Omit<InvoiceLineItem, \"id\">[]): Promise<Invoice>;\n    sendInvoice(invoiceId: string): Promise<void>;\n    applyPayment(invoiceId: string, paymentId: string): Promise<void>;\n    generateStatement(customerId: string, period: DateRange): Promise<any>;\n    calculateCommissionTiers(resellerId: string): Promise<any>;\n  };\n}\n\n// ===========================\n// Implementation\n// ===========================\n\nexport class ISPBusinessService implements ISPBusinessOperations {\n  constructor(private apiClient: ApiClient) {}\n\n  // Customer Service Operations\n  customerService = {\n    apiClient: this.apiClient,\n    async getCustomerProfile(customerId: string): Promise<CustomerProfile> {\n      try {\n        const response = await this.apiClient.request<{\n          data: CustomerProfile;\n        }>(`/customers/${customerId}/profile`);\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Customer profile not found\",\n            category: \"business\",\n            severity: \"medium\",\n            context: `customerId: ${customerId}`,\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get customer profile: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async updateCustomerProfile(\n      customerId: string,\n      updates: Partial<CustomerProfile>,\n    ): Promise<CustomerProfile> {\n      try {\n        const response = await this.apiClient.request<{\n          data: CustomerProfile;\n        }>(`/customers/${customerId}/profile`, {\n          method: \"PUT\",\n          body: JSON.stringify(updates),\n        });\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Failed to update customer profile\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to update customer profile: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, updates },\n        });\n      }\n    },\n\n    async updateServicePlan(customerId: string, planId: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/customers/${customerId}/service-plan`, {\n          method: \"PUT\",\n          body: JSON.stringify({ planId }),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to update service plan: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `customerId: ${customerId}, planId: ${planId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getUsageHistory(customerId: string, period: DateRange): Promise<UsageData[]> {\n      try {\n        const response = await this.apiClient.request<{ data: UsageData[] }>(\n          `/customers/${customerId}/usage`,\n          {\n            params: {\n              startDate: period.startDate.toISOString(),\n              endDate: period.endDate.toISOString(),\n            },\n          },\n        );\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get usage history: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, period },\n        });\n      }\n    },\n\n    async getBillingHistory(\n      customerId: string,\n      filters: { limit?: number; status?: string } = {},\n    ): Promise<Invoice[]> {\n      try {\n        const response = await this.apiClient.request<{ data: Invoice[] }>(\n          `/customers/${customerId}/invoices`,\n          {\n            params: filters,\n          },\n        );\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get billing history: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, filters },\n        });\n      }\n    },\n\n    async suspendService(customerId: string, reason: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/customers/${customerId}/service/suspend`, {\n          method: \"POST\",\n          body: JSON.stringify({ reason }),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to suspend service: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `customerId: ${customerId}, reason: ${reason}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async reactivateService(customerId: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/customers/${customerId}/service/reactivate`, {\n          method: \"POST\",\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to reactivate service: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async calculateUsageCost(customerId: string, period: DateRange): Promise<number> {\n      try {\n        const response = await this.apiClient.request<{\n          data: { cost: number };\n        }>(`/customers/${customerId}/usage/cost`, {\n          params: {\n            startDate: period.startDate.toISOString(),\n            endDate: period.endDate.toISOString(),\n          },\n        });\n        return response.data?.cost || 0;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to calculate usage cost: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, period },\n        });\n      }\n    },\n  };\n\n  // Service Operations\n  serviceOperations = {\n    apiClient: this.apiClient,\n    async getServiceStatus(customerId: string): Promise<ServiceStatus> {\n      try {\n        const response = await this.apiClient.request<{ data: ServiceStatus }>(\n          `/customers/${customerId}/service/status`,\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Service status not found\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get service status: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async scheduleMaintenanceWindow(params: MaintenanceRequest): Promise<MaintenanceWindow> {\n      try {\n        const response = await this.apiClient.request<{\n          data: MaintenanceWindow;\n        }>(\"/maintenance/schedule\", {\n          method: \"POST\",\n          body: JSON.stringify(params),\n        });\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Failed to schedule maintenance\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to schedule maintenance: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          technicalDetails: { originalError: error, params },\n        });\n      }\n    },\n\n    async troubleshootConnection(customerId: string): Promise<DiagnosticsResult> {\n      try {\n        const response = await this.apiClient.request<{\n          data: DiagnosticsResult;\n        }>(`/customers/${customerId}/diagnostics`, {\n          method: \"POST\",\n        });\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Diagnostics failed to run\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Connection troubleshooting failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async applyAutomatedFix(customerId: string, fixId: string): Promise<boolean> {\n      try {\n        const response = await this.apiClient.request<{\n          data: { success: boolean };\n        }>(`/customers/${customerId}/diagnostics/fix/${fixId}`, {\n          method: \"POST\",\n        });\n        return response.data?.success || false;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to apply automated fix: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}, fixId: ${fixId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getMaintenanceHistory(customerId: string): Promise<MaintenanceWindow[]> {\n      try {\n        const response = await this.apiClient.request<{\n          data: MaintenanceWindow[];\n        }>(`/customers/${customerId}/maintenance/history`);\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get maintenance history: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getServicePlans(\n      filters: { category?: string; active?: boolean } = {},\n    ): Promise<ServicePlan[]> {\n      try {\n        const response = await this.apiClient.request<{ data: ServicePlan[] }>(\"/service-plans\", {\n          params: filters,\n        });\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get service plans: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          technicalDetails: { originalError: error, filters },\n        });\n      }\n    },\n\n    async upgradeService(customerId: string, newPlanId: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/customers/${customerId}/service/upgrade`, {\n          method: \"POST\",\n          body: JSON.stringify({ planId: newPlanId }),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Service upgrade failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `customerId: ${customerId}, newPlanId: ${newPlanId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n  };\n\n  // Network Operations\n  networkOperations = {\n    apiClient: this.apiClient,\n    async getNetworkHealth(): Promise<NetworkStatus> {\n      try {\n        const response = await this.apiClient.request<{ data: NetworkStatus }>(\"/network/health\");\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Network health data not available\",\n            category: \"system\",\n            severity: \"high\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get network health: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"system\",\n          severity: \"high\",\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getRegionStatus(regionId: string): Promise<RegionStatus> {\n      try {\n        const response = await this.apiClient.request<{ data: RegionStatus }>(\n          `/network/regions/${regionId}/status`,\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Region status not found\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get region status: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `regionId: ${regionId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getDeviceStatus(deviceId: string): Promise<DeviceStatus> {\n      try {\n        const response = await this.apiClient.request<{ data: DeviceStatus }>(\n          `/network/devices/${deviceId}/status`,\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Device status not found\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get device status: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `deviceId: ${deviceId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async configureDevice(deviceId: string, config: DeviceConfig): Promise<void> {\n      try {\n        await this.apiClient.request(`/network/devices/${deviceId}/configure`, {\n          method: \"POST\",\n          body: JSON.stringify(config),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Device configuration failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `deviceId: ${deviceId}`,\n          technicalDetails: { originalError: error, config },\n        });\n      }\n    },\n\n    async restartDevice(deviceId: string): Promise<boolean> {\n      try {\n        const response = await this.apiClient.request<{\n          data: { success: boolean };\n        }>(`/network/devices/${deviceId}/restart`, {\n          method: \"POST\",\n        });\n        return response.data?.success || false;\n      } catch (error) {\n        throw new ISPError({\n          message: `Device restart failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `deviceId: ${deviceId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async getNetworkAlerts(\n      filters: { severity?: string; resolved?: boolean } = {},\n    ): Promise<NetworkAlert[]> {\n      try {\n        const response = await this.apiClient.request<{ data: NetworkAlert[] }>(\"/network/alerts\", {\n          params: filters,\n        });\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get network alerts: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"system\",\n          severity: \"medium\",\n          technicalDetails: { originalError: error, filters },\n        });\n      }\n    },\n\n    async resolveAlert(alertId: string, notes?: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/network/alerts/${alertId}/resolve`, {\n          method: \"POST\",\n          body: JSON.stringify({ notes }),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to resolve alert: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `alertId: ${alertId}`,\n          technicalDetails: { originalError: error, notes },\n        });\n      }\n    },\n\n    async getNetworkMetrics(period: DateRange): Promise<Record<string, any>> {\n      try {\n        const response = await this.apiClient.request<{\n          data: Record<string, any>;\n        }>(\"/network/metrics\", {\n          params: {\n            startDate: period.startDate.toISOString(),\n            endDate: period.endDate.toISOString(),\n          },\n        });\n        return response.data || {};\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to get network metrics: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"system\",\n          severity: \"medium\",\n          technicalDetails: { originalError: error, period },\n        });\n      }\n    },\n  };\n\n  // Billing Operations\n  billingOperations = {\n    apiClient: this.apiClient,\n    async calculateRevenue(params: RevenueParams): Promise<RevenueData> {\n      try {\n        const response = await this.apiClient.request<{ data: RevenueData }>(\n          \"/billing/revenue/calculate\",\n          {\n            method: \"POST\",\n            body: JSON.stringify(params),\n          },\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Revenue calculation failed\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Revenue calculation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          technicalDetails: { originalError: error, params },\n        });\n      }\n    },\n\n    async processPayment(paymentRequest: PaymentRequest): Promise<PaymentResult> {\n      try {\n        const response = await this.apiClient.request<{ data: PaymentResult }>(\n          \"/billing/payments/process\",\n          {\n            method: \"POST\",\n            body: JSON.stringify(paymentRequest),\n          },\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Payment processing failed\",\n            category: \"business\",\n            severity: \"high\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Payment processing failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          technicalDetails: {\n            originalError: error,\n            paymentRequest: {\n              ...paymentRequest,\n              paymentMethodId: \"[REDACTED]\",\n            },\n          },\n        });\n      }\n    },\n\n    async generateCommissions(resellerId: string, period: DateRange): Promise<Commission[]> {\n      try {\n        const response = await this.apiClient.request<{ data: Commission[] }>(\n          \"/billing/commissions/generate\",\n          {\n            method: \"POST\",\n            body: JSON.stringify({\n              resellerId,\n              startDate: period.startDate.toISOString(),\n              endDate: period.endDate.toISOString(),\n            }),\n          },\n        );\n        return response.data || [];\n      } catch (error) {\n        throw new ISPError({\n          message: `Commission generation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `resellerId: ${resellerId}`,\n          technicalDetails: { originalError: error, period },\n        });\n      }\n    },\n\n    async createInvoice(\n      customerId: string,\n      lineItems: Omit<InvoiceLineItem, \"id\">[],\n    ): Promise<Invoice> {\n      try {\n        const response = await this.apiClient.request<{ data: Invoice }>(\n          \"/billing/invoices/create\",\n          {\n            method: \"POST\",\n            body: JSON.stringify({ customerId, lineItems }),\n          },\n        );\n        if (!response.data) {\n          throw new ISPError({\n            message: \"Invoice creation failed\",\n            category: \"business\",\n            severity: \"medium\",\n          });\n        }\n        return response.data;\n      } catch (error) {\n        throw new ISPError({\n          message: `Invoice creation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, lineItems },\n        });\n      }\n    },\n\n    async sendInvoice(invoiceId: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/billing/invoices/${invoiceId}/send`, {\n          method: \"POST\",\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to send invoice: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `invoiceId: ${invoiceId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async applyPayment(invoiceId: string, paymentId: string): Promise<void> {\n      try {\n        await this.apiClient.request(`/billing/invoices/${invoiceId}/apply-payment`, {\n          method: \"POST\",\n          body: JSON.stringify({ paymentId }),\n        });\n      } catch (error) {\n        throw new ISPError({\n          message: `Failed to apply payment to invoice: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"high\",\n          context: `invoiceId: ${invoiceId}, paymentId: ${paymentId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n\n    async generateStatement(customerId: string, period: DateRange): Promise<any> {\n      try {\n        const response = await this.apiClient.request<{ data: any }>(\n          `/billing/customers/${customerId}/statement`,\n          {\n            params: {\n              startDate: period.startDate.toISOString(),\n              endDate: period.endDate.toISOString(),\n            },\n          },\n        );\n        return response.data || {};\n      } catch (error) {\n        throw new ISPError({\n          message: `Statement generation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `customerId: ${customerId}`,\n          technicalDetails: { originalError: error, period },\n        });\n      }\n    },\n\n    async calculateCommissionTiers(resellerId: string): Promise<any> {\n      try {\n        const response = await this.apiClient.request<{ data: any }>(\n          `/billing/resellers/${resellerId}/commission-tiers`,\n        );\n        return response.data || {};\n      } catch (error) {\n        throw new ISPError({\n          message: `Commission tier calculation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          category: \"business\",\n          severity: \"medium\",\n          context: `resellerId: ${resellerId}`,\n          technicalDetails: { originalError: error },\n        });\n      }\n    },\n  };\n}\n\n// ===========================\n// Factory Function\n// ===========================\n\n/**\n * Creates a new ISP Business Operations service instance\n */\nexport function createISPBusinessService(apiClient: ApiClient): ISPBusinessOperations {\n  return new ISPBusinessService(apiClient);\n}\n\n// ===========================\n// Hook for React Components\n// ===========================\n\nexport function useISPBusiness(apiClient?: ApiClient): ISPBusinessOperations {\n  // This will be enhanced with React hooks when integrated\n  if (!apiClient) {\n    throw new ISPError({\n      message: \"API client is required for ISP business operations\",\n      category: \"system\",\n      severity: \"high\",\n    });\n  }\n  return createISPBusinessService(apiClient);\n}\n","/**\n * ISP Business Operations Hook\n * React hook for accessing centralized ISP business logic across all portals\n *\n * ELIMINATES DUPLICATION - Single source of truth for business operations\n */\n\nimport { useMemo, useCallback } from \"react\";\nimport { useApiClient } from \"./useApiClient\";\nimport type { ApiClient } from \"../api/client\";\nimport { createISPBusinessService, type ISPBusinessOperations } from \"../business/isp-operations\";\nimport type {\n  CustomerProfile,\n  ServiceStatus,\n  NetworkStatus,\n  RevenueData,\n  UsageData,\n  Invoice,\n  ServicePlan,\n  MaintenanceWindow,\n  DiagnosticsResult,\n  DeviceStatus,\n  PaymentResult,\n  Commission,\n  DateRange,\n  MaintenanceRequest,\n  PaymentRequest,\n  RevenueParams,\n  InvoiceLineItem,\n} from \"../business/isp-operations\";\n\nexport interface UseISPBusinessOptions {\n  portal?: \"admin\" | \"customer\" | \"reseller\" | \"management\" | \"technician\";\n  tenantId?: string;\n  resellerId?: string;\n}\n\nexport interface UseISPBusinessReturn extends ISPBusinessOperations {\n  apiClient: ApiClient;\n  // Convenience methods for common operations\n  customerOperations: {\n    // Customer Portal - frequently used operations\n    getMyProfile: (customerId: string) => Promise<CustomerProfile>;\n    getMyUsage: (customerId: string, period: DateRange) => Promise<UsageData[]>;\n    getMyBills: (customerId: string) => Promise<Invoice[]>;\n    getMyServiceStatus: (customerId: string) => Promise<ServiceStatus>;\n\n    // Admin/Management Portal - bulk operations\n    getCustomerOverview: (customerId: string) => Promise<{\n      profile: CustomerProfile;\n      status: ServiceStatus;\n      usage: UsageData[];\n      bills: Invoice[];\n    }>;\n\n    // Reseller Portal - territory management\n    getMyCustomers: (resellerId: string) => Promise<CustomerProfile[]>;\n    getResellerMetrics: (\n      resellerId: string,\n      period: DateRange,\n    ) => Promise<{\n      totalCustomers: number;\n      activeCustomers: number;\n      revenue: RevenueData;\n      commissions: Commission[];\n    }>;\n  };\n\n  // Technician-specific operations\n  technicianOperations: {\n    getWorkOrders: (technicianId: string) => Promise<MaintenanceWindow[]>;\n    completeWorkOrder: (workOrderId: string, notes: string) => Promise<void>;\n    runDiagnostics: (customerId: string) => Promise<DiagnosticsResult>;\n    getDeviceList: (regionId?: string) => Promise<DeviceStatus[]>;\n  };\n\n  // Admin-specific operations\n  adminOperations: {\n    getSystemOverview: () => Promise<{\n      networkHealth: NetworkStatus;\n      totalCustomers: number;\n      totalRevenue: RevenueData;\n      activeTickets: number;\n    }>;\n    bulkCustomerOperation: (\n      customerIds: string[],\n      operation: \"suspend\" | \"reactivate\",\n    ) => Promise<void>;\n  };\n\n  // Management Portal operations\n  managementOperations: {\n    getDashboardData: (period: DateRange) => Promise<{\n      revenue: RevenueData;\n      networkHealth: NetworkStatus;\n      customerGrowth: number;\n      servicePerformance: any;\n    }>;\n    generateReports: (\n      type: \"financial\" | \"operational\" | \"customer\",\n      period: DateRange,\n    ) => Promise<any>;\n  };\n}\n\n/**\n * Main hook for ISP business operations\n * Provides portal-optimized business logic with DRY compliance\n */\nexport function useISPBusiness(options: UseISPBusinessOptions = {}): UseISPBusinessReturn {\n  const { portal, tenantId, resellerId } = options;\n  const metadata: Record<string, unknown> = {};\n\n  if (portal) {\n    metadata.portal = portal;\n  }\n\n  if (resellerId) {\n    metadata.resellerId = resellerId;\n  }\n\n  const apiClientConfig =\n    tenantId || Object.keys(metadata).length\n      ? {\n          ...(tenantId ? { tenantId } : {}),\n          ...(Object.keys(metadata).length ? { metadata } : {}),\n        }\n      : undefined;\n\n  const apiClient = useApiClient(apiClientConfig);\n\n  // Create the business service instance\n  const businessService = useMemo(() => {\n    return createISPBusinessService(apiClient);\n  }, [apiClient]);\n\n  // Customer convenience operations\n  const customerOperations = useMemo(\n    () => ({\n      getMyProfile: async (customerId: string) => {\n        return businessService.customerService.getCustomerProfile(customerId);\n      },\n\n      getMyUsage: async (customerId: string, period: DateRange) => {\n        return businessService.customerService.getUsageHistory(customerId, period);\n      },\n\n      getMyBills: async (customerId: string) => {\n        return businessService.customerService.getBillingHistory(customerId, {\n          limit: 12,\n        });\n      },\n\n      getMyServiceStatus: async (customerId: string) => {\n        return businessService.serviceOperations.getServiceStatus(customerId);\n      },\n\n      getCustomerOverview: async (customerId: string) => {\n        // Parallel requests for better performance\n        const [profile, status, usage, bills] = await Promise.all([\n          businessService.customerService.getCustomerProfile(customerId),\n          businessService.serviceOperations.getServiceStatus(customerId),\n          businessService.customerService.getUsageHistory(customerId, {\n            startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // Last 30 days\n            endDate: new Date(),\n          }),\n          businessService.customerService.getBillingHistory(customerId, {\n            limit: 6,\n          }),\n        ]);\n\n        return { profile, status, usage, bills };\n      },\n\n      getMyCustomers: async (resellerId: string) => {\n        // This would be implemented to get customers by reseller\n        const response = await apiClient.request<{ data: CustomerProfile[] }>(\n          `/resellers/${resellerId}/customers`,\n        );\n        return response.data || [];\n      },\n\n      getResellerMetrics: async (resellerId: string, period: DateRange) => {\n        const [customers, revenue, commissions] = await Promise.all([\n          apiClient.request<{ data: CustomerProfile[] }>(`/resellers/${resellerId}/customers`),\n          businessService.billingOperations.calculateRevenue({\n            dateRange: period,\n            resellerId,\n          }),\n          businessService.billingOperations.generateCommissions(resellerId, period),\n        ]);\n\n        const customerData = customers.data || [];\n        return {\n          totalCustomers: customerData.length,\n          activeCustomers: customerData.filter((c) => c.status === \"active\").length,\n          revenue,\n          commissions,\n        };\n      },\n    }),\n    [businessService, apiClient],\n  );\n\n  // Technician convenience operations\n  const technicianOperations = useMemo(\n    () => ({\n      getWorkOrders: async (technicianId: string) => {\n        const response = await apiClient.request<{ data: MaintenanceWindow[] }>(\n          `/technicians/${technicianId}/work-orders`,\n        );\n        return response.data || [];\n      },\n\n      completeWorkOrder: async (workOrderId: string, notes: string) => {\n        await apiClient.request(`/maintenance/${workOrderId}/complete`, {\n          method: \"POST\",\n          body: JSON.stringify({\n            notes,\n            completedAt: new Date().toISOString(),\n          }),\n        });\n      },\n\n      runDiagnostics: async (customerId: string) => {\n        return businessService.serviceOperations.troubleshootConnection(customerId);\n      },\n\n      getDeviceList: async (regionId?: string) => {\n        const params = regionId ? { regionId } : undefined;\n        const response = await apiClient.request<{ data: DeviceStatus[] }>(\"/network/devices\", {\n          params,\n        });\n        return response.data || [];\n      },\n    }),\n    [businessService, apiClient],\n  );\n\n  // Admin convenience operations\n  const adminOperations = useMemo(\n    () => ({\n      getSystemOverview: async () => {\n        const [networkHealth, customersResponse, revenue] = await Promise.all([\n          businessService.networkOperations.getNetworkHealth(),\n          apiClient.request<{ data: { total: number } }>(\"/customers/count\"),\n          businessService.billingOperations.calculateRevenue({\n            dateRange: {\n              startDate: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n              endDate: new Date(),\n            },\n          }),\n        ]);\n\n        return {\n          networkHealth,\n          totalCustomers: customersResponse.data?.total || 0,\n          totalRevenue: revenue,\n          activeTickets: 0, // Would be implemented\n        };\n      },\n\n      bulkCustomerOperation: async (customerIds: string[], operation: \"suspend\" | \"reactivate\") => {\n        const promises = customerIds.map((customerId) => {\n          if (operation === \"suspend\") {\n            return businessService.customerService.suspendService(customerId, \"Bulk admin action\");\n          } else {\n            return businessService.customerService.reactivateService(customerId);\n          }\n        });\n\n        await Promise.all(promises);\n      },\n    }),\n    [businessService, apiClient],\n  );\n\n  // Management Portal operations\n  const managementOperations = useMemo(\n    () => ({\n      getDashboardData: async (period: DateRange) => {\n        const [revenue, networkHealth, customerGrowthResponse] = await Promise.all([\n          businessService.billingOperations.calculateRevenue({\n            dateRange: period,\n          }),\n          businessService.networkOperations.getNetworkHealth(),\n          apiClient.request<{ data: { growth: number } }>(\"/analytics/customer-growth\", {\n            params: {\n              startDate: period.startDate.toISOString(),\n              endDate: period.endDate.toISOString(),\n            },\n          }),\n        ]);\n\n        return {\n          revenue,\n          networkHealth,\n          customerGrowth: customerGrowthResponse.data?.growth || 0,\n          servicePerformance: {}, // Would be implemented\n        };\n      },\n\n      generateReports: async (\n        type: \"financial\" | \"operational\" | \"customer\",\n        period: DateRange,\n      ) => {\n        const response = await apiClient.request<{ data: any }>(`/reports/${type}`, {\n          params: {\n            startDate: period.startDate.toISOString(),\n            endDate: period.endDate.toISOString(),\n          },\n        });\n        return response.data || {};\n      },\n    }),\n    [businessService, apiClient],\n  );\n\n  return {\n    apiClient,\n    // Core business operations\n    ...businessService,\n\n    // Portal-optimized convenience methods\n    customerOperations,\n    technicianOperations,\n    adminOperations,\n    managementOperations,\n  };\n}\n\n// ===========================\n// Specialized Portal Hooks\n// ===========================\n\n/**\n * Customer Portal optimized hook\n */\nexport function useCustomerBusiness(customerId: string) {\n  const business = useISPBusiness({ portal: \"customer\" });\n\n  return {\n    ...business,\n    // Pre-bound methods for customer portal\n    getMyProfile: useCallback(\n      () => business.customerOperations.getMyProfile(customerId),\n      [business, customerId],\n    ),\n    getMyUsage: useCallback(\n      (period: DateRange) => business.customerOperations.getMyUsage(customerId, period),\n      [business, customerId],\n    ),\n    getMyBills: useCallback(\n      () => business.customerOperations.getMyBills(customerId),\n      [business, customerId],\n    ),\n    getMyServiceStatus: useCallback(\n      () => business.customerOperations.getMyServiceStatus(customerId),\n      [business, customerId],\n    ),\n    upgradeMyService: useCallback(\n      (planId: string) => business.serviceOperations.upgradeService(customerId, planId),\n      [business, customerId],\n    ),\n    payBill: useCallback(\n      (paymentRequest: PaymentRequest) => business.billingOperations.processPayment(paymentRequest),\n      [business],\n    ),\n  };\n}\n\n/**\n * Reseller Portal optimized hook\n */\nexport function useResellerBusiness(resellerId: string) {\n  const business = useISPBusiness({ portal: \"reseller\", resellerId });\n\n  return {\n    ...business,\n    // Pre-bound methods for reseller portal\n    getMyCustomers: useCallback(\n      () => business.customerOperations.getMyCustomers(resellerId),\n      [business, resellerId],\n    ),\n    getMyCommissions: useCallback(\n      (period: DateRange) => business.billingOperations.generateCommissions(resellerId, period),\n      [business, resellerId],\n    ),\n    getMyMetrics: useCallback(\n      (period: DateRange) => business.customerOperations.getResellerMetrics(resellerId, period),\n      [business, resellerId],\n    ),\n    addNewCustomer: useCallback(\n      async (customerData: Partial<CustomerProfile>) => {\n        // Implementation would be added\n        const response = await business.apiClient.request<{\n          data: CustomerProfile;\n        }>(\"/customers\", {\n          method: \"POST\",\n          body: JSON.stringify({ ...customerData, resellerId }),\n        });\n        return response.data!;\n      },\n      [business, resellerId],\n    ),\n  };\n}\n\n/**\n * Technician Portal optimized hook\n */\nexport function useTechnicianBusiness(technicianId: string) {\n  const business = useISPBusiness({ portal: \"technician\" });\n\n  return {\n    ...business,\n    // Pre-bound methods for technician portal\n    getMyWorkOrders: useCallback(\n      () => business.technicianOperations.getWorkOrders(technicianId),\n      [business, technicianId],\n    ),\n    completeWorkOrder: useCallback(\n      (workOrderId: string, notes: string) =>\n        business.technicianOperations.completeWorkOrder(workOrderId, notes),\n      [business],\n    ),\n    diagnoseCustomer: useCallback(\n      (customerId: string) => business.technicianOperations.runDiagnostics(customerId),\n      [business],\n    ),\n    getMyDevices: useCallback(\n      (regionId?: string) => business.technicianOperations.getDeviceList(regionId),\n      [business],\n    ),\n    scheduleJob: useCallback(\n      (request: MaintenanceRequest) =>\n        business.serviceOperations.scheduleMaintenanceWindow(request),\n      [business],\n    ),\n  };\n}\n\n/**\n * Admin Portal optimized hook\n */\nexport function useAdminBusiness() {\n  const business = useISPBusiness({ portal: \"admin\" });\n\n  return {\n    ...business,\n    // Pre-bound methods for admin portal\n    getSystemOverview: useCallback(() => business.adminOperations.getSystemOverview(), [business]),\n    bulkSuspendCustomers: useCallback(\n      (customerIds: string[]) =>\n        business.adminOperations.bulkCustomerOperation(customerIds, \"suspend\"),\n      [business],\n    ),\n    bulkReactivateCustomers: useCallback(\n      (customerIds: string[]) =>\n        business.adminOperations.bulkCustomerOperation(customerIds, \"reactivate\"),\n      [business],\n    ),\n    getNetworkHealth: useCallback(() => business.networkOperations.getNetworkHealth(), [business]),\n    getAllAlerts: useCallback(() => business.networkOperations.getNetworkAlerts(), [business]),\n  };\n}\n\n/**\n * Management Portal optimized hook\n */\nexport function useManagementBusiness() {\n  const business = useISPBusiness({ portal: \"management\" });\n\n  return {\n    ...business,\n    // Pre-bound methods for management portal\n    getDashboard: useCallback(\n      (period: DateRange) => business.managementOperations.getDashboardData(period),\n      [business],\n    ),\n    getFinancialReport: useCallback(\n      (period: DateRange) => business.managementOperations.generateReports(\"financial\", period),\n      [business],\n    ),\n    getOperationalReport: useCallback(\n      (period: DateRange) => business.managementOperations.generateReports(\"operational\", period),\n      [business],\n    ),\n    getCustomerReport: useCallback(\n      (period: DateRange) => business.managementOperations.generateReports(\"customer\", period),\n      [business],\n    ),\n  };\n}\n\n// Export types for consumers\nexport type {\n  CustomerProfile,\n  ServiceStatus,\n  NetworkStatus,\n  RevenueData,\n  UsageData,\n  Invoice,\n  ServicePlan,\n  MaintenanceWindow,\n  DiagnosticsResult,\n  DeviceStatus,\n  PaymentResult,\n  Commission,\n  DateRange,\n  MaintenanceRequest,\n  PaymentRequest,\n  RevenueParams,\n  InvoiceLineItem,\n} from \"../business/isp-operations\";\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { getApiClient } from \"../api\";\n\nimport { useApiErrorNotifications } from \"./useNotifications\";\n\ninterface UseApiDataOptions<T> {\n  ttl?: number;\n  fallbackData?: T | null;\n  enabled?: boolean;\n  retryCount?: number;\n  retryDelay?: number;\n}\n\ninterface UseApiDataResult<T> {\n  data: T | null;\n  isLoading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  lastUpdated: Date | null;\n}\n\nconst cache = new Map<string, { data: unknown; timestamp: number }>();\n\nexport function useApiData<T>(\n  key: string,\n  fetcher: () => Promise<T>,\n  options: UseApiDataOptions<T> = {\n    // Implementation pending\n  },\n): UseApiDataResult<T> {\n  const {\n    ttl = 5 * 60 * 1000, // 5 minutes default\n    fallbackData,\n    enabled = true,\n    retryCount = 2,\n    retryDelay = 1000,\n  } = options;\n\n  const [data, setData] = useState<T | null>(() => fallbackData ?? null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const mountedRef = useRef(true);\n  const { notifyApiError } = useApiErrorNotifications();\n\n  // Helper to check and use cached data\n  const useCachedData = useCallback(() => {\n    const cached = cache.get(key);\n    const now = Date.now();\n\n    if (cached && now - cached.timestamp < ttl) {\n      setData(cached.data as T);\n      setLastUpdated(new Date(cached.timestamp));\n      return true;\n    }\n    return false;\n  }, [key, ttl]);\n\n  // Helper to handle successful fetch\n  const handleFetchSuccess = useCallback(\n    (result: T) => {\n      if (mountedRef.current) {\n        setData(result);\n        setLastUpdated(new Date());\n        setError(null);\n\n        // Cache the successful result\n        cache.set(key, {\n          data: result,\n          timestamp: Date.now(),\n        });\n      }\n    },\n    [key],\n  );\n\n  // Helper to schedule retry\n  const scheduleRetry = useCallback(\n    (attemptCount: number, fetchFn: (count: number) => Promise<void>) => {\n      const delay = retryDelay * 2 ** attemptCount;\n      retryTimeoutRef.current = setTimeout(() => {\n        fetchFn(attemptCount + 1);\n      }, delay);\n    },\n    [retryDelay],\n  );\n\n  // Helper to handle fallback data\n  const useFallbackData = useCallback(() => {\n    if (fallbackData !== undefined && fallbackData !== null && mountedRef.current && !data) {\n      setData(fallbackData);\n      setLastUpdated(new Date());\n      setError(null);\n\n      // Cache fallback data with shorter TTL (1 minute)\n      cache.set(key, {\n        data: fallbackData,\n        timestamp: Date.now(),\n      });\n\n      return true;\n    }\n    return false;\n  }, [key, fallbackData, data]);\n\n  const fetchWithFallback = useCallback(\n    async (attemptCount = 0): Promise<void> => {\n      if (!enabled || !mountedRef.current) {\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        setError(null);\n\n        // Check cache first\n        if (useCachedData()) {\n          setIsLoading(false);\n          return;\n        }\n\n        // Try to fetch from API\n        const result = await fetcher();\n        handleFetchSuccess(result);\n      } catch (apiError) {\n        // Retry if attempts remain\n        if (attemptCount < retryCount) {\n          scheduleRetry(attemptCount, fetchWithFallback);\n          return;\n        }\n\n        // Use fallback data or set error\n        if (!useFallbackData() && mountedRef.current && attemptCount === retryCount) {\n          setError(apiError as Error);\n          notifyApiError(apiError, `loading ${key.replace(\"-\", \" \")}`);\n        }\n      } finally {\n        if (mountedRef.current) {\n          setIsLoading(false);\n        }\n      }\n    },\n    [\n      key,\n      fetcher,\n      enabled,\n      retryCount,\n      notifyApiError,\n      useCachedData,\n      handleFetchSuccess,\n      scheduleRetry,\n      useFallbackData,\n    ],\n  );\n\n  const refetch = useCallback(async () => {\n    // Clear cache for this key to force fresh fetch\n    cache.delete(key);\n    await fetchWithFallback();\n  }, [key, fetchWithFallback]);\n\n  useEffect(() => {\n    mountedRef.current = true;\n    fetchWithFallback();\n\n    return () => {\n      mountedRef.current = false;\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, [fetchWithFallback]);\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  return {\n    data,\n    isLoading,\n    error,\n    refetch,\n    lastUpdated,\n  };\n}\n\n// Specialized hooks for different data types\nexport function useCustomerDashboard() {\n  return useApiData(\"customer-dashboard\", async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerDashboard();\n    return response.data;\n  });\n}\n\nexport function useCustomerServices() {\n  return useApiData(\"customer-services\", async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerServices();\n    return response.data;\n  });\n}\n\nexport function useCustomerBilling() {\n  return useApiData(\"customer-billing\", async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerBilling();\n    return response.data;\n  });\n}\n\nexport function useCustomerUsage(period?: string) {\n  return useApiData(`customer-usage-${period || \"30d\"}`, async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerUsage(period);\n    return response.data;\n  });\n}\n\nexport function useCustomerDocuments() {\n  return useApiData(\"customer-documents\", async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerDocuments();\n    return response.data;\n  });\n}\n\nexport function useCustomerSupportTickets() {\n  return useApiData(\"customer-support-tickets\", async () => {\n    const client = getApiClient();\n    const response = await client.getCustomerSupportTickets();\n    return response.data;\n  });\n}\n","/**\n * Convenience hooks for consolidated application state\n * Provides specialized hooks for common state patterns\n */\n\nimport { useCallback, useMemo } from \"react\";\nimport { useAppStore } from \"../stores\";\nimport type { FilterState, PaginationState, SelectionState, LoadingState } from \"../stores/types\";\n\n// Main app state hook\nexport const useAppState = () => useAppStore();\n\n// UI state hooks\nexport const useUI = () => {\n  const ui = useAppStore((state) => state.ui);\n  const updateUI = useAppStore((state) => state.updateUI);\n  const toggleSidebar = useAppStore((state) => state.toggleSidebar);\n  const setActiveTab = useAppStore((state) => state.setActiveTab);\n  const setActiveView = useAppStore((state) => state.setActiveView);\n  const toggleFilters = useAppStore((state) => state.toggleFilters);\n\n  return {\n    ...ui,\n    updateUI,\n    toggleSidebar,\n    setActiveTab,\n    setActiveView,\n    toggleFilters,\n  };\n};\n\n// Notification hooks\nexport const useAppNotifications = () => {\n  const notifications = useAppStore((state) => state.ui.notifications);\n  const addNotification = useAppStore((state) => state.addNotification);\n  const dismissNotification = useAppStore((state) => state.dismissNotification);\n  const clearNotifications = useAppStore((state) => state.clearNotifications);\n\n  const activeNotifications = useMemo(\n    () => notifications.filter((n) => !n.dismissed),\n    [notifications],\n  );\n\n  const addSuccess = useCallback(\n    (message: string) => {\n      addNotification({ type: \"success\", title: \"Success\", message });\n    },\n    [addNotification],\n  );\n\n  const addError = useCallback(\n    (message: string) => {\n      addNotification({ type: \"error\", title: \"Error\", message });\n    },\n    [addNotification],\n  );\n\n  const addWarning = useCallback(\n    (message: string) => {\n      addNotification({ type: \"warning\", title: \"Warning\", message });\n    },\n    [addNotification],\n  );\n\n  const addInfo = useCallback(\n    (message: string) => {\n      addNotification({ type: \"info\", title: \"Info\", message });\n    },\n    [addNotification],\n  );\n\n  return {\n    notifications: activeNotifications,\n    addNotification,\n    addSuccess,\n    addError,\n    addWarning,\n    addInfo,\n    dismissNotification,\n    clearNotifications,\n  };\n};\n\n// Contextual filter hook\nexport const useFilters = (context: string) => {\n  const filterState = useAppStore((state) => state.getFilterState(context));\n  const updateFilters = useAppStore((state) => state.updateFilters);\n  const resetFilters = useAppStore((state) => state.resetFilters);\n  const setSearchTerm = useAppStore((state) => state.setSearchTerm);\n  const setStatusFilter = useAppStore((state) => state.setStatusFilter);\n  const setSorting = useAppStore((state) => state.setSorting);\n  const setDateRange = useAppStore((state) => state.setDateRange);\n\n  const updateFilter = useCallback(\n    (updates: Partial<FilterState>) => {\n      updateFilters(context, updates);\n    },\n    [context, updateFilters],\n  );\n\n  const resetFilter = useCallback(() => {\n    resetFilters(context);\n  }, [context, resetFilters]);\n\n  const setSearch = useCallback(\n    (term: string) => {\n      setSearchTerm(context, term);\n    },\n    [context, setSearchTerm],\n  );\n\n  const setStatus = useCallback(\n    (status: string) => {\n      setStatusFilter(context, status);\n    },\n    [context, setStatusFilter],\n  );\n\n  const setSort = useCallback(\n    (sortBy: string, sortOrder: \"asc\" | \"desc\" = \"asc\") => {\n      setSorting(context, sortBy, sortOrder);\n    },\n    [context, setSorting],\n  );\n\n  const setRange = useCallback(\n    (start: Date | null, end: Date | null) => {\n      setDateRange(context, start, end);\n    },\n    [context, setDateRange],\n  );\n\n  const toggleSort = useCallback(\n    (sortBy: string) => {\n      const currentOrder = filterState.sortBy === sortBy ? filterState.sortOrder : \"asc\";\n      const newOrder = currentOrder === \"asc\" ? \"desc\" : \"asc\";\n      setSort(sortBy, newOrder);\n    },\n    [filterState.sortBy, filterState.sortOrder, setSort],\n  );\n\n  const hasActiveFilters = useMemo(() => {\n    return (\n      filterState.searchTerm !== \"\" ||\n      filterState.statusFilter !== \"all\" ||\n      filterState.dateRange?.start !== null ||\n      filterState.dateRange?.end !== null ||\n      Object.keys(filterState.customFilters).length > 0\n    );\n  }, [filterState]);\n\n  return {\n    ...filterState,\n    updateFilter,\n    resetFilter,\n    setSearch,\n    setStatus,\n    setSort,\n    setRange,\n    toggleSort,\n    hasActiveFilters,\n  };\n};\n\n// Contextual pagination hook\nexport const usePagination = (context: string) => {\n  const paginationState = useAppStore((state) => state.getPaginationState(context));\n  const updatePagination = useAppStore((state) => state.updatePagination);\n  const setCurrentPage = useAppStore((state) => state.setCurrentPage);\n  const setItemsPerPage = useAppStore((state) => state.setItemsPerPage);\n  const setTotalItems = useAppStore((state) => state.setTotalItems);\n\n  const updatePage = useCallback(\n    (updates: Partial<PaginationState>) => {\n      updatePagination(context, updates);\n    },\n    [context, updatePagination],\n  );\n\n  const goToPage = useCallback(\n    (page: number) => {\n      setCurrentPage(context, page);\n    },\n    [context, setCurrentPage],\n  );\n\n  const changeItemsPerPage = useCallback(\n    (itemsPerPage: number) => {\n      setItemsPerPage(context, itemsPerPage);\n    },\n    [context, setItemsPerPage],\n  );\n\n  const setTotal = useCallback(\n    (totalItems: number) => {\n      setTotalItems(context, totalItems);\n    },\n    [context, setTotalItems],\n  );\n\n  const nextPage = useCallback(() => {\n    if (paginationState.currentPage < paginationState.totalPages) {\n      goToPage(paginationState.currentPage + 1);\n    }\n  }, [paginationState.currentPage, paginationState.totalPages, goToPage]);\n\n  const previousPage = useCallback(() => {\n    if (paginationState.currentPage > 1) {\n      goToPage(paginationState.currentPage - 1);\n    }\n  }, [paginationState.currentPage, goToPage]);\n\n  const firstPage = useCallback(() => {\n    goToPage(1);\n  }, [goToPage]);\n\n  const lastPage = useCallback(() => {\n    goToPage(paginationState.totalPages);\n  }, [paginationState.totalPages, goToPage]);\n\n  const canGoNext = paginationState.currentPage < paginationState.totalPages;\n  const canGoPrevious = paginationState.currentPage > 1;\n\n  const startItem = (paginationState.currentPage - 1) * paginationState.itemsPerPage + 1;\n  const endItem = Math.min(\n    paginationState.currentPage * paginationState.itemsPerPage,\n    paginationState.totalItems,\n  );\n\n  return {\n    ...paginationState,\n    updatePage,\n    goToPage,\n    changeItemsPerPage,\n    setTotal,\n    nextPage,\n    previousPage,\n    firstPage,\n    lastPage,\n    canGoNext,\n    canGoPrevious,\n    startItem,\n    endItem,\n  };\n};\n\n// Contextual selection hook\nexport const useSelection = <T = any>(context: string) => {\n  const selectionState = useAppStore((state) => state.getSelectionState<T>(context));\n  const updateSelection = useAppStore((state) => state.updateSelection);\n  const selectItem = useAppStore((state) => state.selectItem);\n  const deselectItem = useAppStore((state) => state.deselectItem);\n  const toggleSelectAll = useAppStore((state) => state.toggleSelectAll);\n  const clearSelection = useAppStore((state) => state.clearSelection);\n\n  const select = useCallback(\n    (item: T, multiple = false) => {\n      selectItem<T>(context, item, multiple);\n    },\n    [context, selectItem],\n  );\n\n  const deselect = useCallback(\n    (item: T) => {\n      deselectItem<T>(context, item);\n    },\n    [context, deselectItem],\n  );\n\n  const toggleItem = useCallback(\n    (item: T, multiple = false) => {\n      const isSelected = selectionState.selectedItems.includes(item);\n      if (isSelected) {\n        deselect(item);\n      } else {\n        select(item, multiple);\n      }\n    },\n    [selectionState.selectedItems, select, deselect],\n  );\n\n  const toggleAll = useCallback(\n    (allItems: T[]) => {\n      toggleSelectAll<T>(context, allItems);\n    },\n    [context, toggleSelectAll],\n  );\n\n  const clear = useCallback(() => {\n    clearSelection(context);\n  }, [context, clearSelection]);\n\n  const isSelected = useCallback(\n    (item: T) => {\n      return selectionState.selectedItems.includes(item);\n    },\n    [selectionState.selectedItems],\n  );\n\n  const hasSelection = selectionState.selectedItems.length > 0;\n  const selectedCount = selectionState.selectedItems.length;\n\n  return {\n    ...selectionState,\n    select,\n    deselect,\n    toggleItem,\n    toggleAll,\n    clear,\n    isSelected,\n    hasSelection,\n    selectedCount,\n  };\n};\n\n// Contextual loading hook\nexport const useLoading = (context: string) => {\n  const loadingState = useAppStore((state) => state.getLoadingState(context));\n  const updateLoading = useAppStore((state) => state.updateLoading);\n  const setLoading = useAppStore((state) => state.setLoading);\n  const setError = useAppStore((state) => state.setError);\n  const setLastUpdated = useAppStore((state) => state.setLastUpdated);\n\n  const startLoading = useCallback(\n    (operationId?: string) => {\n      setLoading(context, true, operationId);\n    },\n    [context, setLoading],\n  );\n\n  const stopLoading = useCallback(() => {\n    setLoading(context, false);\n    setLastUpdated(context);\n  }, [context, setLoading, setLastUpdated]);\n\n  const setErrorState = useCallback(\n    (error: string) => {\n      setError(context, error);\n    },\n    [context, setError],\n  );\n\n  const clearError = useCallback(() => {\n    setError(context, null);\n  }, [context, setError]);\n\n  const updateState = useCallback(\n    (updates: Partial<LoadingState>) => {\n      updateLoading(context, updates);\n    },\n    [context, updateLoading],\n  );\n\n  return {\n    ...loadingState,\n    startLoading,\n    stopLoading,\n    setError: setErrorState,\n    clearError,\n    updateState,\n  };\n};\n\n// Preferences hook\nexport const usePreferences = () => {\n  const preferences = useAppStore((state) => state.preferences);\n  const updatePreferences = useAppStore((state) => state.updatePreferences);\n  const setTheme = useAppStore((state) => state.setTheme);\n  const setLanguage = useAppStore((state) => state.setLanguage);\n  const setTimezone = useAppStore((state) => state.setTimezone);\n  const toggleCompactMode = useAppStore((state) => state.toggleCompactMode);\n  const toggleAdvancedFeatures = useAppStore((state) => state.toggleAdvancedFeatures);\n\n  return {\n    ...preferences,\n    updatePreferences,\n    setTheme,\n    setLanguage,\n    setTimezone,\n    toggleCompactMode,\n    toggleAdvancedFeatures,\n  };\n};\n\n// Combined hook for common data table patterns\nexport const useDataTable = <T = string>(context: string) => {\n  const filters = useFilters(context);\n  const pagination = usePagination(context);\n  const selection = useSelection<T>(context);\n  const loading = useLoading(context);\n\n  const resetContext = useAppStore((state) => state.resetContext);\n\n  const reset = useCallback(() => {\n    resetContext(context);\n  }, [context, resetContext]);\n\n  return {\n    filters,\n    pagination,\n    selection,\n    loading,\n    reset,\n  };\n};\n\n// Hook for form state patterns\nexport const useFormState = (context: string) => {\n  const loading = useLoading(context);\n  const { addSuccess, addError } = useAppNotifications();\n\n  const handleSubmit = useCallback(\n    async (\n      submitFn: () => Promise<void>,\n      {\n        successMessage = \"Operation completed successfully\",\n        errorMessage = \"Operation failed\",\n      } = {},\n    ) => {\n      loading.startLoading();\n      try {\n        await submitFn();\n        loading.stopLoading();\n        addSuccess(successMessage);\n      } catch (error) {\n        const errorMsg = error instanceof Error ? error.message : errorMessage;\n        loading.setError(errorMsg);\n        addError(errorMsg);\n      }\n    },\n    [loading, addSuccess, addError],\n  );\n\n  return {\n    ...loading,\n    handleSubmit,\n  };\n};\n","/**\n * Persistent Error Queue\n *\n * Provides offline-capable error storage with automatic synchronization.\n * Errors are stored in LocalStorage and automatically uploaded when online.\n */\n\nimport { StandardErrorResponse } from \"../types/error-contract\";\n\nexport interface QueuedError {\n  error: StandardErrorResponse;\n  queued_at: string;\n  retry_count: number;\n  last_retry_at?: string;\n}\n\nexport interface ErrorQueueConfig {\n  /** Maximum number of errors to store */\n  maxQueueSize: number;\n  /** Maximum age of errors in milliseconds (default: 24 hours) */\n  maxAge: number;\n  /** Endpoint to send errors to */\n  errorEndpoint?: string;\n  /** Whether to automatically sync when online */\n  autoSync: boolean;\n  /** Sync interval in milliseconds (default: 60 seconds) */\n  syncInterval: number;\n  /** Maximum number of retry attempts per error */\n  maxRetries: number;\n}\n\nconst DEFAULT_CONFIG: ErrorQueueConfig = {\n  maxQueueSize: 100,\n  maxAge: 24 * 60 * 60 * 1000, // 24 hours\n  autoSync: true,\n  syncInterval: 60 * 1000, // 1 minute\n  maxRetries: 3,\n};\n\nconst STORAGE_KEY = \"dotmac_error_queue\";\n\nexport class PersistentErrorQueue {\n  private config: ErrorQueueConfig;\n  private syncIntervalId: NodeJS.Timeout | null = null;\n  private isSyncing: boolean = false;\n  private isOnline: boolean = typeof navigator !== \"undefined\" ? navigator.onLine : true;\n\n  constructor(config: Partial<ErrorQueueConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n\n    if (typeof window !== \"undefined\") {\n      // Listen for online/offline events\n      window.addEventListener(\"online\", this.handleOnline);\n      window.addEventListener(\"offline\", this.handleOffline);\n\n      // Start auto-sync if configured\n      if (this.config.autoSync) {\n        this.startAutoSync();\n      }\n    }\n  }\n\n  /**\n   * Add an error to the queue\n   */\n  public enqueue(error: StandardErrorResponse): void {\n    if (typeof localStorage === \"undefined\") {\n      console.warn(\"LocalStorage not available, error will not be persisted\");\n      return;\n    }\n\n    const queue = this.loadQueue();\n\n    // Check queue size limit\n    if (queue.length >= this.config.maxQueueSize) {\n      // Remove oldest error\n      queue.shift();\n    }\n\n    // Add new error\n    const queuedError: QueuedError = {\n      error,\n      queued_at: new Date().toISOString(),\n      retry_count: 0,\n    };\n\n    queue.push(queuedError);\n    this.saveQueue(queue);\n\n    // Try immediate sync if online\n    if (this.isOnline && this.config.autoSync) {\n      this.sync().catch((err) => {\n        console.error(\"Failed to sync error queue:\", err);\n      });\n    }\n  }\n\n  /**\n   * Get all queued errors\n   */\n  public getQueue(): QueuedError[] {\n    return this.loadQueue();\n  }\n\n  /**\n   * Get count of queued errors\n   */\n  public getQueueSize(): number {\n    return this.loadQueue().length;\n  }\n\n  /**\n   * Clear all queued errors\n   */\n  public clear(): void {\n    if (typeof localStorage !== \"undefined\") {\n      localStorage.removeItem(STORAGE_KEY);\n    }\n  }\n\n  /**\n   * Manually trigger sync\n   */\n  public async sync(): Promise<void> {\n    if (!this.config.errorEndpoint) {\n      console.warn(\"No error endpoint configured, skipping sync\");\n      return;\n    }\n\n    if (this.isSyncing) {\n      console.log(\"Sync already in progress, skipping\");\n      return;\n    }\n\n    if (!this.isOnline) {\n      console.log(\"Offline, skipping sync\");\n      return;\n    }\n\n    this.isSyncing = true;\n\n    try {\n      const queue = this.loadQueue();\n\n      if (queue.length === 0) {\n        return;\n      }\n\n      // Clean up expired errors\n      const now = new Date().getTime();\n      const validQueue = queue.filter((item) => {\n        const queuedAt = new Date(item.queued_at).getTime();\n        return now - queuedAt < this.config.maxAge;\n      });\n\n      // Separate errors that haven't exceeded retry limit\n      const retryableErrors = validQueue.filter(\n        (item) => item.retry_count < this.config.maxRetries,\n      );\n\n      if (retryableErrors.length === 0) {\n        // Only expired or max-retry errors left, clear them\n        this.saveQueue([]);\n        return;\n      }\n\n      // Send errors in batch\n      const response = await fetch(this.config.errorEndpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          errors: retryableErrors.map((item) => item.error),\n          batch_id: `batch_${Date.now()}`,\n        }),\n      });\n\n      if (response.ok) {\n        // Successfully sent, remove from queue\n        this.clear();\n        console.log(`Successfully synced ${retryableErrors.length} errors`);\n      } else {\n        // Failed to send, increment retry count\n        const updatedQueue = retryableErrors.map((item) => ({\n          ...item,\n          retry_count: item.retry_count + 1,\n          last_retry_at: new Date().toISOString(),\n        }));\n        this.saveQueue(updatedQueue);\n        console.warn(`Failed to sync errors: ${response.statusText}`);\n      }\n    } catch (error) {\n      console.error(\"Error during sync:\", error);\n\n      // Increment retry count for all errors\n      const queue = this.loadQueue();\n      const updatedQueue = queue.map((item) => ({\n        ...item,\n        retry_count: item.retry_count + 1,\n        last_retry_at: new Date().toISOString(),\n      }));\n      this.saveQueue(updatedQueue);\n    } finally {\n      this.isSyncing = false;\n    }\n  }\n\n  /**\n   * Start automatic synchronization\n   */\n  public startAutoSync(): void {\n    if (this.syncIntervalId !== null) {\n      return; // Already started\n    }\n\n    this.syncIntervalId = setInterval(() => {\n      this.sync().catch((err) => {\n        console.error(\"Auto-sync failed:\", err);\n      });\n    }, this.config.syncInterval);\n  }\n\n  /**\n   * Stop automatic synchronization\n   */\n  public stopAutoSync(): void {\n    if (this.syncIntervalId !== null) {\n      clearInterval(this.syncIntervalId);\n      this.syncIntervalId = null;\n    }\n  }\n\n  /**\n   * Destroy the queue and clean up\n   */\n  public destroy(): void {\n    this.stopAutoSync();\n\n    if (typeof window !== \"undefined\") {\n      window.removeEventListener(\"online\", this.handleOnline);\n      window.removeEventListener(\"offline\", this.handleOffline);\n    }\n  }\n\n  /**\n   * Load queue from LocalStorage\n   */\n  private loadQueue(): QueuedError[] {\n    if (typeof localStorage === \"undefined\") {\n      return [];\n    }\n\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      if (!data) {\n        return [];\n      }\n\n      const queue = JSON.parse(data) as QueuedError[];\n      return Array.isArray(queue) ? queue : [];\n    } catch (error) {\n      console.error(\"Failed to load error queue:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Save queue to LocalStorage\n   */\n  private saveQueue(queue: QueuedError[]): void {\n    if (typeof localStorage === \"undefined\") {\n      return;\n    }\n\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));\n    } catch (error) {\n      console.error(\"Failed to save error queue:\", error);\n\n      // If storage is full, try to clear old errors\n      if (error instanceof DOMException && error.name === \"QuotaExceededError\") {\n        // Keep only the most recent half\n        const halfQueue = queue.slice(Math.floor(queue.length / 2));\n        try {\n          localStorage.setItem(STORAGE_KEY, JSON.stringify(halfQueue));\n        } catch {\n          // If still fails, give up\n          console.error(\"Storage quota exceeded, unable to save errors\");\n        }\n      }\n    }\n  }\n\n  /**\n   * Handle online event\n   */\n  private handleOnline = (): void => {\n    console.log(\"Connection restored, syncing error queue\");\n    this.isOnline = true;\n\n    // Trigger immediate sync\n    this.sync().catch((err) => {\n      console.error(\"Failed to sync on reconnection:\", err);\n    });\n  };\n\n  /**\n   * Handle offline event\n   */\n  private handleOffline = (): void => {\n    console.log(\"Connection lost, errors will be queued\");\n    this.isOnline = false;\n  };\n}\n\n// Singleton instance\nlet globalQueue: PersistentErrorQueue | null = null;\n\n/**\n * Get the global error queue instance\n */\nexport function getErrorQueue(config?: Partial<ErrorQueueConfig>): PersistentErrorQueue {\n  if (globalQueue === null) {\n    globalQueue = new PersistentErrorQueue(config);\n  }\n  return globalQueue;\n}\n\n/**\n * Reset the global error queue (mainly for testing)\n */\nexport function resetErrorQueue(): void {\n  if (globalQueue !== null) {\n    globalQueue.destroy();\n    globalQueue = null;\n  }\n}\n","/**\n * Enhanced Error Logging and Tracing Service\n * Provides comprehensive error logging, metrics, and distributed tracing\n * Now includes persistent error queue for offline support\n */\n\nimport { EnhancedISPError, type ErrorContext, ErrorCode } from \"../utils/enhancedErrorHandling\";\nimport { getErrorQueue } from \"./PersistentErrorQueue\";\nimport { createStandardError, type StandardErrorResponse } from \"../types/error-contract\";\n\n// Structured log entry for enhanced error tracking\nexport interface ErrorLogEntry {\n  // Core error information\n  errorId: string;\n  errorCode: ErrorCode;\n  message: string;\n  severity: string;\n  category: string;\n  timestamp: string;\n\n  // Request context\n  correlationId?: string;\n  traceId?: string;\n  spanId?: string;\n  requestId?: string;\n\n  // User context\n  userId?: string;\n  tenantId?: string;\n  sessionId?: string;\n  userAgent?: string;\n\n  // Application context\n  url: string;\n  component?: string;\n  operation?: string;\n  resource?: string;\n  resourceId?: string;\n\n  // Business context\n  businessProcess?: string;\n  workflowStep?: string;\n  customerImpact?: string;\n\n  // Technical context\n  service?: string;\n  version?: string;\n  environment?: string;\n  stackTrace?: string;\n  technicalDetails?: Record<string, any>;\n\n  // Performance metrics\n  duration?: number;\n  memoryUsage?: number;\n\n  // Additional metadata\n  tags?: string[];\n  metadata?: Record<string, any>;\n}\n\n// Error metrics and aggregation\nexport interface ErrorMetrics {\n  errorCount: number;\n  errorRate: number; // errors per minute\n  criticalErrorCount: number;\n  topErrorCodes: Array<{ code: ErrorCode; count: number }>;\n  topErrorCategories: Array<{ category: string; count: number }>;\n  customerImpactDistribution: Record<string, number>;\n  meanTimeToResolution?: number;\n}\n\n// Logging configuration\nexport interface ErrorLoggingConfig {\n  enableConsoleLogging: boolean;\n  enableRemoteLogging: boolean;\n  enableMetrics: boolean;\n  enableTracing: boolean;\n  logLevel: \"debug\" | \"info\" | \"warn\" | \"error\" | \"critical\";\n  batchSize: number;\n  flushInterval: number; // milliseconds\n  maxRetries: number;\n  endpoints: {\n    logs?: string;\n    metrics?: string;\n    traces?: string;\n  };\n  filters: {\n    excludeCategories?: string[];\n    excludeCodes?: ErrorCode[];\n    minSeverity?: string;\n  };\n}\n\nclass ErrorLoggingService {\n  private config: ErrorLoggingConfig;\n  private logBuffer: ErrorLogEntry[] = [];\n  private metricsBuffer: Map<string, number> = new Map();\n  private flushTimer?: NodeJS.Timeout;\n  private isOnline: boolean = true;\n\n  constructor(config: Partial<ErrorLoggingConfig> = {}) {\n    this.config = {\n      enableConsoleLogging: process.env[\"NODE_ENV\"] === \"development\",\n      enableRemoteLogging: true,\n      enableMetrics: true,\n      enableTracing: true,\n      logLevel: \"error\",\n      batchSize: 10,\n      flushInterval: 30000, // 30 seconds\n      maxRetries: 3,\n      endpoints: {},\n      filters: {},\n      ...config,\n    };\n\n    this.setupFlushTimer();\n    this.setupNetworkStatusListener();\n  }\n\n  /**\n   * Log an enhanced error with full context\n   */\n  logError(error: EnhancedISPError, additionalContext: Partial<ErrorLogEntry> = {}): void {\n    if (!this.shouldLog(error)) {\n      return;\n    }\n\n    const logEntry = this.createLogEntry(error, additionalContext);\n\n    // Console logging for development\n    if (this.config.enableConsoleLogging) {\n      this.logToConsole(logEntry);\n    }\n\n    // Add to buffer for remote logging\n    if (this.config.enableRemoteLogging) {\n      this.logBuffer.push(logEntry);\n\n      // Immediate flush for critical errors\n      if (error.severity === \"critical\") {\n        this.flushLogs();\n      }\n    }\n\n    // Update metrics\n    if (this.config.enableMetrics) {\n      this.updateMetrics(error);\n    }\n\n    // Send trace if tracing is enabled\n    if (this.config.enableTracing && logEntry.traceId) {\n      this.sendTrace(logEntry);\n    }\n  }\n\n  /**\n   * Log API request/response for error context\n   */\n  logApiError(\n    url: string,\n    method: string,\n    status: number,\n    error: EnhancedISPError,\n    requestDuration: number,\n    requestPayload?: any,\n    responsePayload?: any,\n  ): void {\n    const apiContext: Partial<ErrorLogEntry> = {\n      operation: `${method} ${url}`,\n      resource: \"api_endpoint\",\n      duration: requestDuration,\n      metadata: {\n        httpMethod: method,\n        httpStatus: status,\n        requestPayload: this.sanitizePayload(requestPayload),\n        responsePayload: this.sanitizePayload(responsePayload),\n      },\n    };\n\n    this.logError(error, apiContext);\n  }\n\n  /**\n   * Log business operation errors with workflow context\n   */\n  logBusinessError(\n    error: EnhancedISPError,\n    businessProcess: string,\n    workflowStep: string,\n    customerImpact: \"none\" | \"low\" | \"medium\" | \"high\" | \"critical\",\n    metadata: Record<string, any> = {},\n  ): void {\n    const businessContext: Partial<ErrorLogEntry> = {\n      businessProcess,\n      workflowStep,\n      customerImpact,\n      metadata: this.sanitizePayload(metadata),\n    };\n\n    this.logError(error, businessContext);\n  }\n\n  /**\n   * Get current error metrics\n   */\n  getMetrics(): ErrorMetrics {\n    const now = Date.now();\n    const oneMinuteAgo = now - 60000;\n\n    // Filter recent errors for rate calculation\n    const recentErrors = this.logBuffer.filter(\n      (entry) => new Date(entry.timestamp).getTime() > oneMinuteAgo,\n    );\n\n    const errorCounts = new Map<ErrorCode, number>();\n    const categoryCounts = new Map<string, number>();\n    const impactCounts = new Map<string, number>();\n    let criticalCount = 0;\n\n    this.logBuffer.forEach((entry) => {\n      if (entry.severity === \"critical\") criticalCount++;\n\n      errorCounts.set(entry.errorCode, (errorCounts.get(entry.errorCode) || 0) + 1);\n      categoryCounts.set(entry.category, (categoryCounts.get(entry.category) || 0) + 1);\n\n      if (entry.customerImpact) {\n        impactCounts.set(entry.customerImpact, (impactCounts.get(entry.customerImpact) || 0) + 1);\n      }\n    });\n\n    return {\n      errorCount: this.logBuffer.length,\n      errorRate: recentErrors.length,\n      criticalErrorCount: criticalCount,\n      topErrorCodes: Array.from(errorCounts.entries())\n        .map(([code, count]) => ({ code, count }))\n        .sort((a, b) => b.count - a.count)\n        .slice(0, 10),\n      topErrorCategories: Array.from(categoryCounts.entries())\n        .map(([category, count]) => ({ category, count }))\n        .sort((a, b) => b.count - a.count)\n        .slice(0, 5),\n      customerImpactDistribution: Object.fromEntries(impactCounts),\n    };\n  }\n\n  /**\n   * Clear old logs to prevent memory issues\n   */\n  clearOldLogs(maxAge: number = 3600000): void {\n    // Default 1 hour\n    const cutoff = Date.now() - maxAge;\n    this.logBuffer = this.logBuffer.filter((entry) => new Date(entry.timestamp).getTime() > cutoff);\n  }\n\n  /**\n   * Force flush all pending logs\n   */\n  async flushLogs(): Promise<void> {\n    if (this.logBuffer.length === 0) return;\n\n    const logsToSend = [...this.logBuffer];\n    this.logBuffer = [];\n\n    try {\n      if (this.config.endpoints.logs) {\n        // Try to send logs to endpoint\n        if (this.isOnline) {\n          await this.sendLogsToEndpoint(logsToSend, this.config.endpoints.logs);\n        } else {\n          // Offline - save to persistent queue\n          this.saveToPersistentQueue(logsToSend);\n        }\n      }\n    } catch (error) {\n      // Failed to send - save to persistent queue for retry\n      this.saveToPersistentQueue(logsToSend);\n      console.error(\"Failed to flush error logs, saved to persistent queue:\", error);\n    }\n  }\n\n  /**\n   * Save logs to persistent queue for offline support\n   */\n  private saveToPersistentQueue(logs: ErrorLogEntry[]): void {\n    const persistentQueue = getErrorQueue({\n      errorEndpoint: this.config.endpoints.logs,\n      maxQueueSize: 100,\n      autoSync: true,\n    });\n\n    // Convert logs to standard error format\n    logs.forEach((log) => {\n      const standardError: StandardErrorResponse = {\n        error_code: log.errorCode,\n        message: log.message,\n        user_message: log.message, // Use same message for now\n        correlation_id: log.correlationId || `err_${Date.now()}`,\n        timestamp: log.timestamp,\n        status: 500, // Default status for logged errors\n        severity: this.mapSeverity(log.severity),\n        category: this.mapCategory(log.category),\n        retryable: true,\n        details: {\n          ...log.technicalDetails,\n          errorId: log.errorId,\n          component: log.component,\n          operation: log.operation,\n          resource: log.resource,\n          businessProcess: log.businessProcess,\n          workflowStep: log.workflowStep,\n          customerImpact: log.customerImpact,\n        },\n        trace_id: log.traceId,\n        request_id: log.requestId,\n      };\n\n      persistentQueue.enqueue(standardError);\n    });\n  }\n\n  /**\n   * Map severity to standard format\n   */\n  private mapSeverity(severity: string): import(\"../types/error-contract\").ErrorSeverity {\n    const { ErrorSeverity } = require(\"../types/error-contract\");\n    switch (severity.toLowerCase()) {\n      case \"low\":\n        return ErrorSeverity.LOW;\n      case \"medium\":\n        return ErrorSeverity.MEDIUM;\n      case \"high\":\n        return ErrorSeverity.HIGH;\n      case \"critical\":\n        return ErrorSeverity.CRITICAL;\n      default:\n        return ErrorSeverity.MEDIUM;\n    }\n  }\n\n  /**\n   * Map category to standard format\n   */\n  private mapCategory(category: string): import(\"../types/error-contract\").ErrorCategory {\n    const { ErrorCategory } = require(\"../types/error-contract\");\n    switch (category.toLowerCase()) {\n      case \"network\":\n        return ErrorCategory.NETWORK;\n      case \"validation\":\n        return ErrorCategory.VALIDATION;\n      case \"authentication\":\n        return ErrorCategory.AUTHENTICATION;\n      case \"authorization\":\n        return ErrorCategory.AUTHORIZATION;\n      case \"business\":\n        return ErrorCategory.BUSINESS;\n      case \"system\":\n        return ErrorCategory.SYSTEM;\n      case \"database\":\n        return ErrorCategory.DATABASE;\n      case \"external_service\":\n        return ErrorCategory.EXTERNAL_SERVICE;\n      default:\n        return ErrorCategory.UNKNOWN;\n    }\n  }\n\n  /**\n   * Generate error report for debugging\n   */\n  generateErrorReport(timeRange: { start: Date; end: Date }): {\n    summary: ErrorMetrics;\n    detailedLogs: ErrorLogEntry[];\n    insights: string[];\n  } {\n    const filteredLogs = this.logBuffer.filter((entry) => {\n      const timestamp = new Date(entry.timestamp);\n      return timestamp >= timeRange.start && timestamp <= timeRange.end;\n    });\n\n    const insights: string[] = [];\n    const metrics = this.getMetrics();\n\n    // Generate insights\n    if (metrics.criticalErrorCount > 0) {\n      insights.push(\n        `${metrics.criticalErrorCount} critical errors detected requiring immediate attention`,\n      );\n    }\n\n    if (metrics.errorRate > 10) {\n      insights.push(`High error rate detected: ${metrics.errorRate} errors/minute`);\n    }\n\n    const customerImpactHigh = metrics.customerImpactDistribution.high || 0;\n    const customerImpactCritical = metrics.customerImpactDistribution.critical || 0;\n    if (customerImpactHigh + customerImpactCritical > 0) {\n      insights.push(\n        `${customerImpactHigh + customerImpactCritical} errors with high customer impact`,\n      );\n    }\n\n    return {\n      summary: metrics,\n      detailedLogs: filteredLogs,\n      insights,\n    };\n  }\n\n  private createLogEntry(\n    error: EnhancedISPError,\n    additionalContext: Partial<ErrorLogEntry>,\n  ): ErrorLogEntry {\n    const errorResponse = error.toEnhancedResponse();\n\n    return {\n      errorId: errorResponse.error.id,\n      errorCode: errorResponse.error.code,\n      message: errorResponse.error.message,\n      severity: errorResponse.error.severity,\n      category: errorResponse.error.category,\n      timestamp: new Date().toISOString(),\n\n      // Context from error\n      correlationId: errorResponse.context.correlationId,\n      traceId: errorResponse.context.traceId,\n      operation: errorResponse.context.operation,\n      resource: errorResponse.context.resource,\n      resourceId: errorResponse.context.resourceId,\n      businessProcess: errorResponse.context.businessProcess,\n      workflowStep: errorResponse.context.workflowStep,\n      customerImpact: errorResponse.context.customerImpact,\n      service: errorResponse.context.service,\n      component: errorResponse.context.component,\n      version: errorResponse.context.version,\n      environment: errorResponse.context.environment,\n\n      // Technical details\n      stackTrace: error.stack,\n      technicalDetails: errorResponse.details.debugInfo,\n\n      // Browser context\n      url: typeof window !== \"undefined\" ? window.location.href : \"unknown\",\n      userAgent: typeof navigator !== \"undefined\" ? navigator.userAgent : \"unknown\",\n\n      // Additional context\n      tags: errorResponse.context.tags,\n      metadata: errorResponse.context.metadata,\n\n      // Override with additional context\n      ...additionalContext,\n    };\n  }\n\n  private shouldLog(error: EnhancedISPError): boolean {\n    const { filters } = this.config;\n\n    // Check severity filter\n    if (filters.minSeverity) {\n      const severityOrder = { low: 1, medium: 2, high: 3, critical: 4 };\n      if (\n        severityOrder[error.severity] <\n        severityOrder[filters.minSeverity as keyof typeof severityOrder]\n      ) {\n        return false;\n      }\n    }\n\n    // Check category filter\n    if (filters.excludeCategories?.includes(error.category)) {\n      return false;\n    }\n\n    // Check error code filter\n    if (filters.excludeCodes?.includes(error.errorCode)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private logToConsole(logEntry: ErrorLogEntry): void {\n    const logLevel = logEntry.severity === \"critical\" ? \"error\" : \"warn\";\n\n    console[logLevel](\" Enhanced ISP Error:\", {\n      id: logEntry.errorId,\n      code: logEntry.errorCode,\n      message: logEntry.message,\n      severity: logEntry.severity,\n      context: {\n        operation: logEntry.operation,\n        resource: logEntry.resource,\n        businessProcess: logEntry.businessProcess,\n        customerImpact: logEntry.customerImpact,\n      },\n      technicalDetails: logEntry.technicalDetails,\n    });\n  }\n\n  private updateMetrics(error: EnhancedISPError): void {\n    const metricKey = `error.${error.errorCode}`;\n    this.metricsBuffer.set(metricKey, (this.metricsBuffer.get(metricKey) || 0) + 1);\n\n    const categoryKey = `error.category.${error.category}`;\n    this.metricsBuffer.set(categoryKey, (this.metricsBuffer.get(categoryKey) || 0) + 1);\n\n    const severityKey = `error.severity.${error.severity}`;\n    this.metricsBuffer.set(severityKey, (this.metricsBuffer.get(severityKey) || 0) + 1);\n  }\n\n  private async sendLogsToEndpoint(logs: ErrorLogEntry[], endpoint: string): Promise<void> {\n    const response = await fetch(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ logs }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to send logs: ${response.status} ${response.statusText}`);\n    }\n  }\n\n  private sendTrace(logEntry: ErrorLogEntry): void {\n    // Integration with tracing systems like Jaeger, Zipkin, etc.\n    if (this.config.endpoints.traces && logEntry.traceId) {\n      const traceSpan = {\n        traceId: logEntry.traceId,\n        spanId: logEntry.spanId || this.generateSpanId(),\n        operationName: logEntry.operation || \"error\",\n        startTime: new Date(logEntry.timestamp).getTime() * 1000, // microseconds\n        duration: logEntry.duration ? logEntry.duration * 1000 : 0,\n        tags: {\n          error: true,\n          \"error.code\": logEntry.errorCode,\n          \"error.severity\": logEntry.severity,\n          \"service.name\": logEntry.service || \"isp-frontend\",\n          component: logEntry.component || \"unknown\",\n        },\n        logs: [\n          {\n            timestamp: new Date(logEntry.timestamp).getTime() * 1000,\n            fields: [\n              { key: \"event\", value: \"error\" },\n              { key: \"error.message\", value: logEntry.message },\n              { key: \"error.stack\", value: logEntry.stackTrace },\n            ],\n          },\n        ],\n      };\n\n      // Send trace asynchronously\n      fetch(this.config.endpoints.traces, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ spans: [traceSpan] }),\n      }).catch((error) => {\n        console.warn(\"Failed to send trace:\", error);\n      });\n    }\n  }\n\n  private sanitizePayload(payload: any): any {\n    if (!payload) return payload;\n\n    // Remove sensitive fields\n    const sensitiveFields = [\"password\", \"token\", \"secret\", \"key\", \"auth\", \"credit_card\"];\n\n    if (typeof payload === \"object\") {\n      const sanitized = { ...payload };\n\n      for (const key in sanitized) {\n        if (sensitiveFields.some((field) => key.toLowerCase().includes(field))) {\n          sanitized[key] = \"[REDACTED]\";\n        } else if (typeof sanitized[key] === \"object\") {\n          sanitized[key] = this.sanitizePayload(sanitized[key]);\n        }\n      }\n\n      return sanitized;\n    }\n\n    return payload;\n  }\n\n  private setupFlushTimer(): void {\n    this.flushTimer = setInterval(() => {\n      if (\n        this.logBuffer.length >= this.config.batchSize ||\n        (this.logBuffer.length > 0 && !this.isOnline)\n      ) {\n        this.flushLogs();\n      }\n    }, this.config.flushInterval);\n  }\n\n  private setupNetworkStatusListener(): void {\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"online\", () => {\n        this.isOnline = true;\n        // Flush pending logs when coming back online\n        if (this.logBuffer.length > 0) {\n          this.flushLogs();\n        }\n      });\n\n      window.addEventListener(\"offline\", () => {\n        this.isOnline = false;\n      });\n\n      this.isOnline = navigator.onLine;\n    }\n  }\n\n  private generateSpanId(): string {\n    return Math.random().toString(16).substr(2, 16);\n  }\n}\n\n// Singleton instance\nexport const errorLogger = new ErrorLoggingService();\n\n// Configuration helper\nexport function configureErrorLogging(config: Partial<ErrorLoggingConfig>): void {\n  // Create new instance with updated config\n  Object.assign(errorLogger, new ErrorLoggingService(config));\n}\n\nexport default ErrorLoggingService;\n","/**\n * Secure form validation hook with XSS prevention and input sanitization\n */\n\nimport { useState, useCallback, useRef, useEffect } from \"react\";\nimport { z } from \"zod\";\n\ninterface FormError {\n  field: string;\n  message: string;\n  code: string;\n}\n\ninterface UseSecureFormOptions<T> {\n  schema: z.ZodSchema<T>;\n  onSubmit: (data: T) => Promise<void> | void;\n  initialValues?: Partial<T>;\n  validateOnChange?: boolean;\n  validateOnBlur?: boolean;\n  sanitizeHtml?: boolean;\n  preventXSS?: boolean;\n  enableCSRFProtection?: boolean;\n}\n\ninterface UseSecureFormReturn<T> {\n  values: Partial<T>;\n  errors: FormError[];\n  isValid: boolean;\n  isSubmitting: boolean;\n  isDirty: boolean;\n  setValue: (field: keyof T, value: any) => void;\n  setValues: (values: Partial<T>) => void;\n  validateField: (field: keyof T) => Promise<boolean>;\n  validateForm: () => Promise<boolean>;\n  handleSubmit: (e: React.FormEvent) => Promise<void>;\n  handleChange: (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>,\n  ) => void;\n  handleBlur: (\n    e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>,\n  ) => void;\n  reset: () => void;\n  getFieldError: (field: keyof T) => string | undefined;\n  hasFieldError: (field: keyof T) => boolean;\n  csrfToken?: string;\n}\n\n// XSS Prevention utilities\nconst xssPatterns = [\n  /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n  /<iframe\\b[^<]*(?:(?!<\\/iframe>)<[^<]*)*<\\/iframe>/gi,\n  /javascript:/gi,\n  /vbscript:/gi,\n  /onload\\s*=/gi,\n  /onerror\\s*=/gi,\n  /onclick\\s*=/gi,\n  /onmouseover\\s*=/gi,\n];\n\nconst sanitizeHtml = (input: string): string => {\n  let sanitized = input;\n\n  // Remove potentially dangerous patterns\n  xssPatterns.forEach((pattern) => {\n    sanitized = sanitized.replace(pattern, \"\");\n  });\n\n  // Escape remaining HTML entities\n  return sanitized\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#x27;\")\n    .replace(/\\//g, \"&#x2F;\");\n};\n\nconst preventXSS = (input: any): any => {\n  if (typeof input === \"string\") {\n    // Remove or escape dangerous characters\n    return input\n      .replace(/[<>]/g, \"\") // Remove angle brackets\n      .replace(/javascript:/gi, \"\") // Remove javascript: protocol\n      .replace(/vbscript:/gi, \"\") // Remove vbscript: protocol\n      .replace(/data:text\\/html/gi, \"\") // Remove data URIs that could contain HTML\n      .trim();\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(preventXSS);\n  }\n\n  if (typeof input === \"object\" && input !== null) {\n    const sanitized: any = {};\n    for (const [key, value] of Object.entries(input)) {\n      sanitized[key] = preventXSS(value);\n    }\n    return sanitized;\n  }\n\n  return input;\n};\n\n// Generate CSRF token\nconst generateCSRFToken = (): string => {\n  if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\n    const array = new Uint8Array(32);\n    crypto.getRandomValues(array);\n    return Array.from(array, (byte) => byte.toString(16).padStart(2, \"0\")).join(\"\");\n  }\n\n  // Fallback for environments without crypto.getRandomValues\n  return Date.now().toString(36) + Math.random().toString(36);\n};\n\nexport function useSecureForm<T extends Record<string, any>>({\n  schema,\n  onSubmit,\n  initialValues = {},\n  validateOnChange = false,\n  validateOnBlur = true,\n  sanitizeHtml: shouldSanitizeHtml = true,\n  preventXSS: shouldPreventXSS = true,\n  enableCSRFProtection = true,\n}: UseSecureFormOptions<T>): UseSecureFormReturn<T> {\n  const [values, setValuesState] = useState<Partial<T>>(initialValues);\n  const [errors, setErrors] = useState<FormError[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isDirty, setIsDirty] = useState(false);\n  const [csrfToken] = useState<string>(() => (enableCSRFProtection ? generateCSRFToken() : \"\"));\n\n  const initialValuesRef = useRef(initialValues);\n  const formRef = useRef<HTMLFormElement>(null);\n\n  // Security: Store CSRF token in session storage\n  useEffect(() => {\n    if (enableCSRFProtection && csrfToken) {\n      sessionStorage.setItem(\"csrf-token\", csrfToken);\n    }\n\n    return () => {\n      if (enableCSRFProtection) {\n        sessionStorage.removeItem(\"csrf-token\");\n      }\n    };\n  }, [csrfToken, enableCSRFProtection]);\n\n  const sanitizeInput = useCallback(\n    (value: any): any => {\n      if (shouldPreventXSS) {\n        value = preventXSS(value);\n      }\n\n      if (shouldSanitizeHtml && typeof value === \"string\") {\n        value = sanitizeHtml(value);\n      }\n\n      return value;\n    },\n    [shouldPreventXSS, shouldSanitizeHtml],\n  );\n\n  const validateField = useCallback(\n    async (field: keyof T): Promise<boolean> => {\n      try {\n        // Create a partial schema for the specific field\n        const fieldValue = values[field];\n        const fieldSchema = schema.pick({ [field]: true } as any);\n\n        await fieldSchema.parseAsync({ [field]: fieldValue });\n\n        // Remove any existing errors for this field\n        setErrors((prev) => prev.filter((error) => error.field !== (field as string)));\n        return true;\n      } catch (error) {\n        if (error instanceof z.ZodError) {\n          const fieldErrors = error.errors.map((err) => ({\n            field: err.path[0] as string,\n            message: err.message,\n            code: err.code,\n          }));\n\n          setErrors((prev) => [\n            ...prev.filter((error) => error.field !== (field as string)),\n            ...fieldErrors,\n          ]);\n        }\n        return false;\n      }\n    },\n    [values, schema],\n  );\n\n  const validateForm = useCallback(async (): Promise<boolean> => {\n    try {\n      await schema.parseAsync(values);\n      setErrors([]);\n      return true;\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const formErrors = error.errors.map((err) => ({\n          field: err.path[0] as string,\n          message: err.message,\n          code: err.code,\n        }));\n        setErrors(formErrors);\n      }\n      return false;\n    }\n  }, [values, schema]);\n\n  const setValue = useCallback(\n    (field: keyof T, value: any) => {\n      const sanitizedValue = sanitizeInput(value);\n\n      setValuesState((prev) => ({\n        ...prev,\n        [field]: sanitizedValue,\n      }));\n\n      setIsDirty(true);\n\n      if (validateOnChange) {\n        validateField(field);\n      }\n    },\n    [sanitizeInput, validateOnChange, validateField],\n  );\n\n  const setValues = useCallback(\n    (newValues: Partial<T>) => {\n      const sanitizedValues = sanitizeInput(newValues);\n      setValuesState(sanitizedValues);\n      setIsDirty(true);\n    },\n    [sanitizeInput],\n  );\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n      const { name, value, type } = e.target;\n      const finalValue = type === \"checkbox\" ? (e.target as HTMLInputElement).checked : value;\n\n      setValue(name as keyof T, finalValue);\n    },\n    [setValue],\n  );\n\n  const handleBlur = useCallback(\n    (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n      const { name } = e.target;\n\n      if (validateOnBlur) {\n        validateField(name as keyof T);\n      }\n    },\n    [validateOnBlur, validateField],\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Security check: Verify CSRF token if enabled\n      if (enableCSRFProtection) {\n        const storedToken = sessionStorage.getItem(\"csrf-token\");\n        if (storedToken !== csrfToken) {\n          console.error(\"CSRF token mismatch\");\n          return;\n        }\n      }\n\n      setIsSubmitting(true);\n\n      try {\n        const isValid = await validateForm();\n        if (!isValid) {\n          return;\n        }\n\n        // Final sanitization before submission\n        const sanitizedValues = sanitizeInput(values);\n        await onSubmit(sanitizedValues as T);\n      } catch (error) {\n        console.error(\"Form submission error:\", error);\n        // Could add error handling here\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [values, onSubmit, validateForm, sanitizeInput, enableCSRFProtection, csrfToken],\n  );\n\n  const reset = useCallback(() => {\n    setValuesState(initialValuesRef.current);\n    setErrors([]);\n    setIsDirty(false);\n    setIsSubmitting(false);\n  }, []);\n\n  const getFieldError = useCallback(\n    (field: keyof T): string | undefined => {\n      return errors.find((error) => error.field === (field as string))?.message;\n    },\n    [errors],\n  );\n\n  const hasFieldError = useCallback(\n    (field: keyof T): boolean => {\n      return errors.some((error) => error.field === (field as string));\n    },\n    [errors],\n  );\n\n  const isValid = errors.length === 0;\n\n  return {\n    values,\n    errors,\n    isValid,\n    isSubmitting,\n    isDirty,\n    setValue,\n    setValues,\n    validateField,\n    validateForm,\n    handleSubmit,\n    handleChange,\n    handleBlur,\n    reset,\n    getFieldError,\n    hasFieldError,\n    csrfToken: enableCSRFProtection ? csrfToken : undefined,\n  };\n}\n","/**\n * Performance Observers Hook\n * Handles setup and management of performance observers\n */\n\nimport { useEffect, useRef } from \"react\";\nimport type { MutableRefObject } from \"react\";\nimport type { PerformanceMetrics, PerformanceObserverConfig } from \"./types\";\n\nexport function usePerformanceObservers(\n  metrics: MutableRefObject<PerformanceMetrics>,\n  config: PerformanceObserverConfig,\n) {\n  const observersRef = useRef<PerformanceObserver[]>([]);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\" || !(\"PerformanceObserver\" in window)) {\n      return;\n    }\n\n    const observers: PerformanceObserver[] = [];\n\n    // Core Web Vitals Observer\n    if (config.enableCoreWebVitals) {\n      try {\n        const coreWebVitalsObserver = createCoreWebVitalsObserver(metrics.current);\n        observers.push(coreWebVitalsObserver);\n      } catch (error) {\n        if (config.enableConsoleLogging) {\n          console.warn(\"Failed to create Core Web Vitals observer:\", error);\n        }\n      }\n    }\n\n    // Resource Timing Observer\n    if (config.enableResourceTiming) {\n      try {\n        const resourceObserver = createResourceObserver(metrics.current);\n        observers.push(resourceObserver);\n      } catch (error) {\n        if (config.enableConsoleLogging) {\n          console.warn(\"Failed to create Resource Timing observer:\", error);\n        }\n      }\n    }\n\n    // Navigation Timing Observer\n    if (config.enableNavigationTiming) {\n      try {\n        const navigationObserver = createNavigationObserver(metrics.current);\n        observers.push(navigationObserver);\n      } catch (error) {\n        if (config.enableConsoleLogging) {\n          console.warn(\"Failed to create Navigation Timing observer:\", error);\n        }\n      }\n    }\n\n    observersRef.current = observers;\n\n    return () => {\n      observers.forEach((observer) => observer.disconnect());\n      observersRef.current = [];\n    };\n  }, [config, metrics]);\n\n  return observersRef;\n}\n\nfunction createCoreWebVitalsObserver(metrics: PerformanceMetrics): PerformanceObserver {\n  const observer = new PerformanceObserver((list) => {\n    for (const entry of list.getEntries()) {\n      processPerformanceEntry(entry, metrics);\n    }\n  });\n\n  const entryTypes = [\n    \"paint\",\n    \"largest-contentful-paint\",\n    \"first-input\",\n    \"layout-shift\",\n    \"navigation\",\n  ];\n  entryTypes.forEach((type) => {\n    try {\n      observer.observe({ entryTypes: [type] });\n    } catch {\n      // Silently ignore unsupported observer types\n    }\n  });\n\n  return observer;\n}\n\nfunction createResourceObserver(metrics: PerformanceMetrics): PerformanceObserver {\n  const observer = new PerformanceObserver((list) => {\n    const resourceEntries = list.getEntries() as PerformanceResourceTiming[];\n    metrics.resourceCount = (metrics.resourceCount || 0) + resourceEntries.length;\n\n    const totalSize = resourceEntries.reduce((sum, entry) => sum + (entry.transferSize || 0), 0);\n    metrics.totalResourceSize = (metrics.totalResourceSize || 0) + totalSize;\n  });\n\n  observer.observe({ entryTypes: [\"resource\"] });\n  return observer;\n}\n\nfunction createNavigationObserver(metrics: PerformanceMetrics): PerformanceObserver {\n  const observer = new PerformanceObserver((list) => {\n    const navEntries = list.getEntries() as PerformanceNavigationTiming[];\n    for (const entry of navEntries) {\n      const start = entry.startTime;\n      metrics.navigationStart = start;\n      metrics.domContentLoaded = entry.domContentLoadedEventEnd - start;\n      metrics.loadComplete = entry.loadEventEnd - start;\n    }\n  });\n\n  observer.observe({ entryTypes: [\"navigation\"] });\n  return observer;\n}\n\nfunction processPerformanceEntry(entry: PerformanceEntry, metrics: PerformanceMetrics): void {\n  switch (entry.entryType) {\n    case \"paint\":\n      if (entry.name === \"first-contentful-paint\") {\n        metrics.fcp = entry.startTime;\n      }\n      break;\n    case \"largest-contentful-paint\":\n      metrics.lcp = entry.startTime;\n      break;\n    case \"first-input\":\n      metrics.fid = (entry as any).processingStart - entry.startTime;\n      break;\n    case \"layout-shift\":\n      if (!(entry as any).hadRecentInput) {\n        metrics.cls = (metrics.cls || 0) + (entry as any).value;\n      }\n      break;\n    case \"navigation\": {\n      const navEntry = entry as PerformanceNavigationTiming;\n      metrics.ttfb = navEntry.responseStart - navEntry.requestStart;\n      break;\n    }\n  }\n}\n","/**\n * Metric Tracking Hook\n * Handles custom metrics and tracking functionality\n */\n\nimport { useCallback } from \"react\";\nimport type { PerformanceMetrics, PerformanceObserverConfig } from \"./types\";\n\nexport function useMetricTracking(\n  metrics: React.MutableRefObject<PerformanceMetrics>,\n  config: PerformanceObserverConfig,\n) {\n  const trackCustomMetric = useCallback(\n    (name: string, value: number) => {\n      if (!config.enableCustomMetrics) {\n        return;\n      }\n\n      metrics.current.customMetrics[name] = value;\n      if (config.enableConsoleLogging) {\n        console.log(` Custom metric tracked: ${name} = ${value}`);\n      }\n    },\n    [config.enableCustomMetrics, config.enableConsoleLogging, metrics],\n  );\n\n  const trackInteraction = useCallback(\n    (interactionName: string, startTime?: number) => {\n      const endTime = performance.now();\n      const duration = startTime ? endTime - startTime : endTime;\n      trackCustomMetric(`interaction_${interactionName}`, duration);\n    },\n    [trackCustomMetric],\n  );\n\n  const trackApiCall = useCallback(\n    (endpoint: string, duration: number, success: boolean) => {\n      const cleanEndpoint = endpoint.replace(/[^a-zA-Z0-9]/g, \"_\");\n      trackCustomMetric(`api_${cleanEndpoint}_duration`, duration);\n      trackCustomMetric(`api_${cleanEndpoint}_success`, success ? 1 : 0);\n    },\n    [trackCustomMetric],\n  );\n\n  const trackComponentRender = useCallback(\n    (componentName: string, renderTime: number) => {\n      trackCustomMetric(`component_${componentName}_render`, renderTime);\n    },\n    [trackCustomMetric],\n  );\n\n  return {\n    trackCustomMetric,\n    trackInteraction,\n    trackApiCall,\n    trackComponentRender,\n  };\n}\n","/**\n * Performance Reporting Utilities\n */\n\nimport type { PerformanceMetrics, PerformanceObserverConfig } from \"./types\";\n\nexport function reportMetrics(\n  metrics: PerformanceMetrics,\n  config: PerformanceObserverConfig,\n): void {\n  if (config.enableConsoleLogging) {\n    logMetricsToConsole(metrics);\n  }\n\n  if (config.reportingEndpoint) {\n    sendMetricsToEndpoint(metrics, config.reportingEndpoint, config.enableConsoleLogging ?? false);\n  }\n\n  if (typeof window !== \"undefined\" && (window as any).gtag) {\n    sendMetricsToGoogleAnalytics(metrics);\n  }\n}\n\nfunction logMetricsToConsole(metrics: PerformanceMetrics): void {\n  console.group(\" Performance Metrics\");\n\n  logWebVitalMetrics(metrics);\n  logLoadMetrics(metrics);\n  logCustomMetrics(metrics.customMetrics);\n\n  console.groupEnd();\n}\n\nfunction logWebVitalMetrics(metrics: PerformanceMetrics): void {\n  logMetric(\" First Contentful Paint\", metrics.fcp, (v) => `${v.toFixed(2)}ms`);\n  logMetric(\" Largest Contentful Paint\", metrics.lcp, (v) => `${v.toFixed(2)}ms`);\n  logMetric(\" First Input Delay\", metrics.fid, (v) => `${v.toFixed(2)}ms`);\n  logMetric(\" Cumulative Layout Shift\", metrics.cls, (v) => v.toFixed(4));\n  logMetric(\" Time to First Byte\", metrics.ttfb, (v) => `${v.toFixed(2)}ms`);\n}\n\nfunction logLoadMetrics(metrics: PerformanceMetrics): void {\n  logMetric(\" DOM Content Loaded\", metrics.domContentLoaded, (v) => `${v.toFixed(2)}ms`);\n  logMetric(\" Load Complete\", metrics.loadComplete, (v) => `${v.toFixed(2)}ms`);\n  logMetric(\" Resource Count\", metrics.resourceCount, (v) => v.toString());\n  logMetric(\n    \" Total Resource Size\",\n    metrics.totalResourceSize,\n    (v) => `${(v / 1024).toFixed(2)}KB`,\n  );\n}\n\nfunction logCustomMetrics(customMetrics: Record<string, number>): void {\n  if (Object.keys(customMetrics).length > 0) {\n    console.log(\" Custom Metrics:\");\n    for (const [name, value] of Object.entries(customMetrics)) {\n      console.log(`  ${name}: ${value}`);\n    }\n  }\n}\n\nfunction logMetric(\n  label: string,\n  value: number | undefined,\n  formatter: (v: number) => string,\n): void {\n  if (value !== undefined) {\n    console.log(`${label}: ${formatter(value)}`);\n  }\n}\n\nfunction sendMetricsToEndpoint(\n  metrics: PerformanceMetrics,\n  endpoint: string,\n  enableLogging: boolean,\n): void {\n  const payload = {\n    timestamp: new Date().toISOString(),\n    url: window.location.href,\n    userAgent: navigator.userAgent,\n    metrics,\n  };\n\n  fetch(endpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload),\n    keepalive: true,\n  }).catch(() => {\n    if (enableLogging) {\n      console.error(\"Failed to send metrics to endpoint:\", endpoint);\n    }\n  });\n}\n\nfunction sendMetricsToGoogleAnalytics(metrics: PerformanceMetrics): void {\n  const gtag = (window as any).gtag;\n  if (!gtag) return;\n\n  const events = [\n    { metric: metrics.fcp, event: \"first_contentful_paint\" },\n    { metric: metrics.lcp, event: \"largest_contentful_paint\" },\n    { metric: metrics.fid, event: \"first_input_delay\" },\n    { metric: metrics.cls, event: \"cumulative_layout_shift\", multiplier: 1000 },\n  ];\n\n  events.forEach(({ metric, event, multiplier = 1 }) => {\n    if (metric !== undefined) {\n      gtag(\"event\", event, { value: Math.round(metric * multiplier) });\n    }\n  });\n}\n","/**\n * Performance Reporting Hook\n * Handles metric reporting and data transmission\n */\n\nimport { useCallback, useEffect, useRef } from \"react\";\nimport type { MutableRefObject } from \"react\";\nimport type { PerformanceMetrics, PerformanceObserverConfig } from \"./types\";\nimport { reportMetrics } from \"./reportingUtils\";\n\nexport function usePerformanceReporting(\n  metrics: MutableRefObject<PerformanceMetrics>,\n  config: PerformanceObserverConfig,\n) {\n  const reportingTimerRef = useRef<NodeJS.Timeout>();\n\n  // Setup automatic reporting interval\n  useEffect(() => {\n    if (config.reportingInterval && config.reportingInterval > 0) {\n      reportingTimerRef.current = setInterval(() => {\n        reportMetrics(metrics.current, config);\n      }, config.reportingInterval);\n\n      return () => {\n        if (reportingTimerRef.current) {\n          clearInterval(reportingTimerRef.current);\n        }\n      };\n    }\n    return undefined;\n  }, [config, metrics]);\n\n  const reportNow = useCallback(() => {\n    reportMetrics(metrics.current, config);\n  }, [config, metrics]);\n\n  const getMetrics = useCallback(() => {\n    return { ...metrics.current };\n  }, [metrics]);\n\n  return {\n    reportNow,\n    getMetrics,\n  };\n}\n","/**\n * Refactored Performance Monitoring Hook\n * Main hook that orchestrates performance monitoring functionality\n */\n\nimport { useMemo, useRef } from \"react\";\nimport type { PerformanceMetrics, PerformanceObserverConfig } from \"./types\";\nimport { usePerformanceObservers } from \"./usePerformanceObservers\";\nimport { useMetricTracking } from \"./useMetricTracking\";\nimport { usePerformanceReporting } from \"./usePerformanceReporting\";\n\nconst defaultConfig: PerformanceObserverConfig = {\n  enableCoreWebVitals: true,\n  enableResourceTiming: true,\n  enableNavigationTiming: true,\n  enableCustomMetrics: true,\n  reportingInterval: 30000, // 30 seconds\n  enableConsoleLogging: process.env[\"NODE_ENV\"] === \"development\",\n};\n\nexport function usePerformanceMonitoring(config: PerformanceObserverConfig = {}) {\n  const finalConfig = useMemo(() => ({ ...defaultConfig, ...config }), [config]);\n\n  const metricsRef = useRef<PerformanceMetrics>({\n    customMetrics: {},\n  });\n\n  // Set up performance observers\n  usePerformanceObservers(metricsRef, finalConfig);\n\n  // Set up metric tracking\n  const metricTracking = useMetricTracking(metricsRef, finalConfig);\n\n  // Set up reporting\n  const reporting = usePerformanceReporting(metricsRef, finalConfig);\n\n  return {\n    ...metricTracking,\n    ...reporting,\n  };\n}\n","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { useNotifications } from \"./useNotifications\";\n\nexport interface ServiceTemplate {\n  id: string;\n  name: string;\n  category: \"internet\" | \"phone\" | \"tv\" | \"bundle\";\n  speed?: string;\n  features: string[];\n  pricing: {\n    setup: number;\n    monthly: number;\n    annual?: number;\n  };\n  requirements: {\n    equipment: string[];\n    technician: boolean;\n    coverage: string[];\n  };\n  sla: {\n    provisioningTime: number; // hours\n    installationWindow: string;\n    supportLevel: string;\n  };\n  metadata?: Record<string, any>;\n}\n\nexport interface ProvisioningRequest {\n  id: string;\n  customerId: string;\n  serviceTemplateId: string;\n  status:\n    | \"pending\"\n    | \"approved\"\n    | \"provisioning\"\n    | \"installing\"\n    | \"active\"\n    | \"failed\"\n    | \"cancelled\";\n  priority: \"low\" | \"medium\" | \"high\" | \"urgent\";\n  requestedAt: Date;\n  scheduledAt?: Date;\n  completedAt?: Date;\n  assignedTechnician?: string;\n  installationAddress: {\n    street: string;\n    city: string;\n    state: string;\n    zip: string;\n    coordinates?: { lat: number; lng: number };\n  };\n  customerInfo: {\n    name: string;\n    email: string;\n    phone: string;\n    preferences?: {\n      contactMethod: string;\n      installationTime: string;\n    };\n  };\n  equipment: EquipmentOrder[];\n  tasks: ProvisioningTask[];\n  notes?: string;\n  metadata?: Record<string, any>;\n}\n\nexport interface EquipmentOrder {\n  id: string;\n  name: string;\n  type: \"modem\" | \"router\" | \"cable\" | \"dish\" | \"stb\" | \"other\";\n  quantity: number;\n  serialNumbers?: string[];\n  status: \"ordered\" | \"shipped\" | \"delivered\" | \"installed\";\n  trackingNumber?: string;\n  vendor?: string;\n  model?: string;\n}\n\nexport interface ProvisioningTask {\n  id: string;\n  name: string;\n  type: \"automated\" | \"manual\" | \"technician\";\n  status: \"pending\" | \"in_progress\" | \"completed\" | \"failed\" | \"skipped\";\n  assignedTo?: string;\n  estimatedDuration: number; // minutes\n  dependencies?: string[];\n  instructions?: string;\n  completedAt?: Date;\n  result?: any;\n  notes?: string;\n}\n\nexport interface ProvisioningWorkflow {\n  id: string;\n  name: string;\n  serviceCategory: string;\n  tasks: Omit<ProvisioningTask, \"id\" | \"status\" | \"completedAt\" | \"result\">[];\n  conditions: {\n    requiresTechnician: boolean;\n    requiresEquipment: boolean;\n    businessHoursOnly: boolean;\n    weatherDependent: boolean;\n  };\n  sla: {\n    maxProvisioningTime: number; // hours\n    escalationThreshold: number; // hours\n  };\n}\n\nexport interface ProvisioningStats {\n  totalRequests: number;\n  pendingRequests: number;\n  activeInstallations: number;\n  completedToday: number;\n  averageProvisioningTime: number;\n  successRate: number;\n  slaCompliance: number;\n  statusBreakdown: Record<string, number>;\n  technicianWorkload: Record<string, number>;\n  upcomingInstallations: ProvisioningRequest[];\n}\n\ninterface UseProvisioningOptions {\n  apiEndpoint?: string;\n  websocketEndpoint?: string;\n  apiKey?: string;\n  tenantId?: string;\n  resellerId?: string;\n  pollInterval?: number;\n  enableRealtime?: boolean;\n  maxRetries?: number;\n}\n\ninterface ProvisioningState {\n  templates: ServiceTemplate[];\n  requests: ProvisioningRequest[];\n  workflows: ProvisioningWorkflow[];\n  stats: ProvisioningStats | null;\n  isLoading: boolean;\n  error: string | null;\n  isConnected: boolean;\n  selectedRequest: ProvisioningRequest | null;\n}\n\nconst initialStats: ProvisioningStats = {\n  totalRequests: 0,\n  pendingRequests: 0,\n  activeInstallations: 0,\n  completedToday: 0,\n  averageProvisioningTime: 0,\n  successRate: 0,\n  slaCompliance: 0,\n  statusBreakdown: {},\n  technicianWorkload: {},\n  upcomingInstallations: [],\n};\n\nconst initialState: ProvisioningState = {\n  templates: [],\n  requests: [],\n  workflows: [],\n  stats: initialStats,\n  isLoading: false,\n  error: null,\n  isConnected: false,\n  selectedRequest: null,\n};\n\nexport function useProvisioning(options: UseProvisioningOptions = {}) {\n  const {\n    apiEndpoint = \"/api/provisioning\",\n    websocketEndpoint,\n    apiKey,\n    tenantId,\n    resellerId,\n    pollInterval = 30000,\n    enableRealtime = true,\n    maxRetries = 3,\n  } = options;\n\n  const [state, setState] = useState<ProvisioningState>(initialState);\n  const websocketRef = useRef<WebSocket | null>(null);\n  const pollIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const retryCountRef = useRef(0);\n  const { addNotification } = useNotifications();\n\n  // API Helper\n  const apiCall = useCallback(\n    async (endpoint: string, options: RequestInit = {}) => {\n      const headers: Record<string, string> = {\n        \"Content-Type\": \"application/json\",\n        ...(options.headers as Record<string, string>),\n      };\n\n      if (apiKey) {\n        headers[\"Authorization\"] = `Bearer ${apiKey}`;\n      }\n\n      if (tenantId) {\n        headers[\"X-Tenant-ID\"] = tenantId;\n      }\n\n      if (resellerId) {\n        headers[\"X-Reseller-ID\"] = resellerId;\n      }\n\n      const response = await fetch(`${apiEndpoint}${endpoint}`, {\n        ...options,\n        headers,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      return response.json();\n    },\n    [apiEndpoint, apiKey, tenantId, resellerId],\n  );\n\n  // WebSocket Connection\n  const connectWebSocket = useCallback(() => {\n    if (!websocketEndpoint || !enableRealtime) return;\n\n    try {\n      if (websocketRef.current?.readyState === WebSocket.OPEN) return;\n\n      const wsUrl = new URL(websocketEndpoint);\n      if (apiKey) wsUrl.searchParams.set(\"apiKey\", apiKey);\n      if (tenantId) wsUrl.searchParams.set(\"tenantId\", tenantId);\n      if (resellerId) wsUrl.searchParams.set(\"resellerId\", resellerId);\n\n      const ws = new WebSocket(wsUrl.toString());\n      websocketRef.current = ws;\n\n      ws.onopen = () => {\n        setState((prev) => ({ ...prev, isConnected: true, error: null }));\n        retryCountRef.current = 0;\n\n        addNotification({\n          type: \"system\",\n          priority: \"low\",\n          title: \"Provisioning System\",\n          message: \"Real-time provisioning updates connected\",\n          channel: [\"browser\"],\n          persistent: false,\n        });\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n\n          switch (data.type) {\n            case \"request_status_update\":\n              setState((prev) => ({\n                ...prev,\n                requests: prev.requests.map((req) =>\n                  req.id === data.requestId ? { ...req, ...data.updates } : req,\n                ),\n              }));\n\n              // Show notification for important status changes\n              if ([\"approved\", \"active\", \"failed\"].includes(data.updates.status)) {\n                addNotification({\n                  type: data.updates.status === \"failed\" ? \"error\" : \"success\",\n                  priority: data.updates.status === \"failed\" ? \"high\" : \"medium\",\n                  title: \"Service Request Update\",\n                  message: `Request ${data.requestId} is now ${data.updates.status}`,\n                  channel: [\"browser\"],\n                  persistent: false,\n                });\n              }\n              break;\n\n            case \"new_request\":\n              setState((prev) => ({\n                ...prev,\n                requests: [data.request, ...prev.requests],\n              }));\n\n              addNotification({\n                type: \"info\",\n                priority: \"medium\",\n                title: \"New Service Request\",\n                message: `New ${data.request.serviceTemplateId} request received`,\n                channel: [\"browser\"],\n                persistent: false,\n              });\n              break;\n\n            case \"task_completed\":\n              setState((prev) => ({\n                ...prev,\n                requests: prev.requests.map((req) =>\n                  req.id === data.requestId\n                    ? {\n                        ...req,\n                        tasks: req.tasks.map((task) =>\n                          task.id === data.taskId\n                            ? {\n                                ...task,\n                                status: \"completed\",\n                                completedAt: new Date(data.completedAt),\n                              }\n                            : task,\n                        ),\n                      }\n                    : req,\n                ),\n              }));\n              break;\n\n            case \"technician_assigned\":\n              setState((prev) => ({\n                ...prev,\n                requests: prev.requests.map((req) =>\n                  req.id === data.requestId\n                    ? { ...req, assignedTechnician: data.technicianId }\n                    : req,\n                ),\n              }));\n\n              addNotification({\n                type: \"info\",\n                priority: \"low\",\n                title: \"Technician Assigned\",\n                message: `Technician assigned to request ${data.requestId}`,\n                channel: [\"browser\"],\n                persistent: false,\n              });\n              break;\n\n            case \"stats_update\":\n              setState((prev) => ({\n                ...prev,\n                stats: data.stats,\n              }));\n              break;\n          }\n        } catch (error) {\n          console.error(\"Failed to parse WebSocket message:\", error);\n        }\n      };\n\n      ws.onclose = () => {\n        setState((prev) => ({ ...prev, isConnected: false }));\n\n        // Reconnect with exponential backoff\n        if (retryCountRef.current < maxRetries) {\n          const delay = Math.min(1000 * Math.pow(2, retryCountRef.current), 30000);\n          setTimeout(() => {\n            retryCountRef.current++;\n            connectWebSocket();\n          }, delay);\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n        setState((prev) => ({\n          ...prev,\n          isConnected: false,\n          error: \"WebSocket connection failed\",\n        }));\n      };\n    } catch (error) {\n      console.error(\"Failed to establish WebSocket connection:\", error);\n      setState((prev) => ({\n        ...prev,\n        isConnected: false,\n        error: error instanceof Error ? error.message : \"Connection failed\",\n      }));\n    }\n  }, [\n    websocketEndpoint,\n    enableRealtime,\n    apiKey,\n    tenantId,\n    resellerId,\n    maxRetries,\n    addNotification,\n  ]);\n\n  // Load Service Templates\n  const loadTemplates = useCallback(async () => {\n    try {\n      setState((prev) => ({ ...prev, isLoading: true, error: null }));\n      const data = await apiCall(\"/templates\");\n      setState((prev) => ({\n        ...prev,\n        templates: data.templates || [],\n        isLoading: false,\n      }));\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        error: error instanceof Error ? error.message : \"Failed to load templates\",\n        isLoading: false,\n      }));\n    }\n  }, [apiCall]);\n\n  // Load Provisioning Requests\n  const loadRequests = useCallback(\n    async (\n      filters: {\n        status?: string;\n        priority?: string;\n        customerId?: string;\n        dateFrom?: Date;\n        dateTo?: Date;\n        limit?: number;\n      } = {},\n    ) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const params = new URLSearchParams();\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined) {\n            params.append(key, value instanceof Date ? value.toISOString() : String(value));\n          }\n        });\n\n        const data = await apiCall(`/requests?${params.toString()}`);\n        setState((prev) => ({\n          ...prev,\n          requests: data.requests || [],\n          isLoading: false,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load requests\",\n          isLoading: false,\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Load Statistics\n  const loadStats = useCallback(\n    async (timeRange: \"24h\" | \"7d\" | \"30d\" = \"24h\") => {\n      try {\n        const data = await apiCall(`/stats?range=${timeRange}`);\n        setState((prev) => ({\n          ...prev,\n          stats: data.stats || initialStats,\n        }));\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: error instanceof Error ? error.message : \"Failed to load statistics\",\n        }));\n      }\n    },\n    [apiCall],\n  );\n\n  // Create Service Request\n  const createServiceRequest = useCallback(\n    async (requestData: {\n      customerId: string;\n      serviceTemplateId: string;\n      priority?: \"low\" | \"medium\" | \"high\" | \"urgent\";\n      scheduledAt?: Date;\n      installationAddress: ProvisioningRequest[\"installationAddress\"];\n      customerInfo: ProvisioningRequest[\"customerInfo\"];\n      notes?: string;\n      metadata?: Record<string, any>;\n    }) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const data = await apiCall(\"/requests\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            ...requestData,\n            scheduledAt: requestData.scheduledAt?.toISOString(),\n          }),\n        });\n\n        const newRequest = data.request;\n        setState((prev) => ({\n          ...prev,\n          requests: [newRequest, ...prev.requests],\n          isLoading: false,\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"medium\",\n          title: \"Service Request Created\",\n          message: `Service request for ${requestData.customerInfo.name} has been submitted`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return newRequest;\n      } catch (error) {\n        setState((prev) => ({ ...prev, isLoading: false }));\n\n        const errorMessage =\n          error instanceof Error ? error.message : \"Failed to create service request\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"high\",\n          title: \"Request Creation Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Update Request Status\n  const updateRequestStatus = useCallback(\n    async (requestId: string, status: ProvisioningRequest[\"status\"], notes?: string) => {\n      try {\n        const data = await apiCall(`/requests/${requestId}/status`, {\n          method: \"PUT\",\n          body: JSON.stringify({ status, notes }),\n        });\n\n        const updatedRequest = data.request;\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) => (req.id === requestId ? updatedRequest : req)),\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"low\",\n          title: \"Status Updated\",\n          message: `Request ${requestId} status updated to ${status}`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return updatedRequest;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to update status\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Update Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Schedule Installation\n  const scheduleInstallation = useCallback(\n    async (requestId: string, scheduledAt: Date, technicianId?: string) => {\n      try {\n        const data = await apiCall(`/requests/${requestId}/schedule`, {\n          method: \"POST\",\n          body: JSON.stringify({\n            scheduledAt: scheduledAt.toISOString(),\n            technicianId,\n          }),\n        });\n\n        const updatedRequest = data.request;\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) => (req.id === requestId ? updatedRequest : req)),\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"medium\",\n          title: \"Installation Scheduled\",\n          message: `Installation scheduled for ${scheduledAt.toLocaleDateString()}`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return updatedRequest;\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error ? error.message : \"Failed to schedule installation\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Scheduling Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Execute Task\n  const executeTask = useCallback(\n    async (requestId: string, taskId: string, result?: any, notes?: string) => {\n      try {\n        const data = await apiCall(`/requests/${requestId}/tasks/${taskId}/execute`, {\n          method: \"POST\",\n          body: JSON.stringify({ result, notes }),\n        });\n\n        const updatedRequest = data.request;\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) => (req.id === requestId ? updatedRequest : req)),\n        }));\n\n        return updatedRequest;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to execute task\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Task Execution Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Cancel Request\n  const cancelRequest = useCallback(\n    async (requestId: string, reason: string) => {\n      try {\n        await apiCall(`/requests/${requestId}/cancel`, {\n          method: \"POST\",\n          body: JSON.stringify({ reason }),\n        });\n\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) =>\n            req.id === requestId ? { ...req, status: \"cancelled\", notes: reason } : req,\n          ),\n        }));\n\n        addNotification({\n          type: \"info\",\n          priority: \"low\",\n          title: \"Request Cancelled\",\n          message: `Service request ${requestId} has been cancelled`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to cancel request\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Cancellation Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Bulk Operations\n  const bulkUpdateStatus = useCallback(\n    async (requestIds: string[], status: ProvisioningRequest[\"status\"], notes?: string) => {\n      try {\n        setState((prev) => ({ ...prev, isLoading: true }));\n\n        const data = await apiCall(\"/requests/bulk-update\", {\n          method: \"POST\",\n          body: JSON.stringify({ requestIds, status, notes }),\n        });\n\n        const updatedRequests = data.requests || [];\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) =>\n            requestIds.includes(req.id)\n              ? updatedRequests.find((ur) => ur.id === req.id) || req\n              : req,\n          ),\n          isLoading: false,\n        }));\n\n        addNotification({\n          type: \"success\",\n          priority: \"medium\",\n          title: \"Bulk Update Complete\",\n          message: `${requestIds.length} requests updated to ${status}`,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        return updatedRequests;\n      } catch (error) {\n        setState((prev) => ({ ...prev, isLoading: false }));\n\n        const errorMessage =\n          error instanceof Error ? error.message : \"Failed to bulk update requests\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"high\",\n          title: \"Bulk Update Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Equipment Management\n  const updateEquipmentStatus = useCallback(\n    async (\n      requestId: string,\n      equipmentId: string,\n      status: EquipmentOrder[\"status\"],\n      serialNumbers?: string[],\n      trackingNumber?: string,\n    ) => {\n      try {\n        const data = await apiCall(`/requests/${requestId}/equipment/${equipmentId}`, {\n          method: \"PUT\",\n          body: JSON.stringify({ status, serialNumbers, trackingNumber }),\n        });\n\n        const updatedRequest = data.request;\n        setState((prev) => ({\n          ...prev,\n          requests: prev.requests.map((req) => (req.id === requestId ? updatedRequest : req)),\n        }));\n\n        return updatedRequest;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Failed to update equipment\";\n\n        addNotification({\n          type: \"error\",\n          priority: \"medium\",\n          title: \"Equipment Update Failed\",\n          message: errorMessage,\n          channel: [\"browser\"],\n          persistent: false,\n        });\n\n        throw error;\n      }\n    },\n    [apiCall, addNotification],\n  );\n\n  // Initialize\n  useEffect(() => {\n    loadTemplates();\n    loadRequests({ limit: 50 });\n    loadStats();\n\n    if (enableRealtime) {\n      connectWebSocket();\n    }\n\n    // Set up polling for non-realtime updates\n    if (!enableRealtime && pollInterval > 0) {\n      pollIntervalRef.current = setInterval(() => {\n        loadStats();\n        loadRequests({ limit: 10 }); // Get recent requests\n      }, pollInterval);\n    }\n\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, [loadTemplates, loadRequests, loadStats, connectWebSocket, enableRealtime, pollInterval]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // State\n    ...state,\n\n    // Actions\n    createServiceRequest,\n    updateRequestStatus,\n    scheduleInstallation,\n    executeTask,\n    cancelRequest,\n    bulkUpdateStatus,\n    updateEquipmentStatus,\n\n    // Data loaders\n    loadTemplates,\n    loadRequests,\n    loadStats,\n\n    // Connection management\n    connect: connectWebSocket,\n    disconnect: useCallback(() => {\n      if (websocketRef.current) {\n        websocketRef.current.close();\n      }\n    }, []),\n\n    // Utils\n    clearError: useCallback(() => {\n      setState((prev) => ({ ...prev, error: null }));\n    }, []),\n\n    selectRequest: useCallback((request: ProvisioningRequest | null) => {\n      setState((prev) => ({ ...prev, selectedRequest: request }));\n    }, []),\n\n    // Computed values\n    pendingRequests: state.requests.filter((req) => req.status === \"pending\"),\n    activeRequests: state.requests.filter((req) =>\n      [\"approved\", \"provisioning\", \"installing\"].includes(req.status),\n    ),\n    urgentRequests: state.requests.filter((req) => req.priority === \"urgent\"),\n    todayInstallations: state.requests.filter(\n      (req) =>\n        req.scheduledAt && new Date(req.scheduledAt).toDateString() === new Date().toDateString(),\n    ),\n  };\n}\n\nexport default useProvisioning;\n","/**\n * ISP Framework Modules Hook\n * Provides access to all 13 ISP Framework modules through React hooks\n */\n\nimport { useCallback } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { getISPApiClient } from \"../api/isp-client\";\nimport type { QueryParams } from \"../types\";\nimport type { GeoLocation } from \"../api/clients/FieldOpsApiClient\";\n\nexport function useISPModules() {\n  const queryClient = useQueryClient();\n  const ispClient = getISPApiClient();\n\n  // ============================================================================\n  // 1. Identity Module Hooks\n  // ============================================================================\n\n  const useUsers = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"identity\", \"users\", params],\n      queryFn: () => ispClient.getUsers(params),\n    });\n  };\n\n  const useUser = (id: string) => {\n    return useQuery({\n      queryKey: [\"identity\", \"users\", id],\n      queryFn: () => ispClient.getUser(id),\n      enabled: !!id,\n    });\n  };\n\n  const useCustomers = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"identity\", \"customers\", params],\n      queryFn: () => ispClient.getCustomers(params),\n    });\n  };\n\n  const useCustomer = (id: string) => {\n    return useQuery({\n      queryKey: [\"identity\", \"customers\", id],\n      queryFn: () => ispClient.getCustomer(id),\n      enabled: !!id,\n    });\n  };\n\n  const useCreateCustomer = () => {\n    return useMutation({\n      mutationFn: (customerData: any) => ispClient.createCustomer(customerData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"identity\", \"customers\"] });\n      },\n    });\n  };\n\n  // ============================================================================\n  // 2. Billing Module Hooks\n  // ============================================================================\n\n  const useInvoices = (customerId?: string, params?: QueryParams) => {\n    const queryParams = customerId ? { ...(params || {}), customerId } : params;\n    return useQuery({\n      queryKey: [\"billing\", \"invoices\", customerId, params],\n      queryFn: () => ispClient.getInvoices(queryParams),\n    });\n  };\n\n  const useInvoice = (id: string) => {\n    return useQuery({\n      queryKey: [\"billing\", \"invoices\", id],\n      queryFn: () => ispClient.getInvoice(id),\n      enabled: !!id,\n    });\n  };\n\n  const usePayments = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"billing\", \"payments\", params],\n      queryFn: () => ispClient.getPayments(params),\n    });\n  };\n\n  const useProcessPayment = () => {\n    return useMutation({\n      mutationFn: (paymentData: any) => ispClient.processPayment(paymentData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"billing\", \"payments\"] });\n        queryClient.invalidateQueries({ queryKey: [\"billing\", \"invoices\"] });\n      },\n    });\n  };\n\n  const useSubscriptions = (customerId?: string) => {\n    return useQuery({\n      queryKey: [\"billing\", \"subscriptions\", customerId],\n      queryFn: () => ispClient.getSubscriptions(customerId),\n    });\n  };\n\n  // ============================================================================\n  // 3. Services Module Hooks\n  // ============================================================================\n\n  const useServiceCatalog = () => {\n    return useQuery({\n      queryKey: [\"services\", \"catalog\"],\n      queryFn: () => ispClient.getServiceCatalog(),\n      staleTime: 5 * 60 * 1000, // 5 minutes\n    });\n  };\n\n  const useServiceInstances = (customerId?: string) => {\n    return useQuery({\n      queryKey: [\"services\", \"instances\", customerId],\n      queryFn: () => ispClient.getServiceInstances(customerId),\n    });\n  };\n\n  const useProvisionService = () => {\n    return useMutation({\n      mutationFn: (serviceData: any) => ispClient.provisionService(serviceData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"services\", \"instances\"] });\n      },\n    });\n  };\n\n  const useUsageTracking = (serviceId: string, period?: string) => {\n    return useQuery({\n      queryKey: [\"services\", \"usage\", serviceId, period],\n      queryFn: () => ispClient.getUsageTracking(serviceId, period),\n      enabled: !!serviceId,\n    });\n  };\n\n  // ============================================================================\n  // 4. Networking Module Hooks\n  // ============================================================================\n\n  const useNetworkDevices = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"networking\", \"devices\", params],\n      queryFn: () => ispClient.getNetworkDevices(params),\n      refetchInterval: 30000, // Refresh every 30 seconds for real-time monitoring\n    });\n  };\n\n  const useNetworkDevice = (id: string) => {\n    return useQuery({\n      queryKey: [\"networking\", \"devices\", id],\n      queryFn: () => ispClient.getNetworkDevice(id),\n      enabled: !!id,\n      refetchInterval: 10000, // Refresh every 10 seconds for device monitoring\n    });\n  };\n\n  const useIPAM = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"networking\", \"ipam\", params],\n      queryFn: () => ispClient.getIPAMData(params),\n    });\n  };\n\n  const useAllocateIP = () => {\n    return useMutation({\n      mutationFn: (request: any) => ispClient.allocateIP(request),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"networking\", \"ipam\"] });\n      },\n    });\n  };\n\n  const useNetworkTopology = () => {\n    return useQuery({\n      queryKey: [\"networking\", \"topology\"],\n      queryFn: () => ispClient.getNetworkTopology(),\n      staleTime: 2 * 60 * 1000, // 2 minutes\n    });\n  };\n\n  const useNetworkMonitoring = () => {\n    return useQuery({\n      queryKey: [\"networking\", \"monitoring\"],\n      queryFn: () => ispClient.getNetworkMonitoring(),\n      refetchInterval: 15000, // Refresh every 15 seconds\n    });\n  };\n\n  // ============================================================================\n  // 5. Sales Module Hooks\n  // ============================================================================\n\n  const useLeads = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"sales\", \"leads\", params],\n      queryFn: () => ispClient.getLeads(params),\n    });\n  };\n\n  const useCreateLead = () => {\n    return useMutation({\n      mutationFn: (leadData: any) => ispClient.createLead(leadData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"sales\", \"leads\"] });\n      },\n    });\n  };\n\n  const useCRMData = (customerId: string) => {\n    return useQuery({\n      queryKey: [\"sales\", \"crm\", customerId],\n      queryFn: () => ispClient.getCRMData(customerId),\n      enabled: !!customerId,\n    });\n  };\n\n  const useCampaigns = () => {\n    return useQuery({\n      queryKey: [\"sales\", \"campaigns\"],\n      queryFn: () => ispClient.getCampaigns(),\n    });\n  };\n\n  const useSalesAnalytics = (period?: string) => {\n    const params = period ? { period } : undefined;\n    return useQuery({\n      queryKey: [\"sales\", \"analytics\", period],\n      queryFn: () => ispClient.getSalesAnalytics(params),\n    });\n  };\n\n  // ============================================================================\n  // 6. Support Module Hooks\n  // ============================================================================\n\n  const useSupportTickets = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"support\", \"tickets\", params],\n      queryFn: () => ispClient.getSupportTickets(params),\n    });\n  };\n\n  const useSupportTicket = (id: string) => {\n    return useQuery({\n      queryKey: [\"support\", \"tickets\", id],\n      queryFn: () => ispClient.getSupportTicket(id),\n      enabled: !!id,\n    });\n  };\n\n  const useCreateSupportTicket = () => {\n    return useMutation({\n      mutationFn: (ticketData: any) => ispClient.createSupportTicket(ticketData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"support\", \"tickets\"] });\n      },\n    });\n  };\n\n  const useUpdateSupportTicket = () => {\n    return useMutation({\n      mutationFn: ({ id, updates }: { id: string; updates: any }) =>\n        ispClient.updateSupportTicket(id, updates),\n      onSuccess: (_, { id }) => {\n        queryClient.invalidateQueries({ queryKey: [\"support\", \"tickets\"] });\n        queryClient.invalidateQueries({ queryKey: [\"support\", \"tickets\", id] });\n      },\n    });\n  };\n\n  const useKnowledgeBase = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"support\", \"knowledge-base\", params],\n      queryFn: () => ispClient.getKnowledgeBase(params),\n      staleTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  const useSLAMetrics = () => {\n    return useQuery({\n      queryKey: [\"support\", \"sla\", \"metrics\"],\n      queryFn: () => ispClient.getSLAMetrics(),\n      refetchInterval: 5 * 60 * 1000, // Refresh every 5 minutes\n    });\n  };\n\n  // ============================================================================\n  // 7. Resellers Module Hooks\n  // ============================================================================\n\n  const useResellers = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"resellers\", params],\n      queryFn: () => ispClient.getResellers(params),\n    });\n  };\n\n  const useReseller = (id: string) => {\n    return useQuery({\n      queryKey: [\"resellers\", id],\n      queryFn: () => ispClient.getReseller(id),\n      enabled: !!id,\n    });\n  };\n\n  const useResellerCommissions = (resellerId: string, period?: string) => {\n    const params = { resellerId, ...(period ? { period } : {}) };\n    return useQuery({\n      queryKey: [\"resellers\", resellerId, \"commissions\", period],\n      queryFn: () => ispClient.getResellerCommissions(params),\n      enabled: !!resellerId,\n    });\n  };\n\n  const useResellerPerformance = (resellerId: string) => {\n    return useQuery({\n      queryKey: [\"resellers\", resellerId, \"performance\"],\n      queryFn: () => ispClient.getResellerPerformance({ resellerId }),\n      enabled: !!resellerId,\n    });\n  };\n\n  // ============================================================================\n  // 8. Analytics Module Hooks\n  // ============================================================================\n\n  const useBusinessIntelligence = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"analytics\", \"business-intelligence\", params],\n      queryFn: () => ispClient.getBusinessIntelligence(params),\n    });\n  };\n\n  const useDataVisualization = (type: string, params?: any) => {\n    return useQuery({\n      queryKey: [\"analytics\", \"visualization\", type, params],\n      queryFn: () => ispClient.getDataVisualization(type, params),\n      enabled: !!type,\n    });\n  };\n\n  const useCustomReports = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"analytics\", \"reports\", params],\n      queryFn: () => ispClient.getCustomReports(params),\n    });\n  };\n\n  const useGenerateReport = () => {\n    return useMutation({\n      mutationFn: (reportConfig: any) => ispClient.generateReport(reportConfig),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [\"analytics\", \"reports\"] });\n      },\n    });\n  };\n\n  // ============================================================================\n  // 9. Inventory Module Hooks\n  // ============================================================================\n\n  const useInventoryItems = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"inventory\", \"items\", params],\n      queryFn: () => ispClient.getInventoryItems(params),\n    });\n  };\n\n  const useWarehouseManagement = () => {\n    return useQuery({\n      queryKey: [\"inventory\", \"warehouses\"],\n      queryFn: () => ispClient.getWarehouseManagement(),\n    });\n  };\n\n  const useProcurementOrders = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"inventory\", \"procurement\", params],\n      queryFn: () => ispClient.getProcurementOrders(params),\n    });\n  };\n\n  // ============================================================================\n  // 10. Field Operations Module Hooks\n  // ============================================================================\n\n  const useWorkOrders = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"field-ops\", \"work-orders\", params],\n      queryFn: () => ispClient.getWorkOrders(params),\n    });\n  };\n\n  const useWorkOrder = (id: string) => {\n    return useQuery({\n      queryKey: [\"field-ops\", \"work-orders\", id],\n      queryFn: () => ispClient.getWorkOrder(id),\n      enabled: !!id,\n    });\n  };\n\n  const useCreateWorkOrder = () => {\n    return useMutation({\n      mutationFn: (workOrderData: any) => ispClient.createWorkOrder(workOrderData),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: [\"field-ops\", \"work-orders\"],\n        });\n      },\n    });\n  };\n\n  const useTechnicians = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"field-ops\", \"technicians\", params],\n      queryFn: () => ispClient.getTechnicians(params),\n    });\n  };\n\n  const useTechnicianLocation = (technicianId: string) => {\n    return useQuery({\n      queryKey: [\"field-ops\", \"technicians\", technicianId, \"location\"],\n      queryFn: () => ispClient.getTechnicianLocation(technicianId),\n      enabled: !!technicianId,\n      refetchInterval: 30000, // Refresh every 30 seconds for location tracking\n    });\n  };\n\n  const useUpdateTechnicianLocation = () => {\n    return useMutation({\n      mutationFn: ({ technicianId, location }: { technicianId: string; location: GeoLocation }) =>\n        ispClient.updateTechnicianLocation(technicianId, location),\n      onSuccess: (_, { technicianId }) => {\n        queryClient.invalidateQueries({\n          queryKey: [\"field-ops\", \"technicians\", technicianId, \"location\"],\n        });\n      },\n    });\n  };\n\n  // ============================================================================\n  // 11. Compliance Module Hooks\n  // ============================================================================\n\n  const useComplianceReports = () => {\n    return useQuery({\n      queryKey: [\"compliance\", \"reports\"],\n      queryFn: () => ispClient.getComplianceReports(),\n    });\n  };\n\n  const useAuditTrail = (params?: QueryParams) => {\n    return useQuery({\n      queryKey: [\"compliance\", \"audit-trail\", params],\n      queryFn: () => ispClient.getAuditTrail(params),\n    });\n  };\n\n  const useDataProtectionStatus = () => {\n    return useQuery({\n      queryKey: [\"compliance\", \"data-protection\"],\n      queryFn: () => ispClient.getDataProtectionStatus(),\n    });\n  };\n\n  // ============================================================================\n  // 12. Notifications Module Hooks\n  // ============================================================================\n\n  const useNotificationTemplates = () => {\n    return useQuery({\n      queryKey: [\"notifications\", \"templates\"],\n      queryFn: () => ispClient.getNotificationTemplates(),\n      staleTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  const useSendEmail = () => {\n    return useMutation({\n      mutationFn: (emailData: any) => ispClient.sendEmail(emailData),\n    });\n  };\n\n  const useSendSMS = () => {\n    return useMutation({\n      mutationFn: (smsData: any) => ispClient.sendSMS(smsData),\n    });\n  };\n\n  const useAutomationRules = () => {\n    return useQuery({\n      queryKey: [\"notifications\", \"automation\", \"rules\"],\n      queryFn: () => ispClient.getAutomationRules(),\n    });\n  };\n\n  // ============================================================================\n  // 13. Licensing Module Hooks\n  // ============================================================================\n\n  const useLicenseInfo = () => {\n    return useQuery({\n      queryKey: [\"licensing\", \"info\"],\n      queryFn: () => ispClient.getLicenseInfo(),\n      staleTime: 15 * 60 * 1000, // 15 minutes\n    });\n  };\n\n  const useFeatureEntitlements = () => {\n    return useQuery({\n      queryKey: [\"licensing\", \"features\"],\n      queryFn: () => ispClient.getFeatureEntitlements(),\n      staleTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  const useValidateLicense = () => {\n    return useCallback(\n      async (payload: Record<string, any>) => {\n        return ispClient.validateLicense(payload);\n      },\n      [ispClient],\n    );\n  };\n\n  // ============================================================================\n  // Dashboard Hooks\n  // ============================================================================\n\n  const useAdminDashboard = () => {\n    return useQuery({\n      queryKey: [\"dashboard\", \"admin\"],\n      queryFn: () => ispClient.getAdminDashboard(),\n      refetchInterval: 60000, // Refresh every minute\n    });\n  };\n\n  const useCustomerDashboard = () => {\n    return useQuery({\n      queryKey: [\"dashboard\", \"customer\"],\n      queryFn: () => ispClient.getCustomerDashboard(),\n      refetchInterval: 60000, // Refresh every minute\n    });\n  };\n\n  const useResellerDashboard = () => {\n    return useQuery({\n      queryKey: [\"dashboard\", \"reseller\"],\n      queryFn: () => ispClient.getResellerDashboard(),\n      refetchInterval: 60000, // Refresh every minute\n    });\n  };\n\n  const useTechnicianDashboard = () => {\n    return useQuery({\n      queryKey: [\"dashboard\", \"technician\"],\n      queryFn: () => ispClient.getTechnicianDashboard(),\n      refetchInterval: 60000, // Refresh every minute\n    });\n  };\n\n  return {\n    // Identity Module\n    useUsers,\n    useUser,\n    useCustomers,\n    useCustomer,\n    useCreateCustomer,\n\n    // Billing Module\n    useInvoices,\n    useInvoice,\n    usePayments,\n    useProcessPayment,\n    useSubscriptions,\n\n    // Services Module\n    useServiceCatalog,\n    useServiceInstances,\n    useProvisionService,\n    useUsageTracking,\n\n    // Networking Module\n    useNetworkDevices,\n    useNetworkDevice,\n    useIPAM,\n    useAllocateIP,\n    useNetworkTopology,\n    useNetworkMonitoring,\n\n    // Sales Module\n    useLeads,\n    useCreateLead,\n    useCRMData,\n    useCampaigns,\n    useSalesAnalytics,\n\n    // Support Module\n    useSupportTickets,\n    useSupportTicket,\n    useCreateSupportTicket,\n    useUpdateSupportTicket,\n    useKnowledgeBase,\n    useSLAMetrics,\n\n    // Resellers Module\n    useResellers,\n    useReseller,\n    useResellerCommissions,\n    useResellerPerformance,\n\n    // Analytics Module\n    useBusinessIntelligence,\n    useDataVisualization,\n    useCustomReports,\n    useGenerateReport,\n\n    // Inventory Module\n    useInventoryItems,\n    useWarehouseManagement,\n    useProcurementOrders,\n\n    // Field Operations Module\n    useWorkOrders,\n    useWorkOrder,\n    useCreateWorkOrder,\n    useTechnicians,\n    useTechnicianLocation,\n    useUpdateTechnicianLocation,\n\n    // Compliance Module\n    useComplianceReports,\n    useAuditTrail,\n    useDataProtectionStatus,\n\n    // Notifications Module\n    useNotificationTemplates,\n    useSendEmail,\n    useSendSMS,\n    useAutomationRules,\n\n    // Licensing Module\n    useLicenseInfo,\n    useFeatureEntitlements,\n    useValidateLicense,\n\n    // Dashboard Hooks\n    useAdminDashboard,\n    useCustomerDashboard,\n    useResellerDashboard,\n    useTechnicianDashboard,\n  };\n}\n","/**\n * Formatting hooks for DotMac Framework\n * Configurable formatting utilities for currency, dates, and numbers\n */\n\nimport { useCallback } from \"react\";\n\nimport {\n  useBusinessConfig,\n  useConfig,\n  useCurrencyConfig,\n  useLocaleConfig,\n} from \"../config/ConfigProvider\";\n\nexport function useFormatting() {\n  const localeConfig = useLocaleConfig();\n  const currencyConfig = useCurrencyConfig();\n  const businessConfig = useBusinessConfig();\n\n  // Currency formatting\n  const formatCurrency = useCallback(\n    (\n      amount: number,\n      options: {\n        currency?: string;\n        locale?: string;\n        precision?: number;\n      } = {\n        // Implementation pending\n      },\n    ) => {\n      const currency = options.currency || currencyConfig.primary;\n      const locale = options.locale || localeConfig.primary;\n      const minimumFractionDigits = options.precision ?? currencyConfig.precision;\n\n      return new Intl.NumberFormat(locale, {\n        style: \"currency\",\n        currency,\n        minimumFractionDigits,\n        maximumFractionDigits: minimumFractionDigits,\n      }).format(amount);\n    },\n    [currencyConfig, localeConfig],\n  );\n\n  // Date formatting\n  const formatDate = useCallback(\n    (\n      date: string | Date,\n      format: \"short\" | \"medium\" | \"long\" | \"time\" | Intl.DateTimeFormatOptions = \"short\",\n      locale?: string,\n    ) => {\n      const targetLocale = locale || localeConfig.primary;\n      const dateObj = typeof date === \"string\" ? new Date(date) : date;\n\n      const formatOptions = typeof format === \"string\" ? localeConfig.dateFormat[format] : format;\n\n      return dateObj.toLocaleDateString(targetLocale, formatOptions);\n    },\n    [localeConfig],\n  );\n\n  // Number formatting\n  const formatNumber = useCallback(\n    (\n      number: number,\n      options: Intl.NumberFormatOptions = {\n        // Implementation pending\n      },\n      locale?: string,\n    ) => {\n      const targetLocale = locale || localeConfig.primary;\n      return new Intl.NumberFormat(targetLocale, options).format(number);\n    },\n    [localeConfig],\n  );\n\n  // Percentage formatting\n  const formatPercentage = useCallback(\n    (value: number, precision: number = 1, locale?: string) => {\n      const targetLocale = locale || localeConfig.primary;\n      return new Intl.NumberFormat(targetLocale, {\n        style: \"percent\",\n        minimumFractionDigits: precision,\n        maximumFractionDigits: precision,\n      }).format(value / 100);\n    },\n    [localeConfig],\n  );\n\n  // Bandwidth formatting\n  const formatBandwidth = useCallback(\n    (value: number, unit?: \"mbps\" | \"gbps\") => {\n      const targetUnit = unit || businessConfig.units.bandwidth;\n\n      if (targetUnit === \"gbps\" && value >= 1000) {\n        return `${(value / 1000).toFixed(1)} Gbps`;\n      }\n\n      return `${value} ${targetUnit.toUpperCase()}`;\n    },\n    [businessConfig],\n  );\n\n  // Data size formatting\n  const formatDataSize = useCallback((bytes: number, precision: number = 2) => {\n    const units = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    let size = bytes;\n    let unitIndex = 0;\n\n    while (size >= 1024 && unitIndex < units.length - 1) {\n      size /= 1024;\n      unitIndex++;\n    }\n\n    return `${size.toFixed(precision)} ${units[unitIndex]}`;\n  }, []);\n\n  // Relative time formatting\n  const formatRelativeTime = useCallback(\n    (date: string | Date, locale?: string) => {\n      const targetLocale = locale || localeConfig.primary;\n      const dateObj = typeof date === \"string\" ? new Date(date) : date;\n      const now = new Date();\n      const diffInSeconds = Math.floor((now.getTime() - dateObj.getTime()) / 1000);\n\n      if (diffInSeconds < 60) {\n        return \"Just now\";\n      }\n      if (diffInSeconds < 3600) {\n        return `${Math.floor(diffInSeconds / 60)}m ago`;\n      }\n      if (diffInSeconds < 86400) {\n        return `${Math.floor(diffInSeconds / 3600)}h ago`;\n      }\n      if (diffInSeconds < 2592000) {\n        return `${Math.floor(diffInSeconds / 86400)}d ago`;\n      }\n\n      return dateObj.toLocaleDateString(targetLocale, localeConfig.dateFormat.short);\n    },\n    [localeConfig],\n  );\n\n  // Status formatting\n  const formatStatus = useCallback(\n    (status: string, _type: \"customer\" | \"service\" | \"partner\" = \"customer\") => {\n      const statusConfig = businessConfig.statusTypes[status];\n      if (!statusConfig) {\n        return {\n          label: status.charAt(0).toUpperCase() + status.slice(1),\n          color: \"default\" as const,\n          description: \"\",\n        };\n      }\n      return statusConfig;\n    },\n    [businessConfig],\n  );\n\n  // Plan formatting\n  const formatPlan = useCallback(\n    (planKey: string) => {\n      const planConfig = businessConfig.planTypes[planKey];\n      if (!planConfig) {\n        return {\n          label: planKey.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase()),\n          category: \"residential\" as const,\n          features: [],\n        };\n      }\n      return planConfig;\n    },\n    [businessConfig],\n  );\n\n  return {\n    formatCurrency,\n    formatDate,\n    formatNumber,\n    formatPercentage,\n    formatBandwidth,\n    formatDataSize,\n    formatRelativeTime,\n    formatStatus,\n    formatPlan,\n    // Direct access to configs for advanced use cases\n    localeConfig,\n    currencyConfig,\n    businessConfig,\n  };\n}\n\n// Specialized hooks for common use cases\nexport function useCurrencyFormatter() {\n  const { formatCurrency } = useFormatting();\n  return formatCurrency;\n}\n\nexport function useDateFormatter() {\n  const { formatDate } = useFormatting();\n  return formatDate;\n}\n\nexport function useBusinessFormatter() {\n  const { formatStatus, formatPlan, formatBandwidth } = useFormatting();\n  return { formatStatus, formatPlan, formatBandwidth };\n}\n","export interface ValidationRule {\n  validate: (value: unknown) => boolean;\n  message: string;\n}\n\nexport interface FieldValidationConfig {\n  required?: boolean;\n  rules?: ValidationRule[];\n  dependsOn?: string[];\n}\n\nexport interface FormValidationConfig {\n  [fieldName: string]: FieldValidationConfig;\n}\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n  fieldErrors: Record<string, string>;\n}\n\n// Built-in validation rules\nexport const validationRules = {\n  email: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      const emailRegex = /^[^\\s@]+@[^\\s@]+.[^\\s@]+$/;\n      return emailRegex.test(value);\n    },\n    message: \"Please enter a valid email address\",\n  },\n\n  minLength: (length: number) => ({\n    validate: (value: unknown) => typeof value === \"string\" && value.length >= length,\n    message: `Must be at least ${length} characters long`,\n  }),\n\n  maxLength: (length: number) => ({\n    validate: (value: unknown) => typeof value === \"string\" && value.length <= length,\n    message: `Must be no more than ${length} characters long`,\n  }),\n\n  strongPassword: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      // At least 8 characters, 1 uppercase, 1 lowercase, 1 number, 1 special char\n      const strongPasswordRegex =\n        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n      return strongPasswordRegex.test(value);\n    },\n    message:\n      \"Password must contain at least 8 characters with uppercase, lowercase, number, and special character\",\n  },\n\n  phoneNumber: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      const phoneRegex = /^\\+?[\\d\\s\\-()]{10,}$/;\n      return phoneRegex.test(value);\n    },\n    message: \"Please enter a valid phone number\",\n  },\n\n  url: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      try {\n        new URL(value);\n        return true;\n      } catch {\n        return false;\n      }\n    },\n    message: \"Please enter a valid URL\",\n  },\n\n  numeric: {\n    validate: (value: unknown) =>\n      typeof value === \"string\" && !Number.isNaN(Number(value)) && !Number.isNaN(parseFloat(value)),\n    message: \"Must be a valid number\",\n  },\n\n  positiveNumber: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      const num = parseFloat(value);\n      return !Number.isNaN(num) && num > 0;\n    },\n    message: \"Must be a positive number\",\n  },\n\n  integer: {\n    validate: (value: unknown) => {\n      if (typeof value !== \"string\") return false;\n      const num = parseInt(value, 10);\n      return !Number.isNaN(num) && num.toString() === value;\n    },\n    message: \"Must be a whole number\",\n  },\n\n  alphanumeric: {\n    validate: (value: unknown) => typeof value === \"string\" && /^[a-zA-Z0-9]+$/.test(value),\n    message: \"Must contain only letters and numbers\",\n  },\n\n  noWhitespace: {\n    validate: (value: unknown) => typeof value === \"string\" && !/\\s/.test(value),\n    message: \"Must not contain spaces\",\n  },\n\n  matchField: (fieldName: string, getFieldValue: (name: string) => any) => ({\n    validate: (value: unknown) => value === getFieldValue(fieldName),\n    message: `Must match ${fieldName}`,\n  }),\n};\n\nexport class FormValidator {\n  private config: FormValidationConfig;\n\n  constructor(config: FormValidationConfig) {\n    this.config = config;\n    this.formData = {\n      // Implementation pending\n    };\n  }\n\n  setFormData(data: Record<string, unknown>) {\n    this.formData = data;\n  }\n\n  validateField(fieldName: string, value: unknown): ValidationError[] {\n    const fieldConfig = this.config[fieldName];\n    if (!fieldConfig) {\n      return [];\n    }\n\n    const errors: ValidationError[] = [];\n\n    // Check required\n    if (fieldConfig.required && this.isEmpty(value)) {\n      errors.push({\n        field: fieldName,\n        message: \"This field is required\",\n      });\n      return errors; // Don't run other validations if required and empty\n    }\n\n    // Skip other validations if field is empty but not required\n    if (!fieldConfig.required && this.isEmpty(value)) {\n      return errors;\n    }\n\n    // Run custom validation rules\n    if (fieldConfig.rules) {\n      for (const rule of fieldConfig.rules) {\n        if (!rule.validate(value)) {\n          errors.push({\n            field: fieldName,\n            message: rule.message,\n          });\n        }\n      }\n    }\n\n    return errors;\n  }\n\n  validateForm(formData: Record<string, unknown>): ValidationResult {\n    this.setFormData(formData);\n    const allErrors: ValidationError[] = [];\n    const fieldErrors: Record<string, string> = {\n      // Implementation pending\n    };\n\n    // Validate each configured field\n    for (const fieldName in this.config) {\n      const fieldValue = formData[fieldName];\n      const errors = this.validateField(fieldName, fieldValue);\n\n      if (errors.length > 0) {\n        allErrors.push(...errors);\n        fieldErrors[fieldName] = errors[0]?.message || \"Validation error\"; // Show first error for each field\n      }\n    }\n\n    return {\n      isValid: allErrors.length === 0,\n      errors: allErrors,\n      fieldErrors,\n    };\n  }\n\n  validateFormAsync(formData: Record<string, unknown>): Promise<ValidationResult> {\n    // For future async validation support (e.g., server-side checks)\n    return Promise.resolve(this.validateForm(formData));\n  }\n\n  private isEmpty(value: unknown): boolean {\n    if (value === null || value === undefined) {\n      return true;\n    }\n    if (typeof value === \"string\") {\n      return value.trim() === \"\";\n    }\n    if (Array.isArray(value)) {\n      return value.length === 0;\n    }\n    if (typeof value === \"object\") {\n      return Object.keys(value).length === 0;\n    }\n    return false;\n  }\n\n  // Utility method to get validation config for a specific field\n  getFieldConfig(fieldName: string): FieldValidationConfig | undefined {\n    return this.config[fieldName];\n  }\n\n  // Check if a field is required\n  isFieldRequired(fieldName: string): boolean {\n    return this.config[fieldName]?.required ?? false;\n  }\n}\n\n// Debounced validation for real-time validation\nexport function createDebouncedValidator(validator: FormValidator, delay: number = 300) {\n  let timeoutId: NodeJS.Timeout;\n\n  return (fieldName: string, value: unknown, callback: (errors: ValidationError[]) => void) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      const errors = validator.validateField(fieldName, value);\n      callback(errors);\n    }, delay);\n  };\n}\n\n// Pre-configured validators for common forms\nexport const commonValidators = {\n  loginForm: new FormValidator({\n    email: {\n      required: true,\n      rules: [validationRules.email],\n    },\n    password: {\n      required: true,\n      rules: [validationRules.minLength(1)], // Basic requirement for login\n    },\n  }),\n\n  registrationForm: new FormValidator({\n    firstName: {\n      required: true,\n      rules: [validationRules.minLength(2), validationRules.maxLength(50)],\n    },\n    lastName: {\n      required: true,\n      rules: [validationRules.minLength(2), validationRules.maxLength(50)],\n    },\n    email: {\n      required: true,\n      rules: [validationRules.email],\n    },\n    password: {\n      required: true,\n      rules: [validationRules.strongPassword],\n    },\n    confirmPassword: {\n      required: true,\n      rules: [\n        {\n          validate: (_value: unknown) => {\n            // This would need access to the form data context\n            return true; // Implement in component\n          },\n          message: \"Passwords must match\",\n        },\n      ],\n    },\n  }),\n\n  profileForm: new FormValidator({\n    firstName: {\n      required: true,\n      rules: [validationRules.minLength(2), validationRules.maxLength(50)],\n    },\n    lastName: {\n      required: true,\n      rules: [validationRules.minLength(2), validationRules.maxLength(50)],\n    },\n    email: {\n      required: true,\n      rules: [validationRules.email],\n    },\n    phone: {\n      required: false,\n      rules: [validationRules.phoneNumber],\n    },\n    website: {\n      required: false,\n      rules: [validationRules.url],\n    },\n  }),\n\n  passwordChangeForm: new FormValidator({\n    currentPassword: {\n      required: true,\n      rules: [validationRules.minLength(1)],\n    },\n    newPassword: {\n      required: true,\n      rules: [validationRules.strongPassword],\n    },\n    confirmNewPassword: {\n      required: true,\n      rules: [\n        {\n          validate: (_value: unknown) => true, // Implement in component\n          message: \"Passwords must match\",\n        },\n      ],\n    },\n  }),\n};\n\n// Utility function to create validation messages\nexport function formatValidationMessage(\n  fieldName: string,\n  message: string,\n  customFieldNames?: Record<string, string>,\n): string {\n  const displayName =\n    customFieldNames?.[fieldName] ||\n    fieldName.charAt(0).toUpperCase() + fieldName.slice(1).replace(/([A-Z])/g, \" $1\");\n\n  return message.replace(/this field/i, displayName.toLowerCase());\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport {\n  createDebouncedValidator,\n  type FormValidationConfig,\n  FormValidator,\n  type ValidationError,\n  type ValidationResult,\n} from \"../utils/formValidation\";\n\nexport interface UseFormValidationOptions {\n  validationConfig: FormValidationConfig;\n  validateOnChange?: boolean;\n  validateOnBlur?: boolean;\n  debounceTime?: number;\n  onValidationComplete?: (result: ValidationResult) => void;\n}\n\nexport interface UseFormValidationResult {\n  formData: Record<string, unknown>;\n  errors: Record<string, string>;\n  touched: Record<string, boolean>;\n  isValid: boolean;\n  isValidating: boolean;\n  setValue: (field: string, value: unknown) => void;\n  setValues: (values: Record<string, unknown>) => void;\n  setError: (field: string, error: string) => void;\n  clearError: (field: string) => void;\n  clearAllErrors: () => void;\n  validateField: (field: string) => Promise<void>;\n  validateForm: () => Promise<ValidationResult>;\n  resetForm: (initialValues?: Record<string, unknown>) => void;\n  setTouched: (field: string, isTouched?: boolean) => void;\n  getFieldProps: (field: string) => FieldProps;\n  handleSubmit: (\n    onSubmit: (data: Record<string, unknown>) => void | Promise<void>,\n  ) => (e?: React.FormEvent) => Promise<void>;\n}\n\nexport interface FieldProps {\n  value: unknown;\n  onChange: (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>,\n  ) => void;\n  onBlur: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => void;\n  error?: string;\n  required?: boolean;\n  \"aria-invalid\"?: boolean;\n  \"aria-describedby\"?: string;\n}\n\nexport function useFormValidation(\n  initialValues: Record<string, unknown>,\n  options: UseFormValidationOptions,\n): UseFormValidationResult {\n  const {\n    validationConfig,\n    validateOnChange = true,\n    validateOnBlur = true,\n    debounceTime = 300,\n    onValidationComplete,\n  } = options;\n\n  const [formData, setFormData] = useState<Record<string, unknown>>(initialValues);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [touched, setTouchedState] = useState<Record<string, boolean>>({});\n  const [isValidating, setIsValidating] = useState(false);\n\n  const validatorRef = useRef(new FormValidator(validationConfig));\n  const debouncedValidatorRef = useRef(\n    createDebouncedValidator(validatorRef.current, debounceTime),\n  );\n\n  // Update validator when config changes\n  useEffect(() => {\n    validatorRef.current = new FormValidator(validationConfig);\n    debouncedValidatorRef.current = createDebouncedValidator(validatorRef.current, debounceTime);\n  }, [validationConfig, debounceTime]);\n\n  const setValue = useCallback(\n    (field: string, value: unknown) => {\n      setFormData((prev) => ({ ...prev, [field]: value }));\n\n      if (validateOnChange && touched[field]) {\n        debouncedValidatorRef.current?.(field, value, (fieldErrors) => {\n          if (fieldErrors.length > 0) {\n            const firstError = fieldErrors[0];\n            if (firstError) {\n              setErrors((prev) => ({ ...prev, [field]: firstError.message }));\n            }\n          } else {\n            setErrors((prev) => {\n              const newErrors = { ...prev };\n              delete newErrors[field];\n              return newErrors;\n            });\n          }\n        });\n      }\n    },\n    [validateOnChange, touched],\n  );\n\n  const setValues = useCallback((values: Record<string, unknown>) => {\n    setFormData((prev) => ({ ...prev, ...values }));\n  }, []);\n\n  const setError = useCallback((field: string, error: string) => {\n    setErrors((prev) => ({ ...prev, [field]: error }));\n  }, []);\n\n  const clearError = useCallback((field: string) => {\n    setErrors((prev) => {\n      const newErrors = { ...prev };\n      delete newErrors[field];\n      return newErrors;\n    });\n  }, []);\n\n  const clearAllErrors = useCallback(() => {\n    setErrors({});\n  }, []);\n\n  const setTouched = useCallback((field: string, isTouched: boolean = true) => {\n    setTouchedState((prev) => ({ ...prev, [field]: isTouched }));\n  }, []);\n\n  const validateField = useCallback(\n    async (field: string): Promise<void> => {\n      const value = formData[field];\n      const fieldErrors = validatorRef.current.validateField(field, value);\n\n      if (fieldErrors.length > 0) {\n        const firstError = fieldErrors[0];\n        if (firstError) {\n          setErrors((prev) => ({ ...prev, [field]: firstError.message }));\n        }\n      } else {\n        setErrors((prev) => {\n          const newErrors = { ...prev };\n          delete newErrors[field];\n          return newErrors;\n        });\n      }\n    },\n    [formData],\n  );\n\n  const validateForm = useCallback(async (): Promise<ValidationResult> => {\n    setIsValidating(true);\n\n    try {\n      const result = await validatorRef.current.validateFormAsync(formData);\n      setErrors(result.fieldErrors);\n\n      if (onValidationComplete) {\n        onValidationComplete(result);\n      }\n\n      return result;\n    } finally {\n      setIsValidating(false);\n    }\n  }, [formData, onValidationComplete]);\n\n  const resetForm = useCallback(\n    (newInitialValues?: Record<string, unknown>) => {\n      const resetValues = newInitialValues || initialValues;\n      setFormData(resetValues);\n      setErrors({});\n      setTouchedState({});\n    },\n    [initialValues],\n  );\n\n  const getFieldProps = useCallback(\n    (field: string): FieldProps => {\n      const isRequired = validatorRef.current.isFieldRequired(field);\n      const hasError = !!errors[field];\n\n      const fieldProps: FieldProps = {\n        value: formData[field] ?? \"\",\n        onChange: (event) => {\n          const target = event.target as HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement;\n          const nextValue =\n            target instanceof HTMLInputElement && target.type === \"checkbox\"\n              ? target.checked\n              : target.value;\n          setValue(field, nextValue);\n        },\n        onBlur: () => {\n          setTouched(field, true);\n          if (validateOnBlur) {\n            void validateField(field);\n          }\n        },\n        required: isRequired,\n        \"aria-invalid\": hasError,\n      };\n\n      if (errors[field]) {\n        fieldProps.error = errors[field];\n        fieldProps[\"aria-describedby\"] = `${field}-error`;\n      }\n\n      return fieldProps;\n    },\n    [formData, errors, setValue, setTouched, validateField, validateOnBlur],\n  );\n\n  const handleSubmit = useCallback(\n    (onSubmit: (data: Record<string, unknown>) => void | Promise<void>) =>\n      async (e?: React.FormEvent) => {\n        if (e) {\n          e.preventDefault();\n        }\n\n        // Mark all fields as touched\n        const allTouched = Object.keys(validationConfig).reduce(\n          (acc, field) => ({ ...acc, [field]: true }),\n          {} as Record<string, boolean>,\n        );\n        setTouchedState(allTouched);\n\n        const validationResult = await validateForm();\n\n        if (validationResult.isValid) {\n          await onSubmit(formData);\n        }\n      },\n    [formData, validationConfig, validateForm],\n  );\n\n  const isValid = Object.keys(errors).length === 0;\n\n  return {\n    formData,\n    errors,\n    touched,\n    isValid,\n    isValidating,\n    setValue,\n    setValues,\n    setError,\n    clearError,\n    clearAllErrors,\n    validateField,\n    validateForm,\n    resetForm,\n    setTouched,\n    getFieldProps,\n    handleSubmit,\n  };\n}\n\n// Hook for handling form submission states\nexport interface UseFormSubmissionOptions {\n  onSuccess?: (data: unknown) => void;\n  onError?: (error: unknown) => void;\n  resetOnSuccess?: boolean;\n}\n\nexport interface UseFormSubmissionResult {\n  isSubmitting: boolean;\n  submitError: string | null;\n  submitSuccess: boolean;\n  submit: (submitFn: () => Promise<unknown>) => Promise<void>;\n  reset: () => void;\n}\n\nexport function useFormSubmission(options: UseFormSubmissionOptions = {}): UseFormSubmissionResult {\n  const { onSuccess, onError, resetOnSuccess = false } = options;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  const submit = useCallback(\n    async (submitFn: () => Promise<unknown>) => {\n      setIsSubmitting(true);\n      setSubmitError(null);\n      setSubmitSuccess(false);\n\n      try {\n        const result = await submitFn();\n        setSubmitSuccess(true);\n\n        if (onSuccess) {\n          onSuccess(result);\n        }\n\n        if (resetOnSuccess) {\n          // Reset will be handled by the calling component\n        }\n      } catch (error: unknown) {\n        const errorMessage =\n          error instanceof Error ? error.message : \"An error occurred during submission\";\n        setSubmitError(errorMessage);\n\n        if (onError) {\n          onError(error);\n        }\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [onSuccess, onError, resetOnSuccess],\n  );\n\n  const reset = useCallback(() => {\n    setSubmitError(null);\n    setSubmitSuccess(false);\n    setIsSubmitting(false);\n  }, []);\n\n  return {\n    isSubmitting,\n    submitError,\n    submitSuccess,\n    submit,\n    reset,\n  };\n}\n\n// Hook for handling async validation (e.g., checking if email exists)\nexport interface UseAsyncValidationOptions {\n  validator: (value: unknown) => Promise<ValidationError[]>;\n  debounceTime?: number;\n  dependencies?: unknown[];\n}\n\nexport function useAsyncValidation(\n  field: string,\n  value: unknown,\n  options: UseAsyncValidationOptions,\n) {\n  const { validator, debounceTime = 500, dependencies = [] } = options;\n\n  const [isValidating, setIsValidating] = useState(false);\n  const [errors, setErrors] = useState<ValidationError[]>([]);\n\n  const validateAsync = useCallback(async () => {\n    if (!value) {\n      setErrors([]);\n      return;\n    }\n\n    setIsValidating(true);\n\n    try {\n      const validationErrors = await validator(value);\n      setErrors(validationErrors);\n    } catch (_error) {\n      setErrors([\n        {\n          field,\n          message: \"Validation failed\",\n        },\n      ]);\n    } finally {\n      setIsValidating(false);\n    }\n  }, [value, validator, field]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(validateAsync, debounceTime);\n    return () => clearTimeout(timeoutId);\n  }, [validateAsync, debounceTime, ...dependencies]);\n\n  return {\n    isValidating,\n    errors,\n    hasErrors: errors.length > 0,\n  };\n}\n","/**\n * React Query hooks for Partner Portal data\n */\n\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { getPartnerApiClient } from \"../api/partner-client\";\nimport type {\n  Customer,\n  PartnerDashboardData,\n  CreateCustomer,\n  UpdateCustomer,\n} from \"../api/partner-client\";\nimport type { ApiResponse } from \"../api/types/api\";\n\n// Query Keys\nexport const partnerQueryKeys = {\n  all: [\"partner\"] as const,\n  dashboard: (partnerId: string) => [...partnerQueryKeys.all, \"dashboard\", partnerId] as const,\n  customers: (partnerId: string) => [...partnerQueryKeys.all, \"customers\", partnerId] as const,\n  customer: (partnerId: string, customerId: string) =>\n    [...partnerQueryKeys.customers(partnerId), customerId] as const,\n  commissions: (partnerId: string) => [...partnerQueryKeys.all, \"commissions\", partnerId] as const,\n  analytics: (partnerId: string) => [...partnerQueryKeys.all, \"analytics\", partnerId] as const,\n};\n\nconst getClient = () => getPartnerApiClient();\n\n// Dashboard Hook\nexport function usePartnerDashboard(partnerId: string | undefined) {\n  const client = getClient();\n  return useQuery<ApiResponse<PartnerDashboardData>, Error, PartnerDashboardData>({\n    queryKey: partnerQueryKeys.dashboard(partnerId || \"\"),\n    queryFn: () => client.getDashboard(partnerId!),\n    enabled: !!partnerId,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    select: (response) => response.data,\n  });\n}\n\n// Customers Hooks\nexport function usePartnerCustomers(\n  partnerId: string | undefined,\n  params?: {\n    page?: number;\n    limit?: number;\n    search?: string;\n    status?: string;\n  },\n) {\n  const client = getClient();\n  return useQuery<\n    ApiResponse<{ customers: Customer[]; total: number; pagination: any }>,\n    Error,\n    { customers: Customer[]; total: number; pagination: any }\n  >({\n    queryKey: [...partnerQueryKeys.customers(partnerId || \"\"), params],\n    queryFn: () => client.getCustomers(partnerId!, params),\n    enabled: !!partnerId,\n    staleTime: 2 * 60 * 1000, // 2 minutes\n    select: (response) => response.data,\n  });\n}\n\nexport function usePartnerCustomer(partnerId: string | undefined, customerId: string | undefined) {\n  const client = getClient();\n  return useQuery<ApiResponse<Customer>, Error, Customer>({\n    queryKey: partnerQueryKeys.customer(partnerId || \"\", customerId || \"\"),\n    queryFn: () => client.getCustomer(partnerId!, customerId!),\n    enabled: !!partnerId && !!customerId,\n    select: (response) => response.data,\n  });\n}\n\n// Customer Mutations\nexport function useCreateCustomer(partnerId: string) {\n  const queryClient = useQueryClient();\n  const client = getClient();\n\n  return useMutation({\n    mutationFn: (customerData: CreateCustomer) => client.createCustomer(partnerId, customerData),\n    onSuccess: () => {\n      // Invalidate and refetch customer list\n      queryClient.invalidateQueries({\n        queryKey: partnerQueryKeys.customers(partnerId),\n      });\n      // Invalidate dashboard to update metrics\n      queryClient.invalidateQueries({\n        queryKey: partnerQueryKeys.dashboard(partnerId),\n      });\n    },\n  });\n}\n\nexport function useUpdateCustomer(partnerId: string, customerId: string) {\n  const queryClient = useQueryClient();\n  const client = getClient();\n\n  return useMutation({\n    mutationFn: (customerData: UpdateCustomer) =>\n      client.updateCustomer(partnerId, customerId, customerData),\n    onSuccess: () => {\n      // Invalidate specific customer\n      queryClient.invalidateQueries({\n        queryKey: partnerQueryKeys.customer(partnerId, customerId),\n      });\n      // Invalidate customer list\n      queryClient.invalidateQueries({\n        queryKey: partnerQueryKeys.customers(partnerId),\n      });\n      // Invalidate dashboard to update metrics\n      queryClient.invalidateQueries({\n        queryKey: partnerQueryKeys.dashboard(partnerId),\n      });\n    },\n  });\n}\n\n// Commissions Hook\nexport function usePartnerCommissions(\n  partnerId: string | undefined,\n  params?: {\n    page?: number;\n    limit?: number;\n    period?: string;\n    status?: string;\n  },\n) {\n  const client = getClient();\n  return useQuery<ApiResponse<any>, Error, any>({\n    queryKey: [...partnerQueryKeys.commissions(partnerId || \"\"), params],\n    queryFn: () => client.getCommissions(partnerId!, params),\n    enabled: !!partnerId,\n    staleTime: 10 * 60 * 1000, // 10 minutes (financial data changes less frequently)\n    select: (response) => response.data,\n  });\n}\n\n// Analytics Hook\nexport function usePartnerAnalytics(\n  partnerId: string | undefined,\n  params?: {\n    period?: string;\n    metrics?: string[];\n  },\n) {\n  const client = getClient();\n  return useQuery<ApiResponse<any>, Error, any>({\n    queryKey: [...partnerQueryKeys.analytics(partnerId || \"\"), params],\n    queryFn: () => client.getAnalytics(partnerId!, params),\n    enabled: !!partnerId,\n    staleTime: 15 * 60 * 1000, // 15 minutes\n    select: (response) => response.data,\n  });\n}\n\n// Territory Validation Hook\nexport function useValidateTerritory(partnerId: string) {\n  const client = getClient();\n  return useMutation({\n    mutationFn: async (address: string) => {\n      const response = await client.validateTerritory(partnerId, address);\n      return response.data;\n    },\n  });\n}\n\n// Error boundary wrapper for partner data hooks\nexport function usePartnerDataWithErrorBoundary<T>(hookResult: {\n  data: T;\n  error: any;\n  isLoading: boolean;\n  isError: boolean;\n}) {\n  if (hookResult.isError && hookResult.error) {\n    // Log security-relevant errors\n    if (hookResult.error.status === 403 || hookResult.error.status === 401) {\n      console.error(\"Partner access denied:\", hookResult.error);\n      // Could trigger logout or redirect to unauthorized page\n    }\n\n    if (hookResult.error.status >= 500) {\n      console.error(\"Server error in partner data:\", hookResult.error);\n    }\n  }\n\n  return hookResult;\n}\n","/**\n * Commission Calculation Engine\n * Handles secure, validated commission calculations with audit trails\n */\n\nimport { z } from \"zod\";\n\n// Commission Tier Configuration\nexport interface CommissionTier {\n  id: string;\n  name: string;\n  minimumRevenue: number;\n  baseRate: number; // Percentage as decimal (0.05 = 5%)\n  bonusRate?: number; // Additional bonus rate\n  productMultipliers?: Record<string, number>; // Product-specific multipliers\n}\n\n// Default commission tiers\nexport const DEFAULT_COMMISSION_TIERS: CommissionTier[] = [\n  {\n    id: \"bronze\",\n    name: \"Bronze Partner\",\n    minimumRevenue: 0,\n    baseRate: 0.05, // 5%\n    productMultipliers: {\n      residential_basic: 1.0,\n      residential_premium: 1.2,\n      business_pro: 1.5,\n      enterprise: 2.0,\n    },\n  },\n  {\n    id: \"silver\",\n    name: \"Silver Partner\",\n    minimumRevenue: 50000,\n    baseRate: 0.07, // 7%\n    bonusRate: 0.01, // 1% bonus\n    productMultipliers: {\n      residential_basic: 1.0,\n      residential_premium: 1.3,\n      business_pro: 1.6,\n      enterprise: 2.2,\n    },\n  },\n  {\n    id: \"gold\",\n    name: \"Gold Partner\",\n    minimumRevenue: 150000,\n    baseRate: 0.1, // 10%\n    bonusRate: 0.02, // 2% bonus\n    productMultipliers: {\n      residential_basic: 1.1,\n      residential_premium: 1.4,\n      business_pro: 1.8,\n      enterprise: 2.5,\n    },\n  },\n  {\n    id: \"platinum\",\n    name: \"Platinum Partner\",\n    minimumRevenue: 500000,\n    baseRate: 0.12, // 12%\n    bonusRate: 0.03, // 3% bonus\n    productMultipliers: {\n      residential_basic: 1.2,\n      residential_premium: 1.5,\n      business_pro: 2.0,\n      enterprise: 3.0,\n    },\n  },\n];\n\n// Commission Calculation Input Schema\nconst CommissionCalculationInputSchema = z.object({\n  customerId: z.string().min(1),\n  partnerId: z.string().min(1),\n  partnerTier: z.enum([\"bronze\", \"silver\", \"gold\", \"platinum\"]),\n  productType: z.enum([\"residential_basic\", \"residential_premium\", \"business_pro\", \"enterprise\"]),\n  monthlyRevenue: z.number().min(0),\n  partnerLifetimeRevenue: z.number().min(0),\n  isNewCustomer: z.boolean(),\n  contractLength: z.number().min(1).max(36), // 1-36 months\n  promotionalRate: z.number().min(0).max(1).optional(),\n  territoryBonus: z.number().min(0).max(0.05).optional(), // Max 5% territory bonus\n});\n\n// Commission Calculation Result\nexport interface CommissionResult {\n  customerId: string;\n  partnerId: string;\n  baseCommission: number;\n  bonusCommission: number;\n  totalCommission: number;\n  effectiveRate: number;\n  tier: string;\n  breakdown: {\n    baseAmount: number;\n    tierMultiplier: number;\n    productMultiplier: number;\n    newCustomerBonus: number;\n    territoryBonus: number;\n    contractLengthBonus: number;\n    promotionalAdjustment: number;\n  };\n  calculatedAt: string;\n  auditTrail: string[];\n}\n\nexport class CommissionEngine {\n  private tiers: CommissionTier[];\n  private auditLog: string[] = [];\n\n  constructor(customTiers?: CommissionTier[]) {\n    this.tiers = customTiers || DEFAULT_COMMISSION_TIERS;\n  }\n\n  private addAudit(message: string): void {\n    const timestamp = new Date().toISOString();\n    this.auditLog.push(`${timestamp}: ${message}`);\n  }\n\n  private getTier(tierName: string): CommissionTier {\n    const tier = this.tiers.find((t) => t.id === tierName);\n    if (!tier) {\n      throw new Error(`Invalid commission tier: ${tierName}`);\n    }\n    return tier;\n  }\n\n  private validateTierEligibility(lifetimeRevenue: number, tier: CommissionTier): boolean {\n    return lifetimeRevenue >= tier.minimumRevenue;\n  }\n\n  private calculateNewCustomerBonus(tier: CommissionTier, monthlyRevenue: number): number {\n    // New customer bonus: 50% of first month's commission\n    const baseCommission = monthlyRevenue * tier.baseRate;\n    return baseCommission * 0.5;\n  }\n\n  private calculateContractLengthBonus(contractLength: number, baseCommission: number): number {\n    // Bonus based on contract length\n    if (contractLength >= 24) return baseCommission * 0.1; // 10% for 2+ years\n    if (contractLength >= 12) return baseCommission * 0.05; // 5% for 1+ year\n    return 0;\n  }\n\n  private calculateTerritoryBonus(territoryBonus: number = 0, baseCommission: number): number {\n    return baseCommission * territoryBonus;\n  }\n\n  private applyPromotionalAdjustment(promotionalRate: number = 1, totalCommission: number): number {\n    return totalCommission * promotionalRate;\n  }\n\n  calculateCommission(input: unknown): CommissionResult {\n    // Clear previous audit log\n    this.auditLog = [];\n\n    // Validate input\n    const validatedInput = CommissionCalculationInputSchema.parse(input);\n    this.addAudit(`Starting commission calculation for customer ${validatedInput.customerId}`);\n\n    const tier = this.getTier(validatedInput.partnerTier);\n    this.addAudit(`Using tier: ${tier.name} (${tier.baseRate * 100}% base rate)`);\n\n    // Validate tier eligibility\n    if (!this.validateTierEligibility(validatedInput.partnerLifetimeRevenue, tier)) {\n      const error = `Partner not eligible for ${tier.name} tier (requires $${tier.minimumRevenue}, has $${validatedInput.partnerLifetimeRevenue})`;\n      this.addAudit(`ERROR: ${error}`);\n      throw new Error(error);\n    }\n\n    // Base commission calculation\n    const baseAmount = validatedInput.monthlyRevenue;\n    const tierMultiplier = tier.baseRate + (tier.bonusRate || 0);\n    const productMultiplier = tier.productMultipliers?.[validatedInput.productType] || 1;\n\n    const baseCommission = baseAmount * tierMultiplier * productMultiplier;\n    this.addAudit(\n      `Base commission: $${baseAmount}  ${tierMultiplier}  ${productMultiplier} = $${baseCommission.toFixed(2)}`,\n    );\n\n    // Calculate bonuses\n    const newCustomerBonus = validatedInput.isNewCustomer\n      ? this.calculateNewCustomerBonus(tier, validatedInput.monthlyRevenue)\n      : 0;\n\n    const contractLengthBonus = this.calculateContractLengthBonus(\n      validatedInput.contractLength,\n      baseCommission,\n    );\n\n    const territoryBonus = this.calculateTerritoryBonus(\n      validatedInput.territoryBonus,\n      baseCommission,\n    );\n\n    this.addAudit(`New customer bonus: $${newCustomerBonus.toFixed(2)}`);\n    this.addAudit(`Contract length bonus: $${contractLengthBonus.toFixed(2)}`);\n    this.addAudit(`Territory bonus: $${territoryBonus.toFixed(2)}`);\n\n    // Calculate total before promotional adjustment\n    const prePromotionalTotal =\n      baseCommission + newCustomerBonus + contractLengthBonus + territoryBonus;\n\n    // Apply promotional adjustment\n    const promotionalAdjustment = this.applyPromotionalAdjustment(\n      validatedInput.promotionalRate,\n      prePromotionalTotal,\n    );\n\n    const totalCommission = promotionalAdjustment;\n    const bonusCommission = newCustomerBonus + contractLengthBonus + territoryBonus;\n    const effectiveRate = totalCommission / validatedInput.monthlyRevenue;\n\n    this.addAudit(\n      `Final commission: $${totalCommission.toFixed(2)} (${(effectiveRate * 100).toFixed(2)}% effective rate)`,\n    );\n\n    // Security check: Ensure commission doesn't exceed reasonable limits\n    const maxCommissionRate = 0.5; // 50% maximum\n    if (effectiveRate > maxCommissionRate) {\n      const error = `Commission rate ${(effectiveRate * 100).toFixed(2)}% exceeds maximum allowed ${maxCommissionRate * 100}%`;\n      this.addAudit(`SECURITY ERROR: ${error}`);\n      throw new Error(error);\n    }\n\n    return {\n      customerId: validatedInput.customerId,\n      partnerId: validatedInput.partnerId,\n      baseCommission,\n      bonusCommission,\n      totalCommission,\n      effectiveRate,\n      tier: tier.name,\n      breakdown: {\n        baseAmount,\n        tierMultiplier,\n        productMultiplier,\n        newCustomerBonus,\n        territoryBonus,\n        contractLengthBonus,\n        promotionalAdjustment: promotionalAdjustment - prePromotionalTotal,\n      },\n      calculatedAt: new Date().toISOString(),\n      auditTrail: [...this.auditLog],\n    };\n  }\n\n  // Batch calculation with transaction safety\n  calculateBatchCommissions(inputs: unknown[]): CommissionResult[] {\n    const results: CommissionResult[] = [];\n    const errors: Array<{ index: number; error: string }> = [];\n\n    for (let i = 0; i < inputs.length; i++) {\n      try {\n        const result = this.calculateCommission(inputs[i]);\n        results.push(result);\n      } catch (error) {\n        errors.push({\n          index: i,\n          error: error instanceof Error ? error.message : \"Unknown error\",\n        });\n      }\n    }\n\n    if (errors.length > 0) {\n      throw new Error(`Batch calculation failed: ${JSON.stringify(errors)}`);\n    }\n\n    return results;\n  }\n\n  // Commission validation for existing records\n  validateCommission(commission: CommissionResult, originalInput: unknown): boolean {\n    try {\n      const recalculated = this.calculateCommission(originalInput);\n\n      // Compare with tolerance for floating point precision\n      const tolerance = 0.01;\n      const totalMatch =\n        Math.abs(recalculated.totalCommission - commission.totalCommission) < tolerance;\n      const rateMatch = Math.abs(recalculated.effectiveRate - commission.effectiveRate) < tolerance;\n\n      return totalMatch && rateMatch;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  // Get partner tier based on lifetime revenue\n  determineEligibleTier(lifetimeRevenue: number): CommissionTier {\n    // Find the highest tier the partner qualifies for\n    const eligibleTiers = this.tiers\n      .filter((tier) => lifetimeRevenue >= tier.minimumRevenue)\n      .sort((a, b) => b.minimumRevenue - a.minimumRevenue);\n\n    const bestTier = eligibleTiers[0];\n    if (bestTier) {\n      return bestTier;\n    }\n\n    const fallbackTier = this.tiers[0];\n    if (fallbackTier) {\n      return fallbackTier;\n    }\n\n    throw new Error(\"No commission tiers configured\");\n  }\n\n  // Simulate commission for what-if scenarios\n  simulateCommission(\n    baseRevenue: number,\n    targetTier: string,\n    productMix: Record<string, number>,\n  ): { projectedCommissions: number; revenueNeeded: number } {\n    const tier = this.getTier(targetTier);\n    let totalCommissions = 0;\n\n    for (const [productType, revenue] of Object.entries(productMix)) {\n      const multiplier = tier.productMultipliers?.[productType] || 1;\n      const commission = revenue * (tier.baseRate + (tier.bonusRate || 0)) * multiplier;\n      totalCommissions += commission;\n    }\n\n    const revenueNeeded = Math.max(0, tier.minimumRevenue - baseRevenue);\n\n    return {\n      projectedCommissions: totalCommissions,\n      revenueNeeded,\n    };\n  }\n}\n\n// Global commission engine instance\nexport const commissionEngine = new CommissionEngine();\n","/**\n * Territory Validation Service\n * Handles geographic boundary validation and partner territory enforcement\n */\n\nimport { z } from \"zod\";\n\n// Territory Definition Schema\nconst TerritorySchema = z.object({\n  id: z.string().min(1),\n  name: z.string().min(1),\n  partnerId: z.string().min(1),\n  boundaries: z.object({\n    zipCodes: z.array(z.string().regex(/^\\d{5}(-\\d{4})?$/)).optional(),\n    cities: z.array(z.string().min(1)).optional(),\n    counties: z.array(z.string().min(1)).optional(),\n    states: z.array(z.string().length(2)).optional(),\n    coordinates: z\n      .object({\n        polygon: z.array(\n          z.object({\n            lat: z.number().min(-90).max(90),\n            lng: z.number().min(-180).max(180),\n          }),\n        ),\n      })\n      .optional(),\n  }),\n  exclusions: z\n    .object({\n      zipCodes: z.array(z.string().regex(/^\\d{5}(-\\d{4})?$/)).optional(),\n      addresses: z.array(z.string().min(5)).optional(),\n    })\n    .optional(),\n  priority: z.number().min(1).max(10).default(5), // Higher number = higher priority\n  isActive: z.boolean().default(true),\n  createdAt: z.string().datetime(),\n  updatedAt: z.string().datetime(),\n});\n\n// Address validation schema\nconst AddressSchema = z.object({\n  street: z.string().min(5).max(200),\n  city: z.string().min(1).max(100),\n  state: z.string().length(2),\n  zipCode: z.string().regex(/^\\d{5}(-\\d{4})?$/),\n  country: z.string().length(2).default(\"US\"),\n});\n\n// Validation result schema\nconst ValidationResultSchema = z.object({\n  isValid: z.boolean(),\n  assignedPartnerId: z.string().optional(),\n  territoryId: z.string().optional(),\n  territoryName: z.string().optional(),\n  conflictingTerritories: z\n    .array(\n      z.object({\n        territoryId: z.string(),\n        territoryName: z.string(),\n        partnerId: z.string(),\n        priority: z.number(),\n      }),\n    )\n    .optional(),\n  validationMethod: z.enum([\"zipcode\", \"city\", \"county\", \"state\", \"coordinates\"]),\n  confidence: z.number().min(0).max(1), // 0-1 confidence score\n  warnings: z.array(z.string()).optional(),\n});\n\nexport type Territory = z.infer<typeof TerritorySchema>;\nexport type Address = z.infer<typeof AddressSchema>;\nexport type ValidationResult = z.infer<typeof ValidationResultSchema>;\n\nexport class TerritoryValidator {\n  private territories: Territory[] = [];\n  private geocodingService:\n    | ((address: Address) => Promise<{ lat: number; lng: number }>)\n    | undefined;\n\n  constructor(\n    territories: Territory[] = [],\n    geocodingService?: (address: Address) => Promise<{ lat: number; lng: number }>,\n  ) {\n    this.territories = territories.map((t) => TerritorySchema.parse(t));\n    this.geocodingService = geocodingService;\n  }\n\n  // Add or update territory\n  addTerritory(territory: unknown): void {\n    const validatedTerritory = TerritorySchema.parse(territory);\n    const existingIndex = this.territories.findIndex((t) => t.id === validatedTerritory.id);\n\n    if (existingIndex >= 0) {\n      this.territories[existingIndex] = validatedTerritory;\n    } else {\n      this.territories.push(validatedTerritory);\n    }\n  }\n\n  // Remove territory\n  removeTerritory(territoryId: string): void {\n    this.territories = this.territories.filter((t) => t.id !== territoryId);\n  }\n\n  // Get territories for a partner\n  getPartnerTerritories(partnerId: string): Territory[] {\n    return this.territories.filter((t) => t.partnerId === partnerId && t.isActive);\n  }\n\n  // Validate address against territories\n  async validateAddress(address: unknown, requestingPartnerId?: string): Promise<ValidationResult> {\n    const validatedAddress = AddressSchema.parse(address);\n\n    const activeTerritories = this.territories.filter((t) => t.isActive);\n    const matchingTerritories: Array<{\n      territory: Territory;\n      method: ValidationResult[\"validationMethod\"];\n      confidence: number;\n    }> = [];\n\n    // 1. Check ZIP code matches (highest confidence)\n    for (const territory of activeTerritories) {\n      if (territory.boundaries.zipCodes?.includes(validatedAddress.zipCode)) {\n        // Check exclusions\n        if (!this.isExcluded(validatedAddress, territory)) {\n          matchingTerritories.push({\n            territory,\n            method: \"zipcode\",\n            confidence: 0.95,\n          });\n        }\n      }\n    }\n\n    // 2. Check city matches if no ZIP code match\n    if (matchingTerritories.length === 0) {\n      for (const territory of activeTerritories) {\n        if (\n          territory.boundaries.cities?.some(\n            (city) => city.toLowerCase() === validatedAddress.city.toLowerCase(),\n          )\n        ) {\n          if (!this.isExcluded(validatedAddress, territory)) {\n            matchingTerritories.push({\n              territory,\n              method: \"city\",\n              confidence: 0.8,\n            });\n          }\n        }\n      }\n    }\n\n    // 3. Check state matches (lowest confidence)\n    if (matchingTerritories.length === 0) {\n      for (const territory of activeTerritories) {\n        if (territory.boundaries.states?.includes(validatedAddress.state)) {\n          if (!this.isExcluded(validatedAddress, territory)) {\n            matchingTerritories.push({\n              territory,\n              method: \"state\",\n              confidence: 0.4,\n            });\n          }\n        }\n      }\n    }\n\n    // 4. Geographic coordinate validation (if geocoding service available)\n    if (matchingTerritories.length === 0 && this.geocodingService) {\n      try {\n        const coordinates = await this.geocodingService(validatedAddress);\n\n        for (const territory of activeTerritories) {\n          if (territory.boundaries.coordinates) {\n            if (this.isPointInPolygon(coordinates, territory.boundaries.coordinates.polygon)) {\n              if (!this.isExcluded(validatedAddress, territory)) {\n                matchingTerritories.push({\n                  territory,\n                  method: \"coordinates\",\n                  confidence: 0.9,\n                });\n              }\n            }\n          }\n        }\n      } catch (error) {\n        console.warn(\"Geocoding failed:\", error);\n      }\n    }\n\n    // Sort by priority and confidence\n    matchingTerritories.sort((a, b) => {\n      const priorityDiff = b.territory.priority - a.territory.priority;\n      if (priorityDiff !== 0) return priorityDiff;\n      return b.confidence - a.confidence;\n    });\n\n    const warnings: string[] = [];\n\n    if (matchingTerritories.length === 0) {\n      return ValidationResultSchema.parse({\n        isValid: false,\n        validationMethod: \"state\",\n        confidence: 0,\n        warnings: warnings.length > 0 ? warnings : undefined,\n      });\n    }\n\n    const bestMatch = matchingTerritories[0]!;\n    const conflictingTerritories = matchingTerritories.slice(1).map((mt) => ({\n      territoryId: mt.territory.id,\n      territoryName: mt.territory.name,\n      partnerId: mt.territory.partnerId,\n      priority: mt.territory.priority,\n    }));\n\n    if (conflictingTerritories.length > 0) {\n      warnings.push(`Address matches multiple territories. Using highest priority territory.`);\n    }\n\n    // Check partner access\n    if (requestingPartnerId) {\n      const assignedPartnerId = bestMatch.territory.partnerId;\n      if (assignedPartnerId !== requestingPartnerId) {\n        warnings.push(`Address is in territory assigned to partner ${assignedPartnerId}`);\n      }\n    }\n\n    return ValidationResultSchema.parse({\n      isValid: true,\n      assignedPartnerId: bestMatch.territory.partnerId,\n      territoryId: bestMatch.territory.id,\n      territoryName: bestMatch.territory.name,\n      conflictingTerritories:\n        conflictingTerritories.length > 0 ? conflictingTerritories : undefined,\n      validationMethod: bestMatch.method || \"state\",\n      confidence: bestMatch.confidence || 0,\n      warnings: warnings.length > 0 ? warnings : undefined,\n    });\n  }\n\n  // Check if address is in exclusion list\n  private isExcluded(address: Address, territory: Territory): boolean {\n    if (!territory.exclusions) return false;\n\n    // Check ZIP code exclusions\n    if (territory.exclusions.zipCodes?.includes(address.zipCode)) {\n      return true;\n    }\n\n    // Check address exclusions (simple string match)\n    if (territory.exclusions.addresses) {\n      const fullAddress = `${address.street}, ${address.city}, ${address.state} ${address.zipCode}`;\n      return territory.exclusions.addresses.some((excludedAddress) =>\n        fullAddress.toLowerCase().includes(excludedAddress.toLowerCase()),\n      );\n    }\n\n    return false;\n  }\n\n  // Point-in-polygon algorithm for coordinate-based validation\n  private isPointInPolygon(\n    point: { lat: number; lng: number },\n    polygon: Array<{ lat: number; lng: number }>,\n  ): boolean {\n    if (polygon.length < 3) {\n      return false;\n    }\n\n    let inside = false;\n\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      const current = polygon[i]!;\n      const previous = polygon[j]!;\n      if (\n        current.lng > point.lng !== previous.lng > point.lng &&\n        point.lat <\n          ((previous.lat - current.lat) * (point.lng - current.lng)) /\n            (previous.lng - current.lng) +\n            current.lat\n      ) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  }\n\n  // Validate partner has access to territory\n  validatePartnerAccess(partnerId: string, territoryId: string): boolean {\n    const territory = this.territories.find((t) => t.id === territoryId);\n    return territory?.partnerId === partnerId && territory?.isActive === true;\n  }\n\n  // Get territory coverage statistics\n  getTerritoryStats(territoryId: string): {\n    zipCodeCount: number;\n    cityCount: number;\n    hasCoordinateBoundaries: boolean;\n    priority: number;\n    isActive: boolean;\n  } {\n    const territory = this.territories.find((t) => t.id === territoryId);\n\n    if (!territory) {\n      throw new Error(`Territory ${territoryId} not found`);\n    }\n\n    return {\n      zipCodeCount: territory.boundaries.zipCodes?.length || 0,\n      cityCount: territory.boundaries.cities?.length || 0,\n      hasCoordinateBoundaries: !!territory.boundaries.coordinates,\n      priority: territory.priority,\n      isActive: territory.isActive,\n    };\n  }\n\n  // Find optimal territory assignments to minimize conflicts\n  optimizeTerritoryAssignments(): Array<{\n    territoryId: string;\n    suggestedChanges: string[];\n    conflictScore: number;\n  }> {\n    const results: Array<{\n      territoryId: string;\n      suggestedChanges: string[];\n      conflictScore: number;\n    }> = [];\n\n    // Analyze overlaps between territories\n    for (const territory of this.territories) {\n      const conflicts: string[] = [];\n      let conflictScore = 0;\n\n      // Check for ZIP code overlaps\n      if (territory.boundaries.zipCodes) {\n        for (const otherTerritory of this.territories) {\n          if (otherTerritory.id === territory.id) continue;\n\n          const overlap = territory.boundaries.zipCodes.filter((zip) =>\n            otherTerritory.boundaries.zipCodes?.includes(zip),\n          );\n\n          if (overlap.length > 0) {\n            conflicts.push(`ZIP code overlap with ${otherTerritory.name}: ${overlap.join(\", \")}`);\n            conflictScore += overlap.length * 10;\n          }\n        }\n      }\n\n      // Check for city overlaps\n      if (territory.boundaries.cities) {\n        for (const otherTerritory of this.territories) {\n          if (otherTerritory.id === territory.id) continue;\n\n          const overlap = territory.boundaries.cities.filter((city) =>\n            otherTerritory.boundaries.cities?.some(\n              (otherCity) => city.toLowerCase() === otherCity.toLowerCase(),\n            ),\n          );\n\n          if (overlap.length > 0) {\n            conflicts.push(`City overlap with ${otherTerritory.name}: ${overlap.join(\", \")}`);\n            conflictScore += overlap.length * 5;\n          }\n        }\n      }\n\n      results.push({\n        territoryId: territory.id,\n        suggestedChanges: conflicts,\n        conflictScore,\n      });\n    }\n\n    return results.sort((a, b) => b.conflictScore - a.conflictScore);\n  }\n\n  // Bulk validation for multiple addresses\n  async validateBulkAddresses(\n    addresses: unknown[],\n    requestingPartnerId?: string,\n  ): Promise<ValidationResult[]> {\n    const results: ValidationResult[] = [];\n\n    for (const address of addresses) {\n      try {\n        const result = await this.validateAddress(address, requestingPartnerId);\n        results.push(result);\n      } catch (error) {\n        // Return invalid result for malformed addresses\n        results.push({\n          isValid: false,\n          validationMethod: \"state\",\n          confidence: 0,\n          warnings: [\n            `Invalid address format: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          ],\n        });\n      }\n    }\n\n    return results;\n  }\n}\n\n// Export default instance\nexport const territoryValidator = new TerritoryValidator();\n","/**\n * Business Logic Validation Hook\n * Provides client-side business rule validation with server synchronization\n */\n\nimport { useCallback, useState } from \"react\";\nimport { commissionEngine } from \"../business/commission-engine\";\nimport { territoryValidator } from \"../business/territory-validator\";\nimport type { Customer } from \"../validation/partner-schemas\";\n\nexport interface BusinessValidationResult {\n  isValid: boolean;\n  warnings: string[];\n  errors: string[];\n  suggestions: string[];\n}\n\nexport interface CustomerBusinessValidation extends BusinessValidationResult {\n  territoryValidation?: {\n    isInTerritory: boolean;\n    assignedPartnerId?: string;\n    territoryName?: string;\n    confidence: number;\n  };\n  commissionEstimate?: {\n    monthlyCommission: number;\n    annualCommission: number;\n    effectiveRate: number;\n  };\n}\n\nexport function useBusinessValidation(partnerId?: string) {\n  const [validationCache, setValidationCache] = useState<Map<string, BusinessValidationResult>>(\n    new Map(),\n  );\n\n  // Validate customer business rules\n  const validateCustomer = useCallback(\n    async (customer: Partial<Customer>): Promise<CustomerBusinessValidation> => {\n      const warnings: string[] = [];\n      const errors: string[] = [];\n      const suggestions: string[] = [];\n\n      let territoryValidation: CustomerBusinessValidation[\"territoryValidation\"];\n      let commissionEstimate: CustomerBusinessValidation[\"commissionEstimate\"];\n\n      try {\n        // Territory validation\n        if (customer.address && partnerId) {\n          try {\n            // Parse address for validation\n            const addressParts = customer.address.split(\",\").map((s) => s.trim());\n            if (addressParts.length >= 3) {\n              const street = addressParts[0];\n              const city = addressParts[1];\n              const stateZip = addressParts[2]?.split(\" \") ?? [];\n              const [state, zipCode] = stateZip;\n\n              if (street && city && state && zipCode) {\n                const address = { street, city, state, zipCode };\n                const result = await territoryValidator.validateAddress(address, partnerId);\n\n                const validationDetails: NonNullable<\n                  CustomerBusinessValidation[\"territoryValidation\"]\n                > = {\n                  isInTerritory: result.isValid && result.assignedPartnerId === partnerId,\n                  confidence: result.confidence,\n                };\n\n                if (result.assignedPartnerId) {\n                  validationDetails.assignedPartnerId = result.assignedPartnerId;\n                }\n\n                if (result.territoryName) {\n                  validationDetails.territoryName = result.territoryName;\n                }\n\n                territoryValidation = validationDetails;\n\n                if (!result.isValid) {\n                  errors.push(\"Customer address is not in any assigned territory\");\n                } else if (result.assignedPartnerId !== partnerId) {\n                  errors.push(\n                    `Customer is in territory assigned to partner ${result.assignedPartnerId}`,\n                  );\n                }\n\n                if (result.warnings) {\n                  warnings.push(...result.warnings);\n                }\n\n                if (result.confidence < 0.8) {\n                  warnings.push(\n                    \"Territory assignment has low confidence - manual review recommended\",\n                  );\n                }\n              }\n            }\n          } catch (error) {\n            warnings.push(\"Could not validate territory - address format may be incorrect\");\n          }\n        }\n\n        // Commission estimation\n        if (customer.plan && customer.mrr && partnerId) {\n          try {\n            // Get partner's current tier (defaulting to Bronze for estimation)\n            const tier = commissionEngine.determineEligibleTier(100000); // Assume $100k lifetime revenue for estimation\n\n            const commissionResult = commissionEngine.calculateCommission({\n              customerId: customer.id || \"new-customer\",\n              partnerId,\n              partnerTier: tier.id,\n              productType: customer.plan,\n              monthlyRevenue: customer.mrr,\n              partnerLifetimeRevenue: 100000, // Default for estimation\n              isNewCustomer: true,\n              contractLength: 12, // Default 12 months\n            });\n\n            commissionEstimate = {\n              monthlyCommission: commissionResult.totalCommission,\n              annualCommission: commissionResult.totalCommission * 12,\n              effectiveRate: commissionResult.effectiveRate,\n            };\n\n            // Add suggestions based on commission calculation\n            if (commissionResult.effectiveRate < 0.05) {\n              suggestions.push(\n                \"Consider upgrading customer to higher-value plan for better commission rates\",\n              );\n            }\n\n            if (commissionResult.breakdown.newCustomerBonus > 0) {\n              suggestions.push(\n                `New customer bonus of $${commissionResult.breakdown.newCustomerBonus.toFixed(2)} applies`,\n              );\n            }\n          } catch (error) {\n            warnings.push(\"Could not calculate commission estimate\");\n          }\n        }\n\n        // Business rule validations\n        if (customer.mrr && customer.mrr < 10) {\n          warnings.push(\"Monthly recurring revenue is very low - confirm pricing accuracy\");\n        }\n\n        if (customer.mrr && customer.mrr > 1000) {\n          suggestions.push(\"High-value customer - consider priority support assignment\");\n        }\n\n        if (customer.plan === \"enterprise\" && customer.mrr && customer.mrr < 200) {\n          warnings.push(\"Enterprise plan pricing seems low - verify plan selection\");\n        }\n\n        if (customer.status === \"suspended\") {\n          warnings.push(\"Customer account is suspended - resolve issues before activation\");\n        }\n\n        if (customer.status === \"pending\" && customer.joinDate) {\n          const joinDate = new Date(customer.joinDate);\n          const daysSinceJoin = Math.floor(\n            (Date.now() - joinDate.getTime()) / (1000 * 60 * 60 * 24),\n          );\n\n          if (daysSinceJoin > 30) {\n            warnings.push(\"Customer has been pending for over 30 days - follow up required\");\n          }\n        }\n\n        const isValid = errors.length === 0;\n\n        const validationResult: CustomerBusinessValidation = {\n          isValid,\n          warnings,\n          errors,\n          suggestions,\n        };\n\n        if (territoryValidation) {\n          validationResult.territoryValidation = territoryValidation;\n        }\n\n        if (commissionEstimate) {\n          validationResult.commissionEstimate = commissionEstimate;\n        }\n\n        return validationResult;\n      } catch (error) {\n        const validationResult: CustomerBusinessValidation = {\n          isValid: false,\n          warnings,\n          errors: [\n            ...errors,\n            `Validation error: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          ],\n          suggestions,\n        };\n\n        if (territoryValidation) {\n          validationResult.territoryValidation = territoryValidation;\n        }\n\n        if (commissionEstimate) {\n          validationResult.commissionEstimate = commissionEstimate;\n        }\n\n        return validationResult;\n      }\n    },\n    [partnerId],\n  );\n\n  // Validate commission calculation\n  const validateCommission = useCallback(\n    (\n      customerId: string,\n      monthlyRevenue: number,\n      productType: string,\n      partnerTier: string,\n      isNewCustomer: boolean = false,\n      contractLength: number = 12,\n    ): BusinessValidationResult => {\n      const warnings: string[] = [];\n      const errors: string[] = [];\n      const suggestions: string[] = [];\n\n      try {\n        if (!partnerId) {\n          errors.push(\"Partner ID is required for commission validation\");\n          return { isValid: false, warnings, errors, suggestions };\n        }\n\n        // Validate commission calculation\n        const result = commissionEngine.calculateCommission({\n          customerId,\n          partnerId,\n          partnerTier,\n          productType,\n          monthlyRevenue,\n          partnerLifetimeRevenue: 100000, // This should come from actual partner data\n          isNewCustomer,\n          contractLength,\n        });\n\n        // Business rule checks\n        if (result.effectiveRate > 0.25) {\n          warnings.push(\"Commission rate exceeds 25% - verify calculation parameters\");\n        }\n\n        if (result.totalCommission > monthlyRevenue * 0.5) {\n          errors.push(\"Commission exceeds 50% of monthly revenue - calculation may be incorrect\");\n        }\n\n        if (result.breakdown.newCustomerBonus > 0 && !isNewCustomer) {\n          errors.push(\"New customer bonus applied to existing customer\");\n        }\n\n        // Suggestions\n        if (contractLength < 12) {\n          suggestions.push(\"Longer contract terms may increase commission rates\");\n        }\n\n        if (result.breakdown.territoryBonus === 0) {\n          suggestions.push(\"Check if territory bonus applies for this customer location\");\n        }\n\n        return {\n          isValid: errors.length === 0,\n          warnings,\n          errors,\n          suggestions,\n        };\n      } catch (error) {\n        return {\n          isValid: false,\n          warnings,\n          errors: [error instanceof Error ? error.message : \"Commission validation failed\"],\n          suggestions,\n        };\n      }\n    },\n    [partnerId],\n  );\n\n  // Validate territory assignment\n  const validateTerritoryAssignment = useCallback(\n    async (address: string): Promise<BusinessValidationResult> => {\n      const warnings: string[] = [];\n      const errors: string[] = [];\n      const suggestions: string[] = [];\n\n      try {\n        if (!partnerId) {\n          errors.push(\"Partner ID is required for territory validation\");\n          return { isValid: false, warnings, errors, suggestions };\n        }\n\n        // Parse address\n        const addressParts = address.split(\",\").map((s) => s.trim());\n        if (addressParts.length < 3) {\n          errors.push(\"Address must include street, city, and state/zip\");\n          return { isValid: false, warnings, errors, suggestions };\n        }\n\n        const street = addressParts[0];\n        const city = addressParts[1];\n        const stateZip = addressParts[2]?.split(\" \") ?? [];\n        const [state, zipCode] = stateZip;\n\n        if (!street || !city || !state || !zipCode) {\n          errors.push(\"Incomplete address information\");\n          return { isValid: false, warnings, errors, suggestions };\n        }\n\n        const addressObj = { street, city, state, zipCode };\n        const result = await territoryValidator.validateAddress(addressObj, partnerId);\n\n        if (!result.isValid) {\n          errors.push(\"Address is not in any assigned territory\");\n        } else if (result.assignedPartnerId !== partnerId) {\n          errors.push(`Address is in territory assigned to partner ${result.assignedPartnerId}`);\n          suggestions.push(\"Contact territory management for reassignment if needed\");\n        }\n\n        if (result.confidence < 0.7) {\n          warnings.push(\"Low confidence territory match - manual review recommended\");\n        }\n\n        if (result.warnings) {\n          warnings.push(...result.warnings);\n        }\n\n        return {\n          isValid: errors.length === 0,\n          warnings,\n          errors,\n          suggestions,\n        };\n      } catch (error) {\n        return {\n          isValid: false,\n          warnings,\n          errors: [\n            `Territory validation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n          ],\n          suggestions,\n        };\n      }\n    },\n    [partnerId],\n  );\n\n  // Get cached validation result\n  const getCachedValidation = useCallback(\n    (key: string): BusinessValidationResult | null => {\n      return validationCache.get(key) || null;\n    },\n    [validationCache],\n  );\n\n  // Cache validation result\n  const cacheValidation = useCallback((key: string, result: BusinessValidationResult) => {\n    setValidationCache((prev) => new Map(prev.set(key, result)));\n  }, []);\n\n  return {\n    validateCustomer,\n    validateCommission,\n    validateTerritoryAssignment,\n    getCachedValidation,\n    cacheValidation,\n  };\n}\n","/**\n * Content Security Policy utilities for nonce generation and management\n */\n\n/**\n * Generate a cryptographically secure nonce for CSP\n * Uses Web Crypto API which is available in both Node.js and Edge Runtime\n */\nexport function generateNonce(): string {\n  // Use crypto.getRandomValues which works in both Node.js and edge runtime\n  if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\n    const array = new Uint8Array(16);\n    crypto.getRandomValues(array);\n    return btoa(String.fromCharCode(...array));\n  }\n\n  // Fallback for environments without Web Crypto API\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  let result = \"\";\n  for (let i = 0; i < 22; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result + \"==\";\n}\n\n/**\n * Generate CSP header with nonce support\n */\nexport function generateCSP(nonce: string, isDevelopment = false): string {\n  const policies = [\n    `default-src 'self'`,\n    // Use nonce for scripts instead of unsafe-inline\n    `script-src 'self' 'nonce-${nonce}' 'strict-dynamic'${isDevelopment ? \" 'unsafe-eval'\" : \"\"}`,\n    // Tightened CSP: Remove unsafe-inline in production, use nonce for inline styles\n    `style-src 'self'${isDevelopment ? \" 'unsafe-inline'\" : ` 'nonce-${nonce}'`} fonts.googleapis.com`,\n    `font-src 'self' fonts.gstatic.com data:`,\n    `img-src 'self' data: blob: https:`,\n    `connect-src 'self' ws: wss: https:`,\n    `frame-ancestors 'none'`,\n    `base-uri 'self'`,\n    `form-action 'self'`,\n    `object-src 'none'`,\n    `upgrade-insecure-requests`,\n  ];\n\n  return policies.join(\"; \");\n}\n\n/**\n * Generate CSP meta tag for client-side enforcement\n */\nexport function generateCSPMeta(nonce: string): string {\n  const csp = generateCSP(nonce, process.env[\"NODE_ENV\"] === \"development\");\n  return `<meta http-equiv=\"Content-Security-Policy\" content=\"${csp}\">`;\n}\n\n/**\n * Extract nonce from CSP header\n */\nexport function extractNonce(cspHeader: string): string | null {\n  const match = cspHeader.match(/'nonce-([^']+)'/);\n  return match ? match[1] : null;\n}\n\n/**\n * Validate nonce format\n */\nexport function isValidNonce(nonce: string): boolean {\n  // Base64 encoded 16 bytes = 24 chars (with padding)\n  return /^[A-Za-z0-9+/]{22}==$/.test(nonce);\n}\n","/**\n * Input validation utilities for form data and user input\n * Provides sanitization and validation functions for security\n */\n\nimport { sanitizeText, sanitizeEmail, sanitizeHTML, escapeHTML } from \"./sanitization\";\n\nexport interface ValidationResult {\n  isValid: boolean;\n  error?: string;\n  sanitizedValue?: any;\n}\n\nexport interface ValidationOptions {\n  required?: boolean;\n  minLength?: number;\n  maxLength?: number;\n  pattern?: RegExp;\n  sanitize?: boolean;\n  allowHTML?: boolean;\n}\n\n/**\n * Main input sanitization function - the missing function that was causing build errors\n */\nexport function sanitizeInput(\n  input: unknown,\n  type: \"text\" | \"email\" | \"phone\" | \"url\" | \"html\" | \"alphanumeric\" = \"text\",\n  options: { maxLength?: number; allowHTML?: boolean } = {},\n): string {\n  if (input === null || input === undefined) {\n    return \"\";\n  }\n\n  const stringValue = String(input).trim();\n\n  if (!stringValue) {\n    return \"\";\n  }\n\n  const { maxLength = 1000, allowHTML = false } = options;\n\n  switch (type) {\n    case \"email\":\n      const emailResult = sanitizeEmail(stringValue);\n      return emailResult || \"\";\n\n    case \"phone\":\n      // Remove all non-digit characters except + and -\n      return stringValue.replace(/[^\\d+\\-\\s()]/g, \"\").substring(0, maxLength);\n\n    case \"url\":\n      // Basic URL sanitization - remove dangerous protocols\n      const urlCleaned = stringValue.replace(/^(javascript|data|vbscript):/i, \"\");\n      return urlCleaned.substring(0, maxLength);\n\n    case \"html\":\n      if (allowHTML) {\n        return sanitizeHTML(stringValue, { maxLength });\n      }\n      return sanitizeText(stringValue, maxLength);\n\n    case \"alphanumeric\":\n      // Allow only alphanumeric characters, spaces, and common punctuation\n      return stringValue.replace(/[^a-zA-Z0-9\\s\\-_.,!?]/g, \"\").substring(0, maxLength);\n\n    case \"text\":\n    default:\n      return sanitizeText(stringValue, maxLength);\n  }\n}\n\n/**\n * Validate and sanitize form input\n */\nexport function validateInput(\n  value: unknown,\n  type: string,\n  options: ValidationOptions = {},\n): ValidationResult {\n  const {\n    required = false,\n    minLength,\n    maxLength,\n    pattern,\n    sanitize = true,\n    allowHTML = false,\n  } = options;\n\n  // Convert to string and basic cleanup\n  const stringValue = value === null || value === undefined ? \"\" : String(value).trim();\n\n  // Required field validation\n  if (required && !stringValue) {\n    return {\n      isValid: false,\n      error: \"This field is required\",\n    };\n  }\n\n  // If not required and empty, return valid\n  if (!required && !stringValue) {\n    return {\n      isValid: true,\n      sanitizedValue: \"\",\n    };\n  }\n\n  // Sanitize if requested\n  const processedValue = sanitize\n    ? sanitizeInput(stringValue, type as any, { maxLength, allowHTML })\n    : stringValue;\n\n  // Length validation\n  if (minLength && processedValue.length < minLength) {\n    return {\n      isValid: false,\n      error: `Must be at least ${minLength} characters long`,\n    };\n  }\n\n  if (maxLength && processedValue.length > maxLength) {\n    return {\n      isValid: false,\n      error: `Must be no more than ${maxLength} characters long`,\n    };\n  }\n\n  // Pattern validation\n  if (pattern && !pattern.test(processedValue)) {\n    return {\n      isValid: false,\n      error: \"Invalid format\",\n    };\n  }\n\n  // Type-specific validation\n  switch (type) {\n    case \"email\":\n      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n      if (!emailRegex.test(processedValue)) {\n        return {\n          isValid: false,\n          error: \"Please enter a valid email address\",\n        };\n      }\n      break;\n\n    case \"phone\":\n      const phoneRegex = /^[\\+]?[1-9]?[\\d\\s\\-\\(\\)]{7,15}$/;\n      if (!phoneRegex.test(processedValue)) {\n        return {\n          isValid: false,\n          error: \"Please enter a valid phone number\",\n        };\n      }\n      break;\n\n    case \"url\":\n      try {\n        new URL(processedValue);\n      } catch {\n        return {\n          isValid: false,\n          error: \"Please enter a valid URL\",\n        };\n      }\n      break;\n\n    case \"password\":\n      if (processedValue.length < 8) {\n        return {\n          isValid: false,\n          error: \"Password must be at least 8 characters long\",\n        };\n      }\n      if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(processedValue)) {\n        return {\n          isValid: false,\n          error: \"Password must contain uppercase, lowercase, and numeric characters\",\n        };\n      }\n      break;\n  }\n\n  return {\n    isValid: true,\n    sanitizedValue: processedValue,\n  };\n}\n\n/**\n * Validate form data object\n */\nexport function validateFormData(\n  data: Record<string, unknown>,\n  schema: Record<string, ValidationOptions & { type: string }>,\n): {\n  isValid: boolean;\n  errors: Record<string, string>;\n  sanitizedData: Record<string, any>;\n} {\n  const errors: Record<string, string> = {};\n  const sanitizedData: Record<string, any> = {};\n\n  for (const [field, rules] of Object.entries(schema)) {\n    const value = data[field];\n    const result = validateInput(value, rules.type, rules);\n\n    if (!result.isValid) {\n      errors[field] = result.error || \"Invalid value\";\n    } else {\n      sanitizedData[field] = result.sanitizedValue;\n    }\n  }\n\n  return {\n    isValid: Object.keys(errors).length === 0,\n    errors,\n    sanitizedData,\n  };\n}\n\n/**\n * Rate limiting helper\n */\nexport interface RateLimitConfig {\n  windowMs: number;\n  maxRequests: number;\n  keyGenerator?: (req: any) => string;\n  store?: \"memory\" | \"redis\";\n  redisUrl?: string;\n}\n\n/**\n * Create rate limiter instance\n */\nexport function createRateLimit(config: RateLimitConfig) {\n  const attempts = new Map<string, { count: number; resetTime: number }>();\n\n  return {\n    async checkLimit(key: string): Promise<{\n      allowed: boolean;\n      remainingRequests: number;\n      resetTime: number;\n    }> {\n      const now = Date.now();\n      const windowStart = now - config.windowMs;\n\n      // Clean old entries\n      for (const [k, v] of attempts.entries()) {\n        if (v.resetTime < now) {\n          attempts.delete(k);\n        }\n      }\n\n      const current = attempts.get(key) || {\n        count: 0,\n        resetTime: now + config.windowMs,\n      };\n\n      if (current.count >= config.maxRequests && current.resetTime > now) {\n        return {\n          allowed: false,\n          remainingRequests: 0,\n          resetTime: current.resetTime,\n        };\n      }\n\n      if (current.resetTime <= now) {\n        current.count = 1;\n        current.resetTime = now + config.windowMs;\n      } else {\n        current.count++;\n      }\n\n      attempts.set(key, current);\n\n      return {\n        allowed: true,\n        remainingRequests: Math.max(0, config.maxRequests - current.count),\n        resetTime: current.resetTime,\n      };\n    },\n\n    async clearLimit(key: string): Promise<void> {\n      attempts.delete(key);\n    },\n  };\n}\n\n// Export commonly used validation patterns\nexport const VALIDATION_PATTERNS = {\n  email: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/,\n  phone: /^[\\+]?[1-9]?[\\d\\s\\-\\(\\)]{7,15}$/,\n  password: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d@$!%*?&]{8,}$/,\n  alphanumeric: /^[a-zA-Z0-9]+$/,\n  url: /^https?:\\/\\/(?:[-\\w.])+(?::[0-9]+)?(?:\\/(?:[\\w/_.])*(?:\\?(?:[\\w&%=.]*))?(?:#(?:\\w*))?)?$/,\n};\n\n/**\n * DEPRECATED: Plugin validation has been moved to use existing validation systems\n * This section remains for backward compatibility but should use @dotmac/primitives\n *\n * @deprecated Use validationPatterns and validate from '@dotmac/primitives'\n */\n\n// Re-export placeholder for backward compatibility\nexport const PLUGIN_PATTERNS = {\n  email: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n  phone: /^\\+?[\\d\\s-()]+$/,\n  url: /^https?:\\/\\/[^\\s]+$/,\n};\n\n// Legacy schemas - consider migrating to existing validation system\nexport const COMMON_SCHEMAS = {\n  login: {\n    email: { type: \"email\", required: true, maxLength: 255 },\n    password: {\n      type: \"password\",\n      required: true,\n      minLength: 8,\n      maxLength: 128,\n    },\n  },\n\n  registration: {\n    email: { type: \"email\", required: true, maxLength: 255 },\n    password: {\n      type: \"password\",\n      required: true,\n      minLength: 8,\n      maxLength: 128,\n    },\n    name: { type: \"text\", required: true, minLength: 2, maxLength: 100 },\n    phone: { type: \"phone\", required: false, maxLength: 20 },\n  },\n\n  profile: {\n    name: { type: \"text\", required: true, minLength: 2, maxLength: 100 },\n    phone: { type: \"phone\", required: false, maxLength: 20 },\n    address: { type: \"text\", required: false, maxLength: 500 },\n  },\n};\n","/**\n * Production Data Guard - Prevents Mock Data in Production\n *\n * This utility ensures that mock data is never included in production builds\n * while allowing it to be used safely in development and testing environments.\n *\n * Features:\n * - Compile-time removal of mock data in production builds\n * - Runtime warnings for development\n * - Type-safe mock data handling\n * - Configurable fallback behavior\n */\n\n// Remove React dependency for now to fix build issues\n// import React from 'react';\n\n// Development flag - will be replaced by bundler in production\ndeclare const __DEV__: boolean;\n\nexport interface MockDataConfig {\n  enableInTest?: boolean;\n  enableInDevelopment?: boolean;\n  fallbackToEmpty?: boolean;\n  warningMessage?: string;\n}\n\nexport interface MockDataGuard {\n  isDevelopment: boolean;\n  isTest: boolean;\n  isProduction: boolean;\n  shouldUseMockData: boolean;\n}\n\n/**\n * Create a mock data guard with environment detection\n */\nexport function createMockDataGuard(config?: MockDataConfig): MockDataGuard {\n  const isDevelopment = process.env[\"NODE_ENV\"] === \"development\";\n  const isTest = process.env[\"NODE_ENV\"] === \"test\";\n  const isProduction = process.env[\"NODE_ENV\"] === \"production\";\n\n  const shouldUseMockData =\n    (isDevelopment && (config?.enableInDevelopment ?? true)) ||\n    (isTest && (config?.enableInTest ?? true));\n\n  return {\n    isDevelopment,\n    isTest,\n    isProduction,\n    shouldUseMockData,\n  };\n}\n\n/**\n * Conditionally return mock data based on environment\n */\nexport function mockData<T>(\n  mockValue: T,\n  productionFallback?: T,\n  config?: MockDataConfig,\n): T | undefined {\n  const guard = createMockDataGuard(config);\n\n  if (guard.shouldUseMockData) {\n    // In development/test, show warning if configured\n    if (guard.isDevelopment && config?.warningMessage) {\n      console.warn(` Mock Data Active: ${config.warningMessage}`);\n    }\n    return mockValue;\n  }\n\n  if (guard.isProduction) {\n    // In production, never return mock data\n    if (productionFallback !== undefined) {\n      return productionFallback;\n    }\n\n    if (config?.fallbackToEmpty) {\n      return (Array.isArray(mockValue) ? [] : {}) as T;\n    }\n\n    // Log error for production mock data attempts\n    console.error(\" Attempted to use mock data in production environment\");\n    return undefined;\n  }\n\n  return productionFallback;\n}\n\n/**\n * Development-only function that gets completely removed in production\n */\nexport function devOnly<T>(fn: () => T): T | undefined {\n  if (process.env[\"NODE_ENV\"] === \"development\") {\n    return fn();\n  }\n  return undefined;\n}\n\n/**\n * Test-only function that gets removed in production\n */\nexport function testOnly<T>(fn: () => T): T | undefined {\n  if (process.env[\"NODE_ENV\"] === \"test\") {\n    return fn();\n  }\n  return undefined;\n}\n\n/**\n * Hook for React components to safely use mock data\n */\nexport function useMockData<T>(\n  mockValue: T,\n  productionFallback?: T,\n  config?: MockDataConfig,\n): T | undefined {\n  // This will be tree-shaken in production builds\n  if (process.env[\"NODE_ENV\"] === \"production\") {\n    return productionFallback;\n  }\n\n  return mockData(mockValue, productionFallback, config);\n}\n\n/**\n * Wrapper for API functions to use mock data in development\n */\nexport function mockApiWrapper<TArgs extends any[], TReturn>(\n  realApiCall: (...args: TArgs) => Promise<TReturn>,\n  mockData: TReturn | (() => TReturn),\n  config?: MockDataConfig & { delay?: number },\n): (...args: TArgs) => Promise<TReturn> {\n  return async (...args: TArgs): Promise<TReturn> => {\n    const guard = createMockDataGuard(config);\n\n    if (guard.shouldUseMockData) {\n      // Simulate API delay in development\n      const delay = config?.delay ?? 500;\n      await new Promise((resolve) => setTimeout(resolve, delay));\n\n      const result = typeof mockData === \"function\" ? (mockData as () => TReturn)() : mockData;\n\n      if (guard.isDevelopment && config?.warningMessage) {\n        console.warn(` Mock API Active: ${config.warningMessage}`);\n      }\n\n      return result;\n    }\n\n    // Use real API call in production\n    return realApiCall(...args);\n  };\n}\n\n/**\n * Conditional component rendering based on environment\n * (Disabled for now to avoid React dependency issues)\n */\n/*\nexport function MockDataIndicator({ \n  children, \n  message = \"Using mock data\" \n}: { \n  children?: any;\n  message?: string;\n}): any | null {\n  if (process.env[\"NODE_ENV\"] !== 'development') {\n    return null;\n  }\n\n  return null; // Simplified for now\n}\n*/\n\n/**\n * Type-safe mock data generator\n */\nexport interface MockGenerator<T> {\n  generate(): T;\n  generateMany(count: number): T[];\n  withOverrides(overrides: Partial<T>): MockGenerator<T>;\n}\n\nexport function createMockGenerator<T>(\n  factory: () => T,\n  config?: MockDataConfig,\n): MockGenerator<T> {\n  return {\n    generate(): T {\n      const guard = createMockDataGuard(config);\n      if (!guard.shouldUseMockData) {\n        throw new Error(\"Mock data generation attempted in production environment\");\n      }\n      return factory();\n    },\n\n    generateMany(count: number): T[] {\n      return Array.from({ length: count }, () => this.generate());\n    },\n\n    withOverrides(overrides: Partial<T>): MockGenerator<T> {\n      return createMockGenerator(\n        () => ({\n          ...factory(),\n          ...overrides,\n        }),\n        config,\n      );\n    },\n  };\n}\n\n/**\n * Environment-aware console logging\n */\nexport const safeConsole = {\n  dev: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] === \"development\") {\n      console.log(` [DEV] ${message}`, ...args);\n    }\n  },\n\n  test: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] === \"test\") {\n      console.log(` [TEST] ${message}`, ...args);\n    }\n  },\n\n  warn: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] !== \"production\") {\n      console.warn(` ${message}`, ...args);\n    }\n  },\n\n  error: (message: string, ...args: any[]): void => {\n    console.error(` ${message}`, ...args);\n  },\n};\n\n// Export default guard instance\nexport const defaultMockGuard = createMockDataGuard();\n","/**\n * OpenTelemetry initialization for Next.js applications\n */\n\nimport { NodeSDK } from \"@opentelemetry/sdk-node\";\nimport { getNodeAutoInstrumentations } from \"@opentelemetry/auto-instrumentations-node\";\nimport { Resource as OtelResource } from \"@opentelemetry/resources\";\nimport {\n  ATTR_SERVICE_NAME,\n  ATTR_SERVICE_VERSION,\n  ATTR_DEPLOYMENT_ENVIRONMENT,\n} from \"@opentelemetry/semantic-conventions\";\nimport { OTLPTraceExporter } from \"@opentelemetry/exporter-trace-otlp-http\";\nimport { OTLPMetricExporter } from \"@opentelemetry/exporter-metrics-otlp-http\";\nimport { PeriodicExportingMetricReader } from \"@opentelemetry/sdk-metrics\";\n\nlet isInitialized = false;\n\n/**\n * Initialize OpenTelemetry\n */\nexport function initializeOTEL(serviceName: string) {\n  // Prevent multiple initializations\n  if (isInitialized) {\n    console.warn(\"OpenTelemetry already initialized\");\n    return;\n  }\n\n  const otelEndpoint = process.env[\"NEXT_PUBLIC_OTEL_ENDPOINT\"];\n\n  if (!otelEndpoint) {\n    console.log(\"OpenTelemetry endpoint not configured, skipping initialization\");\n    return;\n  }\n\n  try {\n    // Configure resource\n    const resource = OtelResource.default().merge(\n      new OtelResource({\n        [ATTR_SERVICE_NAME]: serviceName,\n        [ATTR_SERVICE_VERSION]: process.env.npm_package_version || \"1.0.0\",\n        [ATTR_DEPLOYMENT_ENVIRONMENT]: process.env[\"NODE_ENV\"] || \"development\",\n      }),\n    );\n\n    // Configure trace exporter\n    const traceExporter = new OTLPTraceExporter({\n      url: `${otelEndpoint}/v1/traces`,\n      headers: {},\n    });\n\n    // Configure metric exporter\n    const metricExporter = new OTLPMetricExporter({\n      url: `${otelEndpoint}/v1/metrics`,\n      headers: {},\n    });\n\n    // Configure SDK\n    const sdk = new NodeSDK({\n      resource,\n      traceExporter,\n      metricReader: new PeriodicExportingMetricReader({\n        exporter: metricExporter,\n        exportIntervalMillis: 10000, // Export metrics every 10 seconds\n      }),\n      instrumentations: [\n        getNodeAutoInstrumentations({\n          \"@opentelemetry/instrumentation-fs\": {\n            enabled: false, // Disable fs instrumentation to reduce noise\n          },\n        }),\n      ],\n    });\n\n    // Initialize SDK\n    sdk.start();\n    isInitialized = true;\n\n    console.log(` OpenTelemetry initialized for ${serviceName}`);\n    console.log(`   Endpoint: ${otelEndpoint}`);\n    console.log(`   Environment: ${process.env[\"NODE_ENV\"]}`);\n\n    // Graceful shutdown\n    const gracefulShutdown = () => {\n      sdk\n        .shutdown()\n        .then(() => console.log(\"OpenTelemetry terminated\"))\n        .catch((error) => console.error(\"Error terminating OpenTelemetry\", error))\n        .finally(() => process.exit(0));\n    };\n\n    process.on(\"SIGTERM\", gracefulShutdown);\n    process.on(\"SIGINT\", gracefulShutdown);\n  } catch (error) {\n    console.error(\"Failed to initialize OpenTelemetry:\", error);\n  }\n}\n\n/**\n * Custom trace span for manual instrumentation\n */\nexport function createSpan(name: string, attributes?: Record<string, any>) {\n  // This would be implemented with actual OTEL APIs\n  return {\n    end: () => {},\n    setAttribute: (key: string, value: any) => {},\n    setStatus: (status: any) => {},\n  };\n}\n\n/**\n * Record custom metric\n */\nexport function recordMetric(name: string, value: number, attributes?: Record<string, any>) {\n  // This would be implemented with actual OTEL metrics API\n  if (process.env[\"NODE_ENV\"] === \"development\") {\n    console.log(`Metric: ${name} = ${value}`, attributes);\n  }\n}\n\n/**\n * Performance monitoring utilities\n */\nexport const performance = {\n  /**\n   * Measure function execution time\n   */\n  measureTime: async <T>(name: string, fn: () => Promise<T>): Promise<T> => {\n    const start = Date.now();\n    try {\n      const result = await fn();\n      const duration = Date.now() - start;\n      recordMetric(`${name}.duration`, duration);\n      return result;\n    } catch (error) {\n      const duration = Date.now() - start;\n      recordMetric(`${name}.duration`, duration, { error: true });\n      throw error;\n    }\n  },\n\n  /**\n   * Track page load performance\n   */\n  trackPageLoad: (pathname: string) => {\n    if (typeof window !== \"undefined\" && window.performance) {\n      const navigation = window.performance.getEntriesByType(\n        \"navigation\",\n      )[0] as PerformanceNavigationTiming;\n      if (navigation) {\n        recordMetric(\"page.load.time\", navigation.loadEventEnd - navigation.fetchStart, {\n          pathname,\n          domContentLoaded: navigation.domContentLoadedEventEnd - navigation.fetchStart,\n          domInteractive: navigation.domInteractive - navigation.fetchStart,\n        });\n      }\n    }\n  },\n\n  /**\n   * Track API call performance\n   */\n  trackAPICall: (endpoint: string, method: string, duration: number, status: number) => {\n    recordMetric(\"api.call.duration\", duration, {\n      endpoint,\n      method,\n      status,\n      success: status >= 200 && status < 300,\n    });\n  },\n};\n","/**\n * NonceProvider - Client-side nonce utilities\n */\n\nimport Script from \"next/script\";\nimport type React from \"react\";\n\n/**\n * Hook to get nonce on client side (for dynamic script injection)\n */\nexport function useNonce(): string {\n  if (typeof window === \"undefined\") {\n    return \"\";\n  }\n\n  const meta = document.querySelector('meta[name=\"csp-nonce\"]');\n  return meta?.getAttribute(\"content\") || \"\";\n}\n\n/**\n * Script component with nonce support for client components\n */\nexport function NonceScript({\n  children,\n  nonce,\n  ...props\n}: {\n  children?: React.ReactNode;\n  nonce?: string;\n  id?: string;\n  strategy?: \"beforeInteractive\" | \"afterInteractive\" | \"lazyOnload\";\n  src?: string;\n}) {\n  const currentNonce = nonce || useNonce();\n\n  if (props.src) {\n    // External script\n    return <Script nonce={currentNonce} {...props} />;\n  }\n\n  // Inline script\n  return (\n    <script\n      nonce={currentNonce}\n      dangerouslySetInnerHTML={{\n        __html: children as string,\n      }}\n      {...props}\n    />\n  );\n}\n\n/**\n * Simple provider component for client-side usage\n */\nexport function NonceProvider({ children, nonce }: { children: React.ReactNode; nonce?: string }) {\n  return (\n    <>\n      {nonce && <meta name=\"csp-nonce\" content={nonce} />}\n      {children}\n    </>\n  );\n}\n","/**\n * Standardized Error Boundary Component\n * Provides consistent error boundary handling with ISP Framework patterns\n */\n\nimport React, { Component } from \"react\";\nimport type { ErrorInfo, ReactNode } from \"react\";\nimport { ISPError, classifyError, logError } from \"../utils/errorUtils\";\n\nexport interface ErrorBoundaryState {\n  hasError: boolean;\n  error: ISPError | null;\n  errorId: string | null;\n  retryCount: number;\n}\n\nexport interface ErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: React.ComponentType<ErrorFallbackProps>;\n  onError?: (error: ISPError, errorInfo: ErrorInfo) => void;\n  enableRetry?: boolean;\n  maxRetries?: number;\n  context?: string;\n  level?: \"application\" | \"component\" | \"widget\";\n}\n\nexport interface ErrorFallbackProps {\n  error: ISPError;\n  errorId: string;\n  retryCount: number;\n  onRetry: () => void;\n  onClearError: () => void;\n  level: \"application\" | \"component\" | \"widget\";\n  hasReachedMaxRetries: boolean;\n}\n\nexport class StandardErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  private retryTimeoutId: NodeJS.Timeout | null = null;\n\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorId: null,\n      retryCount: 0,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\n    const ispError = classifyError(error, \"Error Boundary\");\n    return {\n      hasError: true,\n      error: ispError,\n      errorId: ispError.id,\n    };\n  }\n\n  override componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    const { onError, context } = this.props;\n    const ispError = classifyError(error, context || \"Error Boundary\");\n\n    // Log the error with component stack\n    logError(ispError, {\n      url: typeof window !== \"undefined\" ? window.location.href : \"Unknown\",\n      userAgent: typeof navigator !== \"undefined\" ? navigator.userAgent : \"Unknown\",\n    });\n\n    // Call custom error handler\n    onError?.(ispError, errorInfo);\n\n    // Update state with the classified error\n    this.setState({\n      error: ispError,\n      errorId: ispError.id,\n    });\n  }\n\n  override componentWillUnmount(): void {\n    if (this.retryTimeoutId) {\n      clearTimeout(this.retryTimeoutId);\n    }\n  }\n\n  handleRetry = (): void => {\n    const { maxRetries = 3 } = this.props;\n    const { retryCount } = this.state;\n\n    if (retryCount >= maxRetries) {\n      return;\n    }\n\n    this.setState((prevState) => ({\n      hasError: false,\n      error: null,\n      errorId: null,\n      retryCount: prevState.retryCount + 1,\n    }));\n\n    // Add a small delay before retry to prevent rapid retries\n    this.retryTimeoutId = setTimeout(() => {\n      // Force re-render\n      this.forceUpdate();\n    }, 100);\n  };\n\n  handleClearError = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorId: null,\n      retryCount: 0,\n    });\n  };\n\n  override render(): ReactNode {\n    const { hasError, error, errorId, retryCount } = this.state;\n    const {\n      children,\n      fallback: CustomFallback,\n      enableRetry = true,\n      maxRetries = 3,\n      level = \"component\",\n    } = this.props;\n\n    if (hasError && error && errorId) {\n      const hasReachedMaxRetries = retryCount >= maxRetries;\n      const fallbackProps: ErrorFallbackProps = {\n        error,\n        errorId,\n        retryCount,\n        onRetry: this.handleRetry,\n        onClearError: this.handleClearError,\n        level,\n        hasReachedMaxRetries,\n      };\n\n      if (CustomFallback) {\n        return <CustomFallback {...fallbackProps} />;\n      }\n\n      // Default fallback based on level\n      switch (level) {\n        case \"application\":\n          return <ApplicationErrorFallback {...fallbackProps} />;\n        case \"widget\":\n          return <WidgetErrorFallback {...fallbackProps} />;\n        default:\n          return <ComponentErrorFallback {...fallbackProps} />;\n      }\n    }\n\n    return children;\n  }\n}\n\n/**\n * Default Error Fallback Components\n */\n\nconst ApplicationErrorFallback: React.FC<ErrorFallbackProps> = ({\n  error,\n  errorId,\n  onRetry,\n  hasReachedMaxRetries,\n}) => (\n  <div className=\"min-h-screen flex items-center justify-center bg-gray-50 p-4\">\n    <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"text-center\">\n        <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n          <svg\n            className=\"h-6 w-6 text-red-600\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\"\n            />\n          </svg>\n        </div>\n\n        <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Application Error</h1>\n\n        <p className=\"text-gray-600 mb-4\">{error.userMessage}</p>\n\n        <div className=\"text-sm text-gray-500 mb-6\">Error ID: {errorId}</div>\n\n        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n          {!hasReachedMaxRetries && (\n            <button\n              onClick={onRetry}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              Try Again\n            </button>\n          )}\n\n          <button\n            onClick={() => window.location.reload()}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n          >\n            Reload Page\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nconst ComponentErrorFallback: React.FC<ErrorFallbackProps> = ({\n  error,\n  errorId,\n  onRetry,\n  onClearError,\n  hasReachedMaxRetries,\n}) => (\n  <div className=\"border border-red-200 rounded-md bg-red-50 p-4\">\n    <div className=\"flex\">\n      <div className=\"flex-shrink-0\">\n        <svg className=\"h-5 w-5 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\"\n          />\n        </svg>\n      </div>\n\n      <div className=\"ml-3\">\n        <h3 className=\"text-sm font-medium text-red-800\">Component Error</h3>\n\n        <p className=\"text-sm text-red-700 mt-1\">{error.userMessage}</p>\n\n        <div className=\"text-xs text-red-600 mt-1\">ID: {errorId}</div>\n\n        <div className=\"mt-3 flex gap-2\">\n          {!hasReachedMaxRetries && (\n            <button\n              onClick={onRetry}\n              className=\"text-xs bg-red-100 text-red-800 px-2 py-1 rounded hover:bg-red-200 focus:outline-none focus:ring-1 focus:ring-red-500\"\n            >\n              Retry\n            </button>\n          )}\n\n          <button\n            onClick={onClearError}\n            className=\"text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-gray-500\"\n          >\n            Dismiss\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nconst WidgetErrorFallback: React.FC<ErrorFallbackProps> = ({\n  error,\n  onRetry,\n  hasReachedMaxRetries,\n}) => (\n  <div className=\"flex items-center justify-center p-2 text-sm text-gray-500 bg-gray-50 border rounded\">\n    <svg\n      className=\"h-4 w-4 mr-2 text-gray-400\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z\"\n      />\n    </svg>\n\n    <span className=\"flex-1\">Unable to load</span>\n\n    {!hasReachedMaxRetries && (\n      <button\n        onClick={onRetry}\n        className=\"ml-2 text-blue-600 hover:text-blue-800 focus:outline-none\"\n      >\n        Retry\n      </button>\n    )}\n  </div>\n);\n\n/**\n * HOC for wrapping components with standardized error boundary\n */\nexport function withErrorBoundary<P extends object>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps?: Omit<ErrorBoundaryProps, \"children\">,\n) {\n  const WrappedComponent = (props: P) => (\n    <StandardErrorBoundary {...errorBoundaryProps}>\n      <Component {...props} />\n    </StandardErrorBoundary>\n  );\n\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n}\n\n/**\n * Hook for programmatic error boundary control\n */\nexport function useErrorBoundary() {\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const captureError = React.useCallback((error: Error) => {\n    setError(error);\n  }, []);\n\n  const clearError = React.useCallback(() => {\n    setError(null);\n  }, []);\n\n  // Throw error to trigger error boundary\n  if (error) {\n    throw error;\n  }\n\n  return { captureError, clearError };\n}\n","/**\n * Error Handling Provider\n * Provides global error handling configuration and services\n */\n\nimport React, { createContext, useContext, useCallback, useEffect, useState } from \"react\";\nimport {\n  ISPError,\n  setErrorLogger,\n  logError,\n  configureGlobalErrorHandling,\n  DEFAULT_ERROR_CONFIG,\n  type ErrorHandlingConfig,\n  type ErrorLogEntry,\n} from \"../utils/errorUtils\";\nimport { useISPTenant } from \"../hooks/useISPTenant\";\nimport { useNotifications } from \"../hooks/useNotifications\";\n\nexport interface ErrorHandlingContextValue {\n  config: ErrorHandlingConfig;\n  updateConfig: (newConfig: Partial<ErrorHandlingConfig>) => void;\n  reportError: (error: ISPError, context?: string) => void;\n  clearGlobalErrors: () => void;\n  globalErrors: ISPError[];\n  errorStats: {\n    totalErrors: number;\n    criticalErrors: number;\n    networkErrors: number;\n    authErrors: number;\n  };\n}\n\nconst ErrorHandlingContext = createContext<ErrorHandlingContextValue | null>(null);\n\nexport interface ErrorHandlingProviderProps {\n  children: React.ReactNode;\n  initialConfig?: Partial<ErrorHandlingConfig>;\n  onError?: (error: ISPError, logEntry: ErrorLogEntry) => void;\n  enableTelemetry?: boolean;\n  telemetryEndpoint?: string;\n}\n\nexport function ErrorHandlingProvider({\n  children,\n  initialConfig = {},\n  onError,\n  enableTelemetry = true,\n  telemetryEndpoint = \"/api/telemetry/errors\",\n}: ErrorHandlingProviderProps) {\n  const [config, setConfig] = useState<ErrorHandlingConfig>({\n    ...DEFAULT_ERROR_CONFIG,\n    ...initialConfig,\n  });\n\n  const [globalErrors, setGlobalErrors] = useState<ISPError[]>([]);\n  const { currentTenant } = useISPTenant();\n  const { showError } = useNotifications();\n\n  // Error statistics\n  const errorStats = React.useMemo(() => {\n    const stats = {\n      totalErrors: globalErrors.length,\n      criticalErrors: 0,\n      networkErrors: 0,\n      authErrors: 0,\n    };\n\n    globalErrors.forEach((error) => {\n      if (error.severity === \"critical\") stats.criticalErrors++;\n      if (error.category === \"network\") stats.networkErrors++;\n      if (error.category === \"authentication\" || error.category === \"authorization\")\n        stats.authErrors++;\n    });\n\n    return stats;\n  }, [globalErrors]);\n\n  // Configure global error handling\n  useEffect(() => {\n    configureGlobalErrorHandling(config);\n  }, [config]);\n\n  // Setup error logger\n  useEffect(() => {\n    const logger = (logEntry: ErrorLogEntry) => {\n      // Add error to global state\n      setGlobalErrors((prev) => {\n        const newErrors = [logEntry.error as any, ...prev.slice(0, 49)]; // Keep last 50 errors\n        return newErrors;\n      });\n\n      // Send to telemetry if enabled\n      if (enableTelemetry && telemetryEndpoint) {\n        sendToTelemetry(logEntry).catch((telemetryError) => {\n          console.warn(\"Failed to send error telemetry:\", telemetryError);\n        });\n      }\n\n      // Call custom error handler\n      onError?.(logEntry.error as ISPError, logEntry);\n\n      // Show critical errors to user immediately\n      if (logEntry.error.severity === \"critical\" && config.enableUserNotifications) {\n        showError(`Critical error: ${logEntry.error.userMessage}`, {\n          persistent: true,\n          actions: logEntry.error.retryable\n            ? [\n                {\n                  label: \"Report Issue\",\n                  action: () => reportIssue(logEntry.error as ISPError),\n                },\n              ]\n            : undefined,\n        });\n      }\n    };\n\n    setErrorLogger(logger);\n\n    return () => {\n      setErrorLogger(() => {});\n    };\n  }, [config, enableTelemetry, telemetryEndpoint, onError, showError]);\n\n  // Telemetry function\n  const sendToTelemetry = async (logEntry: ErrorLogEntry) => {\n    if (!telemetryEndpoint) return;\n\n    try {\n      await fetch(telemetryEndpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(currentTenant && { \"X-Tenant-ID\": currentTenant.id }),\n        },\n        body: JSON.stringify({\n          ...logEntry,\n          tenantId: currentTenant?.id,\n          timestamp: new Date().toISOString(),\n          version: typeof window !== \"undefined\" ? (window as any).__APP_VERSION__ : \"unknown\",\n        }),\n      });\n    } catch (telemetryError) {\n      // Silently fail telemetry - don't let telemetry errors affect the app\n      console.debug(\"Telemetry error:\", telemetryError);\n    }\n  };\n\n  // Report issue function\n  const reportIssue = async (error: ISPError) => {\n    try {\n      await fetch(\"/api/support/report-issue\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(currentTenant && { \"X-Tenant-ID\": currentTenant.id }),\n        },\n        body: JSON.stringify({\n          errorId: error.id,\n          correlationId: error.correlationId,\n          userMessage: \"Automatically reported critical error\",\n          context: error.context,\n          technicalDetails: error.technicalDetails,\n        }),\n      });\n\n      showError(\"Issue reported successfully. Our team will investigate.\", {\n        type: \"success\",\n      });\n    } catch (reportError) {\n      showError(\"Failed to report issue. Please contact support directly.\");\n    }\n  };\n\n  const updateConfig = useCallback((newConfig: Partial<ErrorHandlingConfig>) => {\n    setConfig((prev) => ({ ...prev, ...newConfig }));\n  }, []);\n\n  const reportError = useCallback(\n    (error: ISPError, context?: string) => {\n      logError(error, {\n        tenantId: currentTenant?.id,\n        userId:\n          typeof window !== \"undefined\"\n            ? window.sessionStorage.getItem(\"userId\") || undefined\n            : undefined,\n        sessionId:\n          typeof window !== \"undefined\"\n            ? window.sessionStorage.getItem(\"sessionId\") || undefined\n            : undefined,\n      });\n\n      if (context) {\n        console.group(` Error in ${context}`);\n        console.error(\"Error details:\", error);\n        console.error(\"User message:\", error.userMessage);\n        console.error(\"Technical details:\", error.technicalDetails);\n        console.groupEnd();\n      }\n    },\n    [currentTenant],\n  );\n\n  const clearGlobalErrors = useCallback(() => {\n    setGlobalErrors([]);\n  }, []);\n\n  const contextValue: ErrorHandlingContextValue = {\n    config,\n    updateConfig,\n    reportError,\n    clearGlobalErrors,\n    globalErrors,\n    errorStats,\n  };\n\n  return (\n    <ErrorHandlingContext.Provider value={contextValue}>{children}</ErrorHandlingContext.Provider>\n  );\n}\n\n/**\n * Hook to access error handling context\n */\nexport function useErrorHandling(): ErrorHandlingContextValue {\n  const context = useContext(ErrorHandlingContext);\n  if (!context) {\n    throw new Error(\"useErrorHandling must be used within an ErrorHandlingProvider\");\n  }\n  return context;\n}\n\n/**\n * Hook for reporting errors programmatically\n */\nexport function useErrorReporting() {\n  const { reportError } = useErrorHandling();\n\n  return {\n    reportError,\n    reportApiError: (error: unknown, endpoint: string) => {\n      const ispError = ISPError.classifyError(error, `API: ${endpoint}`);\n      reportError(ispError, endpoint);\n    },\n    reportComponentError: (error: unknown, componentName: string) => {\n      const ispError = ISPError.classifyError(error, `Component: ${componentName}`);\n      reportError(ispError, componentName);\n    },\n    reportBusinessError: (message: string, context?: string, details?: Record<string, any>) => {\n      const ispError = new ISPError({\n        message,\n        category: \"business\",\n        severity: \"medium\",\n        context,\n        retryable: false,\n        technicalDetails: details,\n      });\n      reportError(ispError, context);\n    },\n  };\n}\n\n/**\n * Development error overlay component\n */\nexport function ErrorDevOverlay() {\n  const { globalErrors, errorStats, clearGlobalErrors } = useErrorHandling();\n  const [isVisible, setIsVisible] = useState(false);\n\n  // Only show in development\n  if (process.env[\"NODE_ENV\"] !== \"development\") {\n    return null;\n  }\n\n  if (!isVisible && globalErrors.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed bottom-4 right-4 z-50\">\n      {!isVisible && globalErrors.length > 0 && (\n        <button\n          onClick={() => setIsVisible(true)}\n          className=\"bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-red-700 transition-colors\"\n        >\n           {errorStats.totalErrors} Error\n          {errorStats.totalErrors !== 1 ? \"s\" : \"\"}\n          {errorStats.criticalErrors > 0 && (\n            <span className=\"ml-1 bg-red-800 px-1 rounded text-xs\">\n              {errorStats.criticalErrors} Critical\n            </span>\n          )}\n        </button>\n      )}\n\n      {isVisible && (\n        <div className=\"bg-white border border-red-200 rounded-lg shadow-xl max-w-md w-96 max-h-96 overflow-hidden\">\n          <div className=\"flex items-center justify-between p-3 bg-red-50 border-b\">\n            <h3 className=\"font-semibold text-red-800\">Recent Errors</h3>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={clearGlobalErrors}\n                className=\"text-xs text-red-600 hover:text-red-800\"\n              >\n                Clear\n              </button>\n              <button\n                onClick={() => setIsVisible(false)}\n                className=\"text-red-600 hover:text-red-800\"\n              >\n                \n              </button>\n            </div>\n          </div>\n\n          <div className=\"overflow-y-auto max-h-80 p-2\">\n            {globalErrors.map((error, index) => (\n              <div\n                key={`${error.id}-${index}`}\n                className=\"mb-2 p-2 bg-gray-50 rounded border text-xs\"\n              >\n                <div className=\"flex items-center justify-between mb-1\">\n                  <span\n                    className={`px-1 rounded text-xs font-medium ${\n                      error.severity === \"critical\"\n                        ? \"bg-red-100 text-red-800\"\n                        : error.severity === \"high\"\n                          ? \"bg-orange-100 text-orange-800\"\n                          : error.severity === \"medium\"\n                            ? \"bg-yellow-100 text-yellow-800\"\n                            : \"bg-gray-100 text-gray-800\"\n                    }`}\n                  >\n                    {error.severity}\n                  </span>\n                  <span className=\"text-gray-500\">\n                    {new Date(error.timestamp).toLocaleTimeString()}\n                  </span>\n                </div>\n                <div className=\"font-medium text-gray-900 mb-1\">{error.message}</div>\n                <div className=\"text-gray-600\">{error.context}</div>\n                {error.userMessage && (\n                  <div className=\"text-blue-600 mt-1\">User: {error.userMessage}</div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Unified Management Operations Types\n * Production-ready type definitions for cross-portal management operations\n */\n\n// ===== CORE ENTITY TYPES =====\n\nexport interface BaseEntity {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  created_by?: string;\n  updated_by?: string;\n  status: EntityStatus;\n  metadata?: Record<string, any>;\n  tenant_id?: string;\n}\n\nexport enum EntityStatus {\n  ACTIVE = \"active\",\n  INACTIVE = \"inactive\",\n  PENDING = \"pending\",\n  SUSPENDED = \"suspended\",\n  DELETED = \"deleted\",\n}\n\nexport enum EntityType {\n  TENANT = \"tenant\",\n  CUSTOMER = \"customer\",\n  USER = \"user\",\n  SERVICE = \"service\",\n  RESELLER = \"reseller\",\n  PARTNER = \"partner\",\n}\n\n// ===== ENTITY MANAGEMENT =====\n\nexport interface EntityFilters {\n  status?: EntityStatus[];\n  created_after?: string;\n  created_before?: string;\n  search?: string;\n  tenant_id?: string;\n  entity_type?: EntityType;\n  limit?: number;\n  offset?: number;\n  sort_by?: string;\n  sort_order?: \"asc\" | \"desc\";\n}\n\nexport interface EntityListResponse<T extends BaseEntity> {\n  entities: T[];\n  total_count: number;\n  has_more: boolean;\n  next_cursor?: string;\n  filters_applied: EntityFilters;\n}\n\nexport interface CreateEntityRequest {\n  entity_type: EntityType;\n  data: Record<string, any>;\n  tenant_id?: string;\n  initial_status?: EntityStatus;\n  metadata?: Record<string, any>;\n}\n\nexport interface UpdateEntityRequest {\n  data: Partial<Record<string, any>>;\n  metadata?: Record<string, any>;\n  status?: EntityStatus;\n}\n\nexport interface EntityOperationResult<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  error_code?: string;\n  warnings?: string[];\n}\n\n// ===== BILLING OPERATIONS =====\n\nexport interface BillingEntity extends BaseEntity {\n  billing_email: string;\n  payment_method_id?: string;\n  credit_balance: number;\n  billing_cycle: BillingCycle;\n  auto_pay_enabled: boolean;\n  billing_address?: BillingAddress;\n}\n\nexport enum BillingCycle {\n  MONTHLY = \"monthly\",\n  QUARTERLY = \"quarterly\",\n  ANNUALLY = \"annually\",\n}\n\nexport interface BillingAddress {\n  street: string;\n  city: string;\n  state: string;\n  postal_code: string;\n  country: string;\n}\n\nexport interface DateRange {\n  start_date: string;\n  end_date: string;\n}\n\nexport interface BillingData {\n  entity_id: string;\n  period: DateRange;\n  total_charges: number;\n  total_payments: number;\n  outstanding_balance: number;\n  invoices: Invoice[];\n  payments: Payment[];\n  usage_summary: UsageSummary[];\n}\n\nexport interface Invoice {\n  id: string;\n  entity_id: string;\n  invoice_number: string;\n  issue_date: string;\n  due_date: string;\n  status: InvoiceStatus;\n  subtotal: number;\n  tax_amount: number;\n  total_amount: number;\n  currency: string;\n  line_items: InvoiceLineItem[];\n  payment_terms: string;\n}\n\nexport enum InvoiceStatus {\n  DRAFT = \"draft\",\n  SENT = \"sent\",\n  PAID = \"paid\",\n  OVERDUE = \"overdue\",\n  CANCELLED = \"cancelled\",\n}\n\nexport interface InvoiceLineItem {\n  id: string;\n  description: string;\n  quantity: number;\n  unit_price: number;\n  total: number;\n  service_id?: string;\n  usage_period?: DateRange;\n}\n\nexport interface Payment {\n  id: string;\n  entity_id: string;\n  invoice_id?: string;\n  amount: number;\n  currency: string;\n  payment_date: string;\n  payment_method: PaymentMethod;\n  status: PaymentStatus;\n  transaction_id?: string;\n  gateway_response?: Record<string, any>;\n}\n\nexport enum PaymentStatus {\n  PENDING = \"pending\",\n  COMPLETED = \"completed\",\n  FAILED = \"failed\",\n  REFUNDED = \"refunded\",\n  CANCELLED = \"cancelled\",\n}\n\nexport enum PaymentMethod {\n  CREDIT_CARD = \"credit_card\",\n  BANK_TRANSFER = \"bank_transfer\",\n  ACH = \"ach\",\n  WIRE = \"wire\",\n  CHECK = \"check\",\n  CASH = \"cash\",\n}\n\nexport interface PaymentResult {\n  success: boolean;\n  payment_id?: string;\n  transaction_id?: string;\n  amount: number;\n  status: PaymentStatus;\n  error_message?: string;\n  gateway_response?: Record<string, any>;\n}\n\nexport interface UsageSummary {\n  service_id: string;\n  service_name: string;\n  usage_type: string;\n  quantity: number;\n  unit: string;\n  rate: number;\n  total_cost: number;\n  period: DateRange;\n}\n\n// ===== ANALYTICS OPERATIONS =====\n\nexport interface DashboardStats {\n  period: DateRange;\n  entity_count: EntityCount;\n  revenue_metrics: RevenueMetrics;\n  usage_metrics: UsageMetrics;\n  operational_metrics: OperationalMetrics;\n  growth_metrics: GrowthMetrics;\n}\n\nexport interface EntityCount {\n  total_entities: number;\n  active_entities: number;\n  new_entities_period: number;\n  churned_entities_period: number;\n  by_type: Record<EntityType, number>;\n  by_status: Record<EntityStatus, number>;\n}\n\nexport interface RevenueMetrics {\n  total_revenue: number;\n  recurring_revenue: number;\n  one_time_revenue: number;\n  outstanding_receivables: number;\n  collection_rate: number;\n  average_revenue_per_entity: number;\n  revenue_growth_rate: number;\n}\n\nexport interface UsageMetrics {\n  total_usage_hours: number;\n  peak_concurrent_usage: number;\n  average_usage_per_entity: number;\n  usage_trends: UsageTrend[];\n  top_services_by_usage: ServiceUsage[];\n}\n\nexport interface UsageTrend {\n  date: string;\n  usage_value: number;\n  entity_count: number;\n}\n\nexport interface ServiceUsage {\n  service_id: string;\n  service_name: string;\n  total_usage: number;\n  entity_count: number;\n  revenue_generated: number;\n}\n\nexport interface OperationalMetrics {\n  support_tickets_count: number;\n  average_resolution_time_hours: number;\n  system_uptime_percentage: number;\n  error_rate_percentage: number;\n  api_response_time_ms: number;\n  customer_satisfaction_score?: number;\n}\n\nexport interface GrowthMetrics {\n  customer_acquisition_rate: number;\n  customer_churn_rate: number;\n  net_revenue_retention: number;\n  monthly_recurring_revenue_growth: number;\n  lifetime_value: number;\n}\n\n// ===== REPORTING =====\n\nexport enum ReportType {\n  FINANCIAL = \"financial\",\n  USAGE = \"usage\",\n  OPERATIONAL = \"operational\",\n  COMPLIANCE = \"compliance\",\n  EXECUTIVE = \"executive\",\n  CUSTOM = \"custom\",\n}\n\nexport enum ReportFormat {\n  JSON = \"json\",\n  CSV = \"csv\",\n  PDF = \"pdf\",\n  EXCEL = \"excel\",\n}\n\nexport interface ReportParams {\n  period: DateRange;\n  entity_filters?: EntityFilters;\n  include_deleted?: boolean;\n  group_by?: string[];\n  metrics?: string[];\n  format?: ReportFormat;\n  custom_fields?: string[];\n}\n\nexport interface Report {\n  id: string;\n  type: ReportType;\n  title: string;\n  description: string;\n  generated_at: string;\n  generated_by: string;\n  parameters: ReportParams;\n  status: ReportStatus;\n  file_url?: string;\n  file_size?: number;\n  expires_at?: string;\n  data?: ReportData;\n}\n\nexport enum ReportStatus {\n  QUEUED = \"queued\",\n  PROCESSING = \"processing\",\n  COMPLETED = \"completed\",\n  FAILED = \"failed\",\n  EXPIRED = \"expired\",\n}\n\nexport interface ReportData {\n  summary: Record<string, any>;\n  sections: ReportSection[];\n  charts?: ChartData[];\n  raw_data?: any[];\n}\n\nexport interface ReportSection {\n  title: string;\n  type: \"table\" | \"chart\" | \"text\" | \"metrics\";\n  data: any;\n  metadata?: Record<string, any>;\n}\n\nexport interface ChartData {\n  id: string;\n  type: \"line\" | \"bar\" | \"pie\" | \"area\" | \"scatter\";\n  title: string;\n  data: any[];\n  config: Record<string, any>;\n}\n\n// ===== SERVICE MANAGEMENT =====\n\nexport interface Service extends BaseEntity {\n  name: string;\n  description: string;\n  service_type: ServiceType;\n  pricing_model: PricingModel;\n  base_price: number;\n  currency: string;\n  billing_cycle: BillingCycle;\n  features: ServiceFeature[];\n  limits: ServiceLimits;\n  is_public: boolean;\n}\n\nexport enum ServiceType {\n  INTERNET = \"internet\",\n  VOICE = \"voice\",\n  TV = \"tv\",\n  CLOUD_STORAGE = \"cloud_storage\",\n  EMAIL = \"email\",\n  SECURITY = \"security\",\n  SUPPORT = \"support\",\n  CUSTOM = \"custom\",\n}\n\nexport enum PricingModel {\n  FIXED = \"fixed\",\n  TIERED = \"tiered\",\n  USAGE_BASED = \"usage_based\",\n  HYBRID = \"hybrid\",\n}\n\nexport interface ServiceFeature {\n  id: string;\n  name: string;\n  description: string;\n  enabled: boolean;\n  configuration?: Record<string, any>;\n}\n\nexport interface ServiceLimits {\n  max_users?: number;\n  max_bandwidth_mbps?: number;\n  max_storage_gb?: number;\n  max_email_accounts?: number;\n  custom_limits?: Record<string, number>;\n}\n\n// ===== ERROR HANDLING =====\n\nexport interface OperationError {\n  code: string;\n  message: string;\n  details?: Record<string, any>;\n  context?: string;\n  timestamp: string;\n  recoverable: boolean;\n  retry_after?: number;\n}\n\nexport interface ValidationError {\n  field: string;\n  code: string;\n  message: string;\n  current_value?: any;\n}\n\n// ===== API CONFIGURATION =====\n\nexport interface ApiConfig {\n  base_url: string;\n  timeout_ms: number;\n  retry_attempts: number;\n  retry_delay_ms: number;\n  rate_limit_requests: number;\n  rate_limit_window_ms: number;\n  auth_header_name: string;\n  tenant_header_name: string;\n  request_id_header_name: string;\n}\n\nexport interface RequestContext {\n  request_id: string;\n  user_id?: string;\n  tenant_id?: string;\n  portal_type: string;\n  timestamp: string;\n  correlation_id?: string;\n}\n\n// ===== CACHING =====\n\nexport interface CacheConfig {\n  enabled: boolean;\n  default_ttl_seconds: number;\n  max_entries: number;\n  cache_key_prefix: string;\n  invalidation_patterns: string[];\n}\n\nexport interface CacheEntry<T = any> {\n  key: string;\n  data: T;\n  timestamp: number;\n  ttl_seconds: number;\n  tags?: string[];\n}\n\n// ===== EVENTS =====\n\nexport interface ManagementEvent {\n  id: string;\n  type: string;\n  entity_type: EntityType;\n  entity_id: string;\n  action: string;\n  actor_id: string;\n  timestamp: string;\n  data: Record<string, any>;\n  metadata: Record<string, any>;\n}\n","/**\n * Unified Management API Client\n * Production-ready API client for cross-portal management operations\n * Features: Retry logic, caching, error handling, audit logging, rate limiting\n */\n\nimport { BaseApiClient, RequestConfig } from \"../api/clients/BaseApiClient\";\nimport {\n  BaseEntity,\n  EntityFilters,\n  EntityListResponse,\n  CreateEntityRequest,\n  UpdateEntityRequest,\n  EntityOperationResult,\n  BillingData,\n  PaymentResult,\n  Invoice,\n  DashboardStats,\n  UsageMetrics,\n  Report,\n  ReportType,\n  ReportParams,\n  ApiConfig,\n  RequestContext,\n  CacheConfig,\n  CacheEntry,\n  ManagementEvent,\n  OperationError,\n} from \"./types\";\n\nexport interface ManagementApiClientConfig {\n  baseURL: string;\n  apiConfig?: Partial<ApiConfig>;\n  cacheConfig?: Partial<CacheConfig>;\n  enableAuditLogging?: boolean;\n  enablePerformanceMonitoring?: boolean;\n}\n\nexport class ManagementApiClient extends BaseApiClient {\n  private cache: Map<string, CacheEntry>;\n  private rateLimitTokens: number;\n  private rateLimitLastRefill: number;\n  private requestQueue: Array<() => Promise<unknown>>;\n  private isProcessingQueue: boolean;\n  private apiConfig: ApiConfig;\n  private cacheConfig: CacheConfig;\n  private enableAuditLogging: boolean;\n  private enablePerformanceMonitoring: boolean;\n\n  constructor(config: ManagementApiClientConfig) {\n    super(config.baseURL, {}, \"ManagementAPI\");\n\n    this.apiConfig = {\n      base_url: config.baseURL,\n      timeout_ms: 30000,\n      retry_attempts: 3,\n      retry_delay_ms: 1000,\n      rate_limit_requests: 100,\n      rate_limit_window_ms: 60000,\n      auth_header_name: \"Authorization\",\n      tenant_header_name: \"X-Tenant-ID\",\n      request_id_header_name: \"X-Request-ID\",\n      ...config.apiConfig,\n    };\n\n    this.cacheConfig = {\n      enabled: true,\n      default_ttl_seconds: 300,\n      max_entries: 1000,\n      cache_key_prefix: \"mgmt_api\",\n      invalidation_patterns: [\"create_*\", \"update_*\", \"delete_*\"],\n      ...config.cacheConfig,\n    };\n\n    this.enableAuditLogging = config.enableAuditLogging ?? true;\n    this.enablePerformanceMonitoring = config.enablePerformanceMonitoring ?? true;\n\n    this.cache = new Map();\n    this.rateLimitTokens = this.apiConfig.rate_limit_requests;\n    this.rateLimitLastRefill = Date.now();\n    this.requestQueue = [];\n    this.isProcessingQueue = false;\n\n    this.setupInterceptors();\n  }\n\n  private setupInterceptors(): void {\n    // Performance monitoring\n    if (this.enablePerformanceMonitoring) {\n      this.setupPerformanceMonitoring();\n    }\n\n    // Audit logging\n    if (this.enableAuditLogging) {\n      this.setupAuditLogging();\n    }\n  }\n\n  private setupPerformanceMonitoring(): void {\n    // Request timing and metrics collection\n    const originalRequest = this.request.bind(this);\n    this.request = async function <T>(\n      method: string,\n      endpoint: string,\n      data?: unknown,\n      config?: RequestConfig,\n    ): Promise<T> {\n      const startTime = performance.now();\n      try {\n        const result = await originalRequest(method, endpoint, data, config);\n        const duration = performance.now() - startTime;\n        this.logPerformanceMetric(method, endpoint, duration, \"success\");\n        return result;\n      } catch (error) {\n        const duration = performance.now() - startTime;\n        this.logPerformanceMetric(method, endpoint, duration, \"error\");\n        throw error;\n      }\n    }.bind(this);\n  }\n\n  private logPerformanceMetric(\n    method: string,\n    endpoint: string,\n    duration: number,\n    status: string,\n  ): void {\n    const metric = {\n      timestamp: new Date().toISOString(),\n      method,\n      endpoint,\n      duration_ms: Math.round(duration),\n      status,\n    };\n\n    // Send to performance monitoring service\n    if (typeof window !== \"undefined\" && \"performanceMonitor\" in window) {\n      (\n        window as unknown as {\n          performanceMonitor: { track: (event: string, data: unknown) => void };\n        }\n      ).performanceMonitor.track(\"api_request\", metric);\n    }\n  }\n\n  private setupAuditLogging(): void {\n    // Override request method to add audit context\n    const originalRequest = this.request.bind(this);\n    this.request = async function <T>(\n      method: string,\n      endpoint: string,\n      data?: unknown,\n      config?: RequestConfig,\n    ): Promise<T> {\n      const requestContext = this.createRequestContext(method, endpoint);\n      const auditConfig = {\n        ...config,\n        headers: {\n          ...config?.headers,\n          [this.apiConfig.request_id_header_name]: requestContext.request_id,\n          \"X-Audit-Context\": JSON.stringify(requestContext),\n        },\n      };\n\n      try {\n        const result = await originalRequest(method, endpoint, data, auditConfig);\n        this.logAuditEvent(\"api_request\", \"success\", requestContext, {\n          method,\n          endpoint,\n          data,\n        });\n        return result;\n      } catch (error) {\n        this.logAuditEvent(\"api_request\", \"error\", requestContext, {\n          method,\n          endpoint,\n          data,\n          error: error.message,\n        });\n        throw error;\n      }\n    }.bind(this);\n  }\n\n  private createRequestContext(method: string, endpoint: string): RequestContext {\n    return {\n      request_id: `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      user_id: this.getCurrentUserId(),\n      tenant_id: this.getCurrentTenantId(),\n      portal_type: this.getPortalType(),\n      timestamp: new Date().toISOString(),\n      correlation_id: this.generateCorrelationId(),\n    };\n  }\n\n  private getCurrentUserId(): string | undefined {\n    // Implementation depends on your auth system\n    return typeof window !== \"undefined\" ? localStorage.getItem(\"user_id\") || undefined : undefined;\n  }\n\n  private getCurrentTenantId(): string | undefined {\n    return typeof window !== \"undefined\"\n      ? localStorage.getItem(\"tenant_id\") || undefined\n      : undefined;\n  }\n\n  private getPortalType(): string {\n    if (typeof window !== \"undefined\") {\n      const hostname = window.location.hostname;\n      if (hostname.includes(\"admin\")) return \"admin\";\n      if (hostname.includes(\"reseller\")) return \"reseller\";\n      if (hostname.includes(\"management\")) return \"management\";\n      return \"unknown\";\n    }\n    return \"server\";\n  }\n\n  private generateCorrelationId(): string {\n    return `corr_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private logAuditEvent(type: string, status: string, context: RequestContext, data: any): void {\n    if (this.enableAuditLogging) {\n      // Integration with audit system would go here\n      console.debug(\"[Audit]\", { type, status, context, data });\n    }\n  }\n\n  // ===== RATE LIMITING =====\n\n  private async checkRateLimit(): Promise<void> {\n    const now = Date.now();\n    const timePassed = now - this.rateLimitLastRefill;\n\n    // Refill tokens based on time passed\n    if (timePassed >= this.apiConfig.rate_limit_window_ms) {\n      this.rateLimitTokens = this.apiConfig.rate_limit_requests;\n      this.rateLimitLastRefill = now;\n    }\n\n    if (this.rateLimitTokens <= 0) {\n      // Add to queue if rate limited\n      return new Promise((resolve) => {\n        this.requestQueue.push(resolve);\n        this.processQueue();\n      });\n    }\n\n    this.rateLimitTokens--;\n  }\n\n  private processQueue(): void {\n    if (this.isProcessingQueue || this.requestQueue.length === 0) return;\n\n    this.isProcessingQueue = true;\n\n    const processNext = () => {\n      if (this.requestQueue.length === 0) {\n        this.isProcessingQueue = false;\n        return;\n      }\n\n      if (this.rateLimitTokens > 0) {\n        const nextRequest = this.requestQueue.shift();\n        if (nextRequest) {\n          this.rateLimitTokens--;\n          nextRequest();\n        }\n      }\n\n      setTimeout(processNext, 100); // Check every 100ms\n    };\n\n    setTimeout(processNext, 0);\n  }\n\n  // ===== CACHING =====\n\n  private getCacheKey(method: string, endpoint: string, params?: any): string {\n    const key = `${this.cacheConfig.cache_key_prefix}:${method}:${endpoint}`;\n    if (params) {\n      const paramString = JSON.stringify(params);\n      return `${key}:${btoa(paramString)}`;\n    }\n    return key;\n  }\n\n  private getFromCache<T>(key: string): T | null {\n    if (!this.cacheConfig.enabled) return null;\n\n    const entry = this.cache.get(key);\n    if (!entry) return null;\n\n    const now = Date.now();\n    const expirationTime = entry.timestamp + entry.ttl_seconds * 1000;\n\n    if (now > expirationTime) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return entry.data;\n  }\n\n  private setCache<T>(key: string, data: T, ttl?: number): void {\n    if (!this.cacheConfig.enabled) return;\n\n    // Remove oldest entries if cache is full\n    if (this.cache.size >= this.cacheConfig.max_entries) {\n      const oldestKey = this.cache.keys().next().value;\n      if (oldestKey) {\n        this.cache.delete(oldestKey);\n      }\n    }\n\n    const entry: CacheEntry<T> = {\n      key,\n      data,\n      timestamp: Date.now(),\n      ttl_seconds: ttl || this.cacheConfig.default_ttl_seconds,\n    };\n\n    this.cache.set(key, entry);\n  }\n\n  private invalidateCache(pattern?: string): void {\n    if (!pattern) {\n      this.cache.clear();\n      return;\n    }\n\n    for (const key of this.cache.keys()) {\n      if (key.includes(pattern)) {\n        this.cache.delete(key);\n      }\n    }\n  }\n\n  // ===== ENTITY MANAGEMENT OPERATIONS =====\n\n  async listEntities<T extends BaseEntity>(\n    entityType: string,\n    filters: EntityFilters = {},\n  ): Promise<EntityListResponse<T>> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/entities/${entityType}`, filters);\n    const cached = this.getFromCache<EntityListResponse<T>>(cacheKey);\n    if (cached) return cached;\n\n    const config: RequestConfig = { params: filters };\n    const result = await this.get<EntityListResponse<T>>(`/api/v1/entities/${entityType}`, config);\n\n    this.setCache(cacheKey, result);\n    return result;\n  }\n\n  async getEntity<T extends BaseEntity>(entityType: string, entityId: string): Promise<T> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/entities/${entityType}/${entityId}`);\n    const cached = this.getFromCache<T>(cacheKey);\n    if (cached) return cached;\n\n    const result = await this.get<T>(`/api/v1/entities/${entityType}/${entityId}`);\n\n    this.setCache(cacheKey, result);\n    return result;\n  }\n\n  async createEntity<T extends BaseEntity>(\n    request: CreateEntityRequest,\n  ): Promise<EntityOperationResult<T>> {\n    await this.checkRateLimit();\n\n    try {\n      const result = await this.post<EntityOperationResult<T>>(\"/api/v1/entities\", request);\n\n      // Invalidate related caches\n      this.invalidateCache(`entities/${request.entity_type}`);\n\n      return result;\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message,\n        error_code: error.code,\n      };\n    }\n  }\n\n  async updateEntity<T extends BaseEntity>(\n    entityType: string,\n    entityId: string,\n    request: UpdateEntityRequest,\n  ): Promise<EntityOperationResult<T>> {\n    await this.checkRateLimit();\n\n    try {\n      const result = await this.put<EntityOperationResult<T>>(\n        `/api/v1/entities/${entityType}/${entityId}`,\n        request,\n      );\n\n      // Invalidate related caches\n      this.invalidateCache(`entities/${entityType}`);\n      this.cache.delete(this.getCacheKey(\"GET\", `/entities/${entityType}/${entityId}`));\n\n      return result;\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message,\n        error_code: error.code,\n      };\n    }\n  }\n\n  async deleteEntity(entityType: string, entityId: string): Promise<EntityOperationResult<void>> {\n    await this.checkRateLimit();\n\n    try {\n      await this.delete(`/api/v1/entities/${entityType}/${entityId}`);\n\n      // Invalidate related caches\n      this.invalidateCache(`entities/${entityType}`);\n      this.cache.delete(this.getCacheKey(\"GET\", `/entities/${entityType}/${entityId}`));\n\n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message,\n        error_code: error.code,\n      };\n    }\n  }\n\n  // ===== BILLING OPERATIONS =====\n\n  async getBillingData(\n    entityId: string,\n    period: { start_date: string; end_date: string },\n  ): Promise<BillingData> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/billing/${entityId}`, period);\n    const cached = this.getFromCache<BillingData>(cacheKey);\n    if (cached) return cached;\n\n    const config: RequestConfig = { params: period };\n    const result = await this.get<BillingData>(`/api/v1/billing/${entityId}`, config);\n\n    this.setCache(cacheKey, result, 600); // Cache for 10 minutes\n    return result;\n  }\n\n  async processPayment(entityId: string, amount: number, paymentData: any): Promise<PaymentResult> {\n    await this.checkRateLimit();\n\n    const result = await this.post<PaymentResult>(`/api/v1/billing/${entityId}/payments`, {\n      amount,\n      ...paymentData,\n    });\n\n    // Invalidate billing caches\n    this.invalidateCache(`billing/${entityId}`);\n\n    return result;\n  }\n\n  async generateInvoice(entityId: string, services: any[], options: any = {}): Promise<Invoice> {\n    await this.checkRateLimit();\n\n    const result = await this.post<Invoice>(`/api/v1/billing/${entityId}/invoices`, {\n      services,\n      ...options,\n    });\n\n    // Invalidate billing caches\n    this.invalidateCache(`billing/${entityId}`);\n\n    return result;\n  }\n\n  async getInvoices(entityId: string, filters: any = {}): Promise<Invoice[]> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/billing/${entityId}/invoices`, filters);\n    const cached = this.getFromCache<Invoice[]>(cacheKey);\n    if (cached) return cached;\n\n    const config: RequestConfig = { params: filters };\n    const result = await this.get<Invoice[]>(`/api/v1/billing/${entityId}/invoices`, config);\n\n    this.setCache(cacheKey, result, 300); // Cache for 5 minutes\n    return result;\n  }\n\n  // ===== ANALYTICS OPERATIONS =====\n\n  async getDashboardStats(timeframe: string, entityType?: string): Promise<DashboardStats> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", \"/analytics/dashboard\", {\n      timeframe,\n      entityType,\n    });\n    const cached = this.getFromCache<DashboardStats>(cacheKey);\n    if (cached) return cached;\n\n    const config: RequestConfig = {\n      params: { timeframe, entity_type: entityType },\n    };\n    const result = await this.get<DashboardStats>(\"/api/v1/analytics/dashboard\", config);\n\n    this.setCache(cacheKey, result, 600); // Cache for 10 minutes\n    return result;\n  }\n\n  async getUsageMetrics(entityId: string, period: any): Promise<UsageMetrics> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/analytics/usage/${entityId}`, period);\n    const cached = this.getFromCache<UsageMetrics>(cacheKey);\n    if (cached) return cached;\n\n    const config: RequestConfig = { params: period };\n    const result = await this.get<UsageMetrics>(`/api/v1/analytics/usage/${entityId}`, config);\n\n    this.setCache(cacheKey, result, 300); // Cache for 5 minutes\n    return result;\n  }\n\n  async generateReport(type: ReportType, params: ReportParams): Promise<Report> {\n    await this.checkRateLimit();\n\n    const result = await this.post<Report>(\"/api/v1/reports/generate\", {\n      type,\n      parameters: params,\n    });\n\n    // Don't cache report generation requests\n    return result;\n  }\n\n  async getReport(reportId: string): Promise<Report> {\n    await this.checkRateLimit();\n\n    const cacheKey = this.getCacheKey(\"GET\", `/reports/${reportId}`);\n    const cached = this.getFromCache<Report>(cacheKey);\n    if (cached) return cached;\n\n    const result = await this.get<Report>(`/api/v1/reports/${reportId}`);\n\n    this.setCache(cacheKey, result, 3600); // Cache for 1 hour\n    return result;\n  }\n\n  async downloadReport(reportId: string): Promise<Blob> {\n    await this.checkRateLimit();\n\n    const result = await this.get<Blob>(`/api/v1/reports/${reportId}/download`, {\n      headers: { Accept: \"application/octet-stream\" },\n    });\n\n    return result;\n  }\n\n  // ===== BATCH OPERATIONS =====\n\n  async batchOperation<T>(\n    operations: Array<{\n      method: string;\n      endpoint: string;\n      data?: any;\n    }>,\n  ): Promise<EntityOperationResult<T>[]> {\n    await this.checkRateLimit();\n\n    const result = await this.post<EntityOperationResult<T>[]>(\"/api/v1/batch\", {\n      operations,\n    });\n\n    // Invalidate all caches on batch operations\n    this.cache.clear();\n\n    return result;\n  }\n\n  // ===== HEALTH AND MONITORING =====\n\n  async getApiHealth(): Promise<{ status: string; checks: any[] }> {\n    // Health checks don't count against rate limits\n    return this.get(\"/api/v1/health\");\n  }\n\n  async getApiMetrics(): Promise<any> {\n    return this.get(\"/api/v1/metrics\");\n  }\n\n  // ===== CACHE MANAGEMENT =====\n\n  clearCache(): void {\n    this.cache.clear();\n  }\n\n  getCacheStats(): { size: number; max_size: number; hit_ratio: number } {\n    return {\n      size: this.cache.size,\n      max_size: this.cacheConfig.max_entries,\n      hit_ratio: 0, // Would need to implement hit counting\n    };\n  }\n}\n","/**\n * Management Operations React Hook\n * Production-ready hook for unified management operations across portals\n * Features: State management, error handling, optimistic updates, caching\n */\n\nimport { useState, useEffect, useCallback, useRef, useMemo } from \"react\";\nimport { ManagementApiClient, ManagementApiClientConfig } from \"../ManagementApiClient\";\nimport {\n  BaseEntity,\n  EntityFilters,\n  EntityListResponse,\n  CreateEntityRequest,\n  UpdateEntityRequest,\n  EntityOperationResult,\n  BillingData,\n  PaymentResult,\n  Invoice,\n  DashboardStats,\n  UsageMetrics,\n  Report,\n  ReportType,\n  ReportParams,\n  EntityType,\n  EntityStatus,\n} from \"../types\";\n\n// ===== HOOK CONFIGURATION =====\n\nexport interface UseManagementOperationsConfig {\n  apiConfig: ManagementApiClientConfig;\n  enableOptimisticUpdates?: boolean;\n  enableRealTimeSync?: boolean;\n  autoRefreshInterval?: number;\n  retryFailedOperations?: boolean;\n}\n\n// ===== STATE INTERFACES =====\n\ninterface OperationState<T> {\n  data: T | null;\n  loading: boolean;\n  error: string | null;\n  lastUpdated: number | null;\n  isStale: boolean;\n}\n\ninterface EntityManagementState<T extends BaseEntity> {\n  entities: OperationState<EntityListResponse<T>>;\n  selectedEntity: OperationState<T>;\n  createOperation: OperationState<T>;\n  updateOperation: OperationState<T>;\n  deleteOperation: OperationState<void>;\n}\n\ninterface BillingState {\n  billingData: OperationState<BillingData>;\n  invoices: OperationState<Invoice[]>;\n  paymentOperation: OperationState<PaymentResult>;\n  invoiceGeneration: OperationState<Invoice>;\n}\n\ninterface AnalyticsState {\n  dashboardStats: OperationState<DashboardStats>;\n  usageMetrics: OperationState<UsageMetrics>;\n  reports: OperationState<Report[]>;\n  reportGeneration: OperationState<Report>;\n}\n\ninterface ManagementOperationsState {\n  entities: Record<string, EntityManagementState<any>>;\n  billing: Record<string, BillingState>;\n  analytics: AnalyticsState;\n  globalLoading: boolean;\n  globalError: string | null;\n}\n\n// ===== HOOK RETURN TYPE =====\n\nexport interface UseManagementOperationsReturn {\n  // State\n  state: ManagementOperationsState;\n\n  // Entity Operations\n  listEntities: <T extends BaseEntity>(\n    entityType: string,\n    filters?: EntityFilters,\n  ) => Promise<EntityListResponse<T>>;\n  getEntity: <T extends BaseEntity>(entityType: string, entityId: string) => Promise<T>;\n  createEntity: <T extends BaseEntity>(\n    request: CreateEntityRequest,\n  ) => Promise<EntityOperationResult<T>>;\n  updateEntity: <T extends BaseEntity>(\n    entityType: string,\n    entityId: string,\n    request: UpdateEntityRequest,\n  ) => Promise<EntityOperationResult<T>>;\n  deleteEntity: (entityType: string, entityId: string) => Promise<EntityOperationResult<void>>;\n\n  // Billing Operations\n  getBillingData: (\n    entityId: string,\n    period: { start_date: string; end_date: string },\n  ) => Promise<BillingData>;\n  processPayment: (entityId: string, amount: number, paymentData: any) => Promise<PaymentResult>;\n  generateInvoice: (entityId: string, services: any[], options?: any) => Promise<Invoice>;\n  getInvoices: (entityId: string, filters?: any) => Promise<Invoice[]>;\n\n  // Analytics Operations\n  getDashboardStats: (timeframe: string, entityType?: string) => Promise<DashboardStats>;\n  getUsageMetrics: (entityId: string, period: any) => Promise<UsageMetrics>;\n  generateReport: (type: ReportType, params: ReportParams) => Promise<Report>;\n  getReport: (reportId: string) => Promise<Report>;\n  downloadReport: (reportId: string) => Promise<Blob>;\n\n  // Batch Operations\n  batchOperation: <T>(\n    operations: Array<{ method: string; endpoint: string; data?: any }>,\n  ) => Promise<EntityOperationResult<T>[]>;\n\n  // State Management\n  refreshData: (entityType?: string, entityId?: string) => Promise<void>;\n  clearCache: () => void;\n  retryFailedOperation: (operationId: string) => Promise<void>;\n\n  // Real-time Features\n  subscribeToEntity: (entityType: string, entityId: string) => () => void;\n  subscribeToEntityList: (entityType: string, filters?: EntityFilters) => () => void;\n\n  // Utilities\n  isLoading: (operation?: string) => boolean;\n  hasError: (operation?: string) => boolean;\n  getError: (operation?: string) => string | null;\n  getCacheStats: () => any;\n}\n\n// ===== MAIN HOOK =====\n\nexport function useManagementOperations(\n  config: UseManagementOperationsConfig,\n): UseManagementOperationsReturn {\n  const [state, setState] = useState<ManagementOperationsState>({\n    entities: {},\n    billing: {},\n    analytics: {\n      dashboardStats: createInitialOperationState(),\n      usageMetrics: createInitialOperationState(),\n      reports: createInitialOperationState(),\n      reportGeneration: createInitialOperationState(),\n    },\n    globalLoading: false,\n    globalError: null,\n  });\n\n  const apiClientRef = useRef<ManagementApiClient | null>(null);\n  const subscriptionsRef = useRef<Map<string, () => void>>(new Map());\n  const operationQueueRef = useRef<Array<() => Promise<any>>>([]);\n  const autoRefreshTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Initialize API client\n  useEffect(() => {\n    apiClientRef.current = new ManagementApiClient(config.apiConfig);\n\n    return () => {\n      // Cleanup subscriptions\n      subscriptionsRef.current.forEach((unsubscribe) => unsubscribe());\n      subscriptionsRef.current.clear();\n\n      // Clear auto-refresh timer\n      if (autoRefreshTimerRef.current) {\n        clearInterval(autoRefreshTimerRef.current);\n      }\n    };\n  }, [config.apiConfig]);\n\n  // Auto-refresh setup\n  useEffect(() => {\n    if (config.autoRefreshInterval && config.autoRefreshInterval > 0) {\n      autoRefreshTimerRef.current = setInterval(() => {\n        refreshStaleData();\n      }, config.autoRefreshInterval);\n    }\n\n    return () => {\n      if (autoRefreshTimerRef.current) {\n        clearInterval(autoRefreshTimerRef.current);\n      }\n    };\n  }, [config.autoRefreshInterval]);\n\n  // ===== UTILITY FUNCTIONS =====\n\n  function createInitialOperationState<T>(): OperationState<T> {\n    return {\n      data: null,\n      loading: false,\n      error: null,\n      lastUpdated: null,\n      isStale: false,\n    };\n  }\n\n  function updateOperationState<T>(\n    path: string,\n    updater: (prev: OperationState<T>) => Partial<OperationState<T>>,\n  ): void {\n    setState((prev) => {\n      const pathParts = path.split(\".\");\n      const newState = { ...prev };\n\n      let current = newState as any;\n      for (let i = 0; i < pathParts.length - 1; i++) {\n        if (!current[pathParts[i]]) {\n          current[pathParts[i]] = {};\n        }\n        current[pathParts[i]] = { ...current[pathParts[i]] };\n        current = current[pathParts[i]];\n      }\n\n      const finalKey = pathParts[pathParts.length - 1];\n      const currentState = current[finalKey] || createInitialOperationState();\n      current[finalKey] = { ...currentState, ...updater(currentState) };\n\n      return newState;\n    });\n  }\n\n  function setGlobalState(\n    updates: Partial<Pick<ManagementOperationsState, \"globalLoading\" | \"globalError\">>,\n  ): void {\n    setState((prev) => ({ ...prev, ...updates }));\n  }\n\n  async function executeWithStateManagement<T>(\n    operation: () => Promise<T>,\n    statePath: string,\n    enableOptimistic: boolean = false,\n  ): Promise<T> {\n    try {\n      // Set loading state\n      updateOperationState(statePath, () => ({\n        loading: true,\n        error: null,\n      }));\n\n      const result = await operation();\n\n      // Set success state\n      updateOperationState(statePath, () => ({\n        data: result,\n        loading: false,\n        error: null,\n        lastUpdated: Date.now(),\n        isStale: false,\n      }));\n\n      return result;\n    } catch (error) {\n      // Set error state\n      updateOperationState(statePath, () => ({\n        loading: false,\n        error: error.message || \"Unknown error occurred\",\n      }));\n\n      // Add to retry queue if enabled\n      if (config.retryFailedOperations) {\n        operationQueueRef.current.push(operation);\n      }\n\n      throw error;\n    }\n  }\n\n  async function refreshStaleData(): Promise<void> {\n    // Implementation for refreshing stale data\n    console.debug(\"Refreshing stale data...\");\n  }\n\n  // ===== ENTITY OPERATIONS =====\n\n  const listEntities = useCallback(\n    async <T extends BaseEntity>(\n      entityType: string,\n      filters: EntityFilters = {},\n    ): Promise<EntityListResponse<T>> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `entities.${entityType}.entities`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.listEntities<T>(entityType, filters),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const getEntity = useCallback(\n    async <T extends BaseEntity>(entityType: string, entityId: string): Promise<T> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `entities.${entityType}.selectedEntity`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.getEntity<T>(entityType, entityId),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const createEntity = useCallback(\n    async <T extends BaseEntity>(\n      request: CreateEntityRequest,\n    ): Promise<EntityOperationResult<T>> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `entities.${request.entity_type}.createOperation`;\n\n      // Optimistic update if enabled\n      if (config.enableOptimisticUpdates) {\n        const optimisticEntity = {\n          id: `temp_${Date.now()}`,\n          ...request.data,\n          status: request.initial_status || EntityStatus.PENDING,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        } as T;\n\n        updateOperationState(statePath, () => ({\n          data: optimisticEntity,\n          loading: true,\n          error: null,\n        }));\n      }\n\n      const result = await executeWithStateManagement(\n        () => apiClientRef.current!.createEntity<T>(request),\n        statePath,\n        config.enableOptimisticUpdates,\n      );\n\n      // Refresh entity list after successful creation\n      if (result.success) {\n        listEntities(request.entity_type);\n      }\n\n      return result;\n    },\n    [config.enableOptimisticUpdates, listEntities],\n  );\n\n  const updateEntity = useCallback(\n    async <T extends BaseEntity>(\n      entityType: string,\n      entityId: string,\n      request: UpdateEntityRequest,\n    ): Promise<EntityOperationResult<T>> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `entities.${entityType}.updateOperation`;\n\n      // Optimistic update if enabled\n      if (config.enableOptimisticUpdates) {\n        const currentEntity = state.entities[entityType]?.selectedEntity?.data;\n        if (currentEntity) {\n          const optimisticEntity = {\n            ...currentEntity,\n            ...request.data,\n            updated_at: new Date().toISOString(),\n          } as T;\n\n          updateOperationState(`entities.${entityType}.selectedEntity`, () => ({\n            data: optimisticEntity,\n          }));\n        }\n      }\n\n      const result = await executeWithStateManagement(\n        () => apiClientRef.current!.updateEntity<T>(entityType, entityId, request),\n        statePath,\n        config.enableOptimisticUpdates,\n      );\n\n      // Refresh data after successful update\n      if (result.success) {\n        listEntities(entityType);\n        getEntity(entityType, entityId);\n      }\n\n      return result;\n    },\n    [config.enableOptimisticUpdates, state.entities, listEntities, getEntity],\n  );\n\n  const deleteEntity = useCallback(\n    async (entityType: string, entityId: string): Promise<EntityOperationResult<void>> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `entities.${entityType}.deleteOperation`;\n\n      const result = await executeWithStateManagement(\n        () => apiClientRef.current!.deleteEntity(entityType, entityId),\n        statePath,\n      );\n\n      // Refresh entity list after successful deletion\n      if (result.success) {\n        listEntities(entityType);\n      }\n\n      return result;\n    },\n    [listEntities],\n  );\n\n  // ===== BILLING OPERATIONS =====\n\n  const getBillingData = useCallback(\n    async (\n      entityId: string,\n      period: { start_date: string; end_date: string },\n    ): Promise<BillingData> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `billing.${entityId}.billingData`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.getBillingData(entityId, period),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const processPayment = useCallback(\n    async (entityId: string, amount: number, paymentData: any): Promise<PaymentResult> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `billing.${entityId}.paymentOperation`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.processPayment(entityId, amount, paymentData),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const generateInvoice = useCallback(\n    async (entityId: string, services: any[], options: any = {}): Promise<Invoice> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `billing.${entityId}.invoiceGeneration`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.generateInvoice(entityId, services, options),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const getInvoices = useCallback(\n    async (entityId: string, filters: any = {}): Promise<Invoice[]> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = `billing.${entityId}.invoices`;\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.getInvoices(entityId, filters),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  // ===== ANALYTICS OPERATIONS =====\n\n  const getDashboardStats = useCallback(\n    async (timeframe: string, entityType?: string): Promise<DashboardStats> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = \"analytics.dashboardStats\";\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.getDashboardStats(timeframe, entityType),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const getUsageMetrics = useCallback(\n    async (entityId: string, period: any): Promise<UsageMetrics> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = \"analytics.usageMetrics\";\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.getUsageMetrics(entityId, period),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const generateReport = useCallback(\n    async (type: ReportType, params: ReportParams): Promise<Report> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      const statePath = \"analytics.reportGeneration\";\n\n      return executeWithStateManagement(\n        () => apiClientRef.current!.generateReport(type, params),\n        statePath,\n      );\n    },\n    [],\n  );\n\n  const getReport = useCallback(async (reportId: string): Promise<Report> => {\n    if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n    return apiClientRef.current.getReport(reportId);\n  }, []);\n\n  const downloadReport = useCallback(async (reportId: string): Promise<Blob> => {\n    if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n    return apiClientRef.current.downloadReport(reportId);\n  }, []);\n\n  // ===== BATCH OPERATIONS =====\n\n  const batchOperation = useCallback(\n    async <T>(\n      operations: Array<{ method: string; endpoint: string; data?: any }>,\n    ): Promise<EntityOperationResult<T>[]> => {\n      if (!apiClientRef.current) throw new Error(\"API client not initialized\");\n\n      setGlobalState({ globalLoading: true });\n\n      try {\n        const result = await apiClientRef.current.batchOperation<T>(operations);\n        setGlobalState({ globalLoading: false });\n        return result;\n      } catch (error) {\n        setGlobalState({ globalLoading: false, globalError: error.message });\n        throw error;\n      }\n    },\n    [],\n  );\n\n  // ===== STATE MANAGEMENT =====\n\n  const refreshData = useCallback(\n    async (entityType?: string, entityId?: string): Promise<void> => {\n      // Implementation for refreshing specific data\n      if (entityType) {\n        await listEntities(entityType);\n        if (entityId) {\n          await getEntity(entityType, entityId);\n        }\n      } else {\n        // Refresh all data\n        await refreshStaleData();\n      }\n    },\n    [listEntities, getEntity],\n  );\n\n  const clearCache = useCallback((): void => {\n    if (apiClientRef.current) {\n      apiClientRef.current.clearCache();\n    }\n\n    setState({\n      entities: {},\n      billing: {},\n      analytics: {\n        dashboardStats: createInitialOperationState(),\n        usageMetrics: createInitialOperationState(),\n        reports: createInitialOperationState(),\n        reportGeneration: createInitialOperationState(),\n      },\n      globalLoading: false,\n      globalError: null,\n    });\n  }, []);\n\n  const retryFailedOperation = useCallback(async (operationId: string): Promise<void> => {\n    // Implementation for retrying failed operations\n    if (operationQueueRef.current.length > 0) {\n      const operation = operationQueueRef.current.shift();\n      if (operation) {\n        await operation();\n      }\n    }\n  }, []);\n\n  // ===== REAL-TIME FEATURES =====\n\n  const subscribeToEntity = useCallback((entityType: string, entityId: string): (() => void) => {\n    const subscriptionKey = `${entityType}:${entityId}`;\n\n    // Implementation would depend on your WebSocket/SSE setup\n    const unsubscribe = () => {\n      subscriptionsRef.current.delete(subscriptionKey);\n    };\n\n    subscriptionsRef.current.set(subscriptionKey, unsubscribe);\n    return unsubscribe;\n  }, []);\n\n  const subscribeToEntityList = useCallback(\n    (entityType: string, filters?: EntityFilters): (() => void) => {\n      const subscriptionKey = `${entityType}:list`;\n\n      // Implementation would depend on your WebSocket/SSE setup\n      const unsubscribe = () => {\n        subscriptionsRef.current.delete(subscriptionKey);\n      };\n\n      subscriptionsRef.current.set(subscriptionKey, unsubscribe);\n      return unsubscribe;\n    },\n    [],\n  );\n\n  // ===== UTILITIES =====\n\n  const isLoading = useCallback(\n    (operation?: string): boolean => {\n      if (!operation) {\n        return state.globalLoading;\n      }\n\n      // Check specific operation loading state\n      const pathParts = operation.split(\".\");\n      let current = state as any;\n      for (const part of pathParts) {\n        current = current[part];\n        if (!current) return false;\n      }\n\n      return current.loading || false;\n    },\n    [state],\n  );\n\n  const hasError = useCallback(\n    (operation?: string): boolean => {\n      if (!operation) {\n        return !!state.globalError;\n      }\n\n      // Check specific operation error state\n      const pathParts = operation.split(\".\");\n      let current = state as any;\n      for (const part of pathParts) {\n        current = current[part];\n        if (!current) return false;\n      }\n\n      return !!current.error;\n    },\n    [state],\n  );\n\n  const getError = useCallback(\n    (operation?: string): string | null => {\n      if (!operation) {\n        return state.globalError;\n      }\n\n      // Get specific operation error\n      const pathParts = operation.split(\".\");\n      let current = state as any;\n      for (const part of pathParts) {\n        current = current[part];\n        if (!current) return null;\n      }\n\n      return current.error || null;\n    },\n    [state],\n  );\n\n  const getCacheStats = useCallback(() => {\n    if (!apiClientRef.current) return null;\n    return apiClientRef.current.getCacheStats();\n  }, []);\n\n  // ===== MEMOIZED RETURN VALUE =====\n\n  return useMemo(\n    () => ({\n      state,\n      listEntities,\n      getEntity,\n      createEntity,\n      updateEntity,\n      deleteEntity,\n      getBillingData,\n      processPayment,\n      generateInvoice,\n      getInvoices,\n      getDashboardStats,\n      getUsageMetrics,\n      generateReport,\n      getReport,\n      downloadReport,\n      batchOperation,\n      refreshData,\n      clearCache,\n      retryFailedOperation,\n      subscribeToEntity,\n      subscribeToEntityList,\n      isLoading,\n      hasError,\n      getError,\n      getCacheStats,\n    }),\n    [\n      state,\n      listEntities,\n      getEntity,\n      createEntity,\n      updateEntity,\n      deleteEntity,\n      getBillingData,\n      processPayment,\n      generateInvoice,\n      getInvoices,\n      getDashboardStats,\n      getUsageMetrics,\n      generateReport,\n      getReport,\n      downloadReport,\n      batchOperation,\n      refreshData,\n      clearCache,\n      retryFailedOperation,\n      subscribeToEntity,\n      subscribeToEntityList,\n      isLoading,\n      hasError,\n      getError,\n      getCacheStats,\n    ],\n  );\n}\n\n// ===== CONVENIENCE HOOKS =====\n\nexport function useEntityManagement<T extends BaseEntity>(\n  entityType: string,\n  config: UseManagementOperationsConfig,\n) {\n  const operations = useManagementOperations(config);\n\n  return {\n    entities: operations.state.entities[entityType],\n    listEntities: (filters?: EntityFilters) => operations.listEntities<T>(entityType, filters),\n    getEntity: (entityId: string) => operations.getEntity<T>(entityType, entityId),\n    createEntity: (data: any) =>\n      operations.createEntity({\n        entity_type: entityType as EntityType,\n        data,\n      }),\n    updateEntity: (entityId: string, data: any) =>\n      operations.updateEntity<T>(entityType, entityId, { data }),\n    deleteEntity: (entityId: string) => operations.deleteEntity(entityType, entityId),\n    isLoading: (operation?: string) =>\n      operations.isLoading(`entities.${entityType}.${operation || \"entities\"}`),\n    hasError: (operation?: string) =>\n      operations.hasError(`entities.${entityType}.${operation || \"entities\"}`),\n    getError: (operation?: string) =>\n      operations.getError(`entities.${entityType}.${operation || \"entities\"}`),\n  };\n}\n\nexport function useBillingOperations(config: UseManagementOperationsConfig) {\n  const operations = useManagementOperations(config);\n\n  return {\n    billing: operations.state.billing,\n    getBillingData: operations.getBillingData,\n    processPayment: operations.processPayment,\n    generateInvoice: operations.generateInvoice,\n    getInvoices: operations.getInvoices,\n    isLoading: (entityId: string, operation = \"billingData\") =>\n      operations.isLoading(`billing.${entityId}.${operation}`),\n    hasError: (entityId: string, operation = \"billingData\") =>\n      operations.hasError(`billing.${entityId}.${operation}`),\n    getError: (entityId: string, operation = \"billingData\") =>\n      operations.getError(`billing.${entityId}.${operation}`),\n  };\n}\n\nexport function useAnalyticsOperations(config: UseManagementOperationsConfig) {\n  const operations = useManagementOperations(config);\n\n  return {\n    analytics: operations.state.analytics,\n    getDashboardStats: operations.getDashboardStats,\n    getUsageMetrics: operations.getUsageMetrics,\n    generateReport: operations.generateReport,\n    getReport: operations.getReport,\n    downloadReport: operations.downloadReport,\n    isLoading: (operation = \"dashboardStats\") => operations.isLoading(`analytics.${operation}`),\n    hasError: (operation = \"dashboardStats\") => operations.hasError(`analytics.${operation}`),\n    getError: (operation = \"dashboardStats\") => operations.getError(`analytics.${operation}`),\n  };\n}\n","/**\n * Management Provider Component\n * Production-ready context provider for unified management operations\n * Features: Configuration management, error boundaries, performance monitoring\n */\n\nimport React, { createContext, useContext, useEffect, useState, useCallback, useMemo } from \"react\";\nimport { ManagementApiClient, ManagementApiClientConfig } from \"../ManagementApiClient\";\nimport {\n  useManagementOperations,\n  UseManagementOperationsConfig,\n  UseManagementOperationsReturn,\n} from \"../hooks/useManagementOperations\";\nimport { EntityType } from \"../types\";\n\n// ===== CONTEXT INTERFACES =====\n\ninterface ManagementContextType extends UseManagementOperationsReturn {\n  // Configuration\n  config: UseManagementOperationsConfig;\n  isInitialized: boolean;\n\n  // Portal-specific settings\n  portalType: \"management-admin\" | \"admin\" | \"reseller\";\n  availableEntityTypes: EntityType[];\n\n  // Feature flags\n  features: {\n    enableBatchOperations: boolean;\n    enableRealTimeSync: boolean;\n    enableAdvancedAnalytics: boolean;\n    enableAuditLogging: boolean;\n  };\n\n  // Performance monitoring\n  performance: {\n    apiResponseTimes: Record<string, number>;\n    cacheHitRatio: number;\n    errorRate: number;\n  };\n\n  // Configuration management\n  updateConfig: (config: Partial<UseManagementOperationsConfig>) => void;\n  resetConfiguration: () => void;\n}\n\ninterface ManagementProviderProps {\n  children: React.ReactNode;\n  portalType: \"management-admin\" | \"admin\" | \"reseller\";\n  apiBaseUrl: string;\n  initialConfig?: Partial<UseManagementOperationsConfig>;\n  features?: Partial<ManagementContextType[\"features\"]>;\n  enablePerformanceMonitoring?: boolean;\n  enableErrorBoundary?: boolean;\n}\n\n// ===== CONTEXT CREATION =====\n\nconst ManagementContext = createContext<ManagementContextType | null>(null);\n\n// ===== ERROR BOUNDARY =====\n\ninterface ManagementErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: any;\n}\n\nclass ManagementErrorBoundary extends React.Component<\n  {\n    children: React.ReactNode;\n    onError?: (error: Error, errorInfo: any) => void;\n  },\n  ManagementErrorBoundaryState\n> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error: Error): ManagementErrorBoundaryState {\n    return { hasError: true, error, errorInfo: null };\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    this.setState({ errorInfo });\n\n    // Log error to monitoring service\n    if (process.env[\"NODE_ENV\"] === \"development\") {\n      console.error(\"[ManagementProvider] Error caught:\", error, errorInfo);\n    }\n\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"management-error-boundary p-6 bg-red-50 border border-red-200 rounded-lg\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Management System Error</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>\n                  An error occurred in the management system. Please refresh the page or contact\n                  support if the problem persists.\n                </p>\n              </div>\n              <div className=\"mt-4\">\n                <button\n                  onClick={() => window.location.reload()}\n                  className=\"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200\"\n                >\n                  Refresh Page\n                </button>\n              </div>\n              {process.env[\"NODE_ENV\"] === \"development\" && (\n                <details className=\"mt-4\">\n                  <summary className=\"cursor-pointer text-sm font-medium text-red-800\">\n                    Error Details (Development)\n                  </summary>\n                  <pre className=\"mt-2 text-xs text-red-700 bg-red-100 p-2 rounded overflow-auto\">\n                    {this.state.error?.stack}\n                  </pre>\n                </details>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// ===== CONFIGURATION UTILS =====\n\nfunction getDefaultConfig(\n  portalType: string,\n  apiBaseUrl: string,\n  initialConfig?: Partial<UseManagementOperationsConfig>,\n): UseManagementOperationsConfig {\n  const baseApiConfig: ManagementApiClientConfig = {\n    baseURL: apiBaseUrl,\n    apiConfig: {\n      base_url: apiBaseUrl,\n      timeout_ms: 30000,\n      retry_attempts: 3,\n      retry_delay_ms: 1000,\n      rate_limit_requests: portalType === \"management-admin\" ? 200 : 100,\n      rate_limit_window_ms: 60000,\n      auth_header_name: \"Authorization\",\n      tenant_header_name: \"X-Tenant-ID\",\n      request_id_header_name: \"X-Request-ID\",\n    },\n    cacheConfig: {\n      enabled: true,\n      default_ttl_seconds: portalType === \"management-admin\" ? 300 : 600,\n      max_entries: 1000,\n      cache_key_prefix: `${portalType}_mgmt`,\n      invalidation_patterns: [\"create_*\", \"update_*\", \"delete_*\"],\n    },\n    enableAuditLogging: true,\n    enablePerformanceMonitoring: true,\n  };\n\n  return {\n    apiConfig: baseApiConfig,\n    enableOptimisticUpdates: portalType !== \"management-admin\", // More conservative for management\n    enableRealTimeSync: true,\n    autoRefreshInterval: portalType === \"management-admin\" ? 30000 : 60000, // More frequent for management\n    retryFailedOperations: true,\n    ...initialConfig,\n  };\n}\n\nfunction getPortalEntityTypes(portalType: string): EntityType[] {\n  switch (portalType) {\n    case \"management-admin\":\n      return [EntityType.TENANT, EntityType.RESELLER, EntityType.PARTNER, EntityType.USER];\n    case \"admin\":\n      return [EntityType.CUSTOMER, EntityType.USER, EntityType.SERVICE];\n    case \"reseller\":\n      return [EntityType.CUSTOMER, EntityType.SERVICE];\n    default:\n      return [];\n  }\n}\n\nfunction getPortalFeatures(\n  portalType: string,\n  customFeatures?: Partial<ManagementContextType[\"features\"]>,\n): ManagementContextType[\"features\"] {\n  const defaultFeatures = {\n    enableBatchOperations: portalType === \"management-admin\",\n    enableRealTimeSync: true,\n    enableAdvancedAnalytics: portalType !== \"reseller\",\n    enableAuditLogging: true,\n  };\n\n  return { ...defaultFeatures, ...customFeatures };\n}\n\n// ===== MAIN PROVIDER COMPONENT =====\n\nexport function ManagementProvider({\n  children,\n  portalType,\n  apiBaseUrl,\n  initialConfig,\n  features: customFeatures,\n  enablePerformanceMonitoring = true,\n  enableErrorBoundary = true,\n}: ManagementProviderProps) {\n  const [config, setConfig] = useState<UseManagementOperationsConfig>(() =>\n    getDefaultConfig(portalType, apiBaseUrl, initialConfig),\n  );\n\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [performance, setPerformance] = useState<ManagementContextType[\"performance\"]>({\n    apiResponseTimes: {},\n    cacheHitRatio: 0,\n    errorRate: 0,\n  });\n\n  const operations = useManagementOperations(config);\n\n  const availableEntityTypes = useMemo(() => getPortalEntityTypes(portalType), [portalType]);\n\n  const features = useMemo(\n    () => getPortalFeatures(portalType, customFeatures),\n    [portalType, customFeatures],\n  );\n\n  // Initialize the management system\n  useEffect(() => {\n    const initializeSystem = async () => {\n      try {\n        // Perform any necessary initialization\n        if (features.enableAdvancedAnalytics) {\n          // Pre-load dashboard stats\n          await operations.getDashboardStats(\"24h\");\n        }\n\n        setIsInitialized(true);\n      } catch (error) {\n        if (process.env[\"NODE_ENV\"] === \"development\") {\n          console.error(\"[ManagementProvider] Initialization failed:\", error);\n        }\n      }\n    };\n\n    initializeSystem();\n  }, [operations, features]);\n\n  // Performance monitoring\n  useEffect(() => {\n    if (!enablePerformanceMonitoring) return;\n\n    const performanceMonitoringInterval = setInterval(() => {\n      const cacheStats = operations.getCacheStats();\n\n      setPerformance((prev) => ({\n        ...prev,\n        cacheHitRatio: cacheStats?.hit_ratio || 0,\n      }));\n    }, 30000); // Update every 30 seconds\n\n    return () => clearInterval(performanceMonitoringInterval);\n  }, [operations, enablePerformanceMonitoring]);\n\n  // Configuration management\n  const updateConfig = useCallback((newConfig: Partial<UseManagementOperationsConfig>) => {\n    setConfig((prev) => ({\n      ...prev,\n      ...newConfig,\n      apiConfig: newConfig.apiConfig\n        ? {\n            ...prev.apiConfig,\n            ...newConfig.apiConfig,\n          }\n        : prev.apiConfig,\n    }));\n  }, []);\n\n  const resetConfiguration = useCallback(() => {\n    setConfig(getDefaultConfig(portalType, apiBaseUrl, initialConfig));\n  }, [portalType, apiBaseUrl, initialConfig]);\n\n  // Error handling\n  const handleError = useCallback(\n    (error: Error, errorInfo: any) => {\n      // Send to error tracking service\n      if (enablePerformanceMonitoring) {\n        setPerformance((prev) => ({\n          ...prev,\n          errorRate: prev.errorRate + 1,\n        }));\n      }\n    },\n    [enablePerformanceMonitoring],\n  );\n\n  // Context value\n  const contextValue = useMemo<ManagementContextType>(\n    () => ({\n      ...operations,\n      config,\n      isInitialized,\n      portalType,\n      availableEntityTypes,\n      features,\n      performance,\n      updateConfig,\n      resetConfiguration,\n    }),\n    [\n      operations,\n      config,\n      isInitialized,\n      portalType,\n      availableEntityTypes,\n      features,\n      performance,\n      updateConfig,\n      resetConfiguration,\n    ],\n  );\n\n  const content = (\n    <ManagementContext.Provider value={contextValue}>{children}</ManagementContext.Provider>\n  );\n\n  if (enableErrorBoundary) {\n    return <ManagementErrorBoundary onError={handleError}>{content}</ManagementErrorBoundary>;\n  }\n\n  return content;\n}\n\n// ===== CONTEXT HOOK =====\n\nexport function useManagement(): ManagementContextType {\n  const context = useContext(ManagementContext);\n  if (!context) {\n    throw new Error(\"useManagement must be used within a ManagementProvider\");\n  }\n  return context;\n}\n\n// ===== CONVENIENCE HOOKS =====\n\nexport function useManagementEntity<T>(entityType: EntityType) {\n  const {\n    listEntities,\n    getEntity,\n    createEntity,\n    updateEntity,\n    deleteEntity,\n    isLoading,\n    hasError,\n    getError,\n  } = useManagement();\n\n  return {\n    list: (filters?: any) => listEntities<T>(entityType, filters),\n    get: (id: string) => getEntity<T>(entityType, id),\n    create: (data: any) => createEntity({ entity_type: entityType, data }),\n    update: (id: string, data: any) => updateEntity<T>(entityType, id, { data }),\n    delete: (id: string) => deleteEntity(entityType, id),\n    isLoading: (operation = \"entities\") => isLoading(`entities.${entityType}.${operation}`),\n    hasError: (operation = \"entities\") => hasError(`entities.${entityType}.${operation}`),\n    getError: (operation = \"entities\") => getError(`entities.${entityType}.${operation}`),\n  };\n}\n\nexport function useManagementBilling(entityId: string) {\n  const {\n    getBillingData,\n    processPayment,\n    generateInvoice,\n    getInvoices,\n    isLoading,\n    hasError,\n    getError,\n  } = useManagement();\n\n  return {\n    getBillingData: (period: { start_date: string; end_date: string }) =>\n      getBillingData(entityId, period),\n    processPayment: (amount: number, paymentData: any) =>\n      processPayment(entityId, amount, paymentData),\n    generateInvoice: (services: any[], options?: any) =>\n      generateInvoice(entityId, services, options),\n    getInvoices: (filters?: any) => getInvoices(entityId, filters),\n    isLoading: (operation = \"billingData\") => isLoading(`billing.${entityId}.${operation}`),\n    hasError: (operation = \"billingData\") => hasError(`billing.${entityId}.${operation}`),\n    getError: (operation = \"billingData\") => getError(`billing.${entityId}.${operation}`),\n  };\n}\n\nexport function useManagementAnalytics() {\n  const {\n    getDashboardStats,\n    getUsageMetrics,\n    generateReport,\n    getReport,\n    downloadReport,\n    isLoading,\n    hasError,\n    getError,\n  } = useManagement();\n\n  return {\n    getDashboardStats,\n    getUsageMetrics,\n    generateReport,\n    getReport,\n    downloadReport,\n    isLoading: (operation = \"dashboardStats\") => isLoading(`analytics.${operation}`),\n    hasError: (operation = \"dashboardStats\") => hasError(`analytics.${operation}`),\n    getError: (operation = \"dashboardStats\") => getError(`analytics.${operation}`),\n  };\n}\n\n// ===== PERFORMANCE MONITORING HOOK =====\n\nexport function useManagementPerformance() {\n  const { performance, getCacheStats } = useManagement();\n\n  return {\n    ...performance,\n    getCacheStats,\n    getHealthStatus: () => ({\n      healthy: performance.errorRate < 0.1,\n      cachePerformance: performance.cacheHitRatio > 0.8 ? \"good\" : \"poor\",\n      errorRate: performance.errorRate,\n    }),\n  };\n}\n\n// ===== CONFIGURATION HOOK =====\n\nexport function useManagementConfig() {\n  const { config, updateConfig, resetConfiguration, features } = useManagement();\n\n  return {\n    config,\n    features,\n    updateConfig,\n    resetConfiguration,\n    updateApiConfig: (apiConfig: Partial<ManagementApiClientConfig>) => {\n      updateConfig({ apiConfig });\n    },\n    enableFeature: (feature: keyof ManagementContextType[\"features\"]) => {\n      // This would require additional logic to dynamically enable features\n      if (process.env[\"NODE_ENV\"] === \"development\") {\n        console.warn(\"Dynamic feature toggling not implemented\");\n      }\n    },\n  };\n}\n","/**\n * Unified Billing Example - Demonstrates DRY management operations usage\n * Can be used in Admin, Management-Admin, and Reseller portals\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  useManagement,\n  useManagementBilling,\n  useManagementAnalytics,\n  useManagementEntity,\n  EntityType,\n} from \"../\";\n\ninterface UnifiedBillingExampleProps {\n  customerId?: string;\n  showAnalytics?: boolean;\n  showBulkOperations?: boolean;\n}\n\nexport function UnifiedBillingExample({\n  customerId,\n  showAnalytics = true,\n  showBulkOperations = false,\n}: UnifiedBillingExampleProps) {\n  const { portalType, features, isInitialized } = useManagement();\n  const [selectedCustomerId, setSelectedCustomerId] = useState(customerId);\n\n  // Customer entity operations\n  const customerEntity = useManagementEntity(EntityType.CUSTOMER);\n\n  // Billing operations for specific customer\n  const billingOps = useManagementBilling(selectedCustomerId || \"\");\n\n  // Analytics operations\n  const analytics = useManagementAnalytics();\n\n  // Load customers on mount\n  useEffect(() => {\n    if (isInitialized) {\n      customerEntity.list({ limit: 10, status: [\"active\"] });\n    }\n  }, [isInitialized]);\n\n  // Load billing data when customer is selected\n  useEffect(() => {\n    if (selectedCustomerId && isInitialized) {\n      billingOps.getBillingData({\n        start_date: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n        end_date: new Date().toISOString().split(\"T\")[0],\n      });\n    }\n  }, [selectedCustomerId, isInitialized]);\n\n  // Load analytics if enabled\n  useEffect(() => {\n    if (showAnalytics && features.enableAdvancedAnalytics && isInitialized) {\n      analytics.getDashboardStats(\"30d\");\n    }\n  }, [showAnalytics, features.enableAdvancedAnalytics, isInitialized]);\n\n  if (!isInitialized) {\n    return <div className=\"p-4\">Initializing management system...</div>;\n  }\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Unified Billing Operations</h1>\n        <p className=\"text-sm text-gray-600\">\n          Portal: {portalType} | Features:{\" \"}\n          {Object.entries(features)\n            .filter(([_, enabled]) => enabled)\n            .map(([feature, _]) => feature)\n            .join(\", \")}\n        </p>\n      </div>\n\n      {/* Customer Selection */}\n      <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n        <h2 className=\"text-lg font-semibold mb-3\">Customer Selection</h2>\n        {customerEntity.isLoading() ? (\n          <div className=\"text-gray-500\">Loading customers...</div>\n        ) : customerEntity.hasError() ? (\n          <div className=\"text-red-500\">Error: {customerEntity.getError()?.message}</div>\n        ) : (\n          <select\n            value={selectedCustomerId || \"\"}\n            onChange={(e) => setSelectedCustomerId(e.target.value)}\n            className=\"w-full p-2 border border-gray-300 rounded\"\n          >\n            <option value=\"\">Select a customer...</option>\n            {/* This would be populated by the actual customer list */}\n            <option value=\"cust_001\">Customer 001 - John Doe</option>\n            <option value=\"cust_002\">Customer 002 - Jane Smith</option>\n            <option value=\"cust_003\">Customer 003 - Acme Corp</option>\n          </select>\n        )}\n      </div>\n\n      {/* Billing Operations */}\n      {selectedCustomerId && (\n        <div className=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n          <h2 className=\"text-lg font-semibold mb-3\">Billing Operations</h2>\n\n          {billingOps.isLoading(\"billingData\") ? (\n            <div className=\"text-gray-500\">Loading billing data...</div>\n          ) : billingOps.hasError(\"billingData\") ? (\n            <div className=\"text-red-500\">Error: {billingOps.getError(\"billingData\")?.message}</div>\n          ) : (\n            <div className=\"space-y-3\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"p-3 bg-white rounded border\">\n                  <div className=\"text-sm text-gray-600\">Outstanding Balance</div>\n                  <div className=\"text-xl font-bold text-red-600\">$1,234.56</div>\n                </div>\n                <div className=\"p-3 bg-white rounded border\">\n                  <div className=\"text-sm text-gray-600\">This Month</div>\n                  <div className=\"text-xl font-bold text-green-600\">$567.89</div>\n                </div>\n                <div className=\"p-3 bg-white rounded border\">\n                  <div className=\"text-sm text-gray-600\">Total Paid</div>\n                  <div className=\"text-xl font-bold text-blue-600\">$12,345.67</div>\n                </div>\n              </div>\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => billingOps.generateInvoice([{ id: \"svc_1\", amount: 99.99 }])}\n                  disabled={billingOps.isLoading(\"generateInvoice\")}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  Generate Invoice\n                </button>\n\n                <button\n                  onClick={() => billingOps.processPayment(100.0, { method: \"credit_card\" })}\n                  disabled={billingOps.isLoading(\"processPayment\")}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50\"\n                >\n                  Process Payment\n                </button>\n\n                <button\n                  onClick={() => billingOps.getInvoices({ status: [\"pending\", \"overdue\"] })}\n                  disabled={billingOps.isLoading(\"getInvoices\")}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50\"\n                >\n                  View Invoices\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Analytics Section - Only shown if enabled */}\n      {showAnalytics && features.enableAdvancedAnalytics && (\n        <div className=\"mb-6 p-4 bg-green-50 rounded-lg\">\n          <h2 className=\"text-lg font-semibold mb-3\">Analytics Dashboard</h2>\n\n          {analytics.isLoading(\"dashboardStats\") ? (\n            <div className=\"text-gray-500\">Loading analytics...</div>\n          ) : analytics.hasError(\"dashboardStats\") ? (\n            <div className=\"text-red-500\">\n              Error: {analytics.getError(\"dashboardStats\")?.message}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div className=\"p-3 bg-white rounded border\">\n                <div className=\"text-sm text-gray-600\">Total Revenue</div>\n                <div className=\"text-xl font-bold text-green-600\">$45,678.90</div>\n              </div>\n              <div className=\"p-3 bg-white rounded border\">\n                <div className=\"text-sm text-gray-600\">Active Customers</div>\n                <div className=\"text-xl font-bold text-blue-600\">1,234</div>\n              </div>\n              <div className=\"p-3 bg-white rounded border\">\n                <div className=\"text-sm text-gray-600\">Conversion Rate</div>\n                <div className=\"text-xl font-bold text-purple-600\">12.3%</div>\n              </div>\n              <div className=\"p-3 bg-white rounded border\">\n                <div className=\"text-sm text-gray-600\">Churn Rate</div>\n                <div className=\"text-xl font-bold text-red-600\">2.1%</div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"mt-4 flex gap-2\">\n            <button\n              onClick={() => analytics.generateReport(\"financial\", { period: \"30d\" })}\n              disabled={analytics.isLoading(\"generateReport\")}\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50\"\n            >\n              Generate Report\n            </button>\n\n            <button\n              onClick={() => analytics.getUsageMetrics(\"30d\")}\n              disabled={analytics.isLoading(\"getUsageMetrics\")}\n              className=\"px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700 disabled:opacity-50\"\n            >\n              Usage Metrics\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Bulk Operations - Only shown if enabled */}\n      {showBulkOperations && features.enableBatchOperations && (\n        <div className=\"p-4 bg-orange-50 rounded-lg\">\n          <h2 className=\"text-lg font-semibold mb-3\">Bulk Operations</h2>\n          <p className=\"text-sm text-gray-600 mb-3\">\n            Available for Management Admin portal with batch operations enabled\n          </p>\n\n          <div className=\"flex gap-2\">\n            <button className=\"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700\">\n              Bulk Invoice Generation\n            </button>\n            <button className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\">\n              Bulk Payment Processing\n            </button>\n            <button className=\"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700\">\n              Bulk Customer Import\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Portal-specific Information */}\n      <div className=\"mt-6 p-4 bg-gray-100 rounded-lg\">\n        <h2 className=\"text-lg font-semibold mb-3\">Portal Configuration</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n          <div>\n            <strong>Portal Type:</strong> {portalType}\n          </div>\n          <div>\n            <strong>Real-time Sync:</strong> {features.enableRealTimeSync ? \"Enabled\" : \"Disabled\"}\n          </div>\n          <div>\n            <strong>Advanced Analytics:</strong>{\" \"}\n            {features.enableAdvancedAnalytics ? \"Enabled\" : \"Disabled\"}\n          </div>\n          <div>\n            <strong>Batch Operations:</strong>{\" \"}\n            {features.enableBatchOperations ? \"Enabled\" : \"Disabled\"}\n          </div>\n          <div>\n            <strong>Audit Logging:</strong> {features.enableAuditLogging ? \"Enabled\" : \"Disabled\"}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]}