{"version":3,"sources":["../../src/utils/production-data-guard.ts"],"names":["mockData"],"mappings":"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","file":"production-data-guard.mjs","sourcesContent":["/**\n * Production Data Guard - Prevents Mock Data in Production\n *\n * This utility ensures that mock data is never included in production builds\n * while allowing it to be used safely in development and testing environments.\n *\n * Features:\n * - Compile-time removal of mock data in production builds\n * - Runtime warnings for development\n * - Type-safe mock data handling\n * - Configurable fallback behavior\n */\n\n// Remove React dependency for now to fix build issues\n// import React from 'react';\n\n// Development flag - will be replaced by bundler in production\ndeclare const __DEV__: boolean;\n\nexport interface MockDataConfig {\n  enableInTest?: boolean;\n  enableInDevelopment?: boolean;\n  fallbackToEmpty?: boolean;\n  warningMessage?: string;\n}\n\nexport interface MockDataGuard {\n  isDevelopment: boolean;\n  isTest: boolean;\n  isProduction: boolean;\n  shouldUseMockData: boolean;\n}\n\n/**\n * Create a mock data guard with environment detection\n */\nexport function createMockDataGuard(config?: MockDataConfig): MockDataGuard {\n  const isDevelopment = process.env[\"NODE_ENV\"] === \"development\";\n  const isTest = process.env[\"NODE_ENV\"] === \"test\";\n  const isProduction = process.env[\"NODE_ENV\"] === \"production\";\n\n  const shouldUseMockData =\n    (isDevelopment && (config?.enableInDevelopment ?? true)) ||\n    (isTest && (config?.enableInTest ?? true));\n\n  return {\n    isDevelopment,\n    isTest,\n    isProduction,\n    shouldUseMockData,\n  };\n}\n\n/**\n * Conditionally return mock data based on environment\n */\nexport function mockData<T>(\n  mockValue: T,\n  productionFallback?: T,\n  config?: MockDataConfig,\n): T | undefined {\n  const guard = createMockDataGuard(config);\n\n  if (guard.shouldUseMockData) {\n    // In development/test, show warning if configured\n    if (guard.isDevelopment && config?.warningMessage) {\n      console.warn(`ðŸ”§ Mock Data Active: ${config.warningMessage}`);\n    }\n    return mockValue;\n  }\n\n  if (guard.isProduction) {\n    // In production, never return mock data\n    if (productionFallback !== undefined) {\n      return productionFallback;\n    }\n\n    if (config?.fallbackToEmpty) {\n      return (Array.isArray(mockValue) ? [] : {}) as T;\n    }\n\n    // Log error for production mock data attempts\n    console.error(\"ðŸš¨ Attempted to use mock data in production environment\");\n    return undefined;\n  }\n\n  return productionFallback;\n}\n\n/**\n * Development-only function that gets completely removed in production\n */\nexport function devOnly<T>(fn: () => T): T | undefined {\n  if (process.env[\"NODE_ENV\"] === \"development\") {\n    return fn();\n  }\n  return undefined;\n}\n\n/**\n * Test-only function that gets removed in production\n */\nexport function testOnly<T>(fn: () => T): T | undefined {\n  if (process.env[\"NODE_ENV\"] === \"test\") {\n    return fn();\n  }\n  return undefined;\n}\n\n/**\n * Hook for React components to safely use mock data\n */\nexport function useMockData<T>(\n  mockValue: T,\n  productionFallback?: T,\n  config?: MockDataConfig,\n): T | undefined {\n  // This will be tree-shaken in production builds\n  if (process.env[\"NODE_ENV\"] === \"production\") {\n    return productionFallback;\n  }\n\n  return mockData(mockValue, productionFallback, config);\n}\n\n/**\n * Wrapper for API functions to use mock data in development\n */\nexport function mockApiWrapper<TArgs extends any[], TReturn>(\n  realApiCall: (...args: TArgs) => Promise<TReturn>,\n  mockData: TReturn | (() => TReturn),\n  config?: MockDataConfig & { delay?: number },\n): (...args: TArgs) => Promise<TReturn> {\n  return async (...args: TArgs): Promise<TReturn> => {\n    const guard = createMockDataGuard(config);\n\n    if (guard.shouldUseMockData) {\n      // Simulate API delay in development\n      const delay = config?.delay ?? 500;\n      await new Promise((resolve) => setTimeout(resolve, delay));\n\n      const result = typeof mockData === \"function\" ? (mockData as () => TReturn)() : mockData;\n\n      if (guard.isDevelopment && config?.warningMessage) {\n        console.warn(`ðŸ”§ Mock API Active: ${config.warningMessage}`);\n      }\n\n      return result;\n    }\n\n    // Use real API call in production\n    return realApiCall(...args);\n  };\n}\n\n/**\n * Conditional component rendering based on environment\n * (Disabled for now to avoid React dependency issues)\n */\n/*\nexport function MockDataIndicator({ \n  children, \n  message = \"Using mock data\" \n}: { \n  children?: any;\n  message?: string;\n}): any | null {\n  if (process.env[\"NODE_ENV\"] !== 'development') {\n    return null;\n  }\n\n  return null; // Simplified for now\n}\n*/\n\n/**\n * Type-safe mock data generator\n */\nexport interface MockGenerator<T> {\n  generate(): T;\n  generateMany(count: number): T[];\n  withOverrides(overrides: Partial<T>): MockGenerator<T>;\n}\n\nexport function createMockGenerator<T>(\n  factory: () => T,\n  config?: MockDataConfig,\n): MockGenerator<T> {\n  return {\n    generate(): T {\n      const guard = createMockDataGuard(config);\n      if (!guard.shouldUseMockData) {\n        throw new Error(\"Mock data generation attempted in production environment\");\n      }\n      return factory();\n    },\n\n    generateMany(count: number): T[] {\n      return Array.from({ length: count }, () => this.generate());\n    },\n\n    withOverrides(overrides: Partial<T>): MockGenerator<T> {\n      return createMockGenerator(\n        () => ({\n          ...factory(),\n          ...overrides,\n        }),\n        config,\n      );\n    },\n  };\n}\n\n/**\n * Environment-aware console logging\n */\nexport const safeConsole = {\n  dev: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] === \"development\") {\n      console.log(`ðŸ”§ [DEV] ${message}`, ...args);\n    }\n  },\n\n  test: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] === \"test\") {\n      console.log(`ðŸ§ª [TEST] ${message}`, ...args);\n    }\n  },\n\n  warn: (message: string, ...args: any[]): void => {\n    if (process.env[\"NODE_ENV\"] !== \"production\") {\n      console.warn(`âš ï¸ ${message}`, ...args);\n    }\n  },\n\n  error: (message: string, ...args: any[]): void => {\n    console.error(`ðŸš¨ ${message}`, ...args);\n  },\n};\n\n// Export default guard instance\nexport const defaultMockGuard = createMockDataGuard();\n"]}